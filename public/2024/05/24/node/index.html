



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="æœæ˜æ¸…çš„ä¸ªäººåšå®¢" href="https://dmqweb.cn/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="æœæ˜æ¸…çš„ä¸ªäººåšå®¢" href="https://dmqweb.cn/atom.xml" />
<link rel="alternate" type="application/json" title="æœæ˜æ¸…çš„ä¸ªäººåšå®¢" href="https://dmqweb.cn/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="node.js" />


<link rel="canonical" href="https://dmqweb.cn/2024/05/24/node/">



  <title>
Nodeå­¦ä¹ ç¬”è®° - Node.js |
Web blog = æœæ˜æ¸…çš„ä¸ªäººåšå®¢ = ğŸ‘»æ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ ğŸ‘»</title>
<meta name="generator" content="Hexo 6.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Nodeå­¦ä¹ ç¬”è®°
  </h1>
  
<div class="meta">
  <span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2024-05-24 17:02:28">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">å‘è¡¨äº</span>
    <time itemprop="dateCreated datePublished" datetime="2024-05-24T17:02:28+08:00">2024-05-24</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Web blog</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/15/6d859d49c9d65157.jpg"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/28/dc01f095118914ac.webp"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/12/b04c50f26fdc9c19.jpg"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/15/21b7a3f222ccbcb6.jpg"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/05/d389418a13d92e24.jpg"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/28/02824114036dc293.webp"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">é¦–é¡µ</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Node-js/" itemprop="item" rel="index" title="åˆ†ç±»äº Node.js"><span itemprop="name">Node.js</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://dmqweb.cn/2024/05/24/node/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="dmq">
    <meta itemprop="description" content="ğŸ‘»æ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ ğŸ‘», ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æœæ˜æ¸…çš„ä¸ªäººåšå®¢">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="nodejs"><a class="anchor" href="#nodejs">#</a> Node.js</h1>
<h2 id="ä»‹ç»"><a class="anchor" href="#ä»‹ç»">#</a> ä»‹ç»</h2>
<ul>
<li>Node.js å¹¶ä¸æ˜¯ JavaScript åº”ç”¨ï¼Œä¹Ÿä¸æ˜¯ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ JavaScript çš„è¿è¡Œæ—¶ã€‚</li>
<li>Node.js æ˜¯æ„å»ºåœ¨ V8 å¼•æ“ä¹‹ä¸Šçš„ï¼ŒV8 å¼•æ“ç”± C / C<ins> ç¼–å†™ï¼Œå› æ­¤ JavaScript è¯­è¨€éœ€è¦ç¼–è¯‘ä¸º C / C</ins> ä»£ç ä¹‹åæ‰èƒ½æ‰§è¡Œã€‚</li>
<li>Node.js é‡‡ç”¨å¼‚æ­¥ IO å’Œäº‹ä»¶é©±åŠ¨çš„è®¾è®¡ç†å¿µï¼Œå¯ä»¥é«˜æ•ˆçš„å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼Œæä¾›äº†éé˜»å¡ IO æ¥å£å’Œäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œä½¿å…¶å¯ä»¥ç¼–å†™å‡ºé«˜æ€§èƒ½ã€é«˜æ‰©å±•çš„åº”ç”¨ç¨‹åºã€‚ï¼ˆå¼‚æ­¥ IO é€šè¿‡ libuv åº“æ¥å®ç°ï¼‰</li>
<li>Node.js ä½¿ç”¨ npm ä½œä¸ºåŒ…ç®¡ç†å·¥å…·</li>
<li>Node.js é€‚åˆåšä¸€äº› IO å¯†é›†å‹åº”ç”¨ï¼Œä¸é€‚åˆåšä¸€äº› CPU å¯†é›†å‹åº”ç”¨ï¼ˆäº‹ä»¶å¾ªç¯æœºåˆ¶å’Œå¼‚æ­¥ IO ä½¿å¾— Node.js æœ‰å¾ˆå¼ºçš„å¤„ç†èƒ½åŠ›ï¼Œä½†æ˜¯å› ä¸º Node.js å•çº¿ç¨‹çš„åŸå› ï¼Œå®¹æ˜“é€ æˆ CPU å ç”¨ç‡è¿‡é«˜ï¼‰</li>
<li>å¦‚æœéè¦ç”¨ Node.js åš CPU å¯†é›†å‹åº”ç”¨ï¼Œéœ€è¦ç¼–å†™ C++ æ’ä»¶ï¼Œæˆ–è€… Node æä¾›çš„ cluster æ¨¡å—ã€‚</li>
</ul>
<h2 id="npm"><a class="anchor" href="#npm">#</a> npm</h2>
<ul>
<li>npm æ˜¯ Node.js çš„åŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒåŸºäºå‘½ä»¤è¡Œï¼Œç”¨äºå¸®åŠ©å¼€å‘è€…åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å®‰è£…ã€å‡çº§ã€ç§»é™¤å’Œç®¡ç†ä¾èµ–é¡¹ã€‚</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qaWF4aWFveGlhby5uZXRsaWZ5LmFwcC8yMDE5LzA3LzMwL25vZGUvbm9kZS1ucG0v">npm å‘½ä»¤å¤§å…¨</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MTQ1NzU5ODY4MDEwMzY0OTU5">package.json é…ç½®è¯¦è§£</span></li>
</ul>
<h4 id="npm-install"><a class="anchor" href="#npm-install">#</a> npm install</h4>
<p>æ‰§è¡Œ <code>npm install</code>  æ—¶ï¼Œnpm ä¼šé€šè¿‡å¹¿åº¦ä¼˜å…ˆéå†ç®—æ³•éå†ä¾èµ–æ ‘ï¼Œnpm ä¼šé¦–å…ˆå¤„ç†é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ä¾èµ–ï¼Œç„¶åé€å±‚å¤„ç†æ¯ä¸ªä¾èµ–åŒ…çš„ä¾èµ–ï¼Œç›´åˆ°æ‰€æœ‰çš„ä¾èµ–è¢«å¤„ç†å®Œæˆã€‚åœ¨å¤„ç†æ¯ä¸ªä¾èµ–æ—¶ï¼Œnpm ä¼šæ£€æŸ¥è¯¥ä¾èµ–çš„ç‰ˆæœ¬å·æ˜¯å¦ç¬¦åˆä¾èµ–æ ‘ä¸­å…¶ä»–ä¾èµ–çš„ç‰ˆæœ¬è¦æ±‚ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œåˆ™ä¼šå°è¯•å®‰è£…é€‚åˆçš„ç‰ˆæœ¬ã€‚</p>
<p><img data-src="/images/Snipaste_2024-05-28_18-35-31.png" alt="images" /></p>
<h4 id="npmrcæ–‡ä»¶"><a class="anchor" href="#npmrcæ–‡ä»¶">#</a> .npmrc æ–‡ä»¶</h4>
<figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token assign-left variable">registry</span><span class="token operator">=</span>http://registry.npmjs.org/</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># å®šä¹‰ npm çš„ registryï¼Œå³ npm çš„åŒ…ä¸‹è½½æº</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token assign-left variable">proxy</span><span class="token operator">=</span>http://proxy.example.com:8080/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># å®šä¹‰ npm çš„ä»£ç†æœåŠ¡å™¨ï¼Œç”¨äºè®¿é—®ç½‘ç»œ</span></pre></td></tr><tr><td data-num="5"></td><td><pre>https-proxy<span class="token operator">=</span>http://proxy.example.com:8080/</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># å®šä¹‰ npm çš„ https ä»£ç†æœåŠ¡å™¨ï¼Œç”¨äºè®¿é—®ç½‘ç»œ</span></pre></td></tr><tr><td data-num="7"></td><td><pre>strict-ssl<span class="token operator">=</span>true</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># æ˜¯å¦åœ¨ SSL è¯ä¹¦éªŒè¯é”™è¯¯æ—¶é€€å‡º</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token assign-left variable">cafile</span><span class="token operator">=</span>/path/to/cafile.pem</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># å®šä¹‰è‡ªå®šä¹‰ CA è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„</span></pre></td></tr><tr><td data-num="11"></td><td><pre>user-agent<span class="token operator">=</span>npm/<span class="token punctuation">&#123;</span>npm-version<span class="token punctuation">&#125;</span> node/<span class="token punctuation">&#123;</span>node-version<span class="token punctuation">&#125;</span> <span class="token punctuation">&#123;</span>platform<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment"># è‡ªå®šä¹‰è¯·æ±‚å¤´ä¸­çš„ User-Agent</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token assign-left variable">save</span><span class="token operator">=</span>true</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment"># å®‰è£…åŒ…æ—¶æ˜¯å¦è‡ªåŠ¨ä¿å­˜åˆ° package.json çš„ dependencies ä¸­</span></pre></td></tr><tr><td data-num="15"></td><td><pre>save-dev<span class="token operator">=</span>true</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment"># å®‰è£…åŒ…æ—¶æ˜¯å¦è‡ªåŠ¨ä¿å­˜åˆ° package.json çš„ devDependencies ä¸­</span></pre></td></tr><tr><td data-num="17"></td><td><pre>save-exact<span class="token operator">=</span>true</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># å®‰è£…åŒ…æ—¶æ˜¯å¦ç²¾ç¡®ä¿å­˜ç‰ˆæœ¬å·</span></pre></td></tr><tr><td data-num="19"></td><td><pre>engine-strict<span class="token operator">=</span>true</pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment"># æ˜¯å¦åœ¨å®‰è£…æ—¶æ£€æŸ¥ä¾èµ–çš„ node å’Œ npm ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚</span></pre></td></tr><tr><td data-num="21"></td><td><pre>scripts-prepend-node-path<span class="token operator">=</span>true</pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment"># æ˜¯å¦åœ¨è¿è¡Œè„šæœ¬æ—¶è‡ªåŠ¨å°† node çš„è·¯å¾„æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¸­</span></pre></td></tr></table></figure><h4 id="package-lockjson"><a class="anchor" href="#package-lockjson">#</a> package-lock.json</h4>
<p>æ–‡ä»¶çš„ä½œç”¨ï¼š</p>
<ul>
<li>
<p>é”å®šç‰ˆæœ¬å·ã€è®°å½•ä¾èµ–æ ‘è¯¦ç»†ä¿¡æ¯</p>
</li>
<li>
<p>package-lock.json å¸®æˆ‘ä»¬åšäº†ç¼“å­˜ï¼Œä»–ä¼šé€šè¿‡  <code>name + version + integrity</code>  ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ keyï¼Œè¿™ä¸ª key èƒ½æ‰¾åˆ°å¯¹åº”çš„ index-v5 ä¸‹çš„ç¼“å­˜è®°å½• ï¼ˆnpm cache æ–‡ä»¶å¤¹ä¸‹ï¼‰ï¼Œå¦‚æœå‘ç°æœ‰ç¼“å­˜è®°å½•ï¼Œå°±ä¼šæ‰¾åˆ° tar åŒ…çš„ hash å€¼ï¼Œç„¶åå°†å¯¹åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶è§£å‹åˆ° node_modeules</p>
</li>
</ul>
<h4 id="npm-run"><a class="anchor" href="#npm-run">#</a> npm run</h4>
<p>è¯»å– package.json çš„ scripts å¯¹åº”çš„è„šæœ¬å‘½ä»¤ï¼ŒæŸ¥æ‰¾çš„è§„åˆ™æ˜¯ï¼š</p>
<ol>
<li>å½“å‰é¡¹ç›® node_modules/.bin æŸ¥æ‰¾</li>
<li>å…¨å±€ node_modules/.bin æŸ¥æ‰¾</li>
<li>ç¯å¢ƒå˜é‡æŸ¥æ‰¾</li>
<li>æ‰¾ä¸åˆ°ï¼ŒæŠ¥é”™</li>
</ol>
<p>node_modules/.bin ä¸­æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼ˆNode ä½œä¸ºè·¨å¹³å°å·¥å…·ï¼Œéœ€è¦å¤„ç†å¹³å°å…¼å®¹æ€§ï¼‰</p>
<ul>
<li>.sh æ–‡ä»¶æ˜¯ç»™ Linux unix Macos ä½¿ç”¨</li>
<li>.cmd ç»™ windows çš„ cmd ä½¿ç”¨</li>
<li>.ps1 ç»™ windows çš„ powerShell ä½¿ç”¨</li>
</ul>
<h4 id="npm-ç”Ÿå‘½å‘¨æœŸ"><a class="anchor" href="#npm-ç”Ÿå‘½å‘¨æœŸ">#</a> npm ç”Ÿå‘½å‘¨æœŸ</h4>
<p>åœ¨ package.json ä¸­çš„ scripts å­—æ®µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ npm è„šæœ¬å‘½åè§„èŒƒä½¿ç”¨ npm çš„ç”Ÿå‘½å‘¨æœŸç‰¹æ€§ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token property">"pretest"</span><span class="token operator">:</span> <span class="token string">"node prev.js"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"node index.js"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"posttest"</span><span class="token operator">:</span> <span class="token string">"node post.js"</span></pre></td></tr></table></figure><p>åˆ™æ‰§è¡Œï¼šnpm run test æ—¶ï¼Œä¼šæœ€å…ˆæ‰§è¡Œ pretestï¼Œæœ€åæ‰§è¡Œ posttestã€‚</p>
<h4 id="npx"><a class="anchor" href="#npx">#</a> npx</h4>
<p>npx æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒæ˜¯ npm 5.2.0 ç‰ˆæœ¬ä¸­æ–°å¢çš„åŠŸèƒ½ã€‚å®ƒå…è®¸ç”¨æˆ·åœ¨ä¸å®‰è£…å…¨å±€åŒ…çš„æƒ…å†µä¸‹ï¼Œè¿è¡Œå·²å®‰è£…åœ¨æœ¬åœ°é¡¹ç›®ä¸­çš„åŒ…æˆ–è€…è¿œç¨‹ä»“åº“ä¸­çš„åŒ…ã€‚</p>
<p>npx çš„ä½œç”¨æ˜¯åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ node åŒ…ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œä¸éœ€è¦å…¨å±€å®‰è£…è¿™äº›åŒ…ã€‚è¿™å¯ä»¥ä½¿å¼€å‘äººå‘˜æ›´è½»æ¾åœ°ç®¡ç†åŒ…çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”å¯ä»¥é¿å…å…¨å±€æ±¡æŸ“çš„é—®é¢˜ã€‚å®ƒè¿˜å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„åŒ…ï¼Œè€Œä¸ä¼šå‡ºç°ç‰ˆæœ¬å†²çªçš„é—®é¢˜ã€‚</p>
<p><strong>npx çš„ä¼˜åŠ¿</strong></p>
<ol>
<li>é¿å…å…¨å±€å®‰è£…ï¼š <code>npx</code>  å…è®¸ä½ æ‰§è¡Œ npm packageï¼Œè€Œä¸éœ€è¦ä½ å…ˆå…¨å±€å®‰è£…å®ƒã€‚</li>
<li>æ€»æ˜¯ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼šå¦‚æœä½ æ²¡æœ‰åœ¨æœ¬åœ°å®‰è£…ç›¸åº”çš„ npm packageï¼Œ <code>npx</code>  ä¼šä» npm çš„ package ä»“åº“ä¸­ä¸‹è½½å¹¶ä½¿ç”¨æœ€æ–°ç‰ˆã€‚</li>
<li>æ‰§è¡Œä»»æ„ npm åŒ…ï¼š <code>npx</code>  ä¸ä»…å¯ä»¥æ‰§è¡Œåœ¨ <code>package.json</code>  çš„ <code>scripts</code>  éƒ¨åˆ†å®šä¹‰çš„å‘½ä»¤ï¼Œè¿˜å¯ä»¥æ‰§è¡Œä»»ä½• npm packageã€‚</li>
<li>æ‰§è¡Œ GitHub gistï¼š <code>npx</code>  ç”šè‡³å¯ä»¥æ‰§è¡Œ GitHub gist æˆ–è€…å…¶ä»–å…¬å¼€çš„ JavaScript æ–‡ä»¶ã€‚</li>
</ol>
<p><strong>npm å’Œ npx åŒºåˆ«</strong></p>
<ul>
<li>
<p><code>npx</code>  ä¾§é‡äºæ‰§è¡Œå‘½ä»¤çš„ï¼Œæ‰§è¡ŒæŸä¸ªæ¨¡å—å‘½ä»¤ã€‚è™½ç„¶ä¼šè‡ªåŠ¨å®‰è£…æ¨¡å—ï¼Œä½†æ˜¯é‡åœ¨æ‰§è¡ŒæŸä¸ªå‘½ä»¤</p>
</li>
<li>
<p><code>npm</code>  ä¾§é‡äºå®‰è£…æˆ–è€…å¸è½½æŸä¸ªæ¨¡å—çš„ã€‚é‡åœ¨å®‰è£…ï¼Œå¹¶ä¸å…·å¤‡æ‰§è¡ŒæŸä¸ªæ¨¡å—çš„åŠŸèƒ½ã€‚</p>
</li>
</ul>
<h4 id="npmç§æœ"><a class="anchor" href="#npmç§æœ">#</a> npm ç§æœ</h4>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å¯ä»¥ç¦»çº¿ä½¿ç”¨</strong>ï¼Œä½ å¯ä»¥å°† npm ç§æœéƒ¨ç½²åˆ°å†…ç½‘é›†ç¾¤ï¼Œè¿™æ ·ç¦»çº¿ä¹Ÿå¯ä»¥è®¿é—®ç§æœ‰çš„åŒ…ã€‚</li>
<li><strong>æé«˜åŒ…çš„å®‰å…¨æ€§</strong>ï¼Œä½¿ç”¨ç§æœ‰çš„ npm ä»“åº“å¯ä»¥æ›´å¥½çš„ç®¡ç†ä½ çš„åŒ…ï¼Œé¿å…åœ¨ä½¿ç”¨å…¬å…±çš„ npm åŒ…çš„æ—¶å€™å‡ºç°æ¼æ´ã€‚</li>
<li><strong>æé«˜åŒ…çš„ä¸‹è½½é€Ÿåº¦</strong>ï¼Œä½¿ç”¨ç§æœ‰ npm ä»“åº“ï¼Œä½ å¯ä»¥å°†ç»å¸¸ä½¿ç”¨çš„ npm åŒ…ç¼“å­˜åˆ°æœ¬åœ°ï¼Œä»è€Œæ˜¾è‘—æé«˜åŒ…çš„ä¸‹è½½é€Ÿåº¦ï¼Œå‡å°‘ä¾èµ–åŒ…çš„ä¸‹è½½æ—¶é—´ã€‚è¿™å¯¹äºå›¢é˜Ÿå†…éƒ¨å¼€å‘å’ŒæŒç»­é›†æˆã€éƒ¨ç½²ç­‰åœºæ™¯éå¸¸</li>
</ul>
<p><strong>æ­å»ºï¼š</strong></p>
<ul>
<li>å¯ä»¥å…‹éš† npm æˆ– cnpm ä»“åº“ï¼Œæ›´æ”¹ yaml é…ç½®æ–‡ä»¶ä¸ºè‡ªå·±æƒ³è¦çš„è®¾ç½®å³å¯</li>
<li>ä½¿ç”¨<span class="exturl" data-url="aHR0cHM6Ly92ZXJkYWNjaW8ub3JnL3poLWNuLw=="> verdaccio å·¥å…·</span>
<ul>
<li><code>npm install verdaccio -g</code></li>
<li><code>verdaccio</code></li>
<li>è®¿é—® localhost:4873</li>
<li>ä½¿ç”¨ npm æ“ä½œæ—¶ï¼ŒåŠ ä¸Š <code>--registry http://localhost:4873</code></li>
</ul>
</li>
</ul>
<h2 id="nodeæ¨¡å—åŒ–"><a class="anchor" href="#nodeæ¨¡å—åŒ–">#</a> Node æ¨¡å—åŒ–</h2>
<h4 id="commonjs"><a class="anchor" href="#commonjs">#</a> CommonJS</h4>
<ul>
<li>
<p>æ”¯æŒå¼•å…¥å†…ç½®æ¨¡å—ä¾‹å¦‚  <code>http</code>   <code>os</code>   <code>fs</code>   <code>child_process</code>  ç­‰ nodejs å†…ç½®æ¨¡å—</p>
</li>
<li>
<p>æ”¯æŒå¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡å— <code>express</code>   <code>md5</code>   <code>koa</code>  ç­‰</p>
</li>
<li>
<p>æ”¯æŒå¼•å…¥è‡ªå·±ç¼–å†™çš„æ¨¡å— ./../ ç­‰</p>
</li>
<li>
<p>æ”¯æŒå¼•å…¥ addon C++ æ‰©å±•æ¨¡å— .node æ–‡ä»¶</p>
</li>
</ul>
<h4 id="esm"><a class="anchor" href="#esm">#</a> ESM</h4>
<ul>
<li>import é™æ€å¯¼å…¥éœ€è¦åœ¨é¡¶å±‚è°ƒç”¨</li>
<li>import å¯¼å…¥ json æ–‡ä»¶éœ€è¦æ·»åŠ æ–­è¨€ï¼ˆä½ç‰ˆæœ¬ node ä¸å¯ç”¨ï¼‰</li>
<li>æ”¯æŒå‡½æ•°å¼åŠ¨æ€å¯¼å…¥</li>
</ul>
<h4 id="å¯¹æ¯”"><a class="anchor" href="#å¯¹æ¯”">#</a> å¯¹æ¯”</h4>
<ol>
<li>CommonJS åŸºäºè¿è¡Œæ—¶çš„åŒæ­¥åŠ è½½ï¼ŒESM åŸºäºç¼–è¯‘æ—¶çš„å¼‚æ­¥åŠ è½½</li>
<li>CommonJS æ˜¯å¯ä»¥ä¿®æ”¹å€¼çš„ï¼ŒESM å€¼å¹¶ä¸”ä¸å¯ä¿®æ”¹ï¼ˆå¯è¯»çš„ï¼‰</li>
<li>CommonJS ä¸å¯ä»¥ tree shakingï¼ŒESM æ”¯æŒ tree shaking</li>
<li>CommonJS ä¸­é¡¶å±‚çš„ this æŒ‡å‘è¿™ä¸ªæ¨¡å—æœ¬èº«ï¼Œè€Œ ESM ä¸­é¡¶å±‚ this æŒ‡å‘ undefined</li>
</ol>
<h4 id="requireæ‰§è¡Œé¡ºåº"><a class="anchor" href="#requireæ‰§è¡Œé¡ºåº">#</a> require æ‰§è¡Œé¡ºåº</h4>
<ol>
<li>.js æ–‡ä»¶ï¼Œè°ƒç”¨ compile å‡½æ•°è¿›è¡Œæ‰§è¡Œã€‚</li>
<li>.json æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶å†…å®¹ï¼Œè°ƒç”¨ JSON.parse æ–¹æ³•å¤„ç†ã€‚</li>
<li>.node æ–‡ä»¶ï¼Œé€šè¿‡ process.dlopen æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</li>
</ol>
<h2 id="å…¨å±€å˜é‡"><a class="anchor" href="#å…¨å±€å˜é‡">#</a> å…¨å±€å˜é‡</h2>
<h4 id="global"><a class="anchor" href="#global">#</a> global</h4>
<ul>
<li>æµè§ˆå™¨ç«¯çš„å…¨å±€å¯¹è±¡æ˜¯ window</li>
<li>Node ç¯å¢ƒçš„å…¨å±€å¯¹è±¡æ˜¯ global</li>
<li>global ä¸Šå®šä¹‰çš„å˜é‡åœ¨å½“å‰ç¯å¢ƒæ‰§è¡Œä»»ä½•æ–‡ä»¶æ—¶éƒ½å¯ä»¥è®¿é—®åˆ°</li>
<li>ES2020 æ¨å‡º globalThis ç”¨äºå…¼å®¹ window å’Œ globalï¼ˆè‡ªåŠ¨åˆ‡æ¢ï¼‰</li>
</ul>
<h4 id="__dirname"><a class="anchor" href="#__dirname">#</a> __dirname</h4>
<p>å½“å‰æ¨¡å—æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„</p>
<h4 id="__filename"><a class="anchor" href="#__filename">#</a> __filename</h4>
<p>å½“å‰æ¨¡å—æ–‡ä»¶æ‰€åœ¨çš„ç»å¯¹è·¯å¾„ï¼ŒåŒ…æ‹¬æ–‡ä»¶åå’Œæ–‡ä»¶æ‰©å±•å</p>
<h4 id="require"><a class="anchor" href="#require">#</a> require</h4>
<h4 id="module"><a class="anchor" href="#module">#</a> module</h4>
<h4 id="process"><a class="anchor" href="#process">#</a> process</h4>
<ul>
<li>
<p><code>process.argv</code></p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰æ‰§è¡Œç¯å¢ƒçš„è·¯å¾„</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯å½“å‰æ‰§è¡Œçš„æ–‡ä»¶çš„è·¯å¾„</li>
<li>å‰©ä½™çš„å‚æ•°æ˜¯ä¼ é€’ç»™è„šæœ¬æ–‡ä»¶çš„å‘½ä»¤è¡Œå‚æ•°</li>
</ul>
</li>
<li>
<p><code>process.env</code>  ç¯å¢ƒå˜é‡</p>
</li>
<li>
<p><code>process.cwd()</code>  è¿”å›å½“å‰å·¥ä½œç›®å½•è·¯å¾„</p>
</li>
<li>
<p><code>process.on(event,listener)</code> ï¼Œç›‘å¬è¿›ç¨‹å˜åŒ–</p>
</li>
<li>
<p><code>process.exit([code])</code> ï¼Œé€€å‡º Node è¿›ç¨‹ï¼Œæä¾›é€€å‡ºç </p>
</li>
<li>
<p><code>process.pid</code>  è¿”å›è¿›ç¨‹ id</p>
</li>
</ul>
<h4 id="bufferç±»"><a class="anchor" href="#bufferç±»">#</a> Buffer ç±»</h4>
<p>Node.js 6.0 ç‰ˆæœ¬å¼€å§‹ï¼Œ <code>Buffer</code>  æ„é€ å‡½æ•°çš„ä½¿ç”¨å·²è¢«å¼ƒç”¨ï¼Œæ¨èä½¿ç”¨ <code>Buffer.alloc()</code> ã€ <code>Buffer.from()</code>  ç­‰æ–¹æ³•æ¥åˆ›å»º <code>Buffer</code>  å®ä¾‹ã€‚</p>
<h4 id="dom-bom"><a class="anchor" href="#dom-bom">#</a> DOMã€BOM</h4>
<p>Node ç¯å¢ƒä¸­æ— æ³•æ“ä½œ DOM å’Œ BOMï¼Œä¸è¿‡å¯ä»¥å€ŸåŠ©ä¸€äº›å·¥å…·è¿›è¡Œæ¨¡æ‹Ÿï¼Œä¾‹å¦‚ï¼š <code>jsdom</code></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:fs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token constant">JSDOM</span> <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jsdom'</span><span class="token punctuation">)</span> <span class="token comment">//jsdom æ¨¡æ‹Ÿæµè§ˆå™¨ç¯å¢ƒ</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> dom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSDOM</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html>&lt;div id='app'>&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> document <span class="token operator">=</span> dom<span class="token punctuation">.</span>window<span class="token punctuation">.</span>document</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> window <span class="token operator">=</span> dom<span class="token punctuation">.</span>window</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://api.thecatapi.com/v1/images/search?limit=10&amp;page=1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">const</span> app <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>       <span class="token keyword">const</span> img <span class="token operator">=</span>  document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>       img<span class="token punctuation">.</span>src <span class="token operator">=</span> item<span class="token punctuation">.</span>url</pre></td></tr><tr><td data-num="11"></td><td><pre>       img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'200px'</span></pre></td></tr><tr><td data-num="12"></td><td><pre>       img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'200px'</span></pre></td></tr><tr><td data-num="13"></td><td><pre>       app<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'./index.html'</span><span class="token punctuation">,</span> dom<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="pathæ¨¡å—"><a class="anchor" href="#pathæ¨¡å—">#</a> path æ¨¡å—</h2>
<p>path æ¨¡å—åœ¨ windows å’Œ posix ç³»ç»Ÿä¸­æ˜¯æœ‰å·®å¼‚çš„ã€‚</p>
<ul>
<li>posix è¡¨ç¤ºå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰äº†ä¸€å¥—æ ‡å‡†ï¼Œéµå®ˆè¿™å¥—æ ‡å‡†çš„æ“ä½œç³»ç»Ÿæœ‰ (unix,like unix,linux,macOs,windows wsl)ï¼Œç”¨äºå¤šä¸ªå¹³å°é—´ç›¸äº’å…¼å®¹</li>
<li>Windows å¹¶æ²¡æœ‰å®Œå…¨éµå¾ª POSIX æ ‡å‡†ï¼Œåœ¨ Windows ç³»ç»Ÿä¸­ï¼Œè·¯å¾„ä½¿ç”¨åæ–œæ ï¼ˆ <code>\</code> ï¼‰ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ã€‚è¿™ä¸ POSIX ç³»ç»Ÿä½¿ç”¨çš„æ­£æ–œæ ï¼ˆ <code>/</code> ï¼‰æ˜¯ä¸åŒçš„</li>
</ul>
<p><strong>å·®å¼‚ä¸¾ä¾‹ï¼š</strong></p>
<pre><code>path.basename('C:\temp\myfile.html'); 
// åœ¨posixä¸­ è¿”å›: 'C:\temp\myfile.html'
// åœ¨windowsä¸­ è¿”å› empmyfile.html
</code></pre>
<ul>
<li>path.basename è¿”å›æ–‡ä»¶åï¼ˆåŒ…æ‹¬åç¼€ï¼‰</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'C:/fs/dmq/MI/index.html'</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å› index.html</span></pre></td></tr></table></figure><ul>
<li><code>path.extname</code>  è¿”å›æ‰©å±•å</li>
<li><code>path.join</code>  è·¯å¾„æ‹¼æ¥ï¼ˆè·¯å¾„æ‹¼æ¥ï¼‰</li>
<li><code>path.resolve</code>  è§£æç»å¯¹è·¯å¾„å¹¶ä¸”è¿”å›ç»å¯¹è·¯å¾„ï¼ˆè·¯å¾„è§£æï¼‰</li>
<li><code>path.parse</code>  å°†è·¯å¾„è§£æä¸ºå¯¹è±¡</li>
<li><code>path.format</code>  å°†å¯¹è±¡è§£æä¸ºè·¯å¾„</li>
</ul>
<h2 id="osæ¨¡å—"><a class="anchor" href="#osæ¨¡å—">#</a> os æ¨¡å—</h2>
<table>
<thead>
<tr>
<th></th>
<th>API</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>os.type()</strong></td>
<td>å®ƒåœ¨ Linux ä¸Šè¿”å›  <code>'Linux'</code> ï¼Œåœ¨ macOS ä¸Šè¿”å›  <code>'Darwin'</code> ï¼Œåœ¨ Windows ä¸Šè¿”å›  <code>'Windows_NT'</code></td>
</tr>
<tr>
<td>2</td>
<td><strong>os.platform()</strong></td>
<td>è¿”å›æ ‡è¯†ä¸ºå…¶ç¼–è¯‘ Node.js äºŒè¿›åˆ¶æ–‡ä»¶çš„æ“ä½œç³»ç»Ÿå¹³å°çš„å­—ç¬¦ä¸²ã€‚ è¯¥å€¼åœ¨ç¼–è¯‘æ—¶è®¾ç½®ã€‚ å¯èƒ½çš„å€¼ä¸º  <code>'aix'</code> ã€ <code>'darwin'</code> ã€ <code>'freebsd'</code> ã€ <code>'linux'</code> ã€ <code>'openbsd'</code> ã€ <code>'sunos'</code> ã€ä»¥åŠ  <code>'win32'</code></td>
</tr>
<tr>
<td>3</td>
<td><strong>os.release()</strong></td>
<td>è¿”å›æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ä¾‹å¦‚ 10.xxxx win10</td>
</tr>
<tr>
<td>4</td>
<td><strong>os.homedir()</strong></td>
<td>è¿”å›ç”¨æˆ·ç›®å½• ä¾‹å¦‚ c:\user\xiaoman åŸç†å°±æ˜¯ windows  <code>echo %USERPROFILE% </code> posix $HOME</td>
</tr>
<tr>
<td>5</td>
<td><strong>os.arch()</strong></td>
<td>è¿”å› cpu çš„æ¶æ„  å¯èƒ½çš„å€¼ä¸º  <code>'arm'</code> ã€ <code>'arm64'</code> ã€ <code>'ia32'</code> ã€ <code>'mips'</code> ã€ <code>'mipsel'</code> ã€ <code>'ppc'</code> ã€ <code>'ppc64'</code> ã€ <code>'s390'</code> ã€ <code>'s390x'</code> ã€ä»¥åŠ  <code>'x64'</code></td>
</tr>
<tr>
<td>6</td>
<td><strong>os.cups()</strong></td>
<td>è·å– <code>cpuçº¿ç¨‹</code> å’Œ cpu è¯¦ç»†ä¿¡æ¯</td>
</tr>
<tr>
<td>7</td>
<td><strong>os.networkInterfaces()</strong></td>
<td>è·å– <code>ç½‘ç»œä¿¡æ¯</code></td>
</tr>
</tbody>
</table>
<h2 id="processæ¨¡å—"><a class="anchor" href="#processæ¨¡å—">#</a> process æ¨¡å—</h2>
<ul>
<li>
<p><code>process.argv</code></p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰æ‰§è¡Œç¯å¢ƒçš„è·¯å¾„</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯å½“å‰æ‰§è¡Œçš„æ–‡ä»¶çš„è·¯å¾„</li>
<li>å‰©ä½™çš„å‚æ•°æ˜¯ä¼ é€’ç»™è„šæœ¬æ–‡ä»¶çš„å‘½ä»¤è¡Œå‚æ•°</li>
</ul>
</li>
<li>
<p><code>process.env</code>  ç¯å¢ƒå˜é‡</p>
</li>
<li>
<p><code>process.cwd()</code>  è¿”å›å½“å‰å·¥ä½œç›®å½•è·¯å¾„</p>
</li>
<li>
<p><code>process.on(event,listener)</code> ï¼Œç›‘å¬è¿›ç¨‹å˜åŒ–</p>
</li>
<li>
<p><code>process.exit([code])</code> ï¼Œé€€å‡º Node è¿›ç¨‹ï¼Œæä¾›é€€å‡ºç </p>
</li>
<li>
<p><code>process.pid</code>  è¿”å›è¿›ç¨‹ id</p>
</li>
<li>
<p><code>process.arch</code>  è¿”å›æ“ä½œç³»ç»Ÿ CPU æ¶æ„</p>
</li>
<li>
<p><code>process.memoryUsage</code>  è·å–å½“å‰è¿›ç¨‹å†…å­˜ä½¿ç”¨æƒ…å†µ</p>
</li>
<li>
<p><code>process.kill(process.pid)</code>  ç”¨äºæ€æ­»ä¸€ä¸ªè¿›ç¨‹</p>
</li>
</ul>
<h2 id="child_processæ¨¡å—"><a class="anchor" href="#child_processæ¨¡å—">#</a> child_process æ¨¡å—</h2>
<p>å­è¿›ç¨‹æ˜¯ Nodejs æ ¸å¿ƒ APIï¼Œå¦‚æœä½ ä¼š shell å‘½ä»¤ï¼Œä»–ä¼šæœ‰éå¸¸å¤§çš„å¸®åŠ©ï¼Œæˆ–è€…ä½ å–œæ¬¢ç¼–å†™å‰ç«¯å·¥ç¨‹åŒ–å·¥å…·ä¹‹ç±»çš„ï¼Œä»–ä¹Ÿæœ‰å¾ˆå¤§çš„ç”¨å¤„ï¼Œä»¥åŠå¤„ç† CPU å¯†é›†å‹åº”ç”¨ã€‚</p>
<h4 id="åˆ›å»ºå­è¿›ç¨‹"><a class="anchor" href="#åˆ›å»ºå­è¿›ç¨‹">#</a> åˆ›å»ºå­è¿›ç¨‹</h4>
<p>Nodejs åˆ›å»ºå­è¿›ç¨‹å…±æœ‰ <code>7ä¸ª</code>  API Sync åŒæ­¥ API ï¼Œä¸åŠ æ˜¯å¼‚æ­¥ API</p>
<ol>
<li>spawn  æ‰§è¡Œå‘½ä»¤</li>
<li>exec   æ‰§è¡Œå‘½ä»¤</li>
<li>execFile   æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶</li>
<li>fork   åˆ›å»º node å­è¿›ç¨‹</li>
<li><code>execSync</code>  æ‰§è¡Œå‘½ä»¤ åŒæ­¥æ‰§è¡Œ</li>
<li><code>execFileSync</code>  æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ åŒæ­¥æ‰§è¡Œ</li>
<li><code>spawnSync</code>  æ‰§è¡Œå‘½ä»¤ åŒæ­¥æ‰§è¡Œ</li>
</ol>
<h2 id="ffmpegå·¥å…·"><a class="anchor" href="#ffmpegå·¥å…·">#</a> <span class="exturl" data-url="aHR0cHM6Ly9mZm1wZWcucDJocC5jb20vZG93bmxvYWQuaHRtbA==">ffmpeg å·¥å…·</span></h2>
<p>FFmpeg æ˜¯ä¸€ä¸ªå¼€æºçš„è·¨å¹³å°å¤šåª’ä½“å¤„ç†å·¥å…·ï¼Œå¯ä»¥ç”¨äºå¤„ç†éŸ³é¢‘ã€è§†é¢‘å’Œå¤šåª’ä½“æµã€‚å®ƒæä¾›äº†ä¸€ç»„å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·å’Œåº“ï¼Œå¯ä»¥è¿›è¡Œè§†é¢‘è½¬ç ã€è§†é¢‘å‰ªè¾‘ã€éŸ³é¢‘æå–ã€éŸ³è§†é¢‘åˆå¹¶ã€æµåª’ä½“ä¼ è¾“ç­‰æ“ä½œã€‚</p>
<h2 id="eventsæ¨¡å—"><a class="anchor" href="#eventsæ¨¡å—">#</a> events æ¨¡å—</h2>
<p>Node.js çš„äº‹ä»¶æ¨¡å‹é‡‡ç”¨å‘å¸ƒè®¢é˜…çš„è®¾è®¡æ€æƒ³ï¼Œå°†å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´è§£è€¦åˆï¼Œä½¿å¾—åŒæ–¹èƒ½å¤Ÿç‹¬ç«‹åœ°æ‰©å±•è‡ªå·±ã€‚</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> EventEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// ç›‘å¬ test</span></pre></td></tr><tr><td data-num="4"></td><td><pre>event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token string">'dataæ•°æ®'</span><span class="token punctuation">)</span> <span class="token comment">// æ´¾å‘äº‹ä»¶</span></pre></td></tr></table></figure><p>event å®ä¾‹é»˜è®¤ç›‘å¬ 10 ä¸ªä¸ºä¸Šé™ï¼Œå¯ä»¥é€šè¿‡ <code>setMaxListeners()</code>  æ–¹æ³•æ¥è®¾ç½®ç›‘å¬ä¸Šé™ã€‚</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>event<span class="token punctuation">.</span><span class="token function">setMaxListeners</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><code>event.onceæ–¹æ³•</code> å¯ä»¥åªè®¢é˜…ä¸€æ¬¡</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>event<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onceå–ä»£onï¼Œåªç›‘å¬ä¸€æ¬¡'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><code>event.off</code>  æ–¹æ³•å–æ¶ˆè®¢é˜…</p>
<pre><code class="language-JS">event.on('test', fn) // è®¢é˜…äº‹ä»¶
event.off('test', fn) // å–æ¶ˆäº‹ä»¶è®¢é˜…
</code></pre>
<h4 id="sse"><a class="anchor" href="#sse">#</a> SSE</h4>
<ul>
<li>
<p>SSEï¼ˆserver send eventsï¼‰æœåŠ¡ç«¯æ¨é€äº‹ä»¶</p>
</li>
<li>
<p>æ˜¯ä¸€ç§å®ç°æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®çš„æŠ€æœ¯ï¼Œä¹Ÿè¢«ç§°ä¸ºäº‹ä»¶æµ</p>
</li>
<li>
<p>å®ƒæ˜¯åŸºäº HTTP åè®®ï¼Œåˆ©ç”¨ HTTP åè®®é•¿è¿æ¥çš„ä¼˜åŠ¿ï¼Œå®ç°æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¨é€å®æ—¶æ•°æ®ã€‚</p>
</li>
<li>
<p>æµè§ˆå™¨ç«¯éœ€è¦ä½¿ç”¨ <code>EventSource</code>  æ³¨å†Œ api åœ°å€ï¼ŒæœåŠ¡ç«¯éœ€è¦å¯¹è¯¥åœ°å€çš„å“åº”å¤´ä¸­è®¾ç½® Content-Type ä¸º  <code>text/event-stream </code></p>
</li>
</ul>
<p><strong>node åç«¯ï¼š</strong></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> express <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/sse'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/event-stream'</span><span class="token punctuation">,</span> <span class="token comment">// æ ¸å¿ƒè¿”å›æ•°æ®æµ</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token string-property property">'Connection'</span><span class="token operator">:</span> <span class="token string">'close'</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">const</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">const</span> total <span class="token operator">=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">//mock sse æ•°æ®</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> total<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">>=</span> total<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token function">clearInterval</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token keyword">return</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// è¿”å›è‡ªå®šä¹‰äº‹ä»¶å</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">event:name\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// è¿”å›æ•°æ®</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">[</span>current<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\n\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        current<span class="token operator">++</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Listening on port 3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯ï¼š</strong></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> sse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'http://localhost:3000/api/sse'</span> <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span>sse<span class="token punctuation">.</span>readyState <span class="token operator">===</span> EventSource<span class="token punctuation">.</span><span class="token constant">CONNECTING</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ­£åœ¨è¿æ¥æœåŠ¡å™¨...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sse<span class="token punctuation">.</span>readyState <span class="token operator">===</span> EventSource<span class="token punctuation">.</span><span class="token constant">OPEN</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å·²ç»è¿æ¥ä¸ŠæœåŠ¡å™¨ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sse<span class="token punctuation">.</span>readyState <span class="token operator">===</span> EventSource<span class="token punctuation">.</span><span class="token constant">CLOSED</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿æ¥å·²ç»å…³é—­ã€‚'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>sse<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>sse<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    sse<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…³é—­è¿æ¥</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>sse<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿æ¥æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// å¯¹åº”åç«¯ nodejs è‡ªå®šä¹‰çš„äº‹ä»¶å lol</span></pre></td></tr><tr><td data-num="20"></td><td><pre>sse<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="utilæ¨¡å—"><a class="anchor" href="#utilæ¨¡å—">#</a> util æ¨¡å—</h2>
<p>Node.js å†…éƒ¨æä¾›çš„å·¥å…·é›†æ¨¡å—ï¼Œæ–¹ä¾¿å¿«é€Ÿå¼€å‘</p>
<ul>
<li>
<p><code>util.promisify</code>  å°†å‡½æ•°æ”¹ä¸º promise ç±»å‹çš„å½¢å¼</p>
</li>
<li>
<p><code>util.callbackify</code>  å°† promise ç±»å‹çš„ api æ”¹ä¸ºå‡½æ•°å½¢å¼</p>
</li>
<li>
<p><code>util.format</code>  ç”¨äºæ ¼å¼åŒ–æ–‡æœ¬</p>
<ul>
<li><code>%s</code> :  <code>String</code>  å°†ç”¨äºè½¬æ¢é™¤  <code>BigInt</code> ã€ <code>Object</code>  å’Œ  <code>-0</code>  ä¹‹å¤–çš„æ‰€æœ‰å€¼ã€‚  <code>BigInt</code>  å€¼å°†ç”¨  <code>n</code>  è¡¨ç¤ºï¼Œæ²¡æœ‰ç”¨æˆ·å®šä¹‰çš„  <code>toString</code>  å‡½æ•°çš„å¯¹è±¡ä½¿ç”¨å…·æœ‰é€‰é¡¹  <code>&#123; depth: 0, colors: false, compact: 3 &#125;</code>  çš„  <code>util.inspect()</code>  è¿›è¡Œæ£€æŸ¥ã€‚</li>
<li><code>%d</code> :  <code>Number</code>  å°†ç”¨äºè½¬æ¢é™¤  <code>BigInt</code>  å’Œ  <code>Symbol</code>  ä¹‹å¤–çš„æ‰€æœ‰å€¼ã€‚</li>
<li><code>%i</code> :  <code>parseInt(value, 10)</code>  ç”¨äºé™¤  <code>BigInt</code>  å’Œ  <code>Symbol</code>  ä¹‹å¤–çš„æ‰€æœ‰å€¼ã€‚</li>
<li><code>%f</code> :  <code>parseFloat(value)</code>  ç”¨äºé™¤  <code>Symbol</code>  ä¹‹å¤–çš„æ‰€æœ‰å€¼ã€‚</li>
<li><code>%j</code> : JSONã€‚ å¦‚æœå‚æ•°åŒ…å«å¾ªç¯å¼•ç”¨ï¼Œåˆ™æ›¿æ¢ä¸ºå­—ç¬¦ä¸²  <code>'[Circular]'</code> ã€‚</li>
<li><code>%o</code> :  <code>Object</code> . å…·æœ‰é€šç”¨ JavaScript å¯¹è±¡æ ¼å¼çš„å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚ ç±»ä¼¼äºå…·æœ‰é€‰é¡¹  <code>&#123; showHidden: true, showProxy: true &#125;</code>  çš„  <code>util.inspect()</code> ã€‚ è¿™å°†æ˜¾ç¤ºå®Œæ•´çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾çš„å±æ€§å’Œä»£ç†ã€‚</li>
<li><code>%O</code> :  <code>Object</code> . å…·æœ‰é€šç”¨ JavaScript å¯¹è±¡æ ¼å¼çš„å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚ ç±»ä¼¼äºæ²¡æœ‰é€‰é¡¹çš„  <code>util.inspect()</code> ã€‚ è¿™å°†æ˜¾ç¤ºå®Œæ•´çš„å¯¹è±¡ï¼Œä½†ä¸åŒ…æ‹¬ä¸å¯æšä¸¾çš„å±æ€§å’Œä»£ç†ã€‚</li>
<li><code>%c</code> :  <code>CSS</code> . æ­¤è¯´æ˜ç¬¦è¢«å¿½ç•¥ï¼Œå°†è·³è¿‡ä»»ä½•ä¼ å…¥çš„ CSSã€‚</li>
<li><code>%%</code> : å•ä¸ªç™¾åˆ†å· ( <code>'%'</code> )ã€‚ è¿™ä¸æ¶ˆè´¹å‚æ•°ã€‚</li>
</ul>
</li>
<li>
<p>å…¶ä»–å·¥å…·å‡½æ•°çœç•¥</p>
</li>
</ul>
<h2 id="pngquantå·¥å…·"><a class="anchor" href="#pngquantå·¥å…·">#</a> <span class="exturl" data-url="aHR0cHM6Ly9wbmdxdWFudC5vcmcv">pngquant å·¥å…·</span></h2>
<p><code>pngquant</code>  æ˜¯ä¸€ä¸ªç”¨äºå‹ç¼© PNG å›¾åƒæ–‡ä»¶çš„å·¥å…·ã€‚å®ƒå¯ä»¥æ˜¾è‘—å‡å° PNG æ–‡ä»¶çš„å¤§å°ï¼ŒåŒæ—¶ä¿æŒå›¾åƒè´¨é‡å’Œé€æ˜åº¦ã€‚é€šè¿‡å‡å°æ–‡ä»¶å¤§å°ï¼Œå¯ä»¥æé«˜ç½‘é¡µåŠ è½½é€Ÿåº¦ï¼Œå¹¶èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚ <code>pngquant</code>  æä¾›å‘½ä»¤è¡Œæ¥å£å’Œåº“ï¼Œå¯è½»æ¾é›†æˆåˆ°å„ç§åº”ç”¨ç¨‹åºå’Œè„šæœ¬ä¸­ã€‚</p>
<h2 id="fsæ¨¡å—"><a class="anchor" href="#fsæ¨¡å—">#</a> fs æ¨¡å—</h2>
<p>åœ¨ Node.js ä¸­ï¼Œ <code>fs</code>  æ¨¡å—æ˜¯æ–‡ä»¶ç³»ç»Ÿæ¨¡å—ï¼ˆFile System moduleï¼‰çš„ç¼©å†™ï¼Œå®ƒæä¾›äº†ä¸æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œäº¤äº’çš„å„ç§åŠŸèƒ½ã€‚é€šè¿‡  <code>fs</code>  æ¨¡å—ï¼Œä½ å¯ä»¥æ‰§è¡Œè¯¸å¦‚è¯»å–æ–‡ä»¶ã€å†™å…¥æ–‡ä»¶ã€æ›´æ”¹æ–‡ä»¶æƒé™ã€åˆ›å»ºç›®å½•ç­‰æ“ä½œï¼Œ <code>Node.js æ ¸å¿ƒAPIä¹‹ä¸€</code> ã€‚</p>
<h4 id="åŒæ­¥ä¸å¼‚æ­¥"><a class="anchor" href="#åŒæ­¥ä¸å¼‚æ­¥">#</a> åŒæ­¥ä¸å¼‚æ­¥</h4>
<ul>
<li>
<p>fs æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æ¨¡å¼ å¢åŠ äº† <code>Sync</code>  fs å°±ä¼šé‡‡ç”¨åŒæ­¥çš„æ–¹å¼è¿è¡Œä»£ç ï¼Œä¼šé˜»å¡ä¸‹é¢çš„ä»£ç ï¼Œä¸åŠ  Sync å°±æ˜¯å¼‚æ­¥çš„æ¨¡å¼ä¸ä¼šé˜»å¡ã€‚</p>
</li>
<li>
<p>fs æ–°å¢äº† promise ç‰ˆæœ¬ï¼Œåªéœ€è¦åœ¨å¼•å…¥åŒ…åé¢å¢åŠ  /promise å³å¯ï¼Œfs ä¾¿å¯æ”¯æŒ promise å›è°ƒã€‚</p>
</li>
<li>
<p>fs è¿”å›çš„æ˜¯ä¸€ä¸ª buffer äºŒè¿›åˆ¶æ•°æ® æ¯ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºä¸€ä¸ªå­—èŠ‚</p>
</li>
</ul>
<h4 id="api"><a class="anchor" href="#api">#</a> api</h4>
<ul>
<li><code>fs.readFile</code>  å¼‚æ­¥è¯»å–æ–‡ä»¶</li>
<li><code>fs.writeFile</code>  å¼‚æ­¥å†™å…¥æ–‡ä»¶</li>
<li><code>fs.appendFile</code>  æ–‡ä»¶å¼‚æ­¥è¿½åŠ å†™å…¥å†…å®¹</li>
<li><code>fs.copyFile</code>  æ–‡ä»¶å¼‚æ­¥æ‹·è´å†™å…¥</li>
<li><code>fs.open</code>  å¼‚æ­¥æ‰“å¼€æ–‡ä»¶</li>
<li><code>fs.close</code>  å¼‚æ­¥å…³é—­æ–‡ä»¶</li>
<li><code>fs.read</code>  å¼‚æ­¥è¯»å–æ–‡ä»¶</li>
<li><code>fs.write</code>  å¼‚æ­¥å°† Buffer ä¸­çš„æ•°æ®å†™å…¥æ–‡ä»¶</li>
<li><code>fs.access</code>  å¼‚æ­¥æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å¯è¯»å¯å†™</li>
<li><code>fs.stat</code>  å¼‚æ­¥è·å–æ–‡ä»¶ç›®å½•çš„ stats å¯¹è±¡ï¼ˆæ–‡ä»¶å¤¹ä¿¡æ¯ï¼‰</li>
<li><code>fs.mkdir</code>  å¼‚æ­¥åˆ›å»ºæ–‡ä»¶å¤¹</li>
<li><code>fs.readdir</code>  å¼‚æ­¥è¯»å–æ–‡ä»¶å¤¹</li>
<li><code>fs.rmdir</code>  å¼‚æ­¥åˆ é™¤ç›®å½•</li>
<li><code>fs.unlink</code>  å¼‚æ­¥åˆ é™¤æ–‡ä»¶</li>
<li>ä»¥ä¸Šæ–¹æ³•éƒ½æœ‰å¯¹åº”çš„åŒæ­¥æ‰§è¡Œçš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ååé¢åŠ ä¸Š Sync åç¼€å³å¯ã€‚</li>
</ul>
<h4 id="fspromises"><a class="anchor" href="#fspromises">#</a> fs/promises</h4>
<p>node ä¸­ fs æ¨¡å—çš„æ–¹æ³•æä¾›äº† Promise ç‰ˆæœ¬çš„è°ƒç”¨å½¢å¼ï¼Œå¯¼å…¥å³å¯ä½¿ç”¨ promise çš„ä½¿ç”¨æ–¹å¼è°ƒç”¨ api</p>
<h4 id="æºç "><a class="anchor" href="#æºç ">#</a> æºç </h4>
<p>Node.js ä¸­ fs æ¨¡å—æ˜¯ç”± libuv æ¥è¿›è¡Œè°ƒåº¦çš„ï¼Œæ–‡ä»¶è¯»å–å®Œæˆä¹‹å libuv æ‰ä¼šå°† fs çš„ç»“æœæ¨å…¥ V8 çš„é˜Ÿåˆ—ã€‚</p>
<h4 id="writefilesync"><a class="anchor" href="#writefilesync">#</a> writeFileSync</h4>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å†™å…¥çš„æ–‡ä»¶</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯å†™å…¥çš„å†…å®¹</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å†™å…¥æ–¹å¼é…ç½®é¡¹ï¼Œå…¶ flag æœ‰ä»¥ä¸‹é…ç½®ï¼š
<ul>
<li><code>'a'</code> : æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¿½åŠ ã€‚ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥æ–‡ä»¶ã€‚</li>
<li><code>'ax'</code> : ç±»ä¼¼äº  <code>'a'</code>  ä½†å¦‚æœè·¯å¾„å­˜åœ¨åˆ™å¤±è´¥ã€‚</li>
<li><code>'a+'</code> : æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å–å’Œè¿½åŠ ã€‚ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥æ–‡ä»¶ã€‚</li>
<li><code>'ax+'</code> : ç±»ä¼¼äº  <code>'a+'</code>  ä½†å¦‚æœè·¯å¾„å­˜åœ¨åˆ™å¤±è´¥ã€‚</li>
<li><code>'as'</code> : ä»¥åŒæ­¥æ¨¡å¼æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¿½åŠ ã€‚ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥æ–‡ä»¶ã€‚</li>
<li><code>'as+'</code> : ä»¥åŒæ­¥æ¨¡å¼æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å–å’Œè¿½åŠ ã€‚ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥æ–‡ä»¶ã€‚</li>
<li><code>'r'</code> : æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å–ã€‚ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚</li>
<li><code>'r+'</code> : æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ã€‚ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚</li>
<li><code>'rs+'</code> : ä»¥åŒæ­¥æ¨¡å¼æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ã€‚ æŒ‡ç¤ºæ“ä½œç³»ç»Ÿç»•è¿‡æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ã€‚</li>
<li><code>'w'</code> : æ‰“å¼€æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ åˆ›å»ºï¼ˆå¦‚æœå®ƒä¸å­˜åœ¨ï¼‰æˆ–æˆªæ–­ï¼ˆå¦‚æœå®ƒå­˜åœ¨ï¼‰è¯¥æ–‡ä»¶ã€‚</li>
<li><code>'wx'</code> : ç±»ä¼¼äº  <code>'w'</code>  ä½†å¦‚æœè·¯å¾„å­˜åœ¨åˆ™å¤±è´¥ã€‚</li>
<li><code>'w+'</code> : æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ã€‚ åˆ›å»ºï¼ˆå¦‚æœå®ƒä¸å­˜åœ¨ï¼‰æˆ–æˆªæ–­ï¼ˆå¦‚æœå®ƒå­˜åœ¨ï¼‰è¯¥æ–‡ä»¶ã€‚</li>
<li><code>'wx+'</code> : ç±»ä¼¼äº  <code>'w+'</code>  ä½†å¦‚æœè·¯å¾„å­˜åœ¨åˆ™å¤±è´¥ã€‚</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚è¿½åŠ æ–‡ä»¶å†…å®¹é™¤äº†å¯ä»¥ä½¿ç”¨ <code>appendFileSync</code>  ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ï¼š</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'index.txt'</span><span class="token punctuation">,</span> <span class="token string">'è¿½åŠ çš„å†…å®¹'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">flag</span><span class="token operator">:</span> <span class="token string">'a'</span> <span class="token comment">// é…ç½® options ä¸­çš„ flag</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="å¯å†™æµ"><a class="anchor" href="#å¯å†™æµ">#</a> å¯å†™æµ</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:fs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> verse <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token string">'å¾…åˆ°ç§‹æ¥ä¹æœˆå…«'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token string">'æˆ‘èŠ±å¼€åç™¾èŠ±æ€'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token string">'å†²å¤©é¦™é˜µé€é•¿å®‰'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token string">'æ»¡åŸå°½å¸¦é»„é‡‘ç”²'</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">let</span> writeStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'index.txt'</span><span class="token punctuation">)</span> <span class="token comment">// åˆ›å»ºå†™å…¥æµ</span></pre></td></tr><tr><td data-num="9"></td><td><pre>verse<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    writeStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>item <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token comment">// å†™å…¥å†…å®¹</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>writeStream<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>writeStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'finish'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span> <span class="token comment">// ç›‘å¬å†™å…¥å®Œæˆäº‹ä»¶</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å†™å…¥å®Œæˆ'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯å†™æµ æ‰“å¼€ä¸€ä¸ªé€šé“ï¼Œå¯ä»¥ä¸€ç›´å†™å…¥æ•°æ®ï¼Œç”¨äºå¤„ç†å¤§é‡çš„æ•°æ®å†™å…¥ï¼Œå†™å…¥å®Œæˆä¹‹åè°ƒç”¨ end å…³é—­å¯å†™æµï¼Œç›‘å¬ finish äº‹ä»¶ å†™å…¥å®Œæˆ</p>
<h4 id="ç¡¬é“¾æ¥-è½¯è¿æ¥"><a class="anchor" href="#ç¡¬é“¾æ¥-è½¯è¿æ¥">#</a> ç¡¬é“¾æ¥ã€è½¯è¿æ¥</h4>
<h6 id="inode"><a class="anchor" href="#inode">#</a> inode</h6>
<ul>
<li>æ–‡ä»¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œç£ç›˜çš„æœ€å°å­˜å‚¨å•ä½å«åš <code>æ‰‡åŒº</code> ï¼Œæ¯ä¸ªæ‰‡åŒºå­˜å‚¨ 512 å­—èŠ‚</li>
<li>æ“ä½œç³»ç»Ÿè¯»å–ç£ç›˜æ—¶ï¼Œä¸ä¼šä¸€ä¸ªæ‰‡åŒºä¸€ä¸ªæ‰‡åŒºåœ°è¯»å–ï¼Œè¿™æ ·æ•ˆç‡å¤ªä½ï¼Œè€Œæ˜¯ä¸€æ¬¡æ€§è¿ç»­è¯»å–å¤šä¸ªæ‰‡åŒºï¼Œå¤šä¸ªæ‰‡åŒºç§°ä¹‹ä¸º <code>å—</code></li>
<li><code>å—</code> æ˜¯æ–‡ä»¶è¯»å–çš„æœ€å°å•ä½</li>
<li>æ–‡ä»¶æ•°æ®éƒ½å­˜å‚¨åœ¨ <code>å—</code> ä¸­ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªåœ°æ–¹å­˜å‚¨æ–‡ä»¶çš„å…ƒä¿¡æ¯ï¼Œè¿™ä¸­å­˜å‚¨æ–‡ä»¶å…ƒä¿¡æ¯çš„åŒºåŸŸå°±å«åš <code>inode</code> ï¼Œç´¢å¼•èŠ‚ç‚¹</li>
<li>åˆ›å»ºè½¯é“¾æ¥æ—¶ç”Ÿæˆäº†æ–°çš„ <code>inode</code> ï¼Œåˆ›å»ºç¡¬é“¾æ¥æ—¶æ²¡æœ‰ã€‚</li>
</ul>
<p><img data-src="/images/Snipaste_2024-05-29_14-07-39.png" alt="æ‰‡åŒºã€å—å’Œinode" /></p>
<p><strong>inode ä¸­åŒ…å«ä¿¡æ¯ï¼š</strong></p>
<ul>
<li>æ–‡ä»¶çš„å­—èŠ‚æ•°</li>
<li>æ–‡ä»¶æ‹¥æœ‰è€… ID</li>
<li>æ–‡ä»¶çš„ Group ID</li>
<li>æ–‡ä»¶è¯»ã€å†™ã€æ‰§è¡Œæƒé™</li>
<li>æ–‡ä»¶çš„æ—¶é—´æˆ³</li>
<li>é“¾æ¥æ•°</li>
<li>æ–‡ä»¶æ•°æ® block çš„ä½ç½®</li>
</ul>
<p>æ¯ä¸€ä¸ª  <code>inode</code>  éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç  ï¼Œä¸Šé¢çš„è¾“å‡ºä¿¡æ¯ä¸­  <code>ino</code>  å°±æ˜¯  <code>inode</code>  çš„å”¯ä¸€æ ‡è¯†ç ï¼Œåœ¨  <code>linux</code>  ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨  <code>inode</code>  çš„æ ‡è¯†ç æ¥è¯†åˆ«æ–‡ä»¶ï¼Œå¹¶ä¸ä½¿ç”¨æ–‡ä»¶åã€‚ä¹‹å‰ç³»çš„</p>
<p>åœ¨  <code>linux</code>  ç³»ç»Ÿä¸­ï¼Œç›®å½•ä¹Ÿæ˜¯ä¸€ç§æ–‡ä»¶ã€‚ç›®å½•æ–‡ä»¶åŒ…å«ä¸€ç³»åˆ—ç›®å½•é¡¹ï¼Œæ¯ä¸€ä¸ªç›®å½•é¡¹ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæ‰€åŒ…å«æ–‡ä»¶çš„æ–‡ä»¶åï¼Œä»¥åŠæ–‡ä»¶åå¯¹åº”çš„  <code>inode</code>  æ ‡è¯†ç ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨  <code>ls -i</code>  æ¥åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶ä»¥åŠæ‰€æœ‰çš„  <code>inde</code>  æ ‡è¯†ç ã€‚è¿™é‡Œä¹Ÿå¯ä»¥è§£é‡Šå¯èƒ½å°ä¼™ä¼´ä»¬è§‰å¾—è¯´ä¸é€šçš„é—®é¢˜ï¼Œä»…ä¿®æ”¹ç›®å½•çš„è¯»æƒé™ï¼Œå¹¶ä¸èƒ½å®ç°è¯»å–ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å†…å®¹çš„åŸå› ï¼Œæœ€åéœ€è¦é€šè¿‡é€’å½’ç›®å½•ä¸‹çš„æ–‡ä»¶æ¥è¿›è¡Œä¿®æ”¹ã€‚</p>
<h6 id="è½¯é“¾æ¥"><a class="anchor" href="#è½¯é“¾æ¥">#</a> è½¯é“¾æ¥</h6>
<p>è½¯é“¾æ¥ç±»ä¼¼äº  <code>Window</code>  ä¸­çš„ â€œå¿«æ·æ–¹å¼â€ ã€‚åˆ›å»ºè½¯é“¾æ¥ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„  <code>inode</code> ï¼Œæ¯”å¦‚ä¸ºæ–‡ä»¶  <code>a</code>  åˆ›å»ºäº†è½¯é“¾æ¥æ–‡ä»¶ bï¼Œæ–‡ä»¶  <code>b</code>  å†…éƒ¨ä¼šæŒ‡å‘  <code>a</code>  çš„  <code>inode</code> ã€‚å½“æˆ‘ä»¬è¯»å–æ–‡ä»¶ <code>b</code>  çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¯¼å‘æ–‡ä»¶  <code>a</code>  ï¼Œæ–‡ä»¶  <code>b</code>  å°±æ˜¯æ–‡ä»¶  <code>a</code>  è½¯è¿æ¥ (æˆ–è€…å«ç¬¦å·é“¾æ¥)ã€‚</p>
<ul>
<li>è®¿é—®ï¼šåˆ›å»ºäº†è½¯é“¾æ¥åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶åè®¿é—®ç›¸åŒçš„å†…å®¹ï¼Œ</li>
<li>ä¿®æ”¹ï¼šä¿®æ”¹æ–‡ä»¶  <code>a</code>  çš„å†…å®¹ï¼Œæ–‡ä»¶  <code>b</code>  çš„å†…å®¹ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¯¹æ–‡ä»¶å†…å®¹çš„ä¿®æ”¹å‘æ”¾æ˜ åˆ°æ‰€æœ‰æ–‡ä»¶ã€‚</li>
<li>åˆ é™¤ï¼šå½“æˆ‘ä»¬åˆ é™¤æºæ–‡ä»¶  <code>a</code>  æ—¶ï¼Œåœ¨è®¿é—®è½¯è¿æ¥æ–‡ä»¶ b æ˜¯ï¼Œä¼šæŠ¥é”™  <code>&quot;No such file or directory&quot;</code></li>
</ul>
<p>å¯ä»¥ç›´æ¥ä½¿ç”¨  <code>linux</code>  å‘½ä»¤  <code>ln -s source target</code>  æ¥åˆ›å»ºè½¯é“¾æ¥ (æ³¨æ„ï¼šè¡¨ç¤º  <code>target</code>  â€œæŒ‡å‘â€  <code>source</code> ï¼‰</p>
<p><img data-src="/images/Snipaste_2024-05-29_14-12-05.png" alt="è½¯é“¾æ¥" /></p>
<h6 id="ç¡¬é“¾æ¥"><a class="anchor" href="#ç¡¬é“¾æ¥">#</a> ç¡¬é“¾æ¥</h6>
<p>ä¸€èˆ¬æƒ…å†µï¼Œä¸€ä¸ªæ–‡ä»¶å &quot;å”¯ä¸€&quot; å¯¹åº”ä¸€ä¸ª  <code>inode</code> ã€‚ä½†æ˜¯  <code>linux</code>  å…è®¸å¤šä¸ªæ–‡ä»¶åéƒ½æŒ‡å‘åŒä¸€ä¸ª  <code>inode</code> ã€‚è¡¨ç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸åŒå¯¹æ–‡ä»¶åè®¿é—®åŒæ ·çš„å†…å®¹ï¼›å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œä¿®æ”¹å°†æ”¾æ˜ åˆ°æ‰€æœ‰æ–‡ä»¶ï¼›åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ä¸å½±å“å¦ä¸€ä¸ªæ–‡ä»¶å¯¹è®¿é—®ã€‚è¿™ç§æœºåˆ¶å°±è¢«ç§°ä¸º &quot;ç¡¬é“¾æ¥&quot;</p>
<p>ç¡¬é“¾æ¥çš„åˆ›å»º å¯ä»¥ç›´æ¥ä½¿ç”¨  <code>linux</code>  å‘½ä»¤  <code>ln source target</code>  æ¥åˆ›å»ºç¡¬é“¾æ¥ï¼ˆæ³¨æ„ï¼š <code>source</code>  å·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œtarget æ˜¯å°†è¦å»ºç«‹çš„é“¾æ¥ï¼‰</p>
<p><img data-src="/images/Snipaste_2024-05-29_14-14-11.png" alt="ç¡¬é“¾æ¥" /></p>
<h6 id="åˆ›å»ºé“¾æ¥"><a class="anchor" href="#åˆ›å»ºé“¾æ¥">#</a> åˆ›å»ºé“¾æ¥</h6>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">linkSync</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span> <span class="token string">'./index2.txt'</span><span class="token punctuation">)</span> <span class="token comment">// ç¡¬é“¾æ¥</span></pre></td></tr><tr><td data-num="2"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">symlinkSync</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span> <span class="token string">'./index3.txt'</span> <span class="token punctuation">,</span><span class="token string">"file"</span><span class="token punctuation">)</span> <span class="token comment">// è½¯è¿æ¥</span></pre></td></tr></table></figure><h6 id="ç”¨é€”"><a class="anchor" href="#ç”¨é€”">#</a> ç”¨é€”</h6>
<p><strong>ç¡¬é“¾æ¥çš„ä½œç”¨å’Œç”¨é€”å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ–‡ä»¶å…±äº«ï¼šç¡¬é“¾æ¥å…è®¸å¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸åŒçš„ä½ç½®ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶åå¼•ç”¨ç›¸åŒçš„å†…å®¹ã€‚è¿™æ ·çš„å…±äº«æ–‡ä»¶å¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œå¹¶ä¸”åœ¨å¤šä¸ªä½ç½®å¯¹æ–‡ä»¶çš„ä¿®æ”¹ä¼šåæ˜ åœ¨æ‰€æœ‰å¼•ç”¨æ–‡ä»¶ä¸Šã€‚</li>
<li>æ–‡ä»¶å¤‡ä»½ï¼šé€šè¿‡åˆ›å»ºç¡¬é“¾æ¥ï¼Œå¯ä»¥åœ¨ä¸å¤åˆ¶æ–‡ä»¶çš„æƒ…å†µä¸‹åˆ›å»ºæ–‡ä»¶çš„å¤‡ä»½ã€‚å¦‚æœåŸå§‹æ–‡ä»¶å‘ç”Ÿæ›´æ”¹ï¼Œå¤‡ä»½æ–‡ä»¶ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™æ ·å¯ä»¥èŠ‚çœç£ç›˜ç©ºé—´ï¼Œå¹¶ç¡®ä¿å¤‡ä»½æ–‡ä»¶ä¸åŸå§‹æ–‡ä»¶ä¿æŒåŒæ­¥ã€‚</li>
<li>æ–‡ä»¶é‡å‘½åï¼šé€šè¿‡åˆ›å»ºç¡¬é“¾æ¥ï¼Œå¯ä»¥ä¸ºæ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶åï¼Œè€Œæ— éœ€å¤åˆ¶æˆ–ç§»åŠ¨æ–‡ä»¶ã€‚è¿™å¯¹äºéœ€è¦æ›´æ”¹æ–‡ä»¶åä½†ä¿æŒç›¸åŒå†…å®¹å’Œå±æ€§çš„åœºæ™¯éå¸¸æœ‰ç”¨ã€‚</li>
</ol>
<p><strong>è½¯é“¾æ¥çš„ä¸€äº›ç‰¹ç‚¹å’Œç”¨é€”å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>è½¯é“¾æ¥å¯ä»¥åˆ›å»ºæŒ‡å‘æ–‡ä»¶æˆ–ç›®å½•çš„å¼•ç”¨ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥åœ¨ä¸å¤åˆ¶æˆ–ç§»åŠ¨æ–‡ä»¶çš„æƒ…å†µä¸‹å¼•ç”¨å®ƒä»¬ï¼Œå¹¶åœ¨ä¸åŒä½ç½®ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶åè®¿é—®ç›¸åŒçš„å†…å®¹ã€‚</li>
<li>è½¯é“¾æ¥å¯ä»¥ç”¨äºåˆ›å»ºå¿«æ·æ–¹å¼æˆ–åˆ«åï¼Œä½¿å¾—ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€çŸ­æˆ–æ˜“è®°çš„è·¯å¾„æ¥è®¿é—®å¤æ‚æˆ–æ·±å±‚æ¬¡çš„ç›®å½•ç»“æ„ã€‚</li>
<li>è½¯é“¾æ¥å¯ä»¥ç”¨äºè§£å†³æ–‡ä»¶æˆ–ç›®å½•çš„ä½ç½®å˜åŒ–é—®é¢˜ã€‚å¦‚æœç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•è¢«ç§»åŠ¨æˆ–é‡å‘½åï¼Œåªéœ€æ›´æ–°è½¯é“¾æ¥çš„ç›®æ ‡è·¯å¾„å³å¯ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å¼•ç”¨è¯¥æ–‡ä»¶æˆ–ç›®å½•çš„å…¶ä»–ä»£ç ã€‚</li>
</ol>
<h2 id="cryptoæ¨¡å—"><a class="anchor" href="#cryptoæ¨¡å—">#</a> crypto æ¨¡å—</h2>
<p>crypto æ¨¡å—çš„ç›®çš„æ˜¯ä¸ºäº†æä¾›é€šç”¨çš„ <code>åŠ å¯†å’Œå“ˆå¸Œç®—æ³•</code> ã€‚ç”¨çº¯ JavaScript ä»£ç å®ç°è¿™äº›åŠŸèƒ½ä¸æ˜¯ä¸å¯èƒ½ï¼Œä½†é€Ÿåº¦ä¼šéå¸¸æ…¢ã€‚nodejs ç”¨ C/C++ å®ç°è¿™äº›ç®—æ³•åï¼Œé€šè¿‡ crypto è¿™ä¸ªæ¨¡å—æš´éœ²ä¸º JavaScript æ¥å£ï¼Œè¿™æ ·ç”¨èµ·æ¥æ–¹ä¾¿ï¼Œè¿è¡Œé€Ÿåº¦ä¹Ÿå¿«ã€‚</p>
<p>å¯†ç å­¦æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„ä¸€ä¸ªé‡è¦é¢†åŸŸï¼Œå®ƒæ¶‰åŠåˆ°åŠ å¯†ã€è§£å¯†ã€å“ˆå¸Œå‡½æ•°å’Œæ•°å­—ç­¾åç­‰æŠ€æœ¯ã€‚Node.js æ˜¯ä¸€ä¸ªæµè¡Œçš„æœåŠ¡å™¨ç«¯ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒæä¾›äº†å¼ºå¤§çš„å¯†ç å­¦æ¨¡å—ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾åœ°åœ¨å…¶åº”ç”¨ç¨‹åºä¸­å®ç°å„ç§å¯†ç å­¦åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»å¯†ç å­¦çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æ¢è®¨ Node.js ä¸­å¸¸ç”¨çš„å¯†ç å­¦ APIã€‚</p>
<h4 id="å¯¹ç§°åŠ å¯†"><a class="anchor" href="#å¯¹ç§°åŠ å¯†">#</a> å¯¹ç§°åŠ å¯†</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>jså¤åˆ¶ä»£ç <span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:crypto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// ç”Ÿæˆä¸€ä¸ªéšæœºçš„ 16 å­—èŠ‚çš„åˆå§‹åŒ–å‘é‡ (IV)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> iv <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>crypto<span class="token punctuation">.</span><span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// ç”Ÿæˆä¸€ä¸ªéšæœºçš„ 32 å­—èŠ‚çš„å¯†é’¥</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> key <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// åˆ›å»ºåŠ å¯†å®ä¾‹ï¼Œä½¿ç”¨ AES-256-CBC ç®—æ³•ï¼Œæä¾›å¯†é’¥å’Œåˆå§‹åŒ–å‘é‡</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> cipher <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createCipheriv</span><span class="token punctuation">(</span><span class="token string">"aes-256-cbc"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> iv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// å¯¹è¾“å…¥æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œå¹¶è¾“å‡ºåŠ å¯†ç»“æœçš„åå…­è¿›åˆ¶è¡¨ç¤º</span></pre></td></tr><tr><td data-num="13"></td><td><pre>cipher<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">"å°æ»¡zs"</span><span class="token punctuation">,</span> <span class="token string">"utf-8"</span><span class="token punctuation">,</span> <span class="token string">"hex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> cipher<span class="token punctuation">.</span><span class="token function">final</span><span class="token punctuation">(</span><span class="token string">"hex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// è§£å¯†</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">const</span> de <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createDecipheriv</span><span class="token punctuation">(</span><span class="token string">"aes-256-cbc"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> iv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>de<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token string">"hex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">const</span> decrypted <span class="token operator">=</span> de<span class="token punctuation">.</span><span class="token function">final</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Decrypted:"</span><span class="token punctuation">,</span> decrypted<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>å¯¹ç§°åŠ å¯†æ˜¯ä¸€ç§ç®€å•è€Œå¿«é€Ÿçš„åŠ å¯†æ–¹å¼ï¼Œå®ƒä½¿ç”¨ç›¸åŒçš„å¯†é’¥ï¼ˆç§°ä¸ºå¯¹ç§°å¯†é’¥ï¼‰æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚è¿™æ„å‘³ç€å‘é€è€…å’Œæ¥æ”¶è€…åœ¨åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ä¸­éƒ½ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ã€‚å¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†é€Ÿåº¦å¾ˆå¿«ï¼Œé€‚åˆå¯¹å¤§é‡æ•°æ®è¿›è¡ŒåŠ å¯†å’Œè§£å¯†æ“ä½œã€‚ç„¶è€Œï¼Œå¯¹ç§°å¯†é’¥çš„å®‰å…¨æ€§æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå› ä¸ºéœ€è¦ç¡®ä¿å‘é€è€…å’Œæ¥æ”¶è€…éƒ½å®‰å…¨åœ°å…±äº«å¯†é’¥ï¼Œå¦åˆ™æœ‰é£é™©è¢«æœªæˆæƒçš„äººè·å–å¯†é’¥å¹¶è§£å¯†æ•°æ®ã€‚</p>
<h4 id="éå¯¹ç§°åŠ å¯†"><a class="anchor" href="#éå¯¹ç§°åŠ å¯†">#</a> éå¯¹ç§°åŠ å¯†</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>jså¤åˆ¶ä»£ç <span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:crypto'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// ç”Ÿæˆ RSA å¯†é’¥å¯¹</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> privateKey<span class="token punctuation">,</span> publicKey <span class="token punctuation">&#125;</span> <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">generateKeyPairSync</span><span class="token punctuation">(</span><span class="token string">'rsa'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">modulusLength</span><span class="token operator">:</span> <span class="token number">2048</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// è¦åŠ å¯†çš„æ•°æ®</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">'å°æ»¡zs'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// ä½¿ç”¨å…¬é’¥è¿›è¡ŒåŠ å¯†</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> encrypted <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">publicEncrypt</span><span class="token punctuation">(</span>publicKey<span class="token punctuation">,</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// ä½¿ç”¨ç§é’¥è¿›è¡Œè§£å¯†</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">const</span> decrypted <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">privateDecrypt</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">,</span> encrypted<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>decrypted<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>éå¯¹ç§°åŠ å¯†ä½¿ç”¨ä¸€å¯¹å¯†é’¥ï¼Œåˆ†åˆ«æ˜¯å…¬é’¥å’Œç§é’¥ã€‚å‘é€è€…ä½¿ç”¨æ¥æ”¶è€…çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œè€Œæ¥æ”¶è€…ä½¿ç”¨è‡ªå·±çš„ç§é’¥è¿›è¡Œè§£å¯†ã€‚å…¬é’¥å¯ä»¥è‡ªç”±åˆ†äº«ç»™ä»»ä½•äººï¼Œè€Œç§é’¥å¿…é¡»ä¿å¯†ã€‚éå¯¹ç§°åŠ å¯†ç®—æ³•æä¾›äº†æ›´é«˜çš„å®‰å…¨æ€§ï¼Œå› ä¸ºå³ä½¿å…¬é’¥æ³„éœ²ï¼Œåªæœ‰æŒæœ‰ç§é’¥çš„æ¥æ”¶è€…æ‰èƒ½è§£å¯†æ•°æ®ã€‚ç„¶è€Œï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œä¸é€‚åˆåŠ å¯†å¤§é‡æ•°æ®ã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ¥äº¤æ¢å¯¹ç§°å¯†é’¥ï¼Œç„¶åä½¿ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•æ¥åŠ å¯†å®é™…çš„æ•°æ®ã€‚</p>
<h4 id="å“ˆå¸Œå‡½æ•°"><a class="anchor" href="#å“ˆå¸Œå‡½æ•°">#</a> å“ˆå¸Œå‡½æ•°</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:crypto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// è¦è®¡ç®—å“ˆå¸Œçš„æ•°æ®</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">'123456'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// åˆ›å»ºå“ˆå¸Œå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ MD5 ç®—æ³•</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> hash <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">'md5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// æ›´æ–°å“ˆå¸Œå¯¹è±¡çš„æ•°æ®</span></pre></td></tr><tr><td data-num="7"></td><td><pre>hash<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// è®¡ç®—å“ˆå¸Œå€¼ï¼Œå¹¶ä»¥åå…­è¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼è¾“å‡º</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> hashValue <span class="token operator">=</span> hash<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Text:'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hash:'</span><span class="token punctuation">,</span> hashValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>å“ˆå¸Œå‡½æ•°å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li>å›ºå®šé•¿åº¦è¾“å‡ºï¼šä¸è®ºè¾“å…¥æ•°æ®çš„å¤§å°ï¼Œå“ˆå¸Œå‡½æ•°çš„è¾“å‡ºé•¿åº¦æ˜¯å›ºå®šçš„ã€‚ä¾‹å¦‚ï¼Œå¸¸è§çš„å“ˆå¸Œå‡½æ•°å¦‚ MD5 å’Œ SHA-256 ç”Ÿæˆçš„å“ˆå¸Œå€¼é•¿åº¦åˆ†åˆ«ä¸º 128 ä½å’Œ 256 ä½ã€‚</li>
<li>ä¸å¯é€†æ€§ï¼šå“ˆå¸Œå‡½æ•°æ˜¯å•å‘çš„ï¼Œæ„å‘³ç€ä»å“ˆå¸Œå€¼æ¨å¯¼å‡ºåŸå§‹è¾“å…¥æ•°æ®æ˜¯éå¸¸å›°éš¾çš„ï¼Œå‡ ä¹ä¸å¯èƒ½ã€‚å³ä½¿è¾“å…¥æ•°æ®å‘ç”Ÿå¾®å°çš„å˜åŒ–ï¼Œå…¶å“ˆå¸Œå€¼ä¹Ÿä¼šå®Œå…¨ä¸åŒã€‚</li>
<li>å”¯ä¸€æ€§ï¼šå“ˆå¸Œå‡½æ•°åº”è¯¥å…·æœ‰è¾ƒä½çš„ç¢°æ’æ¦‚ç‡ï¼Œå³ä¸åŒçš„è¾“å…¥æ•°æ®ç”Ÿæˆç›¸åŒçš„å“ˆå¸Œå€¼çš„å¯èƒ½æ€§åº”è¯¥éå¸¸å°ã€‚è¿™æœ‰åŠ©äºç¡®ä¿å“ˆå¸Œå€¼èƒ½å¤Ÿå”¯ä¸€åœ°æ ‡è¯†è¾“å…¥æ•°æ®ã€‚</li>
</ol>
<p>ä½¿ç”¨åœºæ™¯</p>
<ol>
<li>æˆ‘ä»¬å¯ä»¥é¿å…å¯†ç æ˜æ–‡ä¼ è¾“ ä½¿ç”¨ md5 åŠ å¯†æˆ–è€… sha256</li>
<li>éªŒè¯æ–‡ä»¶å®Œæ•´æ€§ï¼Œè¯»å–æ–‡ä»¶å†…å®¹ç”Ÿæˆ md5 å¦‚æœå‰ç«¯ä¸Šä¼ çš„ md5 å’Œåç«¯çš„è¯»å–æ–‡ä»¶å†…éƒ¨çš„ md5 åŒ¹é…è¯´æ˜æ–‡ä»¶æ˜¯å®Œæ•´çš„</li>
</ol>
<h2 id="mdè½¬html"><a class="anchor" href="#mdè½¬html">#</a> md è½¬ html</h2>
<h4 id="å·¥å…·"><a class="anchor" href="#å·¥å…·">#</a> å·¥å…·</h4>
<ul>
<li>ejsï¼šæ¨¡æ¿æ¸²æŸ“åº“ï¼Œä½¿ç”¨ç‰¹å®šè¯­æ³•å¡«å……å†…å®¹ï¼Œè¿›è¡Œæ¨¡æ¿æ¸²æŸ“</li>
<li>markedï¼šç”¨äºå°† Markdown è¯­æ³•è½¬ä¸º HTML</li>
<li>browserSyncï¼šç”¨äºåœ¨æµè§ˆå™¨å®æ—¶é¢„è§ˆå’ŒåŒæ­¥åˆ·æ–°</li>
</ul>
<h4 id="ä½¿ç”¨"><a class="anchor" href="#ä½¿ç”¨">#</a> ä½¿ç”¨</h4>
<p>index.js</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> ejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¼å…¥ ejs åº“ï¼Œç”¨äºæ¸²æŸ“æ¨¡æ¿</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¼å…¥ fs æ¨¡å—ï¼Œç”¨äºæ–‡ä»¶ç³»ç»Ÿæ“ä½œ</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> marked <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'marked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¼å…¥ marked åº“ï¼Œç”¨äºå°† Markdown è½¬æ¢ä¸º HTML</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> readme <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'README.md'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å– README.md æ–‡ä»¶çš„å†…å®¹ï¼Œç›´æ¥ read çš„ç»“æœæ˜¯ buffer ä¸­çš„æ•°æ®ï¼Œé€šè¿‡ toString æ–¹æ³•å˜ä¸ºåŸå§‹å†…å®¹</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> browserSync <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'browser-sync'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¼å…¥ browser-sync åº“ï¼Œç”¨äºå®æ—¶é¢„è§ˆå’ŒåŒæ­¥æµè§ˆå™¨</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">openBrowser</span> <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// åˆ›å»ºæµè§ˆå™¨æœåŠ¡</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">const</span> browser <span class="token operator">=</span> browserSync<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// åˆå§‹åŒ–æµè§ˆå™¨æœåŠ¡ ï¼Œä¼ å…¥ç›®å½•å’Œä¸»é¡µ</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    browser<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token literal-property property">baseDir</span><span class="token operator">:</span> <span class="token string">'./'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> browser</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">//ejs æ¨¡æ¿è¿›è¡Œæ¸²æŸ“ï¼Œä¼ å…¥å˜é‡</span></pre></td></tr><tr><td data-num="19"></td><td><pre>ejs<span class="token punctuation">.</span><span class="token function">renderFile</span><span class="token punctuation">(</span><span class="token string">'template.ejs'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token literal-property property">content</span><span class="token operator">:</span> marked<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>readme<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'markdown to html'</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// å°†æ–‡ä»¶å†…å®¹å†™å…¥åˆ° index.html</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">let</span> writeStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    writeStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    writeStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    writeStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'finish'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">//index.html å†™å…¥å®Œæ¯•ä¹‹åï¼Œæ‰“å¼€æµè§ˆå™¨å®æ—¶é¢„è§ˆ</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token function">openBrowser</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>template.ejs</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>&lt;%= title %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./index.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- å¼•å…¥ css æ ·å¼ --></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    &lt;%- content %></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>index.css</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/* Markdown é€šç”¨æ ·å¼ */</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/* è®¾ç½®å…¨å±€å­—ä½“æ ·å¼ */</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token selector">body</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.6<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">/* è®¾ç½®æ ‡é¢˜æ ·å¼ */</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token selector">h1,h2,h3,h4,h5,h6</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 1.3em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.6em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token selector">h1</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token property">font-size</span><span class="token punctuation">:</span> 2.2em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token selector">h2</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.8em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token selector">h3</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.6em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token selector">h4</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.4em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token selector">h5</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token selector">h6</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token comment">/* è®¾ç½®æ®µè½æ ·å¼ */</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token selector">p</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1.3em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  <span class="token comment">/* è®¾ç½®é“¾æ¥æ ·å¼ */</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  <span class="token selector">a</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> #337ab7<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>  <span class="token selector">a:hover</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>  <span class="token comment">/* è®¾ç½®åˆ—è¡¨æ ·å¼ */</span></pre></td></tr><tr><td data-num="46"></td><td><pre>  <span class="token selector">ul,</pre></td></tr><tr><td data-num="47"></td><td><pre>  ol</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1.3em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token property">padding-left</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>  <span class="token comment">/* è®¾ç½®ä»£ç å—æ ·å¼ */</span></pre></td></tr><tr><td data-num="53"></td><td><pre>  <span class="token selector">pre</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token property">background-color</span><span class="token punctuation">:</span> #f7f7f7<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token property">padding</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>  <span class="token selector">code</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token property">font-family</span><span class="token punctuation">:</span> Consolas<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> Courier<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token property">font-size</span><span class="token punctuation">:</span> 0.9em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token property">background-color</span><span class="token punctuation">:</span> #f7f7f7<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token property">padding</span><span class="token punctuation">:</span> 0.2em 0.4em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>  <span class="token comment">/* è®¾ç½®å¼•ç”¨æ ·å¼ */</span></pre></td></tr><tr><td data-num="67"></td><td><pre>  <span class="token selector">blockquote</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token property">padding-left</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token property">border-left</span><span class="token punctuation">:</span> 4px solid #ddd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> #777<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>  <span class="token comment">/* è®¾ç½®è¡¨æ ¼æ ·å¼ */</span></pre></td></tr><tr><td data-num="74"></td><td><pre>  <span class="token selector">table</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>    <span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1.3em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>  <span class="token selector">table th,</pre></td></tr><tr><td data-num="80"></td><td><pre>  table td</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>    <span class="token property">padding</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>  <span class="token comment">/* æ·»åŠ ä¸€äº›é¢å¤–çš„æ ·å¼ï¼Œå¦‚å›¾ç‰‡å±…ä¸­æ˜¾ç¤º */</span></pre></td></tr><tr><td data-num="85"></td><td><pre>  <span class="token selector">img</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>    <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>    <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>  <span class="token comment">/* è®¾ç½®ä»£ç è¡Œå·æ ·å¼ */</span></pre></td></tr><tr><td data-num="92"></td><td><pre>  <span class="token selector">pre code .line-numbers</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="95"></td><td><pre>    <span class="token property">padding-right</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>    <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="98"></td><td><pre>    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="99"></td><td><pre>    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>    <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>    <span class="token property">margin-right</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="102"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>  <span class="token comment">/* è®¾ç½®ä»£ç è¡Œæ ·å¼ */</span></pre></td></tr><tr><td data-num="104"></td><td><pre>  <span class="token selector">pre code .line</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="105"></td><td><pre>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="106"></td><td><pre>    <span class="token property">padding-left</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="107"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="108"></td><td><pre>  <span class="token comment">/* è®¾ç½®ä»£ç é«˜äº®æ ·å¼ */</span></pre></td></tr><tr><td data-num="109"></td><td><pre>  <span class="token selector">pre code .line.highlighted</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>    <span class="token property">background-color</span><span class="token punctuation">:</span> #f7f7f7<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>  <span class="token comment">/* æ·»åŠ ä¸€äº›å“åº”å¼æ ·å¼ï¼Œé€‚åº”ç§»åŠ¨è®¾å¤‡ */</span></pre></td></tr><tr><td data-num="113"></td><td><pre>  <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 768px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>    <span class="token selector">body</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="116"></td><td><pre>      <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>    <span class="token selector">h1</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 1.8em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="120"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>    <span class="token selector">h2</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="122"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="123"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="124"></td><td><pre>    <span class="token selector">h3</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="125"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 1.3em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="127"></td><td><pre>    <span class="token selector">h4</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="128"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 1.1em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="129"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="130"></td><td><pre>    <span class="token selector">h5</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="131"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="132"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>    <span class="token selector">h6</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="134"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 0.9em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="136"></td><td><pre>    <span class="token selector">table</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="137"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="138"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="139"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="zlibæ¨¡å—"><a class="anchor" href="#zlibæ¨¡å—">#</a> zlib æ¨¡å—</h2>
<h4 id="ä»‹ç»-2"><a class="anchor" href="#ä»‹ç»-2">#</a> ä»‹ç»</h4>
<ul>
<li>Node.js ä¸­ zlib æ¨¡å—ç”¨äºå¯¹æ•°æ®æä¾›å‹ç¼©å’Œè§£å‹ç¼©çš„åŠŸèƒ½ï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºä¸­å‡å°‘æ•°æ®çš„ä¼ è¾“å¤§å°ã€èŠ‚çœå¸¦å®½å’Œæé«˜æ€§èƒ½</li>
<li>è¯¥æ¨¡å—åŒ…å«å„ç§å‹ç¼©ç®—æ³•ï¼ŒåŒ…å« Deflateã€Gzip å’Œ Raw Deflate ç­‰</li>
</ul>
<h4 id="ä½œç”¨"><a class="anchor" href="#ä½œç”¨">#</a> ä½œç”¨</h4>
<ul>
<li>
<p>æ•°æ®å‹ç¼©ï¼Œå‡å°‘æ•°æ®çš„å¤§å°ï¼Œè¿™åœ¨ç½‘ç»œä¼ è¾“å’Œç£ç›˜å­˜å‚¨ä¸­å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥èŠ‚çœå¸¦å®½å’Œå­˜å‚¨ç©ºé—´</p>
</li>
<li>
<p>æ•°æ®è§£å‹ç¼©</p>
</li>
<li>
<p>æµå‹ç¼©ï¼Œzlib æ¨¡å—æ”¯æŒæµå¼çš„æ–¹å¼è¿›è¡Œæ•°æ®çš„å‹ç¼©å’Œè§£å‹ç¼©ï¼Œä½¿å¾—å¯ä»¥å¯¹å¤§å‹æ–‡ä»¶æˆ–è€…ç½‘ç»œæ•°æ®æµè¿›è¡Œé€æ­¥å¤„ç†ï¼Œè€Œä¸éœ€è¦å°†æ•´ä¸ªæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// å‹ç¼©æ–‡ä»¶ï¼ˆä»¥ Gzip ä¸ºä¾‹ï¼‰</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> zlib <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'zlib'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:fs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> readStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'./test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> writeStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'./test.txt.gz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// å°† readStream åˆ©ç”¨ zlib è¿›è¡Œå‹ç¼©ï¼Œpipe åˆ°ä¸‹ä¸€ä¸ªç®¡é“ï¼Œæœ€å pipe åˆ°å†™å…¥æµ</span></pre></td></tr><tr><td data-num="7"></td><td><pre>readStream<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>zlib<span class="token punctuation">.</span><span class="token function">createGzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>writeStream<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// è§£å‹ç¼©æ–‡ä»¶</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> reStr <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'./test.txt.gz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> wrStr <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'./t.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> gunzip <span class="token operator">=</span> zlib<span class="token punctuation">.</span><span class="token function">createGunzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>reStr<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gunzip<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>wrStr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>gunzip<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Gunzip error:'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  reStr<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Input file has been read.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  wrStr<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'finish'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Output file has been written.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="å¯¹æ¯”-2"><a class="anchor" href="#å¯¹æ¯”-2">#</a> å¯¹æ¯”</h4>
<ol>
<li>å‹ç¼©ç®—æ³•ï¼šGzip ä½¿ç”¨çš„æ˜¯ Deflate å‹ç¼©ç®—æ³•ï¼Œè¯¥ç®—æ³•ç»“åˆäº† LZ77 ç®—æ³•å’Œå“ˆå¤«æ›¼ç¼–ç ã€‚LZ77 ç®—æ³•ç”¨äºæ•°æ®çš„é‡å¤å­—ç¬¦ä¸²çš„æ›¿æ¢å’Œå¼•ç”¨ï¼Œè€Œå“ˆå¤«æ›¼ç¼–ç ç”¨äºè¿›ä¸€æ­¥å‹ç¼©æ•°æ®ã€‚</li>
<li>å‹ç¼©æ•ˆç‡ï¼šGzip å‹ç¼©é€šå¸¸å…·æœ‰æ›´é«˜çš„å‹ç¼©ç‡ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†å“ˆå¤«æ›¼ç¼–ç æ¥è¿›ä¸€æ­¥å‹ç¼©æ•°æ®ã€‚å“ˆå¤«æ›¼ç¼–ç æ ¹æ®å­—ç¬¦çš„å‡ºç°é¢‘ç‡ï¼Œå°†è¾ƒå¸¸è§çš„å­—ç¬¦ç”¨è¾ƒçŸ­çš„ç¼–ç è¡¨ç¤ºï¼Œä»è€Œå‡å°æ•°æ®çš„å¤§å°ã€‚</li>
<li>å‹ç¼©é€Ÿåº¦ï¼šç›¸æ¯”äºä»…ä½¿ç”¨ Deflate çš„æ–¹å¼ï¼ŒGzip å‹ç¼©éœ€è¦æ›´å¤šçš„è®¡ç®—å’Œå¤„ç†æ—¶é—´ï¼Œå› ä¸ºå®ƒè¿˜è¦è¿›è¡Œå“ˆå¤«æ›¼ç¼–ç çš„æ­¥éª¤ã€‚å› æ­¤ï¼Œåœ¨å‹ç¼©é€Ÿåº¦æ–¹é¢ï¼ŒDeflate å¯èƒ½æ¯” Gzip æ›´å¿«ã€‚</li>
<li>åº”ç”¨åœºæ™¯ï¼šGzip å‹ç¼©å¸¸ç”¨äºæ–‡ä»¶å‹ç¼©ã€ç½‘ç»œä¼ è¾“å’Œ HTTP å“åº”çš„å†…å®¹ç¼–ç ã€‚å®ƒå¹¿æ³›åº”ç”¨äº Web æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼Œä»¥å‡å°æ–‡ä»¶å¤§å°å’Œæé«˜ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li>
<li>deflate æ˜¯ä¸€ç§è¿‡æ—¶çš„å‹ç¼©æ–¹å¼ï¼Œç°ä»£æµè§ˆå™¨å¯¹å…¶æ”¯æŒå¹¶ä¸å‹å¥½</li>
</ol>
</li>
</ul>
<p><strong>zlib æ¨¡å—å¯ä»¥ç”¨äºå¯¹å‘é€ç½‘ç»œè¯·æ±‚è¿”å›çš„æ•°æ®è¿›è¡Œå‹ç¼©ï¼ŒèŠ‚çœå¸¦å®½å’Œä¼ è¾“é€Ÿç‡ã€‚</strong></p>
<h4 id="brotli"><a class="anchor" href="#brotli">#</a> brotli</h4>
<ul>
<li>é’ˆå¯¹å¸¸è§çš„ Web èµ„æºå†…å®¹ï¼ŒBrotli çš„æ€§èƒ½æ¯” Gzip æé«˜äº† 17-25%ï¼›</li>
<li>å½“ Brotli å‹ç¼©çº§åˆ«ä¸º 1 æ—¶ï¼Œå‹ç¼©ç‡æ¯” Gzip çš„æœ€é«˜çº§åˆ« 9 è¿˜è¦é«˜ï¼›</li>
<li>åœ¨å¤„ç†ä¸åŒçš„ HTML æ–‡æ¡£æ—¶ï¼ŒBrotli ä¾ç„¶èƒ½æä¾›éå¸¸é«˜çš„å‹ç¼©ç‡ã€‚</li>
<li>é™¤äº† IE å’Œ Opera Mini ä¹‹å¤–ï¼Œå‡ ä¹æ‰€æœ‰ä¸»æµæµè§ˆå™¨éƒ½å·²æ”¯æŒ Brotli ç®—æ³•ã€‚</li>
<li>å°½ç®¡ Brotli åœ¨å‹ç¼©æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†éšç€å‹ç¼©çº§åˆ«çš„æé«˜ï¼ŒBrotli å‹ç¼©æ‰€éœ€çš„æ—¶é—´ä¹Ÿä¼šç›¸åº”å¢åŠ ã€‚æ¢å¥è¯è¯´ï¼ŒBrotli éœ€è¦æ›´å¤šçš„è®¡ç®—èƒ½åŠ›ï¼Œè¿™å¯èƒ½æ„å‘³ç€æ›´é«˜çš„è®¾å¤‡å’Œè½¯ä»¶æˆæœ¬ã€‚</li>
<li>Brotli è¦æ±‚æµè§ˆå™¨å¿…é¡»æ”¯æŒ HTTPS æ‰èƒ½ä½¿ç”¨ã€‚</li>
</ul>
<h2 id="httpæ¨¡å—"><a class="anchor" href="#httpæ¨¡å—">#</a> http æ¨¡å—</h2>
<h4 id="ä»‹ç»-3"><a class="anchor" href="#ä»‹ç»-3">#</a> ä»‹ç»</h4>
<ul>
<li>http æ¨¡å—æ˜¯ Node.js ä¸­ç”¨äºåˆ›å»ºå’Œå¤„ç† HTTP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„æ ¸å¿ƒæ¨¡å—</li>
<li>http æ¨¡å—ä½¿å¾—åŸºäº HTTP åè®®çš„åº”ç”¨ç¨‹åºæ›´åŠ ç®€å•å’Œçµæ´»</li>
<li>http æ¨¡å—ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºä»£ç†æœåŠ¡å™¨ï¼Œç”¨äºè½¬å‘å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ°å…¶ä»–æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨å¯ä»¥ç”¨äºè´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€å®‰å…¨è¿‡æ»¤æˆ–è·¨åŸŸè¯·æ±‚ç­‰åœºæ™¯ã€‚é€šè¿‡åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šæ·»åŠ é€»è¾‘ï¼Œå¯ä»¥å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œä¿®æ”¹ã€è®°å½•æˆ–è¿‡æ»¤ã€‚</li>
<li>http æ¨¡å—ä¹Ÿå¯ä»¥åˆ›å»ºæ–‡ä»¶æœåŠ¡å™¨ï¼Œç”¨äºæä¾›é™æ€æ–‡ä»¶ï¼Œé€šè¿‡è¯»å–æ–‡ä»¶å¹¶å°†å…¶ä½œä¸ºå“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
</ul>
<h4 id="ä½¿ç”¨-2"><a class="anchor" href="#ä½¿ç”¨-2">#</a> ä½¿ç”¨</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> httpServer <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'POST'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'GET'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>httpServer<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æœåŠ¡å™¨å¯åŠ¨ï¼Œç«¯å£ï¼š98'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="urlæ¨¡å—"><a class="anchor" href="#urlæ¨¡å—">#</a> url æ¨¡å—</h4>
<p>å¯ä»¥é€šè¿‡ url æ¨¡å—æ¥è§£æ req çš„è¯·æ±‚è·¯å¾„ï¼Œæ¥è¿›ä¸€æ­¥ç²¾ç»†åŒ–å“åº”å†…å®¹ã€‚</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼•å…¥ http æ¨¡å—</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼•å…¥ url æ¨¡å—</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// åˆ›å»º HTTP æœåŠ¡å™¨ï¼Œå¹¶ä¼ å…¥å›è°ƒå‡½æ•°ç”¨äºå¤„ç†è¯·æ±‚å’Œç”Ÿæˆå“åº”</span></pre></td></tr><tr><td data-num="4"></td><td><pre>http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> pathname<span class="token punctuation">,</span> query <span class="token punctuation">&#125;</span> <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è§£æè¯·æ±‚çš„ URLï¼Œè·å–è·¯å¾„å’ŒæŸ¥è¯¢å‚æ•°</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'POST'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æ£€æŸ¥è¯·æ±‚æ–¹æ³•æ˜¯å¦ä¸º POST</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">'/post'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æ£€æŸ¥è·¯å¾„æ˜¯å¦ä¸º '/post'</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        data <span class="token operator">+=</span> chunk<span class="token punctuation">;</span> <span class="token comment">// è·å– POST è¯·æ±‚çš„æ•°æ®</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®å“åº”å¤´çš„ Content-Type ä¸º 'application/json'</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®å“åº”çŠ¶æ€ç ä¸º 200</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†è·å–åˆ°çš„æ•°æ®ä½œä¸ºå“åº”ä½“è¿”å›</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®å“åº”å¤´çš„ Content-Type ä¸º 'application/json'</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®å“åº”çŠ¶æ€ç ä¸º 404</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'Not Found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å› 'Not Found' ä½œä¸ºå“åº”ä½“</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æ£€æŸ¥è¯·æ±‚æ–¹æ³•æ˜¯å¦ä¸º GET</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">'/get'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æ£€æŸ¥è·¯å¾„æ˜¯å¦ä¸º '/get'</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰“å°æŸ¥è¯¢å‚æ•°ä¸­çš„é”®åä¸º 'a' çš„å€¼</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'get success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å› 'get success' ä½œä¸ºå“åº”ä½“</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">98</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is running on port 98'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰“å°æœåŠ¡å™¨å¯åŠ¨çš„ä¿¡æ¯</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="åŠ¨é™åˆ†ç¦»"><a class="anchor" href="#åŠ¨é™åˆ†ç¦»">#</a> åŠ¨é™åˆ†ç¦»</h2>
<ul>
<li>åŠ¨é™åˆ†ç¦»æ˜¯ Web æœåŠ¡å™¨æ¶æ„ä¸­å¸¸ç”¨çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºæé«˜ç½‘ç«™çš„æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§</li>
<li>åŸç†å°±æ˜¯å°†é™æ€èµ„æºçš„è¯·æ±‚å’ŒåŠ¨æ€å†…å®¹åˆ†å¼€å¤„ç†ï¼ˆé€šè¿‡ urlï¼Œä¾‹å¦‚åŠ ä¸Š static åç¼€è¡¨ç¤ºé™æ€ï¼‰</li>
<li>å¥½å¤„åœ¨äºï¼š
<ul>
<li>æ€§èƒ½ä¼˜åŒ–ï¼ˆé™æ€èµ„æºå†…å®¹ä¸å˜ï¼Œå¯ä»¥åˆ©ç”¨ç¼“å­˜ï¼‰</li>
<li>è´Ÿè½½å‡è¡¡ï¼ˆåŠ¨æ€å†…å®¹è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨æˆ–æœåŠ¡ä¸Šï¼Œå¹³è¡¡æœåŠ¡å™¨çš„è´Ÿè½½ï¼‰</li>
<li>å®‰å…¨æ€§ï¼ˆåŠ¨æ€å†…å®¹å¾€å¾€æ¶‰åŠæ•æ„Ÿä¿¡æ¯ï¼ŒåŠ¨é™åˆ†ç¦»å¯ä»¥æ›´å¥½åœ°ç®¡ç†è®¿é—®æ§åˆ¶å’Œå®‰å…¨ç­–ç•¥ï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">'node:http'</span> <span class="token comment">// å¯¼å…¥ http æ¨¡å—</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">'node:fs'</span> <span class="token comment">// å¯¼å…¥æ–‡ä»¶ç³»ç»Ÿæ¨¡å—</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'node:path'</span> <span class="token comment">// å¯¼å…¥è·¯å¾„å¤„ç†æ¨¡å—</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> mime <span class="token keyword">from</span> <span class="token string">'mime'</span> <span class="token comment">// å¯¼å…¥ mime æ¨¡å—</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> url<span class="token punctuation">,</span> method <span class="token punctuation">&#125;</span> <span class="token operator">=</span> req</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// å¤„ç†é™æ€èµ„æº</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'GET'</span> <span class="token operator">&amp;&amp;</span> url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/static'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">const</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span> <span class="token comment">// è·å–æ–‡ä»¶è·¯å¾„</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">const</span> mimeType <span class="token operator">=</span> mime<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span> <span class="token comment">// è·å–æ–‡ä»¶çš„ MIME ç±»å‹</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mimeType<span class="token punctuation">)</span> <span class="token comment">// æ‰“å° MIME ç±»å‹</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token comment">// è¯»å–æ–‡ä»¶å†…å®¹</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>                res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                    <span class="token string-property property">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"text/plain"</span> <span class="token comment">// è®¾ç½®å“åº”å¤´ä¸ºçº¯æ–‡æœ¬ç±»å‹</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'not found'</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å› 404 Not Found</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                    <span class="token string-property property">"Content-Type"</span><span class="token operator">:</span> mimeType<span class="token punctuation">,</span> <span class="token comment">// è®¾ç½®å“åº”å¤´ä¸ºå¯¹åº”çš„ MIME ç±»å‹</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                    <span class="token string-property property">"Cache-Control"</span><span class="token operator">:</span> <span class="token string">"public, max-age=3600"</span> <span class="token comment">// è®¾ç½®ç¼“å­˜æ§åˆ¶å¤´</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// è¿”å›æ–‡ä»¶å†…å®¹</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// å¤„ç†åŠ¨æ€èµ„æº</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">//... å¤„ç†åŠ¨æ€èµ„æºçš„é€»è¾‘</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span> <span class="token comment">// ç›‘å¬ç«¯å£ 80</span></pre></td></tr></table></figure><h2 id="é‚®ä»¶æœåŠ¡"><a class="anchor" href="#é‚®ä»¶æœåŠ¡">#</a> é‚®ä»¶æœåŠ¡</h2>
<p>é‚®ä»¶æœåŠ¡å¯ä»¥ç”¨äºç»™æˆå‘˜å‘é€é‚®ä»¶ã€é€šçŸ¥æˆå‘˜ä¿¡æ¯</p>
<p><strong>å·¥å…·ï¼š</strong></p>
<ul>
<li>js-yamlï¼šç”¨äºå°† yaml è½¬ä¸º js å¯¹è±¡</li>
<li>nodemailerï¼šç”¨äºåˆ›å»ºé‚®ä»¶æœåŠ¡</li>
</ul>
<p><strong>ä½¿ç”¨ï¼š</strong></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//node.js å‘é€é‚®ä»¶</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> yamlTrans <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'js-yaml'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> nodemailer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'nodemailer'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> yamlCode <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./data.yaml'</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> dataObj <span class="token operator">=</span> yamlTrans<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>yamlCode<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//nodemailer.createTransport åˆ›å»º transPort æœåŠ¡ï¼Œä¼ å…¥ auth ä¿¡æ¯å’Œé…ç½®é¡¹</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// æˆæƒç éœ€è¦åˆ°å¯¹åº”å®˜ç½‘ç”Ÿæˆ</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> transPort <span class="token operator">=</span> nodemailer<span class="token punctuation">.</span><span class="token function">createTransport</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token literal-property property">serviece</span><span class="token operator">:</span><span class="token string">'qq'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token number">587</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">host</span><span class="token operator">:</span><span class="token string">'smtp.qq.cmo'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token literal-property property">secure</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">auth</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token literal-property property">pass</span><span class="token operator">:</span>dataObj<span class="token punctuation">.</span>pass<span class="token punctuation">,</span> <span class="token comment">// æˆæƒç éœ€è¦å»å®˜ç½‘ç”³è¯·ç”Ÿæˆ</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token literal-property property">user</span><span class="token operator">:</span>dataObj<span class="token punctuation">.</span>user</pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">//sendMail æ–¹æ³•å‘é€é‚®ä»¶ï¼Œä¼ å…¥æ¥æ”¶æ–¹ä¿¡æ¯</span></pre></td></tr><tr><td data-num="20"></td><td><pre>transPort<span class="token punctuation">.</span><span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token literal-property property">to</span><span class="token operator">:</span> send<span class="token punctuation">.</span>qq<span class="token punctuation">.</span>com<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token literal-property property">from</span><span class="token operator">:</span> dataObj<span class="token punctuation">.</span>user<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">'é‚®ä»¶æ ‡é¢˜'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'é‚®ä»¶å†…å®¹'</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure>
      <div class="tags">
          <a href="/tags/node-js/" rel="tag"><i class="ic i-tag"></i> node.js</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">æ›´æ–°äº</span>
    <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-05-30 11:10:39" itemprop="dateModified" datetime="2024-05-30T11:10:39+08:00">2024-05-30</time>
  </span>
  <span id="2024/05/24/node/" class="item leancloud_visitors" data-flag-title="Nodeå­¦ä¹ ç¬”è®°" title="é˜…è¯»æ¬¡æ•°">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">é˜…è¯»æ¬¡æ•°</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">æ¬¡</span>
  </span>
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> èµèµ</button>
  <p>è¯·æˆ‘å–[èŒ¶]~(ï¿£â–½ï¿£)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="/images/wechatpay.png" alt="dmq å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
      
      <div>
        <img data-src="/images/alipay.png" alt="dmq æ”¯ä»˜å®">
        <p>æ”¯ä»˜å®</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>dmq <i class="ic i-at"><em>@</em></i>æœæ˜æ¸…çš„ä¸ªäººåšå®¢
  </li>
  <li class="link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://dmqweb.cn/2024/05/24/node/" title="Nodeå­¦ä¹ ç¬”è®°">https://dmqweb.cn/2024/05/24/node/</a>
  </li>
  <li class="license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2024/05/24/%E5%BE%AE%E5%89%8D%E7%AB%AF/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s3.uuu.ovh&#x2F;imgs&#x2F;2024&#x2F;04&#x2F;05&#x2F;921096d78816dacc.jpg" title="å¾®å‰ç«¯">
  <span class="type">ä¸Šä¸€ç¯‡</span>
  <span class="category"><i class="ic i-flag"></i> å¾®å‰ç«¯</span>
  <h3>å¾®å‰ç«¯</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2024/05/27/OSI%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s3.uuu.ovh&#x2F;imgs&#x2F;2024&#x2F;04&#x2F;28&#x2F;a34792f58e340f69.webp" title="OSIä¸ƒå±‚ç½‘ç»œæ¨¡å‹">
  <span class="type">ä¸‹ä¸€ç¯‡</span>
  <span class="category"><i class="ic i-flag"></i> OSIä¸ƒå±‚ç½‘ç»œæ¨¡å‹</span>
  <h3>OSIä¸ƒå±‚ç½‘ç»œæ¨¡å‹</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#nodejs"><span class="toc-number">1.</span> <span class="toc-text"> Node.js</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text"> ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#npm"><span class="toc-number">1.2.</span> <span class="toc-text"> npm</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#npm-install"><span class="toc-number">1.2.0.1.</span> <span class="toc-text"> npm install</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#npmrc%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.0.2.</span> <span class="toc-text"> .npmrc æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#package-lockjson"><span class="toc-number">1.2.0.3.</span> <span class="toc-text"> package-lock.json</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#npm-run"><span class="toc-number">1.2.0.4.</span> <span class="toc-text"> npm run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#npm-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.2.0.5.</span> <span class="toc-text"> npm ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#npx"><span class="toc-number">1.2.0.6.</span> <span class="toc-text"> npx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#npm%E7%A7%81%E6%9C%8D"><span class="toc-number">1.2.0.7.</span> <span class="toc-text"> npm ç§æœ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#node%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">1.3.</span> <span class="toc-text"> Node æ¨¡å—åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#commonjs"><span class="toc-number">1.3.0.1.</span> <span class="toc-text"> CommonJS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#esm"><span class="toc-number">1.3.0.2.</span> <span class="toc-text"> ESM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94"><span class="toc-number">1.3.0.3.</span> <span class="toc-text"> å¯¹æ¯”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#require%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.3.0.4.</span> <span class="toc-text"> require æ‰§è¡Œé¡ºåº</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">1.4.</span> <span class="toc-text"> å…¨å±€å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#global"><span class="toc-number">1.4.0.1.</span> <span class="toc-text"> global</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#__dirname"><span class="toc-number">1.4.0.2.</span> <span class="toc-text"> __dirname</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#__filename"><span class="toc-number">1.4.0.3.</span> <span class="toc-text"> __filename</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#require"><span class="toc-number">1.4.0.4.</span> <span class="toc-text"> require</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#module"><span class="toc-number">1.4.0.5.</span> <span class="toc-text"> module</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#process"><span class="toc-number">1.4.0.6.</span> <span class="toc-text"> process</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#buffer%E7%B1%BB"><span class="toc-number">1.4.0.7.</span> <span class="toc-text"> Buffer ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dom-bom"><span class="toc-number">1.4.0.8.</span> <span class="toc-text"> DOMã€BOM</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#path%E6%A8%A1%E5%9D%97"><span class="toc-number">1.5.</span> <span class="toc-text"> path æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#os%E6%A8%A1%E5%9D%97"><span class="toc-number">1.6.</span> <span class="toc-text"> os æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#process%E6%A8%A1%E5%9D%97"><span class="toc-number">1.7.</span> <span class="toc-text"> process æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#child_process%E6%A8%A1%E5%9D%97"><span class="toc-number">1.8.</span> <span class="toc-text"> child_process æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%90%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.8.0.1.</span> <span class="toc-text"> åˆ›å»ºå­è¿›ç¨‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ffmpeg%E5%B7%A5%E5%85%B7"><span class="toc-number">1.9.</span> <span class="toc-text"> ffmpeg å·¥å…·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#events%E6%A8%A1%E5%9D%97"><span class="toc-number">1.10.</span> <span class="toc-text"> events æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sse"><span class="toc-number">1.10.0.1.</span> <span class="toc-text"> SSE</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#util%E6%A8%A1%E5%9D%97"><span class="toc-number">1.11.</span> <span class="toc-text"> util æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pngquant%E5%B7%A5%E5%85%B7"><span class="toc-number">1.12.</span> <span class="toc-text"> pngquant å·¥å…·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fs%E6%A8%A1%E5%9D%97"><span class="toc-number">1.13.</span> <span class="toc-text"> fs æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%BC%82%E6%AD%A5"><span class="toc-number">1.13.0.1.</span> <span class="toc-text"> åŒæ­¥ä¸å¼‚æ­¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#api"><span class="toc-number">1.13.0.2.</span> <span class="toc-text"> api</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fspromises"><span class="toc-number">1.13.0.3.</span> <span class="toc-text"> fs&#x2F;promises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E7%A0%81"><span class="toc-number">1.13.0.4.</span> <span class="toc-text"> æºç </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#writefilesync"><span class="toc-number">1.13.0.5.</span> <span class="toc-text"> writeFileSync</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E5%86%99%E6%B5%81"><span class="toc-number">1.13.0.6.</span> <span class="toc-text"> å¯å†™æµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AC%E9%93%BE%E6%8E%A5-%E8%BD%AF%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.13.0.7.</span> <span class="toc-text"> ç¡¬é“¾æ¥ã€è½¯è¿æ¥</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#inode"><span class="toc-number">1.13.0.7.0.1.</span> <span class="toc-text"> inode</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BD%AF%E9%93%BE%E6%8E%A5"><span class="toc-number">1.13.0.7.0.2.</span> <span class="toc-text"> è½¯é“¾æ¥</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%A1%AC%E9%93%BE%E6%8E%A5"><span class="toc-number">1.13.0.7.0.3.</span> <span class="toc-text"> ç¡¬é“¾æ¥</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%93%BE%E6%8E%A5"><span class="toc-number">1.13.0.7.0.4.</span> <span class="toc-text"> åˆ›å»ºé“¾æ¥</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E9%80%94"><span class="toc-number">1.13.0.7.0.5.</span> <span class="toc-text"> ç”¨é€”</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#crypto%E6%A8%A1%E5%9D%97"><span class="toc-number">1.14.</span> <span class="toc-text"> crypto æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"><span class="toc-number">1.14.0.1.</span> <span class="toc-text"> å¯¹ç§°åŠ å¯†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"><span class="toc-number">1.14.0.2.</span> <span class="toc-text"> éå¯¹ç§°åŠ å¯†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%88%E5%B8%8C%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.0.3.</span> <span class="toc-text"> å“ˆå¸Œå‡½æ•°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#md%E8%BD%AChtml"><span class="toc-number">1.15.</span> <span class="toc-text"> md è½¬ html</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7"><span class="toc-number">1.15.0.1.</span> <span class="toc-text"> å·¥å…·</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.15.0.2.</span> <span class="toc-text"> ä½¿ç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#zlib%E6%A8%A1%E5%9D%97"><span class="toc-number">1.16.</span> <span class="toc-text"> zlib æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-2"><span class="toc-number">1.16.0.1.</span> <span class="toc-text"> ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">1.16.0.2.</span> <span class="toc-text"> ä½œç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94-2"><span class="toc-number">1.16.0.3.</span> <span class="toc-text"> å¯¹æ¯”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#brotli"><span class="toc-number">1.16.0.4.</span> <span class="toc-text"> brotli</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http%E6%A8%A1%E5%9D%97"><span class="toc-number">1.17.</span> <span class="toc-text"> http æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-3"><span class="toc-number">1.17.0.1.</span> <span class="toc-text"> ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-2"><span class="toc-number">1.17.0.2.</span> <span class="toc-text"> ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#url%E6%A8%A1%E5%9D%97"><span class="toc-number">1.17.0.3.</span> <span class="toc-text"> url æ¨¡å—</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB"><span class="toc-number">1.18.</span> <span class="toc-text"> åŠ¨é™åˆ†ç¦»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.19.</span> <span class="toc-text"> é‚®ä»¶æœåŠ¡</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« ">
        <ul>
          <li class="active"><a href="/2024/05/24/node/" rel="bookmark" title="Nodeå­¦ä¹ ç¬”è®°">Nodeå­¦ä¹ ç¬”è®°</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="dmq"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">dmq</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">74</span>
        <span class="name">æ–‡ç« </span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">56</span>
        <span class="name">åˆ†ç±»</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">96</span>
        <span class="name">æ ‡ç­¾</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RtcTA/dGFiPXJlcG9zaXRvcmllcw==" title="https:&#x2F;&#x2F;github.com&#x2F;dmq0?tab&#x3D;repositories"><i class="ic i-github"></i></span>
      <span class="exturl item npm" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL35kbXEwMDA=" title="https:&#x2F;&#x2F;www.npmjs.com&#x2F;~dmq000"><i class="ic i-file"></i></span>
      <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9kLTg4LTYxLTgz" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;d-88-61-83"><i class="ic i-zhihu"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTgwMjc4OTk0OTE=" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;8027899491"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vdS83NjI1OTAxNzE3" title="https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;7625901717"><i class="ic i-weibo"></i></span>
      <span class="exturl item email" data-url="bWFpbHRvOjMyNjc4MDc1MTRAcXEuY29t" title="mailto:3267807514@qq.com"><i class="ic i-envelope"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>ä»‹ç»</a>
  </li>

    
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>å½’æ¡£</a>
  </li>

    
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>åˆ†ç±»</a>
  </li>

    
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a>
  </li>

    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>å‹é“¾</a>
  </li>

    
  <li class="item">
    <a href="/links/" rel="section"><i class="ic i-magic"></i>å·¥å…·</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2024/05/24/%E5%BE%AE%E5%89%8D%E7%AB%AF/" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2024/05/27/OSI%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>éšæœºæ–‡ç« </h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/vue/" title="åˆ†ç±»äº vue">vue</a>
</div>

    <span><a href="/2023/09/02/vue3%E6%BA%90%E7%A0%81%E4%BD%8D%E8%BF%90%E7%AE%97/" title="vue3æºç ä¸­çš„ä½è¿ç®—">vue3æºç ä¸­çš„ä½è¿ç®—</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" title="åˆ†ç±»äº æ•°æ®åº“">æ•°æ®åº“</a>
</div>

    <span><a href="/2023/12/02/%E6%95%B0%E6%8D%AE%E5%BA%93/" title="æ•°æ®åº“">æ•°æ®åº“</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/json-server/" title="åˆ†ç±»äº json-server">json-server</a>
</div>

    <span><a href="/2023/01/09/json-server%E6%95%99%E7%A8%8B/" title="json-server">json-server</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/eslint/" title="åˆ†ç±»äº eslint">eslint</a>
</div>

    <span><a href="/2024/05/17/eslint%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="eslintæºç ">eslintæºç </a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Travis%E5%92%8CDocker/" title="åˆ†ç±»äº Traviså’ŒDocker">Traviså’ŒDocker</a>
</div>

    <span><a href="/2023/12/02/Travis%20CI%E5%92%8CDocker%E7%9A%84%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" title="Traviså’ŒDockerçš„æŒç»­é›†æˆ">Traviså’ŒDockerçš„æŒç»­é›†æˆ</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/JS/" title="åˆ†ç±»äº JS">JS</a>
</div>

    <span><a href="/2024/05/08/%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD/" title="å‡½æ•°é‡è½½">å‡½æ•°é‡è½½</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/git/" title="åˆ†ç±»äº git">git</a>
</div>

    <span><a href="/2023/04/02/git%E5%92%8Cgithub/" title="gitä¸github">gitä¸github</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%9D%82%E8%AE%B0/" title="åˆ†ç±»äº æ‚è®°">æ‚è®°</a>
<i class="ic i-angle-right"></i>
<a href="/categories/%E6%9D%82%E8%AE%B0/%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/" title="åˆ†ç±»äº å·¥å…·å‡½æ•°">å·¥å…·å‡½æ•°</a>
</div>

    <span><a href="/2023/06/02/learn/" title="æ‚è®°ä¸å·¥å…·åº“å‡½æ•°">æ‚è®°ä¸å·¥å…·åº“å‡½æ•°</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/JS/" title="åˆ†ç±»äº JS">JS</a>
</div>

    <span><a href="/2023/12/08/NaN/" title="NaNå†å²é—ç•™é—®é¢˜">NaNå†å²é—ç•™é—®é¢˜</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/JS/" title="åˆ†ç±»äº JS">JS</a>
</div>

    <span><a href="/2023/12/02/%E9%9A%90%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" title="JSç±»å‹è½¬æ¢">JSç±»å‹è½¬æ¢</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>æœ€æ–°è¯„è®º</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 â€“ 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">dmq @ Web blog</span>
  </div>
  <div class="powered-by">
    åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2024/05/24/node/',
    favicon: {
      show: "ç§‘æŠ€å¼•é¢†æœªæ¥",
      hide: "æ¬¢è¿ä¸æˆ‘äº¤æµ"
    },
    search : {
      placeholder: "æ–‡ç« æœç´¢",
      empty: "å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",
      stats: "${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"
    },
    valine: true,fancybox: true,
    copyright: 'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//gcore.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>


  <script data-pjax>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9ba187659e850a6910681214f0faa16b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


</body>
</html>
