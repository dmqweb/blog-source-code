



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="杜明清的个人博客" href="https://dmqweb.cn/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="杜明清的个人博客" href="https://dmqweb.cn/atom.xml" />
<link rel="alternate" type="application/json" title="杜明清的个人博客" href="https://dmqweb.cn/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="计算机组成原理,缓存,内存,CPU" />


<link rel="canonical" href="https://dmqweb.cn/2024/01/02/%E7%BC%93%E5%AD%98%E3%80%81%E5%86%85%E5%AD%98%E3%80%81CPU%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A7%A3%E6%9E%90%E7%AC%94%E8%AE%B0/">



  <title>
计组知识点 - 计算机组成原理 |
Web blog = 杜明清的个人博客 = 👻欢迎一起交流学习👻</title>
  <meta name="keywords" content="前端开发, HTML, CSS, JavaScript, 博客">
  <meta name="description" content="探索前端开发的无限可能。本博客提供最新的前端知识库，以及实用的开发技巧和最佳实践。加入我们的社区，共同成长。">
<meta name="generator" content="Hexo 6.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">计组知识点
  </h1>
  
<div class="meta">
  <span class="item" title="创建时间：2024-01-02 02:24:04">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">发表于</span>
    <time itemprop="dateCreated datePublished" datetime="2024-01-02T02:24:04+08:00">2024-01-02</time>
  </span>
  <span class="item" title="本文字数">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">本文字数</span>
    <span>8.1k</span>
    <span class="text">字</span>
  </span>
  <span class="item" title="阅读时长">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">阅读时长</span>
    <span>7 分钟</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Web blog</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/12/61baca9d80b5756d.jpg"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/06/a2c97e7bd0c6ecd6.webp"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/07/517ddd40a038fa1b.jpg"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/28/52565b5ee960b9b5.webp"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/03/29/4e134f025ae53f2b.jpg"></li>
          <li class="item" data-background-image="https://s3.uuu.ovh/imgs/2024/04/12/3368de466b008234.webp"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">首页</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="item" rel="index" title="分类于 计算机组成原理"><span itemprop="name">计算机组成原理</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://dmqweb.cn/2024/01/02/%E7%BC%93%E5%AD%98%E3%80%81%E5%86%85%E5%AD%98%E3%80%81CPU%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A7%A3%E6%9E%90%E7%AC%94%E8%AE%B0/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="dmq">
    <meta itemprop="description" content="👻欢迎一起交流学习👻, ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="杜明清的个人博客">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="一-缓存"><a class="anchor" href="#一-缓存">#</a> 一、缓存</h1>
<h2 id="1-定义"><a class="anchor" href="#1-定义">#</a> 1、定义</h2>
<blockquote>
<blockquote>
<h6 id="凡是为于速度相差较大的两种硬件之间用于协调两者数据传输速度差异的结构均可称之为cache-电脑高速缓冲存储器"><a class="anchor" href="#凡是为于速度相差较大的两种硬件之间用于协调两者数据传输速度差异的结构均可称之为cache-电脑高速缓冲存储器">#</a> <strong>凡是为于速度相差较大的两种硬件之间，用于协调两者数据传输速度差异的结构，均可称之为 <code>Cache</code> </strong> (电脑高速缓冲存储器)</h6>
</blockquote>
<ul>
<li>缓存的存在是为了解决 CPU 和内存之间存取速度的差异的</li>
<li>内存中被 CPU 访问最频繁的数据和指令会被复制到 CPU 的缓存中（这其中的 “频繁” 是由专门的算法来定义的</li>
<li>这样 CPU 就不用去很慢的内存中读取需要的数据和指令了</li>
</ul>
</blockquote>
<h2 id="2-被扩充概念"><a class="anchor" href="#2-被扩充概念">#</a> 2、被扩充概念</h2>
<blockquote>
<h6 id="如今缓存的概念已被扩充"><a class="anchor" href="#如今缓存的概念已被扩充">#</a> 如今缓存的概念已被扩充</h6>
<ul>
<li><strong>CPU</strong> 与 <strong>主内存</strong> 之间 (就我们常说的缓存)</li>
<li><strong>内存</strong> 与 <strong>硬盘</strong> 之间 (磁盘缓存)</li>
<li><strong>硬盘</strong> 与 <strong>网络</strong>之间 (称为<strong> Internet</strong> 临时文件夹或网络内容缓存等)</li>
</ul>
</blockquote>
<h2 id="3-缓存的作用"><a class="anchor" href="#3-缓存的作用">#</a> 3、缓存的作用</h2>
<blockquote>
<h6 id="用于协调两者数据传输速度差异的结构"><a class="anchor" href="#用于协调两者数据传输速度差异的结构">#</a> 用于协调两者数据传输速度差异的结构</h6>
<p>实例:</p>
<ul>
<li>缓存 是 CPU 的一部分</li>
<li>缓存 是硬盘控制器上的一块内存芯片</li>
<li>硬盘上的缓存：当硬盘存取零碎数据时需要不断地在硬盘与内存之间交换数据</li>
</ul>
</blockquote>
<h1 id="二-内存"><a class="anchor" href="#二-内存">#</a> 二、内存</h1>
<h2 id="1-什么是内存"><a class="anchor" href="#1-什么是内存">#</a> 1、什么是内存？</h2>
<blockquote>
<p><strong>在计算机的组成结构中，有一个很重要的部分，就是存储器，那么他的具体概念是什么呢？</strong></p>
<ol>
<li>存储器是用来存储程序和数据的部件，对于计算机来说，有了存储器才有记忆功能，才能保证正常工作</li>
<li>存储器的种类很多，按照其用途可以分为  <code>主存储器</code>  和  <code>辅助存储器</code></li>
</ol>
<ul>
<li>主存储器又称为 <strong> <code>内存储器</code> </strong> (<strong>就是我们常说的内存</strong>)</li>
<li>辅助存储器又成为 <strong> <code>外存储器</code> </strong> (<strong>简称外存</strong>)</li>
<li>所以实际上有很多人容易弄混淆这个概念，以为存储器就是内存</li>
</ul>
</blockquote>
<h2 id="2-内存与外存"><a class="anchor" href="#2-内存与外存">#</a> 2、内存与外存</h2>
<h3 id="i-外存-rom"><a class="anchor" href="#i-外存-rom">#</a> Ⅰ - 外存 (ROM)</h3>
<blockquote>
<blockquote>
<p><strong>外存通常是磁性介质或光盘：如硬盘、软盘、磁带、CD 等</strong></p>
</blockquote>
<ul>
<li>能长期保存信息，且<strong>不依赖于电</strong>来保存信息，即断电不会失去保存的信息</li>
<li>由于是机械部件带动，速度与 CPU 相比就显得慢得多</li>
<li><strong> <code>ROM</code> </strong>（Read Only Memory） 只读内存，应用于硬盘存储</li>
</ul>
</blockquote>
<h3 id="ii-内存-ram"><a class="anchor" href="#ii-内存-ram">#</a> Ⅱ - 内存 (RAM)</h3>
<blockquote>
<blockquote>
<p><strong>物理实质就是一组或多组具备数据输入输出和数据存储功能的集成电路</strong></p>
</blockquote>
<ul>
<li>指的是主板上的存储不见，是 CPU 直接与之沟通并用其存储数据的不见</li>
<li>存放当前 正在使用的 (<strong>即执行中</strong>) 的数据和程序</li>
<li><strong>它的物理实质就是一组或多组具备数据输入输出和数据存储功能的集成电路</strong></li>
<li>内存只用于暂时存放程序和数据，一旦关闭电源或者发生断电，其中的程序和数据就会丢失</li>
<li>随机存储器  <strong> <code>RAM</code> </strong>（Random Access Memory）俗称内存</li>
</ul>
</blockquote>
<h2 id="3-内存分类"><a class="anchor" href="#3-内存分类">#</a> 3、内存分类</h2>
<blockquote>
<p>内存分为 <strong>静态 RAM</strong> 和 <strong>动态 RAM</strong></p>
<p><img data-src="/images/image-20211011121001215.png" alt="/images/image-20211011121001215" /></p>
<p><strong>静态 RAM</strong> 速度比 <strong>动态 RAM</strong> 快很多</p>
<ol>
<li>速度比较：静态 RAM &gt; 动态 RAM &gt; ROM；缓存 &gt; 内存 &gt; 外存。</li>
</ol>
</blockquote>
<h3 id="i-静态ram"><a class="anchor" href="#i-静态ram">#</a> Ⅰ - 静态 RAM</h3>
<blockquote>
<blockquote>
<p><strong>静态 RAM，指 SRAM：只要有供电，它保存的数据就不会丢失，且为高速存储器，如 CPU 中的高速缓存（cache）</strong></p>
</blockquote>
<p>缓存通常使用的是静态 RAM, 不过由于静态 RAM 集成度低，因此便延申出一级缓存和二级缓存</p>
<ul>
<li>一级缓存为 静态 RAM</li>
<li>二级缓存为告诉动态 RAM（比静态 RAM 慢，但比常规动态 RAM 要快）</li>
</ul>
</blockquote>
<h3 id="ii-动态ram"><a class="anchor" href="#ii-动态ram">#</a> Ⅱ - 动态 RAM</h3>
<blockquote>
<blockquote>
<p><strong>动态 RAM，指 DRAM：有供电，还要根据它要求的刷新时间参数，才能保持存储的数据不丢失，如电脑中的内存条</strong></p>
</blockquote>
<p>现在使用的内存一般都是<strong>动态 RAM</strong></p>
<ul>
<li>因为静态 RAM 集成度相对较低：存储相同数据量，静态 RAM 的提及是动态 RAM 的 6 倍之多，且价格高</li>
</ul>
</blockquote>
<h3 id="iii-动态ram-与-静态ram-的区别"><a class="anchor" href="#iii-动态ram-与-静态ram-的区别">#</a> Ⅲ  -  动态 RAM 与 静态 RAM 的区别</h3>
<blockquote>
<ul>
<li>动态 RAM 会周期地刷新，而 静态 RAM 不会进行刷新</li>
<li>动态 RAM 是靠 MOSS 电路中的栅极电容来记忆信息的；静态 RAM 是靠双稳态触发器来记忆信息的</li>
<li>由于电容上的电荷会泄露，需要定时给予补充。所以 动态 RAM 需要设置刷新电路，而静态不用</li>
</ul>
<h6 id="应用上的区别"><a class="anchor" href="#应用上的区别">#</a> 应用上的区别</h6>
<ul>
<li>动态 RAM 比 静态 RAM 集成度高、功耗低，从而成本也低，适用于做大容量储存器，所以<strong>主内存通常采用动态 RAM</strong></li>
<li>另外：内存还应用于显卡、声卡及 CMOS 等设备中，用于充当设备缓存或保存固定的程序及数据</li>
<li><strong>高速缓冲存储器 (Cache) 则使用静态 RAM</strong></li>
</ul>
</blockquote>
<h2 id="4-内存是如何工作的"><a class="anchor" href="#4-内存是如何工作的">#</a> 4、内存是如何工作的？</h2>
<blockquote>
<blockquote>
<p><strong>既然内存是用来存放当前 正在使用的 (即执行中) 的数据和程序，那么你可能会问：它是怎么工作的呢？</strong></p>
</blockquote>
<p>我们平常所提到的计算机内存指的是 <strong>动态内存 (即 DRAM)</strong> , 动态内存中所谓的 '<strong> 动态</strong> ' 指的是当我们将数据写入 DRAM 后，经过一段时间数据就会丢失，因此我们需要一个额外的电路进行内存刷新操作</p>
<h6 id="具体工作过程是这样的"><a class="anchor" href="#具体工作过程是这样的">#</a> 具体工作过程是这样的:</h6>
<ul>
<li>一个 DRAM 的存储单元存储的是 0 还是 1 取决于电容是否电荷.  <code>有电荷代表1、无电荷代表0</code></li>
<li>但时间一长，代表 1 的电容会放电，代表 0 的电荷会吸收电荷 (<strong>这就是数据丢失的原因</strong>)</li>
<li>刷新操作定期对电容进行检查，若电量大于满点亮的 <strong>1/2</strong> 则认为其代表 <strong>1</strong>, 并把电容充满</li>
<li>定期刷新操作时，若电量小于 <strong>1/2</strong> 则认为其代表 <strong>0</strong>, 并把电容放电，籍此来保持数据的连续性</li>
</ul>
</blockquote>
<hr />
<h1 id="三-cpu"><a class="anchor" href="#三-cpu">#</a> 三、CPU</h1>
<h2 id="1-cpu的简单工作原理图"><a class="anchor" href="#1-cpu的简单工作原理图">#</a> 1、CPU 的简单工作原理图</h2>
<blockquote>
<p><img data-src="/images/image-20211009180308915.png" alt="/images/image-20211009180308915" /></p>
<p><strong>CPU 一般由控制单元、逻辑运算单元和存储单元 (寄存器) 组成（注意忽略了中断系统）</strong></p>
<p>CPU 负责执行指令，是所有计算机硬件中速度最快的。一般用<strong>时钟周期</strong>（时钟频率）来衡量 CPU 的性能。</p>
</blockquote>
<h3 id="i-控制单元"><a class="anchor" href="#i-控制单元">#</a> Ⅰ - 控制单元</h3>
<blockquote>
<ul>
<li>在 <span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzIwMzkyMDQy">节拍脉冲</span> 的作用下，将 <span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTclQTglOEIlRTUlQkElOEYlRTglQUUlQTElRTYlOTUlQjAlRTUlOTklQTgvMzIxOTUzNg==">程序计数器</span> (Program Counter -- PC) 指向的 <strong>主存或多级高速缓存</strong> 中的  <code>指令地址</code>  送到地址总线</li>
<li>接着获取 <strong>指令地址</strong> 所对应的指令并放入<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOEMlODclRTQlQkIlQTQlRTUlQUYlODQlRTUlQUQlOTglRTUlOTklQTgvMzIxOTQ4Mw==">指令寄存器</span> (Instruction Register -- IR) 中</li>
<li>然后通过<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOEMlODclRTQlQkIlQTQlRTglQUYlOTElRTclQTAlODElRTUlOTklQTgvMzI5NTI2MQ==">指令译码器</span> (Instruction Decoder -- ID) 分析指令需要进行的操作</li>
<li>最后通过<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTMlOEQlRTQlQkQlOUMlRTYlOEUlQTclRTUlODglQjYlRTUlOTklQTgvMTkyMTcyNQ==">操作控制器</span> (Operation Controller -- OC) 向其他设备发出 微操作控制信号</li>
</ul>
<p>也许你对上述过程中提到的名词感到陌生，下面将会列举出来</p>
</blockquote>
<h4 id="1-节拍脉冲是什么"><a class="anchor" href="#1-节拍脉冲是什么">#</a> ① 节拍脉冲是什么？</h4>
<blockquote>
<p>时钟周期是由 CPU 时钟定义的定长时刻距离，是 CPU 作业的最小时刻单位，也称 <code>节拍脉冲</code> 或 T 周期。通常为节拍脉冲或 T 周期，既主频的倒数，它是处理操作的最基本的单位</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzIwMzkyMDQy">原文地址</span></p>
</blockquote>
<h4 id="2-程序计数器"><a class="anchor" href="#2-程序计数器">#</a> ②  程序计数器</h4>
<blockquote>
<blockquote>
<h6 id="程序计数器是用于存放下一条指令所在单元的地址的地方"><a class="anchor" href="#程序计数器是用于存放下一条指令所在单元的地址的地方">#</a> 程序计数器是用于存放下一条指令所在单元的地址的地方。</h6>
</blockquote>
<p>当执行一条指令时，首先需要根据 PC 中存放的指令地址，将指令由内存取到<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOEMlODclRTQlQkIlQTQlRTUlQUYlODQlRTUlQUQlOTglRTUlOTklQTgvMzIxOTQ4Mw==">指令寄存器</span>中，此过程称为 “取指令”。与此同时，PC 中的地址或自动加 1 或由转移指针给出下一条指令的地址。此后经过分析指令，执行指令。完成第一条指令的执行，而后根据 PC 取出第二条指令的地址，如此循环，执行每一条指令。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTclQTglOEIlRTUlQkElOEYlRTglQUUlQTElRTYlOTUlQjAlRTUlOTklQTgvMzIxOTUzNg==">原文地址</span></p>
</blockquote>
<h4 id="3-指令寄存器"><a class="anchor" href="#3-指令寄存器">#</a> ③  指令寄存器</h4>
<blockquote>
<p>根据指令在存贮器中的地址（由指令地址计数器给出），把指令从存贮器中取出来之后，需要有一个专门用于存放指令的地方，以便对指令进行分析和执行。这个专门存放现行指令的部件就叫做指令寄存器。指令寄存器的位数应满足指令长度的要求 [2] 。</p>
<p>指令寄存器与 CPU 的 8 根数据总线相连接。当<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTclQTglOEIlRTUlQkElOEYlRTglQUUlQTElRTYlOTUlQjAlRTUlOTklQTgvMzIxOTUzNg==">程序计数器</span>访问存储器地址时，存储在该地址单元内的信息经 8 位数据总线送出，并储存在指令存器中</p>
</blockquote>
<h5 id="a-属性描述"><a class="anchor" href="#a-属性描述">#</a> a) 属性描述</h5>
<blockquote>
<p>BSDL 语言中有一个重要的描述，即指令寄存器（Instruclion Register），它是由一些强制的、可选的和用户自定义的指令集合而成。</p>
<p>关于这个指令寄存器的属性描述，必须包含 5 个要素：</p>
<blockquote>
<ul>
<li>指令寄存器的长度、</li>
<li>各种指令的名称、</li>
<li>对应的操作码、</li>
<li>指令寄存器的捕获操作码</li>
<li>哪些指令是内部的</li>
</ul>
</blockquote>
</blockquote>
<h5 id="b-取指过程"><a class="anchor" href="#b-取指过程">#</a> b) 取指过程</h5>
<blockquote>
<p>取指令阶段完成的任务是将现行指令从主存中取出来并送至指令寄存器中，具体操作如下</p>
<ol>
<li>将 <strong>程序计数器</strong> (PC) 中的内容送至存储器<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOUMlQjAlRTUlOUQlODAlRTUlQUYlODQlRTUlQUQlOTglRTUlOTklQTgvMzIxOTYxOQ==">地址寄存器</span>（MAR), 并送地址总线</li>
<li>由控制单元 (CU) 经控制总线 (CB) 向存储器发 <strong>读命令</strong></li>
<li>从主存中取出的指令通过数据总线 (DB), 送到存储器<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTUlQjAlRTYlOEQlQUUlRTUlQUYlODQlRTUlQUQlOTglRTUlOTklQTgvMTk0NDIzMQ==">数据寄存器</span>（MDR）</li>
<li>将 MDR 的内容送至指令寄存器（R）中</li>
<li>将 PC 的内容递增，为取下一条指令做好准备</li>
</ol>
<p>以上这些操作对任何一条指令来说都是必须要执行的操作，所以称为公共操作</p>
</blockquote>
<h4 id="4-指令译码器"><a class="anchor" href="#4-指令译码器">#</a> ④ 指令译码器</h4>
<blockquote>
<p>指令译码器 (Instruction Decoder,ID) 是<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOEUlQTclRTUlODglQjYlRTUlOTklQTgvMjIwNjEyNg==">控制器</span>中的主要部件之一。</p>
<ul>
<li>计算机能且只能执行 “指令”。指令由<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTMlOEQlRTQlQkQlOUMlRTclQTAlODEvMzIyMDQxOA==">操作码</span>和<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOUMlQjAlRTUlOUQlODAlRTclQTAlODEvMzIyMDQ1NA==">地址码</span>组成。</li>
<li>操作码表示要执行的操作性质，即执行什么操作，或做什么；地址码是操作码执行时的操作对象的<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOUMlQjAlRTUlOUQlODAvODA0MjA=">地址</span>。</li>
<li>计算机执行一条指定的指令时，必须首先分析这条指令的操作码是什么，以决定操作的性质和方法，然后才能控制计算机其他各部件协同完成指令表达的功能。</li>
<li>这个分析工作由 <strong>指令译码器</strong> 来完成。</li>
<li>指令执行通过 控制部件 进行 指令译码，标量指令由标量<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlQTQlODQlRTclOTAlODYlRTYlOUMlQkE=">处理机</span>执行向量指令各 Cache 控制器监听总线所有操作，并对操作做相应处理（修改或作废），如<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9NRVNJJUU1JThEJThGJUU4JUFFJUFFLzIyNzQyMzMx"> MESI 协议</span>。</li>
</ul>
<p><span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOEMlODclRTQlQkIlQTQlRTglQUYlOTElRTclQTAlODElRTUlOTklQTgvMzI5NTI2MQ==">原文地址</span></p>
</blockquote>
<h4 id="5-操作控制器"><a class="anchor" href="#5-操作控制器">#</a> ⑤ 操作控制器</h4>
<blockquote>
<p>操作控制器的功能就是根据指令<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTMlOEQlRTQlQkQlOUMlRTclQTAlODE=">操作码</span>和<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTclQjYlRTUlQkElOEYlRTQlQkYlQTElRTUlOEYlQjc=">时序信号</span>，产生各种操作<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOEUlQTclRTUlODglQjYlRTQlQkYlQTElRTUlOEYlQjc=">控制信号</span>，以</p>
<p>便正确地建立<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTUlQjAlRTYlOEQlQUUlRTklODAlOUElRTglQjclQUY=">数据通路</span>，从而完成取指令和执行指令的控制。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTMlOEQlRTQlQkQlOUMlRTYlOEUlQTclRTUlODglQjYlRTUlOTklQTgvMTkyMTcyNQ==">原文地址</span></p>
</blockquote>
<h5 id="a-指令执行过程"><a class="anchor" href="#a-指令执行过程">#</a> a) 指令执行过程</h5>
<blockquote>
<p>1、取指令：根据指令地址（由 PC 提供），从<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlQUQlOTglRTUlODIlQTglRTUlOTklQTg=">存储器</span>中取出所要执行的指令。</p>
<p>2、分析指令：</p>
<p>（1）<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTglQUYlOTElRTclQTAlODE=">译码</span>分析。确定指令应完成的操作，产生相应操作的控制电位。去参与形成该指令功能所需要的全部控制命令（<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlQkUlQUUlRTYlOTMlOEQlRTQlQkQlOUMvODE5MDI2OQ==">微操作</span>控制信号）。</p>
<p>（2）根据<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlQUYlQkIlRTUlOUQlODAlRTYlOTYlQjklRTUlQkMlOEY=">寻址方式</span>的分析和指令功能要求，形成<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTMlOEQlRTQlQkQlOUMlRTYlOTUlQjA=">操作数</span>的<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOUMlODklRTYlOTUlODglRTUlOUMlQjAlRTUlOUQlODA=">有效地址</span>，并按此地址取出操作数（运算型指令）或形成转移地址（转移类指令），以实现程序转移。</p>
<p>3、执行指令：根据指令分析所产生的操作<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOEUlQTclRTUlODglQjYlRTQlQkYlQTElRTUlOEYlQjc=">控制信号</span>和形成的有效地址，按一定算法形成指令控制序列，控制有关部件完成指令规定的功能。</p>
</blockquote>
<h5 id="b-控制方式"><a class="anchor" href="#b-控制方式">#</a> b) 控制方式</h5>
<blockquote>
<p>操作控制器常用的控制方式有<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOTAlOEMlRTYlQUQlQTUlRTYlOEUlQTclRTUlODglQjYvOTY0OTg5Nw==">同步控制</span>、异步控制、联合控制。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOTAlOEMlRTYlQUQlQTUlRTYlOEUlQTclRTUlODglQjYlRTYlOTYlQjklRTUlQkMlOEY=">同步控制方式</span>：任何指令的运行或指令中各个<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlQkUlQUUlRTYlOTMlOEQlRTQlQkQlOUMvODE5MDI2OQ==">微操作</span>的执行，均由确定的，具有统一基准时标的<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTclQjYlRTUlQkElOEYlRTQlQkYlQTElRTUlOEYlQjc=">时序信号</span>所控制。即所有的操作均由统一的时钟控制，在标准时间内完成。（在同步控制下，每个时序信号的结束就意味着安排完成的工作已经完成，随即开始执行后续的微操作或自动转向下条指令的运行。）</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlQkMlODIlRTYlQUQlQTUlRTYlOEUlQTclRTUlODglQjYlRTYlOTYlQjklRTUlQkMlOEY=">异步控制方式</span>：没有统一的<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOTAlOEMlRTYlQUQlQTUlRTQlQkYlQTElRTUlOEYlQjcvODU1NTQwMg==">同步信号</span>，采用问答方式进行时序协调，将前一操作的回答作为下一操作的启动信号。</p>
<p>联合控制方式：将同步控制和异步控制相结合。其通常设计思想为：在功能部件内部采用同步方式或以同步方式为主的控制方式；在功能部件间采用异步方式。</p>
</blockquote>
<h3 id="ii-运算单元"><a class="anchor" href="#ii-运算单元">#</a> Ⅱ - 运算单元</h3>
<blockquote>
<p>如果 <strong>控制单元</strong> 发出的控制信号存在<strong>算数运算</strong> (加减乘除、增 1、减 1、取反等) 或者 <strong>逻辑运算</strong> (与、或、非、异或), 那么<strong>需要通过运算单元获取存储单元的计算数据</strong>进行处理</p>
</blockquote>
<h3 id="iii-储存单元"><a class="anchor" href="#iii-储存单元">#</a> Ⅲ - 储存单元</h3>
<blockquote>
<p>包括片内 <strong>缓存</strong> 和 <strong>寄存器组</strong>，是 CPU 中临时存放数据的地方</p>
<ul>
<li>CPU 直接访问主存数据大概需要花费数百个机器周期</li>
<li>而访问 <strong>缓存</strong> 和 <strong>寄存器组</strong> 只需要若干个或者几十个机器周期</li>
<li>因此会使用 <strong>缓存</strong> 和 <strong>寄存器组</strong> 来存储和获取临时数据 (即将被运算或者运算之后的数据), 从而提升运行效率</li>
</ul>
</blockquote>
<h3 id="iv-指令周期"><a class="anchor" href="#iv-指令周期">#</a> Ⅳ - 指令周期</h3>
<blockquote>
<p>计算机系统执行程序指令时需要花费时间，其中取出一条指令并执行这条指令的时间叫做 <strong>指令周期</strong></p>
</blockquote>
<hr />
<h2 id="2-为什么需要缓存"><a class="anchor" href="#2-为什么需要缓存">#</a> 2、为什么需要缓存</h2>
<blockquote>
<blockquote>
<p><strong> <code>CPU</code> </strong> 负责运算， <code>内存</code>  负责暂时存储运算所涉及的东西， <code>高速缓存是CPU内部集成的小容量高速内存</code></p>
<p><strong>高速缓存</strong>和内存的区别是，缓存容量极小，但是与<strong> CPU</strong> 关系密切，所以传输速度比内存快得多</p>
</blockquote>
<ul>
<li>缓存只是内存中少部分数据的复制品，所以 CPU 到缓存中寻找数据时也会出现找不到的情况 (因为这些数据没用从内存复制到缓存中去)</li>
<li>在这种缓存中找不到的情况下，CPU 还是会到内存中去找数据，这样系统的速度就会慢下来，不过<strong> CPU 会把这些数据复制到缓存中去</strong>，以便下一次不用再到内存中去取，以此提高系统运行效率</li>
<li>不过随着时间的变化，被访问得最频繁得数据不是一成不变的，也许昨天访问的不频繁的数据今天就非常频繁地进行了访问；</li>
<li>所以说缓存中的数据经常要按照一定的算法来更换，这样才能保证缓存中的数据是被访问的最频繁的</li>
</ul>
</blockquote>
<hr />
<h2 id="3-cpu的作用"><a class="anchor" href="#3-cpu的作用">#</a> 3、CPU 的作用</h2>
<h3 id="i-缩短延迟"><a class="anchor" href="#i-缩短延迟">#</a> Ⅰ - 缩短延迟</h3>
<blockquote>
<p>访问缓存的时间应该尽可能缩短，可以通过多种的方式缩短这个时间:</p>
<ul>
<li>比如能够通过减少缓存的大小、关联性来降低缓存的延迟；</li>
<li>或者方法预测、增加宽带等</li>
</ul>
</blockquote>
<h3 id="ii-提高命中率"><a class="anchor" href="#ii-提高命中率">#</a> Ⅱ - 提高命中率</h3>
<blockquote>
<p>所谓命中率是在高速缓存中找到内存引用的速率，我们希望能够首先通过缓存中获得信息以得到速度的优势；</p>
<p>所以缓存需要最大限度地实现这一目标</p>
<p>对于单个高速缓存来说：大小、关联性和块大小决定命中率</p>
</blockquote>
<h3 id="iii-降低更低级别内存下的开销"><a class="anchor" href="#iii-降低更低级别内存下的开销">#</a> Ⅲ - 降低更低级别内存下的开销</h3>
<blockquote>
<p>高速缓存是内存层次结构的一部分，其性能会影响其他性能，处理其他内存花费的时间越长意味着系统性能越低</p>
<p>也就是说尽可能地让处理在缓存中完成</p>
</blockquote>
<h3 id="iv-减少错失惩罚"><a class="anchor" href="#iv-减少错失惩罚">#</a> Ⅳ - 减少错失惩罚</h3>
<blockquote>
<p>缓存中不能命中是无法避免的事情，但是我们可以减少处理未命中所需地时间以获得更好的处理器性能，通过提升命中率与不同的优化能有效降低错失惩罚</p>
<p>高速缓存是 CPU 中十分重要的部分，占据了大量的资源开销和成本，如果咱看过 CPU 架构图的话就会发现缓存占据了至少 50% 的面积，绝对至关重要</p>
</blockquote>
<hr />
<h2 id="4-时钟周期与指令周期"><a class="anchor" href="#4-时钟周期与指令周期">#</a> 4、时钟周期与指令周期</h2>
<blockquote>
<p><strong> <code>CPU时钟周期</code> </strong> 是操作的最小时间单位，值是主频的倒数，现代计算机的主频可以达到几 GHZ.</p>
<p>** <code>指令周期</code>  ** 是取出并执行一个指令的时间单位，一个指令需要多个 CPU 操作来执行，一般来说一个指令周期至少包含 2 个 CPU 时钟周期 (取指 + 执行)</p>
<p>同一个硬件架构下不同 CPU 的时钟周期越高，相同时间内能够执行的指令越多，性能就越好；但在不同硬件架构下只比较 CPU 主频大小意义不大，处理器结构不同，指令集就不同，相同意义的指令所需的 CPU 时钟周期也就不同</p>
<p>除了计算机架构不同外，在比较计算机整体性能的时候还需要考虑很多因素，例如<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU1JTg5JThEJUU3JUFCJUFGJUU2JTgwJUJCJUU3JUJBJUJG">前端总线</span>（&quot;front side bus&quot;，FSB），<strong>内存的时钟周期</strong>，CPU<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3cvaW5kZXgucGhwP3RpdGxlPSVFOSU4MCU5QSVFNyU5NCVBOCVFNSVBRiU4NCVFNSVBRCU5OCVFNSU5OSVBOCZhbXA7YWN0aW9uPWVkaXQmYW1wO3JlZGxpbms9MQ=="> 通用寄存器</span>的数据宽度和机器的一级、二级<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU3JUJDJTkzJUU1JUFEJTk4">缓存</span>等。</p>
</blockquote>
<hr />
<h2 id="5-存储单元寄存器"><a class="anchor" href="#5-存储单元寄存器">#</a> 5、存储单元 (寄存器)</h2>
<blockquote>
<p>寄存器是 CPU 的内部组成单元，是 CPU 运算时取 <strong>指令</strong> 和 <strong>数据</strong> 的地方，速度很快.</p>
<blockquote>
<ul>
<li>可以理解成对于 CPU 来说，<strong>对寄存器进行 读 / 写 是不需要时间的</strong></li>
<li>或者说如果只是操作寄存器 (比如类似 mov BX,AX 之类的操作), 那么一秒钟执行的指令个数理论上等于主频，因为寄存器是 CPU 的一部分</li>
</ul>
</blockquote>
<h6 id="寄存器可以用来暂存指令-数据和地址-在cpu中分为"><a class="anchor" href="#寄存器可以用来暂存指令-数据和地址-在cpu中分为">#</a> 寄存器可以用来暂存指令、数据和地址。在 CPU 中分为</h6>
<ul>
<li><strong>通用寄存器</strong>：如指令寄存器 <code>IR</code> ;</li>
<li><strong>特殊功能寄存器</strong>：如程序计数器 <code>PC 、sp</code>  等</li>
</ul>
<p><img data-src="/images/image-20211012102032541.png" alt="/images/image-20211012102032541" /></p>
</blockquote>
<hr />
<h1 id="四-cpu的多级缓存高速缓存"><a class="anchor" href="#四-cpu的多级缓存高速缓存">#</a> 四、CPU 的多级缓存 (高速缓存)</h1>
<blockquote>
<blockquote>
<h6 id="高速缓存cache通常分为l1l2l3三级速度递减容量递增是为了弥补cpu与内存之间运算速度的差异而设置的硬件"><a class="anchor" href="#高速缓存cache通常分为l1l2l3三级速度递减容量递增是为了弥补cpu与内存之间运算速度的差异而设置的硬件">#</a> 高速缓存（cache）通常分为 L1,L2,L3 三级，速度递减，容量递增，是为了弥补 CPU 与内存之间运算速度的差异而设置的硬件</h6>
</blockquote>
<p><img data-src="/images/image-20211012100054332.png" alt="/images/image-20211012100054332" /></p>
<p>上图为最简单的高速缓存的配置，数据的读取和储存都将经过高速缓存，CPU 核心与高速缓存有一条特殊的快速通道：主存和高速缓存都连在系统总线上，这条总线还用于其他组件的通信</p>
<p>高速缓存出现不久，系统变得越来越复杂，高速缓存与主存之间的速度差异越来越大，直到加入了另一级缓存：新加入的这级缓存比第一缓存更大而且更慢，同时经济上不合适，所以有了二级缓存、三级缓存</p>
</blockquote>
<h2 id="1-多级缓存出现的意义"><a class="anchor" href="#1-多级缓存出现的意义">#</a> 1、多级缓存出现的意义</h2>
<h3 id="i-为什么需要cpu-cache"><a class="anchor" href="#i-为什么需要cpu-cache">#</a> Ⅰ - 为什么需要 CPU Cache</h3>
<blockquote>
<blockquote>
<p><strong>CPU 的频率太快了，快到主存跟不上，这样在处理器时钟周期内，CPU 常常需要等待主存，浪费资源，所以 Cache 的出现，是为了缓解 CPU 和内存之间速度的不匹配问题（结构：cpu -&gt; cache -&gt; memort）</strong></p>
</blockquote>
<p>当 <strong>CPU</strong> 处理数据时，它会先到 <strong>Cache</strong> 中去寻找，如果数据因之前的操作已经读取而被暂存其中的话就不必再从主内存中读取数据</p>
<ul>
<li>由于 CPU 的运行速度一般比主内存的读取速度快。主存 <strong>时钟周期</strong> (访问主存储器所需要时间) 为数个 CPU 时钟周期</li>
<li>因此如果要访问主内存的话，就必须等待数个 CPU 周期从而造成浪费</li>
<li><strong>L1 缓存</strong> 的速度可以在 2-4 个 CPU 时钟频率内完成，速度很快</li>
</ul>
<p>Linux 下可以通过  <code>lscpu</code>  命令来查看 CPU 的信息，其中就包括 Cache 层次</p>
</blockquote>
<h3 id="ii-cpu-cache-有什么意义"><a class="anchor" href="#ii-cpu-cache-有什么意义">#</a> Ⅱ - CPU Cache 有什么意义</h3>
<blockquote>
<ul>
<li>时间局限性：如果某个数据被访问，那么在不久的将来他很可能被再次访问</li>
<li>空间局限性：如果某个数据被访问，那么与他相邻的数据很快也可能被访问</li>
</ul>
</blockquote>
<h2 id="2-原理"><a class="anchor" href="#2-原理">#</a> 2、原理</h2>
<blockquote>
<blockquote>
<p>提供 '<strong> 缓存</strong> ' 的目的是为了让数据访问的速度适应 CPU 的处理速度，多级 Cache 技术，利用使用一个大的二级 Cache 来处理一级 Cache 的缺失，从而降低缺失代价</p>
</blockquote>
<p>通常它不像系统主存那样使用 <strong> <code>DRAM(动态)</code> </strong> 技术，而是使用 <strong>昂贵但比较快速</strong> 的 <strong> <code>SRAM(静态)</code> </strong> 技术，其原理是:</p>
<ul>
<li>内存中 '<strong> 程序执行与数据访问的局域性行为</strong> ', 即一定程序执行时间和空间内，被访问的代码集中于一部分</li>
<li>为了充分发挥缓存的作用，不仅依靠 '<strong> 暂存刚刚访问过的数据</strong> ', 还要使用硬件实现的指令 <strong>预测 与 数据预取技术</strong> --&gt; 尽可能把将要使用的数据预先从内存中取到缓存里</li>
</ul>
</blockquote>
<h2 id="3-数据结构"><a class="anchor" href="#3-数据结构">#</a> 3、数据结构</h2>
<blockquote>
<p>高速缓存的数据结构类似于 <strong> <code>拉链式的散列表</code> </strong>，<strong>Key</strong> 是内存地址，<strong> 值</strong>是内存数据的副本或是即将写入内存的数据</p>
<p><img data-src="/images/image-20211012101834104.png" alt="/images/image-20211012101834104" /></p>
<p>其中 <strong>Tag</strong> 可以理解为数据的内存地址，<strong>Data Block</strong> 是内存数据，<strong>Flag</strong> 用于标识数据状态</p>
</blockquote>
<h2 id="4-cpu的多级缓存"><a class="anchor" href="#4-cpu的多级缓存">#</a> 4、CPU 的多级缓存</h2>
<blockquote>
<p>CPU 的核心数量、高频高低都会影响性能，但如果让 CPU 更聪明、更有效率的执行计算任务，那么缓存的作用就至关重要了</p>
</blockquote>
<h3 id="ii-一级缓存-l1-cache"><a class="anchor" href="#ii-一级缓存-l1-cache">#</a> Ⅱ - 一级缓存 (L1 Cache)</h3>
<blockquote>
<blockquote>
<h6 id="cpu一级缓存就是指-cpu-的第一层级的高速缓存-主要担当的工作是-缓存指令-和-缓存数据"><a class="anchor" href="#cpu一级缓存就是指-cpu-的第一层级的高速缓存-主要担当的工作是-缓存指令-和-缓存数据">#</a> <strong>CPU 一级缓存</strong>，就是指 CPU 的第一层级的高速缓存，主要担当的工作是 <strong>缓存指令</strong> 和 <strong>缓存数据</strong> .</h6>
</blockquote>
<ul>
<li>一级缓存的容量与结构对于 CPU 性能的影响十分巨大，但是由于它的结构相对复杂且还有成本问题</li>
<li>一般来说，<strong> <code>CPU 的一级缓存比较小</code> </strong>，通常 CPU 的一级缓存也就能做到 <strong>256KB</strong> 左右的水平</li>
</ul>
</blockquote>
<h3 id="ii-二级缓存-l2-cache"><a class="anchor" href="#ii-二级缓存-l2-cache">#</a> Ⅱ - 二级缓存 (L2 Cache)</h3>
<blockquote>
<blockquote>
<h6 id="cpu-二级缓存-就是指-cpu-的第二层级的高速缓存"><a class="anchor" href="#cpu-二级缓存-就是指-cpu-的第二层级的高速缓存">#</a> CPU 二级缓存，就是指 CPU 的第二层级的高速缓存</h6>
</blockquote>
<ul>
<li>二级缓存的容量会直接影响到 CPU 的性能，所以二级缓存的容量越大越好</li>
<li>例如 intel 的第八代 i7-8700 处理器，共有六个核心数量，而每个核心都拥有 256KB 的二级缓存，属于各核心独享，这样二级缓存总数就达到了 1.5MB。</li>
</ul>
</blockquote>
<h3 id="iii-三级缓存-l3-cache"><a class="anchor" href="#iii-三级缓存-l3-cache">#</a> Ⅲ - 三级缓存 (L3 Cache)</h3>
<blockquote>
<p>CPU 三级缓存，就是指 CPU 的第三层级的高速缓存，起作用就是进一步降低内存的延迟，同时提升海量数据计算时的性能</p>
<blockquote>
<h6 id="和一级-二级缓存不同的是三级缓存时核心共享的能够将容量做很大"><a class="anchor" href="#和一级-二级缓存不同的是三级缓存时核心共享的能够将容量做很大">#</a> 和一级、二级缓存不同的是，三级缓存时核心共享的，能够将容量做很大</h6>
</blockquote>
</blockquote>
<h3 id="iv-缓存一致性mesi"><a class="anchor" href="#iv-缓存一致性mesi">#</a> Ⅳ - 缓存一致性 (MESI)</h3>
<blockquote>
<p>CPU 种每个  <code>缓存行</code>  使用 <strong>四种</strong> 状态进行标记</p>
</blockquote>
<h4 id="1-m-modified-修改"><a class="anchor" href="#1-m-modified-修改">#</a> ① M: Modified 修改</h4>
<blockquote>
<p>指的时该 <strong>缓存行</strong> 只被缓存在该 CPU 种，并且是 <code>被修改过</code> 的，<strong>因此他与主存的数据是不一致的</strong>，</p>
<p>该缓存行中的数据需要在未来某个时间点 (<strong>允许其他 CPU 读取主存相应的内容之前</strong>) 写回主存，然后 <code>状态变成E (独享)</code></p>
</blockquote>
<h4 id="2-exclusive-独享"><a class="anchor" href="#2-exclusive-独享">#</a> ② Exclusive 独享</h4>
<blockquote>
<p>缓存行 只被缓存在该 CPU 的缓存中，是 <code>未被修改过</code> 的，<strong> 与主存的数据是一致的</strong>.</p>
<p>可以在任何时刻当有其他 CPU 读取该内存时，状态变成  <code>S(共享)</code></p>
<p>当 CPU 修改缓存行的内容时，状态变成  <code>M(修改)</code></p>
</blockquote>
<h4 id="3-share-共享"><a class="anchor" href="#3-share-共享">#</a> ③ Share 共享</h4>
<blockquote>
<p>意味着该 缓存行  <code>可能被多个 CPU 进行缓存</code> ，并且<strong>该缓存中的数据与主存数据是一致的</strong></p>
<p>当有一个 CPU 修改 <strong>该缓存行</strong> 时，其他 CPU 是可以被作废的，变成  <code>I(无效的)</code></p>
</blockquote>
<h4 id="4-invalid-无效的"><a class="anchor" href="#4-invalid-无效的">#</a> ④ Invalid 无效的</h4>
<blockquote>
<p>代表这个缓存是无效的，可能是有其他 CPU 修改了该缓存行</p>
</blockquote>
<h4 id="5对应的四个操作"><a class="anchor" href="#5对应的四个操作">#</a> ⑤对应的四个操作</h4>
<blockquote>
<p>local read：读本地缓存<br />
 local write：写本地缓存<br />
 remote read：将内存中的数据读取过来<br />
 remote write：将数据写回主存</p>
</blockquote>
<h5 id="a-详细说明"><a class="anchor" href="#a-详细说明">#</a> a) 详细说明</h5>
<blockquote>
<blockquote>
<p><strong>在一个典型的多核系统中，每一个核都会有自己的缓存来共享总线，每一个 CPU 会发出读写（I/O）请求，而缓存的目的是为了减少 CPU 读写共享主存的次数；</strong></p>
</blockquote>
<ol>
<li>一个缓存除了在无效（Invalid）状态，都可以满足 CPU 的读请求，一个无效（Invalid）的缓存行必须从主存中读取（变成 Share 或者 Exclusive 状态）来满足该 CPU 的读请求</li>
<li>一个  <code>写请求</code>  只有在该缓存行是 <strong> <code>修改</code> </strong> 或者 <strong> <code>独享</code> </strong> 状态时才能被执行</li>
</ol>
<ul>
<li>如果缓存行处于 <strong> <code>共享</code> </strong> 状态，必须<strong>先将其他缓存中的 该缓存行</strong> 变成  <code>无效</code>  状态</li>
<li><strong>也即是不允许不同 CPU 同时修改同一缓存行，即使修改该缓存行中的不同数据也不允许</strong></li>
<li>该操作经常作用广播的方式来完成，例如：Request For Ownership（RFO）</li>
</ul>
<ol start="3">
<li>缓存可以随时将一个 <strong>非修改</strong> 状态的缓存行作废，或者变成 <strong> <code>无效</code> </strong> 状态，而一个 ** <code>修改</code>  ** 状态的缓存行必须先被写回主存</li>
<li>一个处于 <strong>共享</strong> 状态的 缓存行  也 <code>必须监听</code>  其他缓存中<strong>使该 缓存行  <code>无效</code>  或者  <code>独享</code>  该缓存行的请求</strong>，并将该 缓存行 变成 <strong> <code>无效</code> </strong></li>
<li>一个处于 <strong>独享</strong> 状态的 缓存行 也 <code>必须监听</code> 其他缓存中 <strong>读主存中该缓存行的操作</strong>，一旦有这种操作，该缓存行需要变成 <code>共享</code> 状态</li>
<li>对于  <code>修改</code>  和  <code>独享</code>  状态而言总是精确的，他们在该缓存行的真正状态是一致的。</li>
</ol>
<ul>
<li>而  <code>共享</code>  状态可能是非一致的</li>
<li>如果一个缓存将处于  <code>共享</code>  状态的缓存行作废了，而另一个缓存实际上可能已经独享了 该缓存行，但是该缓存却不会将该 缓存行 升迁为  <code>独享</code>  状态</li>
<li>这是因为<strong>其他缓存不会广播他们作废掉该缓存行的通知</strong>，同样由于缓存并没有保存该缓存行的 copy 的数量，因此也没有办法确定自己是否已经独享（Share 了该缓存行）</li>
</ul>
<p>从上面的意义看来独享（Exclusive）状态时一种投机性的优化：如果一个 CPU 想修改一个处于共享（Share）状态的缓存航，总线事务需要将所有缓存行的 copy 变成 Invalid 状态，而修改独享（Exclusive）状态的缓存不需要使用总线事务</p>
</blockquote>

      <div class="tags">
          <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" rel="tag"><i class="ic i-tag"></i> 计算机组成原理</a>
          <a href="/tags/%E7%BC%93%E5%AD%98/" rel="tag"><i class="ic i-tag"></i> 缓存</a>
          <a href="/tags/%E5%86%85%E5%AD%98/" rel="tag"><i class="ic i-tag"></i> 内存</a>
          <a href="/tags/CPU/" rel="tag"><i class="ic i-tag"></i> CPU</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">更新于</span>
    <time title="修改时间：2024-07-09 13:16:59" itemprop="dateModified" datetime="2024-07-09T13:16:59+08:00">2024-07-09</time>
  </span>
  <span id="2024/01/02/缓存、内存、CPU知识点解析笔记/" class="item leancloud_visitors" data-flag-title="计组知识点" title="阅读次数">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">阅读次数</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">次</span>
  </span>
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> 赞赏</button>
  <p>请我喝[茶]~(￣▽￣)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="/images/wechatpay.png" alt="dmq 微信支付">
        <p>微信支付</p>
      </div>
      
      <div>
        <img data-src="/images/alipay.png" alt="dmq 支付宝">
        <p>支付宝</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>dmq <i class="ic i-at"><em>@</em></i>杜明清的个人博客
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="https://dmqweb.cn/2024/01/02/%E7%BC%93%E5%AD%98%E3%80%81%E5%86%85%E5%AD%98%E3%80%81CPU%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A7%A3%E6%9E%90%E7%AC%94%E8%AE%B0/" title="计组知识点">https://dmqweb.cn/2024/01/02/缓存、内存、CPU知识点解析笔记/</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2024/01/02/%E9%A1%B9%E7%9B%AE%E8%B4%A8%E9%87%8F%E6%A3%80%E6%B5%8B/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s3.uuu.ovh&#x2F;imgs&#x2F;2024&#x2F;04&#x2F;12&#x2F;61baca9d80b5756d.jpg" title="项目质量检测">
  <span class="type">上一篇</span>
  <span class="category"><i class="ic i-flag"></i> 项目质量检测</span>
  <h3>项目质量检测</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2024/01/02/node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s3.uuu.ovh&#x2F;imgs&#x2F;2024&#x2F;04&#x2F;06&#x2F;63e9f1e7097ba6fb.jpg" title="node.js内置模块">
  <span class="type">下一篇</span>
  <span class="category"><i class="ic i-flag"></i> node.js</span>
  <h3>node.js内置模块</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-%E7%BC%93%E5%AD%98"><span class="toc-number">1.</span> <span class="toc-text"> 一、缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%9A%E4%B9%89"><span class="toc-number">1.1.</span> <span class="toc-text"> 1、定义</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%87%A1%E6%98%AF%E4%B8%BA%E4%BA%8E%E9%80%9F%E5%BA%A6%E7%9B%B8%E5%B7%AE%E8%BE%83%E5%A4%A7%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%A1%AC%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%94%A8%E4%BA%8E%E5%8D%8F%E8%B0%83%E4%B8%A4%E8%80%85%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E9%80%9F%E5%BA%A6%E5%B7%AE%E5%BC%82%E7%9A%84%E7%BB%93%E6%9E%84%E5%9D%87%E5%8F%AF%E7%A7%B0%E4%B9%8B%E4%B8%BAcache-%E7%94%B5%E8%84%91%E9%AB%98%E9%80%9F%E7%BC%93%E5%86%B2%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">1.1.0.0.0.1.</span> <span class="toc-text"> 凡是为于速度相差较大的两种硬件之间，用于协调两者数据传输速度差异的结构，均可称之为 Cache  (电脑高速缓冲存储器)</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%A2%AB%E6%89%A9%E5%85%85%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.</span> <span class="toc-text"> 2、被扩充概念</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A6%82%E4%BB%8A%E7%BC%93%E5%AD%98%E7%9A%84%E6%A6%82%E5%BF%B5%E5%B7%B2%E8%A2%AB%E6%89%A9%E5%85%85"><span class="toc-number">1.2.0.0.0.1.</span> <span class="toc-text"> 如今缓存的概念已被扩充</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%BC%93%E5%AD%98%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.3.</span> <span class="toc-text"> 3、缓存的作用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E5%8D%8F%E8%B0%83%E4%B8%A4%E8%80%85%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E9%80%9F%E5%BA%A6%E5%B7%AE%E5%BC%82%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.0.0.0.1.</span> <span class="toc-text"> 用于协调两者数据传输速度差异的结构</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-%E5%86%85%E5%AD%98"><span class="toc-number">2.</span> <span class="toc-text"> 二、内存</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%86%85%E5%AD%98"><span class="toc-number">2.1.</span> <span class="toc-text"> 1、什么是内存？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%86%85%E5%AD%98%E4%B8%8E%E5%A4%96%E5%AD%98"><span class="toc-number">2.2.</span> <span class="toc-text"> 2、内存与外存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#i-%E5%A4%96%E5%AD%98-rom"><span class="toc-number">2.2.1.</span> <span class="toc-text"> Ⅰ - 外存 (ROM)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ii-%E5%86%85%E5%AD%98-ram"><span class="toc-number">2.2.2.</span> <span class="toc-text"> Ⅱ - 内存 (RAM)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%86%85%E5%AD%98%E5%88%86%E7%B1%BB"><span class="toc-number">2.3.</span> <span class="toc-text"> 3、内存分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#i-%E9%9D%99%E6%80%81ram"><span class="toc-number">2.3.1.</span> <span class="toc-text"> Ⅰ - 静态 RAM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ii-%E5%8A%A8%E6%80%81ram"><span class="toc-number">2.3.2.</span> <span class="toc-text"> Ⅱ - 动态 RAM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iii-%E5%8A%A8%E6%80%81ram-%E4%B8%8E-%E9%9D%99%E6%80%81ram-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.3.3.</span> <span class="toc-text"> Ⅲ  -  动态 RAM 与 静态 RAM 的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E4%B8%8A%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.3.3.0.0.1.</span> <span class="toc-text"> 应用上的区别</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84"><span class="toc-number">2.4.</span> <span class="toc-text"> 4、内存是如何工作的？</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B%E6%98%AF%E8%BF%99%E6%A0%B7%E7%9A%84"><span class="toc-number">2.4.0.0.0.1.</span> <span class="toc-text"> 具体工作过程是这样的:</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-cpu"><span class="toc-number">3.</span> <span class="toc-text"> 三、CPU</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-cpu%E7%9A%84%E7%AE%80%E5%8D%95%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%9B%BE"><span class="toc-number">3.1.</span> <span class="toc-text"> 1、CPU 的简单工作原理图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#i-%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83"><span class="toc-number">3.1.1.</span> <span class="toc-text"> Ⅰ - 控制单元</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%8A%82%E6%8B%8D%E8%84%89%E5%86%B2%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">3.1.1.1.</span> <span class="toc-text"> ① 节拍脉冲是什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-number">3.1.1.2.</span> <span class="toc-text"> ②  程序计数器</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8%E6%98%AF%E7%94%A8%E4%BA%8E%E5%AD%98%E6%94%BE%E4%B8%8B%E4%B8%80%E6%9D%A1%E6%8C%87%E4%BB%A4%E6%89%80%E5%9C%A8%E5%8D%95%E5%85%83%E7%9A%84%E5%9C%B0%E5%9D%80%E7%9A%84%E5%9C%B0%E6%96%B9"><span class="toc-number">3.1.1.2.0.1.</span> <span class="toc-text"> 程序计数器是用于存放下一条指令所在单元的地址的地方。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%8C%87%E4%BB%A4%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">3.1.1.3.</span> <span class="toc-text"> ③  指令寄存器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0"><span class="toc-number">3.1.1.3.1.</span> <span class="toc-text"> a) 属性描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-%E5%8F%96%E6%8C%87%E8%BF%87%E7%A8%8B"><span class="toc-number">3.1.1.3.2.</span> <span class="toc-text"> b) 取指过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%8C%87%E4%BB%A4%E8%AF%91%E7%A0%81%E5%99%A8"><span class="toc-number">3.1.1.4.</span> <span class="toc-text"> ④ 指令译码器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%93%8D%E4%BD%9C%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">3.1.1.5.</span> <span class="toc-text"> ⑤ 操作控制器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">3.1.1.5.1.</span> <span class="toc-text"> a) 指令执行过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.1.5.2.</span> <span class="toc-text"> b) 控制方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ii-%E8%BF%90%E7%AE%97%E5%8D%95%E5%85%83"><span class="toc-number">3.1.2.</span> <span class="toc-text"> Ⅱ - 运算单元</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iii-%E5%82%A8%E5%AD%98%E5%8D%95%E5%85%83"><span class="toc-number">3.1.3.</span> <span class="toc-text"> Ⅲ - 储存单元</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iv-%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F"><span class="toc-number">3.1.4.</span> <span class="toc-text"> Ⅳ - 指令周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%BC%93%E5%AD%98"><span class="toc-number">3.2.</span> <span class="toc-text"> 2、为什么需要缓存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-cpu%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text"> 3、CPU 的作用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#i-%E7%BC%A9%E7%9F%AD%E5%BB%B6%E8%BF%9F"><span class="toc-number">3.3.1.</span> <span class="toc-text"> Ⅰ - 缩短延迟</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ii-%E6%8F%90%E9%AB%98%E5%91%BD%E4%B8%AD%E7%8E%87"><span class="toc-number">3.3.2.</span> <span class="toc-text"> Ⅱ - 提高命中率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iii-%E9%99%8D%E4%BD%8E%E6%9B%B4%E4%BD%8E%E7%BA%A7%E5%88%AB%E5%86%85%E5%AD%98%E4%B8%8B%E7%9A%84%E5%BC%80%E9%94%80"><span class="toc-number">3.3.3.</span> <span class="toc-text"> Ⅲ - 降低更低级别内存下的开销</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iv-%E5%87%8F%E5%B0%91%E9%94%99%E5%A4%B1%E6%83%A9%E7%BD%9A"><span class="toc-number">3.3.4.</span> <span class="toc-text"> Ⅳ - 减少错失惩罚</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%97%B6%E9%92%9F%E5%91%A8%E6%9C%9F%E4%B8%8E%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F"><span class="toc-number">3.4.</span> <span class="toc-text"> 4、时钟周期与指令周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AD%98%E5%82%A8%E5%8D%95%E5%85%83%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">3.5.</span> <span class="toc-text"> 5、存储单元 (寄存器)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E6%9A%82%E5%AD%98%E6%8C%87%E4%BB%A4-%E6%95%B0%E6%8D%AE%E5%92%8C%E5%9C%B0%E5%9D%80-%E5%9C%A8cpu%E4%B8%AD%E5%88%86%E4%B8%BA"><span class="toc-number">3.5.0.0.0.1.</span> <span class="toc-text"> 寄存器可以用来暂存指令、数据和地址。在 CPU 中分为</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-cpu%E7%9A%84%E5%A4%9A%E7%BA%A7%E7%BC%93%E5%AD%98%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98"><span class="toc-number">4.</span> <span class="toc-text"> 四、CPU 的多级缓存 (高速缓存)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98cache%E9%80%9A%E5%B8%B8%E5%88%86%E4%B8%BAl1l2l3%E4%B8%89%E7%BA%A7%E9%80%9F%E5%BA%A6%E9%80%92%E5%87%8F%E5%AE%B9%E9%87%8F%E9%80%92%E5%A2%9E%E6%98%AF%E4%B8%BA%E4%BA%86%E5%BC%A5%E8%A1%A5cpu%E4%B8%8E%E5%86%85%E5%AD%98%E4%B9%8B%E9%97%B4%E8%BF%90%E7%AE%97%E9%80%9F%E5%BA%A6%E7%9A%84%E5%B7%AE%E5%BC%82%E8%80%8C%E8%AE%BE%E7%BD%AE%E7%9A%84%E7%A1%AC%E4%BB%B6"><span class="toc-number">4.0.0.0.0.1.</span> <span class="toc-text"> 高速缓存（cache）通常分为 L1,L2,L3 三级，速度递减，容量递增，是为了弥补 CPU 与内存之间运算速度的差异而设置的硬件</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%A4%9A%E7%BA%A7%E7%BC%93%E5%AD%98%E5%87%BA%E7%8E%B0%E7%9A%84%E6%84%8F%E4%B9%89"><span class="toc-number">4.1.</span> <span class="toc-text"> 1、多级缓存出现的意义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#i-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81cpu-cache"><span class="toc-number">4.1.1.</span> <span class="toc-text"> Ⅰ - 为什么需要 CPU Cache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ii-cpu-cache-%E6%9C%89%E4%BB%80%E4%B9%88%E6%84%8F%E4%B9%89"><span class="toc-number">4.1.2.</span> <span class="toc-text"> Ⅱ - CPU Cache 有什么意义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%8E%9F%E7%90%86"><span class="toc-number">4.2.</span> <span class="toc-text"> 2、原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">4.3.</span> <span class="toc-text"> 3、数据结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-cpu%E7%9A%84%E5%A4%9A%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">4.4.</span> <span class="toc-text"> 4、CPU 的多级缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ii-%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98-l1-cache"><span class="toc-number">4.4.1.</span> <span class="toc-text"> Ⅱ - 一级缓存 (L1 Cache)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#cpu%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98%E5%B0%B1%E6%98%AF%E6%8C%87-cpu-%E7%9A%84%E7%AC%AC%E4%B8%80%E5%B1%82%E7%BA%A7%E7%9A%84%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98-%E4%B8%BB%E8%A6%81%E6%8B%85%E5%BD%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%98%AF-%E7%BC%93%E5%AD%98%E6%8C%87%E4%BB%A4-%E5%92%8C-%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE"><span class="toc-number">4.4.1.0.0.1.</span> <span class="toc-text"> CPU 一级缓存，就是指 CPU 的第一层级的高速缓存，主要担当的工作是 缓存指令 和 缓存数据 .</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ii-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98-l2-cache"><span class="toc-number">4.4.2.</span> <span class="toc-text"> Ⅱ - 二级缓存 (L2 Cache)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#cpu-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98-%E5%B0%B1%E6%98%AF%E6%8C%87-cpu-%E7%9A%84%E7%AC%AC%E4%BA%8C%E5%B1%82%E7%BA%A7%E7%9A%84%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98"><span class="toc-number">4.4.2.0.0.1.</span> <span class="toc-text"> CPU 二级缓存，就是指 CPU 的第二层级的高速缓存</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iii-%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98-l3-cache"><span class="toc-number">4.4.3.</span> <span class="toc-text"> Ⅲ - 三级缓存 (L3 Cache)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%92%8C%E4%B8%80%E7%BA%A7-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E4%B8%8D%E5%90%8C%E7%9A%84%E6%98%AF%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98%E6%97%B6%E6%A0%B8%E5%BF%83%E5%85%B1%E4%BA%AB%E7%9A%84%E8%83%BD%E5%A4%9F%E5%B0%86%E5%AE%B9%E9%87%8F%E5%81%9A%E5%BE%88%E5%A4%A7"><span class="toc-number">4.4.3.0.0.1.</span> <span class="toc-text"> 和一级、二级缓存不同的是，三级缓存时核心共享的，能够将容量做很大</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iv-%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7mesi"><span class="toc-number">4.4.4.</span> <span class="toc-text"> Ⅳ - 缓存一致性 (MESI)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-m-modified-%E4%BF%AE%E6%94%B9"><span class="toc-number">4.4.4.1.</span> <span class="toc-text"> ① M: Modified 修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-exclusive-%E7%8B%AC%E4%BA%AB"><span class="toc-number">4.4.4.2.</span> <span class="toc-text"> ② Exclusive 独享</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-share-%E5%85%B1%E4%BA%AB"><span class="toc-number">4.4.4.3.</span> <span class="toc-text"> ③ Share 共享</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-invalid-%E6%97%A0%E6%95%88%E7%9A%84"><span class="toc-number">4.4.4.4.</span> <span class="toc-text"> ④ Invalid 无效的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E5%AF%B9%E5%BA%94%E7%9A%84%E5%9B%9B%E4%B8%AA%E6%93%8D%E4%BD%9C"><span class="toc-number">4.4.4.5.</span> <span class="toc-text"> ⑤对应的四个操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E"><span class="toc-number">4.4.4.5.1.</span> <span class="toc-text"> a) 详细说明</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
        <ul>
          <li><a href="/2023/07/02/%E6%B5%AE%E7%82%B9%E6%95%B0%E5%AD%98%E5%82%A8/" rel="bookmark" title="浮点数存储">浮点数存储</a></li><li class="active"><a href="/2024/01/02/%E7%BC%93%E5%AD%98%E3%80%81%E5%86%85%E5%AD%98%E3%80%81CPU%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A7%A3%E6%9E%90%E7%AC%94%E8%AE%B0/" rel="bookmark" title="计组知识点">计组知识点</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="dmq"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">dmq</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">80</span>
        <span class="name">文章</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">64</span>
        <span class="name">分类</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">100</span>
        <span class="name">标签</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RtcTA/dGFiPXJlcG9zaXRvcmllcw==" title="https:&#x2F;&#x2F;github.com&#x2F;dmq0?tab&#x3D;repositories"><i class="ic i-github"></i></span>
      <span class="exturl item npm" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL35kbXEwMDA=" title="https:&#x2F;&#x2F;www.npmjs.com&#x2F;~dmq000"><i class="ic i-file"></i></span>
      <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9kLTg4LTYxLTgz" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;d-88-61-83"><i class="ic i-zhihu"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTgwMjc4OTk0OTE=" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;8027899491"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vdS83NjI1OTAxNzE3" title="https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;7625901717"><i class="ic i-weibo"></i></span>
      <span class="exturl item email" data-url="bWFpbHRvOjMyNjc4MDc1MTRAcXEuY29t" title="mailto:3267807514@qq.com"><i class="ic i-envelope"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>介绍</a>
  </li>

    
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a>
  </li>

    
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a>
  </li>

    
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a>
  </li>

    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a>
  </li>

    
  <li class="item">
    <a href="/links/" rel="section"><i class="ic i-magic"></i>工具</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2024/01/02/%E9%A1%B9%E7%9B%AE%E8%B4%A8%E9%87%8F%E6%A3%80%E6%B5%8B/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2024/01/02/node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>随机文章</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/json-server/" title="分类于 json-server">json-server</a>
</div>

    <span><a href="/2023/01/09/json-server%E6%95%99%E7%A8%8B/" title="json-server">json-server</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/electron/" title="分类于 electron">electron</a>
</div>

    <span><a href="/2024/05/21/electron/" title="electron">electron</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%BE%AE%E5%89%8D%E7%AB%AF/" title="分类于 微前端">微前端</a>
</div>

    <span><a href="/2024/05/24/%E5%BE%AE%E5%89%8D%E7%AB%AF/" title="微前端">微前端</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%9D%82%E8%AE%B0/" title="分类于 杂记">杂记</a>
</div>

    <span><a href="/2023/01/01/%E6%9D%82%E8%AE%B0/" title="杂记">杂记</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Node-js/" title="分类于 Node.js">Node.js</a>
</div>

    <span><a href="/2024/05/24/node/" title="Node学习笔记">Node学习笔记</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Travis%E5%92%8CDocker/" title="分类于 Travis和Docker">Travis和Docker</a>
</div>

    <span><a href="/2023/12/02/Travis%20CI%E5%92%8CDocker%E7%9A%84%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" title="Travis和Docker的持续集成">Travis和Docker的持续集成</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E9%A1%B9%E7%9B%AE%E8%B4%A8%E9%87%8F%E6%A3%80%E6%B5%8B/" title="分类于 项目质量检测">项目质量检测</a>
</div>

    <span><a href="/2024/01/02/%E9%A1%B9%E7%9B%AE%E8%B4%A8%E9%87%8F%E6%A3%80%E6%B5%8B/" title="项目质量检测">项目质量检测</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Linux/" title="分类于 Linux">Linux</a>
</div>

    <span><a href="/2023/01/22/linux%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="Linux">Linux</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/react/" title="分类于 react">react</a>
</div>

    <span><a href="/2023/12/02/react/" title="react笔记">react笔记</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/JS/" title="分类于 JS">JS</a>
</div>

    <span><a href="/2023/12/21/%E6%9C%80%E5%A4%A7%E5%AE%89%E5%85%A8%E6%95%B0/" title="最大安全数与最大安全整数">最大安全数与最大安全整数</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>最新评论</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2022 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">dmq @ Web blog</span>
  </div>
  <div class="count">
    <span class="post-meta-item-icon">
      <i class="ic i-chart-area"></i>
    </span>
    <span title="站点总字数">943k 字</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="ic i-coffee"></i>
    </span>
    <span title="站点阅读时长">14:17</span>
  </div>
  <div class="powered-by">
    基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2024/01/02/缓存、内存、CPU知识点解析笔记/',
    favicon: {
      show: "科技引领未来",
      hide: "欢迎与我交流"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://polyfill.alicdn.com/polyfill.min.js?features=Promise%2CArray.prototype.includes"></script>

<script src="//gcore.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>


  <script data-pjax>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9ba187659e850a6910681214f0faa16b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


</body>
</html>
