{
    "version": "https://jsonfeed.org/version/1",
    "title": "æœæ˜æ¸…çš„ä¸ªäººåšå®¢",
    "subtitle": "ğŸ‘»æ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ ğŸ‘»",
    "icon": "https://dmqweb.cn/images/favicon.ico",
    "description": "",
    "home_page_url": "https://dmqweb.cn",
    "items": [
        {
            "id": "https://dmqweb.cn/2024/05/08/%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD/",
            "url": "https://dmqweb.cn/2024/05/08/%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD/",
            "title": "å‡½æ•°é‡è½½",
            "date_published": "2024-05-08T14:35:51.000Z",
            "content_html": "<h1 id=\"æ¦‚å¿µ\"><a class=\"anchor\" href=\"#æ¦‚å¿µ\">#</a> æ¦‚å¿µ</h1>\n<p>å‡½æ•°é‡è½½æ˜¯æŒ‡åœ¨ç¼–ç¨‹è¯­è¨€ä¸­å…è®¸å®šä¹‰å¤šä¸ªåŒåå‡½æ•°ï¼Œä½†æ˜¯ä»–ä»¬çš„å‚æ•°ç±»å‹ã€å‚æ•°ä¸ªæ•°æˆ–è€…è¿”å›ç±»å‹ä¸åŒï¼Œç¼–è¯‘å™¨æˆ–è§£æå™¨ä¼šæ ¹æ®è°ƒç”¨æ—¶æä¾›çš„å‚æ•°ç±»å‹å’Œä¸ªæ•°æ¥ç¡®å®šä½¿ç”¨å“ªä¸ªå‡½æ•°</p>\n<h1 id=\"ä½œç”¨\"><a class=\"anchor\" href=\"#ä½œç”¨\">#</a> ä½œç”¨</h1>\n<p>å‡½æ•°é‡è½½çš„ä¸»è¦ç›®çš„å°±æ˜¯æé«˜ä»£ç çš„å¯è¯»æ€§å’Œçµæ´»æ€§ï¼ŒåŒæ—¶é¿å…äº†ä¸ºä¸åŒåŠŸèƒ½ç¼–å†™ä¸åŒçš„å‡½æ•°åå¯¼è‡´çš„å˜é‡å‘½åå†²çªå’Œæ··ä¹±ã€‚</p>\n<h1 id=\"å®ç°å‡½æ•°é‡è½½\"><a class=\"anchor\" href=\"#å®ç°å‡½æ•°é‡è½½\">#</a> å®ç°å‡½æ•°é‡è½½</h1>\n<h2 id=\"ts\"><a class=\"anchor\" href=\"#ts\">#</a> ts</h2>\n<p>ts ä¸­è¿›è¡Œå‡½æ•°é‡è½½å…¶å®å°±æ˜¯æ ¹æ®å‹å‚æ•°ç»„çš„ä¸ªæ•°å’Œå¯¹å˜é‡è¿›è¡Œ typeof æ£€æµ‹ï¼Œç„¶åæ ¹æ®ä¸åŒçš„æƒ…å†µè¿›è¡Œåˆ†æ”¯å¤„ç†</p>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å‡½æ•°é‡è½½çš„å£°æ˜</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">average</span><span class=\"token punctuation\">(</span>numbers<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å‡½æ•°ç­¾å 1ï¼šæ¥å—æ•°å­—æ•°ç»„å¹¶è¿”å›æ•°å­—</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">average</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>numbers<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å‡½æ•°ç­¾å 2ï¼šæ¥å—å¯å˜æ•°é‡çš„æ•°å­—å‚æ•°å¹¶è¿”å›æ•°å­—</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// å‡½æ•°å®ç°</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">average</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// å®é™…å‡½æ•°å®ç°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">let</span> sum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// å¦‚æœä¼ å…¥çš„æ˜¯æ•°ç»„</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç±»å‹æ–­è¨€ä¸ºæ•°å­—æ•°ç»„</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> num <span class=\"token keyword\">of</span> numbers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            sum <span class=\"token operator\">+=</span> num<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> sum <span class=\"token operator\">/</span> numbers<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// å¦‚æœä¼ å…¥çš„æ˜¯å¤šä¸ªæ•°å­—</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> num <span class=\"token keyword\">of</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            sum <span class=\"token operator\">+=</span> num<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> sum <span class=\"token operator\">/</span> args<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Invalid arguments'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// æŠ›å‡ºé”™è¯¯ï¼Œä¸æ”¯æŒçš„å‚æ•°ç±»å‹</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// è°ƒç”¨å‡½æ•°é‡è½½</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">average</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¾“å‡º: 3</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">average</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¾“å‡º: 3</span></pre></td></tr></table></figure><h2 id=\"js\"><a class=\"anchor\" href=\"#js\">#</a> js</h2>\n<p>js ä¸­ä¹Ÿå¯ä»¥é€šè¿‡ typeof å’Œå½¢å‚æ•°ç»„è¿›è¡Œå‡½æ•°é‡è½½ï¼Œä¸è¿‡å½“ç„¶è¿˜æœ‰æ›´å¥½çš„åšæ³•ï¼ŒjQuery ä½œè€…å¸¸ç”¨å¦‚ä¸‹å®ç°å‡½æ•°é‡è½½ï¼ˆè¿›è¡Œé‡è½½ä¹‹å‰è¦è°ƒç”¨ä¸€æ¬¡å‡½æ•°ï¼‰ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">addMethod</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">object<span class=\"token punctuation\">,</span>name<span class=\"token punctuation\">,</span>fn</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">const</span> old <span class=\"token operator\">=</span> object<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    object<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> fn<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> old <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token function\">old</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">const</span> searcher <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å°†å¯¹è±¡ä¸­å¯¹åº”å±æ€§çš„é‡è½½æ–¹æ³•å…¨éƒ¨å­˜å‚¨èµ·æ¥</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token function\">addMethod</span><span class=\"token punctuation\">(</span>searcher<span class=\"token punctuation\">,</span><span class=\"token string\">'getUsers'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token function\">addMethod</span><span class=\"token punctuation\">(</span>searcher<span class=\"token punctuation\">,</span><span class=\"token string\">'getUsers'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// æ³¨æ„é»˜è®¤å‚æ•°çš„å½¢å‚æ•°é‡ä¸ä¸è®¡æ•°</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æŒ‰ç…§å§“åæŸ¥è¯¢ç”¨æˆ·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>searcher<span class=\"token punctuation\">.</span><span class=\"token function\">getUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å¦ä¸€ç§å®ç°æ–¹æ³•å°±æ˜¯ä½¿ç”¨æ˜ å°„ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">createOverload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">const</span> fnMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">function</span> <span class=\"token function\">overload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">it</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">typeof</span> it<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">const</span> fn <span class=\"token operator\">=</span> fnMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TypeError</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å®ç°'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    overload<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">addImpl</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">const</span> fn <span class=\"token operator\">=</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> fn <span class=\"token operator\">!==</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TypeError</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æœ€åä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å‡½æ•°'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        fnMap<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">return</span> overload<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">const</span> getUsers <span class=\"token operator\">=</span> <span class=\"token function\">createOverload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>getUsers<span class=\"token punctuation\">.</span><span class=\"token function\">addImpl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>getUsers<span class=\"token punctuation\">.</span><span class=\"token function\">addImpl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'number'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page<span class=\"token punctuation\">,</span>size<span class=\"token operator\">=</span><span class=\"token number\">10</span></span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æŒ‰ç…§é¡µç å’Œæ•°é‡æŸ¥è¯¢ç”¨æˆ·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>getUsers<span class=\"token punctuation\">.</span><span class=\"token function\">addImpl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'number'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'number'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page<span class=\"token punctuation\">,</span>size<span class=\"token operator\">=</span><span class=\"token number\">10</span></span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æŒ‰ç…§é¡µç å’Œæ•°é‡æŸ¥è¯¢ç”¨æˆ·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>getUsers<span class=\"token punctuation\">.</span><span class=\"token function\">addImpl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æŒ‰ç…§å§“åæŸ¥è¯¢ç”¨æˆ·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>getUsers<span class=\"token punctuation\">.</span><span class=\"token function\">addImpl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æŒ‰ç…§æ€§åˆ«æŸ¥è¯¢ç”¨æˆ·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token function\">getUsers</span><span class=\"token punctuation\">(</span><span class=\"token string\">'asfsdf'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹å®ç°æ€è·¯ï¼Œé€šè¿‡ createOverload å‡½æ•°è°ƒç”¨å¯ä»¥è¿”å›ä¸€ä¸ªé‡è½½åçš„å‡½æ•°ï¼ŒcreateOverload å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ª mapï¼Œmap ä¸­å°†å‚æ•°ç±»å‹å’Œä¸ªæ•°ä¸å¯¹åº”çš„å‡½æ•°ç›¸åŒ¹é…ï¼Œè¿”å›çš„é‡è½½å‡½æ•°åœ¨è°ƒç”¨æ—¶ä¼šæ ¹æ®å‚æ•°çš„ç±»å‹å» map ä¸­å¯»æ‰¾å¯¹åº”çš„å‡½æ•°ï¼Œé€šè¿‡ apply ç»‘å®š this ä½œç”¨åŸŸå’Œå‚æ•°æ‰§è¡Œå³å¯ã€‚</p>\n",
            "tags": [
                "JS",
                "JS,å‡½æ•°é‡è½½"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/05/07/miniwebpack/",
            "url": "https://dmqweb.cn/2024/05/07/miniwebpack/",
            "title": "å®ç°miniwebpack",
            "date_published": "2024-05-06T22:16:30.000Z",
            "content_html": "<h1 id=\"å‰ç½®çŸ¥è¯†\"><a class=\"anchor\" href=\"#å‰ç½®çŸ¥è¯†\">#</a> å‰ç½®çŸ¥è¯†</h1>\n<p>æˆ‘ä»¬éƒ½çŸ¥é“ webpack æ˜¯åŸºäº babel è¿›è¡Œè¯­æ³•è½¬æ¢çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æå‰äº†è§£ä¸€äº› babel çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>\n<ul>\n<li>@babel/parser æ¨¡å—ï¼šç”¨äºå°† js ä»£ç è½¬ä¸ºæŠ½è±¡è¯­æ³•æ ‘</li>\n<li>@babel/traverse æ¨¡å—ï¼šç”¨äºéå†å’Œæ“ä½œæŠ½è±¡è¯­æ³•æ ‘ï¼ˆå¤„ç†å¯¼å…¥çš„æ¨¡å—ï¼‰</li>\n<li>@babel/core æ¨¡å—ï¼šbabel çš„æ ¸å¿ƒæ¨¡å—ï¼Œç”¨äºå°†æŠ½è±¡è¯­æ³•æ ‘è½¬æ¢ä¸ºä»£ç ä¿¡æ¯å¯¹è±¡ï¼ˆåŒ…å«é‡è¦çš„ code å±æ€§ï¼Œè¡¨ç¤ºè½¬æ¢åç”Ÿæˆçš„ä»£ç ï¼‰</li>\n<li>@babel/preset-env æ¨¡å—ï¼šbabel ä¸­çš„ä¸€ä¸ªé¢„è®¾ï¼Œå¯ä»¥åœ¨ babel.transformFromAst ä¸­ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­ presets å­—æ®µä¼ å…¥ï¼Œå¯ä»¥æ ¹æ®å½“å‰ç¯å¢ƒå°†ä»£ç è½¬æˆç›¸åº”çš„å…¼å®¹ç‰ˆæœ¬ã€‚</li>\n</ul>\n<h1 id=\"æµç¨‹å›¾\"><a class=\"anchor\" href=\"#æµç¨‹å›¾\">#</a> æµç¨‹å›¾</h1>\n<p><img data-src=\"/images/Snipaste_2024-05-07_07-23-59.jpg\" alt=\"miniwebpack\" /></p>\n<h1 id=\"å¼€å§‹ç¼–ç \"><a class=\"anchor\" href=\"#å¼€å§‹ç¼–ç \">#</a> å¼€å§‹ç¼–ç </h1>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// @babel/parser ç”¨äºå°† js ä»£ç è½¬åŒ–ä¸ºæŠ½è±¡è¯­æ³•æ ‘</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> parser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@babel/parser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// @babel/traverse ç”¨äºéå†å’Œæ“ä½œæŠ½è±¡è¯­æ³•æ ‘</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> traverse <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@babel/traverse\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// Babel çš„æ ¸å¿ƒåŠŸèƒ½åŒ…å«åœ¨ @babel/core æ¨¡å—ä¸­</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> babel <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@babel/core\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 1. åˆ†æä¾èµ–</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">parseModules</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">const</span> entry <span class=\"token operator\">=</span> <span class=\"token function\">getModuleInfo</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">const</span> temp <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>entry<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">const</span> depsGraph <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token function\">getDeps</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">,</span> entry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  temp<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">moduleInfo</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// éå†å…¨éƒ¨æ¨¡å—ä¿¡æ¯æ•°ç»„</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    depsGraph<span class=\"token punctuation\">[</span>moduleInfo<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// æ˜ å°„ file è·¯å¾„å’Œ codeã€deps</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token literal-property property\">deps</span><span class=\"token operator\">:</span> moduleInfo<span class=\"token punctuation\">.</span>deps<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> moduleInfo<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">return</span> depsGraph<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">getDeps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">temp<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>deps<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>deps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> <span class=\"token function\">getModuleInfo</span><span class=\"token punctuation\">(</span>deps<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    temp<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token function\">getDeps</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">getModuleInfo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token comment\">// è¯»å–æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">,</span> <span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token comment\">// è½¬åŒ–ä¸º AST</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token keyword\">const</span> ast <span class=\"token operator\">=</span> parser<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">sourceType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"module\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token keyword\">const</span> deps <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>ast<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token comment\">// è·å– import å¯¼å…¥çš„æ¨¡å—</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token function\">ImportDeclaration</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span>node<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token keyword\">const</span> dirname <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token comment\">// è·å–æ ‡å‡†åŒ–è·¯å¾„</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token keyword\">const</span> absPath <span class=\"token operator\">=</span> <span class=\"token string\">\"./\"</span> <span class=\"token operator\">+</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>dirname<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      deps<span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> absPath<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span>code<span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> babel<span class=\"token punctuation\">.</span><span class=\"token function\">transformFromAst</span><span class=\"token punctuation\">(</span>ast<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token comment\">// ä½¿ç”¨é¢„è®¾</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token literal-property property\">presets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token keyword\">const</span> moduleInfo <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>file<span class=\"token punctuation\">,</span> deps<span class=\"token punctuation\">,</span> code<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token keyword\">return</span> moduleInfo<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token comment\">// 2. å®ç° bundle</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">bundle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>  <span class=\"token comment\">// å°†æ¨¡å—è½¬ä¸ºå¼•ç”¨è·¯å¾„å’Œæ˜ å°„ codeã€deps çš„å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token keyword\">const</span> depsGraph <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token function\">parseModules</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">(function (graph) &#123;</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    function require(file) &#123;</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      function absRequire(realPath) &#123;</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        return require(graph[file].deps[realPath]);  //é€’å½’è°ƒç”¨è·å–è¿”å›å€¼</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>      var exports = &#123;&#125;;   //exportså¯¹è±¡ï¼Œç”¨äºå­˜å‚¨æ¨¡å—çš„è¿”å›å€¼ä¿¡æ¯</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      (function (require, exports, code) &#123;</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        eval(code);   //evalå‡½æ•°ç”¨äºæ‰§è¡Œå­—ç¬¦ä¸²çš„jsä»£ç ï¼Œä¼ å…¥requireï¼Œexportså’Œcode</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>      &#125;)(absRequire, exports, graph[file].code);</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>      return exports;</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    &#125;</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    require('</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>file<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">');</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  &#125;)(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>depsGraph<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">);</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">bundle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/index.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token comment\">// å°†å†…å®¹å†™å…¥åˆ°è¾“å‡ºæ–‡ä»¶ </span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./dist/bundle.js\"</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token comment\">//webpack æ‰“åŒ…åçš„ js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„é”®æ˜¯æ¨¡å—è·¯å¾„ï¼Œå€¼æ˜¯æ¨¡å—å‡½æ•°ä»£ç </span></pre></td></tr></table></figure>",
            "tags": [
                "webpack",
                "webpack,miniwebpack"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/04/30/%E6%B7%B1%E6%8B%B7%E8%B4%9D/",
            "url": "https://dmqweb.cn/2024/04/30/%E6%B7%B1%E6%8B%B7%E8%B4%9D/",
            "title": "æ·±æ‹·è´",
            "date_published": "2024-04-30T09:34:25.000Z",
            "content_html": "<h1 id=\"æ·±æ‹·è´\"><a class=\"anchor\" href=\"#æ·±æ‹·è´\">#</a> æ·±æ‹·è´</h1>\n<h2 id=\"ä»‹ç»\"><a class=\"anchor\" href=\"#ä»‹ç»\">#</a> ä»‹ç»</h2>\n<p>æˆ‘ä»¬çŸ¥é“åœ¨ javascript ä¸­æœ‰å…«ç§æ•°æ®ç±»å‹ï¼šå…¶ä¸­ numberï¼Œstringï¼Œundefinedï¼Œnullï¼Œbooleanï¼Œsymbol å’Œ bigint ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œ object ä¸ºå¤æ‚æ•°æ®ç±»å‹</p>\n<h2 id=\"å­˜å‚¨\"><a class=\"anchor\" href=\"#å­˜å‚¨\">#</a> å­˜å‚¨</h2>\n<ul>\n<li>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå…¶å€¼ç›´æ¥å­˜å‚¨äºæ ˆä¸­ã€‚</li>\n<li>å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼Œå…¶å€¼å­˜å‚¨äºå †ä¸­ï¼Œè€Œæ ˆä¸­åªå­˜å‚¨å †ä¸­çš„åœ°å€ã€‚è¿™æ ·åšçš„å¥½å¤„æœ‰ï¼š\n<ul>\n<li>èŠ‚çœå†…å­˜ç©ºé—´ï¼šå­˜å‚¨åœ¨å †ä¸­çš„å¯¹è±¡å¯ä»¥é€šè¿‡æ ˆå†…çš„å¼•ç”¨è¢«è®¿é—®å’Œæ“ä½œï¼Œæ„å‘³ç€å¯¹è±¡å¯ä»¥åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­è¢«å…±äº«å’Œå¼•ç”¨ï¼Œä»è€ŒèŠ‚çœå†…å­˜ã€‚</li>\n<li>åƒåœ¾å›æ”¶ï¼šå †å†…å­˜ä¸­çš„å¯¹è±¡ä¸å†è¢«å¼•ç”¨æ—¶ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¼šè‡ªåŠ¨è¿›è¡Œå›æ”¶ï¼Œä»è€Œé¿å…äº†å†…å­˜æ³„æ¼å’Œèµ„æºæµªè´¹ã€‚</li>\n<li>åŠ¨æ€åˆ†é…å†…å­˜ï¼šå †å†…å­˜å…è®¸å¯¹è±¡åŠ¨æ€çš„å¢é•¿å’Œç¼©å°ï¼Œå› æ­¤å¯ä»¥æ ¹æ®éœ€è¦çµæ´»åœ°ä¿®æ”¹å¯¹è±¡çš„ç»“æ„å’Œå†…å®¹ï¼Œä½¿å¾— js å¯¹è±¡å¯ä»¥è½»æ¾åœ°æ‰©å±•ä»¥é€‚åº”ä¸åŒçš„åº”ç”¨éœ€æ±‚ã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æ·±æ‹·è´-2\"><a class=\"anchor\" href=\"#æ·±æ‹·è´-2\">#</a> <strong>æ·±æ‹·è´</strong></h2>\n<p>è€Œæ·±æ‹·è´å’Œæµ…æ‹·è´å°±æ˜¯å¯¹äºå¤æ‚æ•°æ®ç±»å‹ object æ¥è¯´çš„ï¼Œå½“æ‹·è´äº†å¯¹è±¡çš„ä¸€å±‚ï¼ˆå³å †çš„å¼•ç”¨ï¼‰æ—¶ï¼Œå°±ç§°ä¹‹ä¸ºæµ…æ‹·è´ï¼Œå½“æ‹·è´äº†å¯¹è±¡çš„ä¸¤å±‚ï¼ˆå †ä¸­åˆ›å»ºæ–°çš„å¯¹è±¡ï¼‰æ—¶ï¼Œå°±ç§°ä¹‹ä¸ºæ·±æ‹·è´ã€‚</p>\n<h2 id=\"å®ç°æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#å®ç°æ–¹æ¡ˆ\">#</a> å®ç°æ–¹æ¡ˆ</h2>\n<ol>\n<li>\n<p><code>JSON.parse(JSON.stringify(obj))</code> ï¼Œç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ JSON æ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æœ‰ä¸€äº›é™åˆ¶ï¼šJSON åºåˆ—åŒ–æ—¶å‡½æ•°ä¼šè¢«è½¬ä¸º nullï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šè¢«è½¬ä¸ºç©ºå¯¹è±¡ã€‚</p>\n</li>\n<li>\n<p><code>Object.assign(&#123;&#125;,obj)</code> ï¼Œç¬¬äºŒæ–¹æ³•æ˜¯ä½¿ç”¨ Object.assign ()</p>\n</li>\n<li>\n<p>é€’å½’å®ç°ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">js</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>function deepCopy(obj, parent = null) &#123;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    // åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    let result = &#123;&#125;;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    let keys = Object.keys(obj),</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        key = null,</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        temp = null,</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        _parent = parent;</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    // è¯¥å­—æ®µæœ‰çˆ¶çº§åˆ™éœ€è¦è¿½æº¯è¯¥å­—æ®µçš„çˆ¶çº§</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    while (_parent) &#123;</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        // å¦‚æœè¯¥å­—æ®µå¼•ç”¨äº†å®ƒçš„çˆ¶çº§åˆ™ä¸ºå¾ªç¯å¼•ç”¨</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        if (_parent.originalParent === obj) &#123;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            // å¾ªç¯å¼•ç”¨ç›´æ¥è¿”å›åŒçº§çš„æ–°å¯¹è±¡</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            return _parent.currentParent;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        &#125;</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        _parent = _parent.parent;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    &#125;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    for (let i = 0; i &lt; keys.length; i++) &#123;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        key = keys[i];</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        temp = obj[key];</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        // å¦‚æœå­—æ®µçš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        if (temp &amp;&amp; typeof temp === 'object') &#123;</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            // é€’å½’æ‰§è¡Œæ·±æ‹·è´ å°†åŒçº§çš„å¾…æ‹·è´å¯¹è±¡ä¸æ–°å¯¹è±¡ä¼ é€’ç»™ parent æ–¹ä¾¿è¿½æº¯å¾ªç¯å¼•ç”¨</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            result[key] = DeepCopy(temp, &#123;</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                originalParent: obj,</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                currentParent: result,</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                parent: parent</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            &#125;);</pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        &#125; else &#123;</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            result[key] = temp;</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        &#125;</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    &#125;</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    return result;</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>&#125;</pre></td></tr><tr><td data-num=\"36\"></td><td><pre></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span></pre></td></tr></table></figure></li>\n<li>\n<p>MessageChannel å®ç°æ·±å…‹éš†ï¼šç”±äºæµè§ˆå™¨ä¸èƒ½å°†ä¸€ä¸ªå‡½æ•°æ­£ç¡®çš„å¤åˆ¶åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ä¸èƒ½æ”¯æŒå‡½æ•°çš„æ·±å…‹éš†ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">deepCopy</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span>port1<span class=\"token punctuation\">,</span> port2<span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MessageChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    port2<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onmessage</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">ev</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    port1<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">deepCopy</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">copy</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// å¼‚æ­¥çš„</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">let</span> copyObj <span class=\"token operator\">=</span> copy<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copyObj<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copyObj <span class=\"token operator\">==</span> obj<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n",
            "tags": [
                "é¢è¯•é¢˜",
                "æ·±æ‹·è´,é¢è¯•é¢˜"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/04/29/%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7/",
            "url": "https://dmqweb.cn/2024/04/29/%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7/",
            "title": "å‰ç«¯ç›‘æ§",
            "date_published": "2024-04-29T00:36:51.000Z",
            "content_html": "<h1 id=\"å‰ç«¯ç›‘æ§\"><a class=\"anchor\" href=\"#å‰ç«¯ç›‘æ§\">#</a> å‰ç«¯ç›‘æ§</h1>\n<h1 id=\"ä»‹ç»\"><a class=\"anchor\" href=\"#ä»‹ç»\">#</a> ä»‹ç»</h1>\n<p><strong>ä¸ºä»€ä¹ˆè¦è¿›è¡Œå‰ç«¯ç›‘æ§ï¼š</strong></p>\n<ul>\n<li>é¡µé¢çš„è®¿é—®è¡Œä¸ºï¼ŒPVã€UVã€IPã€PV ç‚¹å‡»ç‡ã€UV ç‚¹å‡»ç‡ã€åœç•™æ—¶é•¿</li>\n<li>ç”¨æˆ·çš„æ“ä½œè¡Œä¸ºï¼Œæ¨¡å—æ›å…‰ã€</li>\n<li>æ¨¡å—ç‚¹å‡»</li>\n<li>é¡µé¢çš„æ€§èƒ½ï¼Œé¦–å±æ¸²æŸ“æ—¶é—´ã€API è¯·æ±‚æ—¶é—´</li>\n<li>å¼‚å¸¸çš„ç›‘æ§ï¼ŒJS Errorã€API å¼‚å¸¸ã€ä¸šåŠ¡å¼‚å¸¸</li>\n<li>ä¸šåŠ¡çš„ç›‘æ§ï¼Œæˆäº¤é‡‘é¢ã€æ¯æ—¥æ¶ˆæ¯æ•°</li>\n</ul>\n<p><strong>å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š</strong></p>\n<ul>\n<li>æµé‡åˆ†æ</li>\n</ul>\n<p><strong>å¸¸è§çš„å‰ç«¯ç›‘æ§å¹³å°ï¼š</strong></p>\n<ul>\n<li>ç™¾åº¦ç»Ÿè®¡</li>\n<li>é˜¿é‡Œäº‘ ARMS</li>\n<li>å‹ç›Ÿ</li>\n</ul>\n<p><strong>å‰ç«¯ç›‘æ§çš„æ•°æ®æœ‰ä»€ä¹ˆä½œç”¨</strong></p>\n<ul>\n<li>æµé‡æ•°æ®ç›‘æ§ï¼Œå¦‚ï¼šPVã€UVã€ç‚¹å‡»ç‡ã€é¡µé¢åœç•™æ—¶é•¿ç­‰</li>\n<li>è‡ªå®šä¹‰äº‹ä»¶ç›‘æ§ï¼Œå¦‚ï¼šæ›å…‰äº‹ä»¶ã€æ»‘åŠ¨äº‹ä»¶ã€è¯·æ±‚äº‹ä»¶ç­‰</li>\n<li>äº¤æ˜“æŒ‡æ ‡ç›‘æ§ï¼Œå¦‚ï¼šæˆäº¤é¢ã€è½¬åŒ–ç‡ç­‰</li>\n<li>å…¶ä»–ç»¼åˆåˆ†æï¼Œå¦‚ï¼šç”¨æˆ·ç”»åƒåˆ†æã€æµé‡æ¼æ–—ã€é”€é‡é¢„æµ‹ç­‰</li>\n</ul>\n<p><strong>å‰ç«¯ç›‘æ§çš„ä¸‰ä¸ªé˜¶æ®µ</strong></p>\n<ul>\n<li>åˆé˜¶ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹å¹³å°ï¼Œç™¾åº¦ã€å‹ç›Ÿã€é˜¿é‡Œäº‘ ARMS ç­‰</li>\n<li>ä¸­é˜¶ï¼šè‡ªç ”å‰ç«¯ç›‘æ§åº“ï¼Œç¼ºä¹å®Œæ•´çš„ç›‘æ§ä½“ç³»</li>\n<li>é«˜é˜¶ï¼šè‡ªç ”å‰ç«¯ç›‘æ§å¹³å°ï¼Œå…·å¤‡å®Œæ•´çš„ç›‘æ§ä½“ç³»</li>\n</ul>\n<h1 id=\"ç™¾åº¦ç»Ÿè®¡æ¥å…¥\"><a class=\"anchor\" href=\"#ç™¾åº¦ç»Ÿè®¡æ¥å…¥\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly90b25namkuYmFpZHUuY29tLw==\">ç™¾åº¦ç»Ÿè®¡æ¥å…¥</span></h1>\n<p><strong>æµé‡åˆ†æå…è´¹ï¼Œè¡Œä¸ºåˆ†æéœ€è¦ä»˜è´¹ã€‚</strong></p>\n<ol>\n<li>å®˜ç½‘åˆ›å»ºç½‘ç«™ï¼Œè®¾ç½®åŸŸåå’Œé¦–é¡µ</li>\n<li>ä¿è¯åŸŸåå…¬å…±å¯è¯»</li>\n<li>å¤åˆ¶ç»Ÿè®¡ä»£ç ï¼Œæ·»åŠ åˆ°è¦è·Ÿè¸ªçš„ç½‘é¡µä¸­ï¼ˆåŠ å…¥åˆ° head æ ‡ç­¾ä¹‹å‰ï¼‰</li>\n</ol>\n<p><strong>é˜¿é‡Œäº‘ ARM å’Œå‹ç›Ÿåˆ†ææ–¹æ¡ˆè¾ƒå…¨ï¼Œæ¥å…¥æ–¹æ¡ˆå¤§è‡´ç›¸åŒï¼Œä½†æ˜¯å½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œæœ‰ä¸€å®šçš„æˆæœ¬ï¼Œæ‰€ä»¥è€ƒè™‘è‡ªå»ºå‰ç«¯ç»Ÿè®¡ç³»ç»Ÿã€‚</strong></p>\n<p><strong>ä»€ä¹ˆæ—¶å€™éœ€è¦è€ƒè™‘è‡ªå»ºå‰ç«¯ç›‘æ§ç³»ç»Ÿï¼Ÿ</strong></p>\n<ol>\n<li>ä¸ä»…ä»…éœ€è¦æµé‡åˆ†æï¼Œè¿˜éœ€è¦åšè¡Œä¸ºåˆ†æ</li>\n<li>è‡ªå»ºæˆæœ¬å°äºæˆ–ç­‰äºå¹³å°ä»˜è´¹</li>\n<li>å¸Œæœ›ç½‘ç«™ç›‘æ§æ•°æ®èƒ½å­˜åˆ°è‡ªå·±æ•°æ®åº“ä¸­ï¼Œå¹¶ä¸”æ•°æ®éšç§åŒ–ã€‚</li>\n</ol>\n<h1 id=\"ç›‘æ§å¹³å°æ¶æ„\"><a class=\"anchor\" href=\"#ç›‘æ§å¹³å°æ¶æ„\">#</a> ç›‘æ§å¹³å°æ¶æ„</h1>\n<p><strong>å‰ç«¯ç›‘æ§å¹³å°çš„åˆ†å±‚ï¼š</strong></p>\n<ul>\n<li>\n<p>å‰ç«¯ç›‘æ§ JSSDK</p>\n<ul>\n<li>é‡‡é›†</li>\n<li>ä¸ŠæŠ¥\n<ul>\n<li>é»˜è®¤ä¸ŠæŠ¥ï¼šé¡µé¢ PVã€æ€§èƒ½ç­‰</li>\n<li>æ‰‹åŠ¨ä¸ŠæŠ¥ï¼šé¡µé¢æ“ä½œè¡Œä¸º</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>å‰ç«¯ç›‘æ§ API å’Œå¤§æ•°æ®ä»“åº“</p>\n<ul>\n<li>æ¥æ”¶ä¸ŠæŠ¥çš„æ•°æ®</li>\n<li>æ•°æ®ä»“åº“ï¼šMaxCompute\n<ul>\n<li>æ•°æ®æŸ¥è¯¢</li>\n<li>æ•°æ®å­˜å‚¨</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>å‰ç«¯ç›‘æ§æ•°æ®å¯è§†åŒ–</p>\n<ul>\n<li>æ—¥å¿—å¤§æ•°æ®æ¸…æ´—</li>\n<li>å¤§æ•°æ®å›æµ RDSï¼ˆéç»“æ„åŒ–æ•°æ® =&gt; ç»“æ„åŒ–æ•°æ®ï¼‰</li>\n</ul>\n</li>\n</ul>\n<p><strong>ç›‘æ§å¹³å°æ¶æ„è¯´æ˜ï¼š</strong></p>\n<p><img data-src=\"/images/Snipaste_2024-04-29_08-11-46.jpg\" alt=\"ç›‘æ§å¹³å°æ¶æ„\" /></p>\n<h2 id=\"jsåº“çš„å¼€å‘\"><a class=\"anchor\" href=\"#jsåº“çš„å¼€å‘\">#</a> JS åº“çš„å¼€å‘</h2>\n<h4 id=\"js-sdk\"><a class=\"anchor\" href=\"#js-sdk\">#</a> JS  SDK</h4>\n<p>monitor.jsï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'collect'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">upload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'upload'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>window<span class=\"token punctuation\">.</span>testMonitor <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    collect<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    upload<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œåœ¨éœ€è¦ç›‘æ§çš„é¡µé¢å¼•å…¥è„šæœ¬ã€‚</p>\n<p><strong>ä¸€ã€ç›´æ¥å¼•å…¥è„šæœ¬ï¼š</strong></p>\n<p>ç›´æ¥ä½¿ç”¨ script æ ‡ç­¾å¼•å…¥åœ¨çº¿åœ°å€ã€‚</p>\n<p><strong>äºŒã€å¼‚æ­¥åŠ è½½ï¼ˆç¡®ä¿è„šæœ¬åŠ è½½å®Œæˆåå†ä½¿ç”¨ apiï¼‰ï¼š</strong></p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> script <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    script<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'https://imooc.youbaobao.xyz/imooc-cli-monitor.js'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    body<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">,</span>body<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    script<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">var</span> event <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'onMonitorScriptLoad'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'onMonitorScriptLoad'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    window<span class=\"token punctuation\">.</span>testMonitor<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    window<span class=\"token punctuation\">.</span>testMonitor<span class=\"token punctuation\">.</span><span class=\"token function\">upload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"pvåŸ‹ç‚¹\"><a class=\"anchor\" href=\"#pvåŸ‹ç‚¹\">#</a> PV åŸ‹ç‚¹</h4>\n<p><strong>ä¸€ã€åˆ†åŒ…ä¾¿äºä»£ç ä¹¦å†™å’Œç»´æŠ¤</strong></p>\n<p>å‡è®¾å°†é¡¹ç›®åˆ†ä¸ºï¼šindex.jsã€collect.js å’Œ upload.js ä¸‰ä¸ª js æ–‡ä»¶ï¼Œåˆ†åˆ«ç”¨äºæ•´åˆã€æ”¶é›†å’Œä¸ŠæŠ¥ã€‚</p>\n<p><strong>äºŒã€è®¾ç½®é¡µé¢åŸºæœ¬ä¿¡æ¯</strong></p>\n<p>åœ¨ meta æ ‡ç­¾ä¸­è®¾ç½®å˜é‡ï¼Œå‡è®¾ä¸ºï¼štest-app-idï¼Œåœ¨ body æ ‡ç­¾ä¸­è®¾ç½® test-page-idï¼Œæ­¤å˜é‡ç”¨äºåŒºåˆ†ä¸åŒçš„ç«™ç‚¹ã€‚</p>\n<p><strong>ä¸‰ã€collect.js</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> upload <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./upload'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// è‡ªå®šä¹‰ä¸€äº›é’©å­å‡½æ•°</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">let</span> beforeCreateParams<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">let</span> beforeUpload<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">let</span> afterUpload<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">onError</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æ”¶é›†å¼€å§‹...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// é‡‡é›†ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">customData<span class=\"token punctuation\">,</span>eventType</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">let</span> appId <span class=\"token punctuation\">,</span> pageId <span class=\"token punctuation\">,</span> timeStamp <span class=\"token punctuation\">,</span> ua<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    beforeCreateParams <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">beforeCreateParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">const</span> metaList <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'meta'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span> metaList<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">const</span> meta <span class=\"token operator\">=</span> metaList<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>meta<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test-app-id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>meta<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test-app-id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            appId <span class=\"token operator\">=</span> meta<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test-app-id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>         <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>       <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    pageId <span class=\"token operator\">=</span> body<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test-page-id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>appId <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>pageId<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    timeStamp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    ua <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>userAgent<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>appId<span class=\"token punctuation\">,</span>pageId<span class=\"token punctuation\">,</span>timeStamp<span class=\"token punctuation\">,</span>ua<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">appId=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>appId<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">&amp;pageId=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>pageId<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">&amp;timeStamp=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>timeStamp<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">&amp;ua=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>ua<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>beforeUpload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        data <span class=\"token operator\">=</span> <span class=\"token function\">beforeUpload</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å…è®¸å®šåˆ¶æ•°æ®</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\">// æ—¥å¿—ä¸ŠæŠ¥</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token comment\">//upload (&#123;appId,pageId,timeStamp,ua&#125;)  ä¸å¸¸ç”¨</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">let</span> url <span class=\"token punctuation\">,</span> uploadData<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token operator\">...</span>customData<span class=\"token punctuation\">,</span><span class=\"token operator\">...</span>data<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    \t<span class=\"token keyword\">const</span> ret <span class=\"token operator\">=</span> <span class=\"token function\">upload</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>eventType<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        url <span class=\"token operator\">=</span> ret<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        uploadData <span class=\"token operator\">=</span> ret<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">finally</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        afterUpload <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">afterUpload</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span>uploadData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token comment\">// å‘é€ PV æ—¥å¿—</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sendPV</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>\t<span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token string\">'PV'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token comment\">// ä¸ŠæŠ¥æ›å…‰åŸ‹ç‚¹</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sendExp</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>\t<span class=\"token function\">collection</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span><span class=\"token string\">'EXP'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token comment\">// æ³¨å†Œé’©å­å‡½æ•°</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">registerBeforeCreateParams</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    beforeCreateParams <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">registerBeforeUpload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    beforeUpload <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">registerAfterUpload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    afterUpload <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">registerOnError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    onError <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong>å››ã€upload.js</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">upload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">const</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// åˆ©ç”¨ image æ ‡ç­¾è·¨åŸŸç‰¹æ€§</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> eventType <span class=\"token operator\">=</span> <span class=\"token string\">\"PV\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> options<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">const</span> params <span class=\"token operator\">=</span> <span class=\"token function\">encodeURIComponent</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'&amp;eventType='</span> <span class=\"token operator\">+</span> eventType<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> <span class=\"token string\">'http://dmqtest.com?data='</span> <span class=\"token operator\">+</span> params <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">,</span>src<span class=\"token punctuation\">,</span>eventType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    img <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// æ³¨æ„å†…å­˜é‡Šæ”¾</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> src<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            params<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> upload<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong>äº”ã€index.js</strong></p>\n<pre><code>import &#123; sendPV , registerBeforeCreateParams,registerBeforeUpload,registerAfterUpload &#125; from './collect';\nimport &#123; upload &#125; from './upload';\nwindow.testMonitor = &#123;\n\tupload,\n\tsendPV,\n\tregisterBeforeCreateParams,\n\tregisterBeforeUpload,\n\tregisterAfterUpload,\n\tregisterOnError\n&#125;\n</code></pre>\n<p><strong>å…­ã€index.html</strong></p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">test-app-id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app123456<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Document<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>https://dmqtest.com/index.js<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token attr-name\">test-page-id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>page123456<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    \twindow<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    \t\twindow<span class=\"token punctuation\">.</span>testMonitor<span class=\"token punctuation\">.</span><span class=\"token function\">registerBeforeCreateParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    \t\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'åˆ›å»ºä¹‹å‰'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    \t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            window<span class=\"token punctuation\">.</span>testMonitor<span class=\"token punctuation\">.</span><span class=\"token function\">registerBrforeUpload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token keyword\">return</span> params <span class=\"token operator\">+</span> <span class=\"token string\">'&amp;custom=1'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// æ·»åŠ è‡ªå®šä¹‰æ•°æ®</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            window<span class=\"token punctuation\">.</span>testMonitor<span class=\"token punctuation\">.</span><span class=\"token function\">registerAfterUpload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token punctuation\">,</span>data</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    \t\twindow<span class=\"token punctuation\">.</span>testMonitor<span class=\"token punctuation\">.</span><span class=\"token function\">sendPV</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    \t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"æ›å…‰åŸ‹ç‚¹\"><a class=\"anchor\" href=\"#æ›å…‰åŸ‹ç‚¹\">#</a> æ›å…‰åŸ‹ç‚¹</h4>\n<p>æ›å…‰åŸ‹ç‚¹è®°å½•å…ƒç´ ç”±ä¸å¯å˜åˆ°å¯å˜çš„è¿‡ç¨‹ï¼Œéœ€è¦æµè§ˆå™¨ IntersectionObserver è¿™ä¸ª API çš„æ”¯æŒã€‚</p>\n<p><strong>æµè§ˆå™¨ 5 ç§ Observerï¼š</strong></p>\n<ul>\n<li>MutationObserverï¼ˆç”¨äºç›‘å¬ DOM æ ‘çš„å˜åŒ–ï¼Œä¸€èˆ¬ä¸ºå±æ€§ã€å­èŠ‚ç‚¹çš„å¢åˆ æ”¹ï¼‰</li>\n<li>IntersectionObserverï¼ˆç”¨äºç›‘å¬ä¸€ä¸ªå…ƒç´ å’Œå¯è§†åŒºåŸŸç›¸äº¤éƒ¨åˆ†çš„æ¯”åˆ—ï¼Œç„¶ååœ¨å¯è§†æ¯”åˆ—åˆ°è¾¾æŸä¸€é˜ˆå€¼çš„æ—¶å€™è§¦å‘å›è°ƒï¼‰</li>\n<li>PerformanceObserverï¼ˆç”¨äºæ£€æµ‹æ€§èƒ½åº¦é‡äº‹ä»¶ï¼Œåœ¨æµè§ˆå™¨çš„æ€§èƒ½äº‹ä»¶è½´è®°å½•ä¸‹ä¸€ä¸ªæ–°çš„ performance entries çš„æ—¶å€™å°†ä¼šè¢«é€šçŸ¥ï¼‰</li>\n<li>ResizeObserverï¼ˆç”¨äºç›‘å¬ DOM çš„å˜åŒ–ï¼Œä¸€èˆ¬ä¸ºèŠ‚ç‚¹çš„å‡ºç°å’Œéšè—ï¼ŒèŠ‚ç‚¹å¤§å°çš„å˜åŒ–ï¼‰</li>\n<li>ReportingObserverï¼ˆç”¨äºç›‘å¬è¿‡æ—¶çš„ apiã€æµè§ˆå™¨çš„ä¸€äº›å¹²é¢„è¡Œä¸ºçš„é¢„å‘Šï¼‰</li>\n</ul>\n<p><strong>IntersectionObserverï¼š</strong></p>\n<p><strong>æ–¹æ³•ï¼š</strong></p>\n<ul>\n<li>\n<p>observeï¼šå¼€å§‹ç›‘å¬ä¸€ä¸ªç›®æ ‡å…ƒç´ </p>\n<p>è¯­æ³•ï¼šIntersectionObserver.disconnect ();</p>\n</li>\n<li>\n<p>disconnectï¼šåœæ­¢ç›‘å¬</p>\n<p>è¯­æ³•ï¼šIntersectionObserver.observe (targetElement);</p>\n</li>\n<li>\n<p>takeRecords: è¿”å›æ‰€æœ‰è§‚å¯Ÿç›®æ ‡çš„ IntersectionObserverEntry å¯¹è±¡æ•°ç»„ã€‚</p>\n<p>è¯­æ³•ï¼šintersectionObserverEntries = intersectionObserver.takeRecords ();</p>\n</li>\n<li>\n<p>unobserve: ä½¿ IntersectionObserver åœæ­¢ç›‘å¬ç‰¹å®šç›®æ ‡å…ƒç´ </p>\n<p>è¯­æ³•ï¼šIntersectionObserver.unobserve (targetElement);</p>\n</li>\n</ul>\n<p><strong>é…ç½®é¡¹ï¼š</strong></p>\n<ul>\n<li>targetElementï¼šç›®æ ‡ DOM</li>\n<li>rootï¼šæŒ‡å®šæ ¹ç›®å½•ï¼Œä¹Ÿå°±å°±æ˜¯å½“ç›®æ ‡å…ƒç´ æ˜¾ç¤ºåœ¨è¿™ä¸ªå…ƒç´ ä¸­æ—¶ä¼šè§¦å‘ç›‘æ§å›è°ƒ</li>\n<li>rootMarginï¼šç±»ä¼¼äº css çš„ marginï¼Œè®¾å®š root å…ƒç´ çš„è¾¹æ¡†åŒºåŸŸã€‚</li>\n<li>threholdï¼šé˜ˆå€¼ï¼Œå†³å®šäº†ä»€ä¹ˆæ—¶å€™è§¦å‘å›è°ƒå‡½æ•°ã€‚</li>\n</ul>\n<p><strong>è¿”å›å‚æ•°ï¼š</strong></p>\n<ul>\n<li>tIme: å¯è§æ€§å‘ç”Ÿå˜åŒ–çš„æ—¶é—´ï¼Œæ˜¯ä¸€ä¸ªé«˜ç²¾åº¦æ—¶é—´æˆ³ï¼Œå•ä½ä¸ºæ¯«ç§’</li>\n<li>rootBounds: æ˜¯åœ¨æ ¹å…ƒç´ çŸ©å½¢åŒºåŸŸçš„ä¿¡æ¯</li>\n<li>intersectionRatio: ç›®æ ‡å…ƒç´ çš„å¯è§æ¯”ä¾‹</li>\n<li>intersectionRect: ç›®æ ‡å…ƒç´ ä¸æ ¹å…ƒç´ äº¤å‰åŒºåŸŸçš„ä¿¡æ¯</li>\n<li>isIntersecting: åˆ¤æ–­å…ƒç´ æ˜¯å¦ç¬¦åˆ options ä¸­çš„å¯è§æ¡ä»¶</li>\n<li>boundingClientRect: ç›®æ ‡å…ƒç´ çš„çŸ©å½¢åŒºåŸŸçš„ä¿¡æ¯</li>\n<li>target: è¢«è§‚å¯Ÿçš„ç›®æ ‡å…ƒç´ </li>\n</ul>\n<p><strong>upload.js æ–‡ä»¶ä¸­æ·»åŠ ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//.... çœç•¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// ä¸ŠæŠ¥æ›å…‰åŸ‹ç‚¹</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sendExp</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token function\">collection</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span><span class=\"token string\">'EXP'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// æœ€ååœ¨ index.js ä¸­æš´éœ²å‡ºå»ã€‚</span></pre></td></tr></table></figure><p><strong>collect.js æ–‡ä»¶ä¸­æ·»åŠ ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//.... çœç•¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">collectAppear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> appearEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'onAppear'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">const</span> disappearEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'onDisappear'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">let</span> ob<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>testMonitorObserver<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        ob <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>testMonitorObserver<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        ob <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>intersectionRatio <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">+</span> <span class=\"token string\">'appear'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                item<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>appearEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">+</span> <span class=\"token string\">'disappear'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                item<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>disappearEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">let</span> obList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">const</span> appear <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[appear]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>appear<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>obList<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>appear<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            ob<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>appear<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            obList<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>appear<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    window<span class=\"token punctuation\">.</span>testMonitorObserver <span class=\"token operator\">=</span> ob<span class=\"token punctuation\">;</span> <span class=\"token comment\">// å­˜èµ·æ¥é˜²æ­¢é‡å¤</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    window<span class=\"token punctuation\">.</span>monitorObserverList <span class=\"token operator\">=</span> obList<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>index.js ä¸­ä½¿ç”¨ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//... çœç•¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//import å¼•å…¥ collectAppear å‡½æ•°ã€‚</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function\">collectAppear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"ç‚¹å‡»åŸ‹ç‚¹\"><a class=\"anchor\" href=\"#ç‚¹å‡»åŸ‹ç‚¹\">#</a> <strong>ç‚¹å‡»åŸ‹ç‚¹</strong></h4>\n<p><strong>collect.js ä¸­æ·»åŠ ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//... çœç•¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// ä¸ŠæŠ¥ç‚¹å‡»åŸ‹ç‚¹</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sendClick</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token function\">collection</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span><span class=\"token string\">'CLICK'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// æš´éœ²å‡ºå»ï¼Œindex.js å¯¼å…¥è¯¥æ–¹æ³•å¹¶æš´éœ²å‡ºå»ã€‚</span></pre></td></tr></table></figure><h4 id=\"è‡ªå®šä¹‰åŸ‹ç‚¹\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰åŸ‹ç‚¹\">#</a> è‡ªå®šä¹‰åŸ‹ç‚¹</h4>\n<p><strong>collect.js ä¸­æ·»åŠ ï¼š</strong></p>\n<p>è‡ªå®šä¹‰åŸ‹ç‚¹è¡Œä¸ºå°±ç›´æ¥åœ¨å†…éƒ¨æ·»åŠ  CUSTOM å¯¹åº”çš„å¤„ç†é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ Observer å®ç°æ›´å¤šåŠŸèƒ½ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//... çœç•¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// ä¸ŠæŠ¥è‡ªå®šä¹‰åŸ‹ç‚¹</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sendCustom</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token function\">collection</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span><span class=\"token string\">'CUSTOM'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// æš´éœ²å‡ºå»ï¼Œindex.js å¯¼å…¥è¯¥æ–¹æ³•å¹¶æš´éœ²å‡ºå»ã€‚</span></pre></td></tr></table></figure><h2 id=\"å¤§æ•°æ®å¹³å°å¼€å‘\"><a class=\"anchor\" href=\"#å¤§æ•°æ®å¹³å°å¼€å‘\">#</a> å¤§æ•°æ®å¹³å°å¼€å‘</h2>\n<p><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvbWF4Y29tcHV0ZS8jOn46dGV4dD0lRTQlQkElOTElRTUlOEUlOUYlRTclOTQlOUYlRTUlQTQlQTclRTYlOTUlQjAlRTYlOEQlQUUlRTglQUUlQTElRTclQUUlOTclRTYlOUMlOEQlRTUlOEElQTEsJTI4TWF4Q29tcHV0ZSUyOSVFNiU5OCVBRiVFNCVCOCU4MCVFNyVBNyU4RCVFNSVCRiVBQiVFOSU4MCU5RiVFMyU4MCU4MSVFNSVBRSU4QyVFNSU4NSVBOCVFNiU4OSU5OCVFNyVBRSVBMSVFNyU5QSU4NFRCJTJGUEIlRTclQkElQTclRTYlOTUlQjAlRTYlOEQlQUUlRTQlQkIlOTMlRTUlQkElOTMlRTglQTclQTMlRTUlODYlQjMlRTYlOTYlQjklRTYlQTElODglRTMlODAlODIlMjBNYXhDb21wdXRlJUU1JTkwJTkxJUU3JTk0JUE4JUU2JTg4JUI3JUU2JThGJTkwJUU0JUJFJTlCJUU0JUJBJTg2JUU1JUFFJThDJUU1JTk2JTg0JUU3JTlBJTg0JUU2JTk1JUIwJUU2JThEJUFFJUU1JUFGJUJDJUU1JTg1JUE1JUU2JTk2JUI5JUU2JUExJTg4JUU0JUJCJUE1JUU1JThGJThBJUU1JUE0JTlBJUU3JUE3JThEJUU3JUJCJThGJUU1JTg1JUI4JUU3JTlBJTg0JUU1JTg4JTg2JUU1JUI4JTgzJUU1JUJDJThGJUU4JUFFJUExJUU3JUFFJTk3JUU2JUE4JUExJUU1JTlFJThCJUVGJUJDJThDJUU4JTgzJUJEJUU1JUE0JTlGJUU2JTlCJUI0JUU1JUJGJUFCJUU5JTgwJTlGJUU3JTlBJTg0JUU4JUE3JUEzJUU1JTg2JUIzJUU3JTk0JUE4JUU2JTg4JUI3JUU2JUI1JUI3JUU5JTg3JThGJUU2JTk1JUIwJUU2JThEJUFFJUU4JUFFJUExJUU3JUFFJTk3JUU5JTk3JUFFJUU5JUEyJTk4JUVGJUJDJThDJUU2JTlDJTg5JUU2JTk1JTg4JUU5JTk5JThEJUU0JUJEJThFJUU0JUJDJTgxJUU0JUI4JTlBJUU2JTg4JTkwJUU2JTlDJUFDJUVGJUJDJThDJUU1JUI5JUI2JUU0JUJGJTlEJUU5JTlBJTlDJUU2JTk1JUIwJUU2JThEJUFFJUU1JUFFJTg5JUU1JTg1JUE4JUUzJTgwJTgy\">MaxCompute é˜¿é‡Œäº‘åŸç”Ÿå¤§æ•°æ®è®¡ç®—æœåŠ¡</span>ï¼š</strong></p>\n<p>MaxCompute æ˜¯åŸºäºæ•°æ®åˆ†æåœºæ™¯çš„ä¼ä¸šçº§ SaaS æ¨¡å¼äº‘æ•°æ®ä»“åº“ï¼Œä»¥ Serverless æ¶æ„æä¾›å¿«é€Ÿã€å…¨æ‰˜ç®¡çš„åœ¨çº¿æ•°æ®ä»“åº“æœåŠ¡ï¼Œæ¶ˆé™¤äº†ä¼ ç»Ÿæ•°æ®å¹³å°åœ¨èµ„æºæ‰©å±•æ€§å’Œå¼¹æ€§æ–¹é¢çš„é™åˆ¶ï¼Œæœ€å°åŒ–ç”¨æˆ·è¿ç»´æŠ•å…¥ã€‚</p>\n<p><strong>ä½¿ç”¨ï¼š</strong></p>\n<ol>\n<li>\n<p>ä½¿ç”¨ MaxCompute åˆ›å»ºæ•°æ®åº“ï¼Œåœ¨æ•°æ®å¼€å‘é¡µé¢åˆ›å»ºè¡¨è¿›è¡Œè®°å½•å‰ç«¯ç›‘æ§æ•°æ®</p>\n</li>\n<li>\n<p>ä½¿ç”¨ py è„šæœ¬å¯¹æ¥ï¼ˆæš‚æ—¶æ²¡æœ‰ js åŒ…ï¼‰ï¼Œéœ€è¦å®‰è£… python å’Œ pipï¼ˆåŒ…ç®¡ç†å·¥å…·ï¼‰</p>\n</li>\n<li>\n<p>å®‰è£… pyodpsï¼š <code>pip install pyodps</code></p>\n</li>\n<li>\n<p>connect.py æ–‡ä»¶ä¸­å†™å…¥ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> odps <span class=\"token keyword\">import</span> ODPS<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>odps <span class=\"token operator\">=</span> ODPS<span class=\"token punctuation\">(</span><span class=\"token string\">'LTAI5tBDj3HajwRVhc6me5KR'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'DJqWAI1IWUBZnZGE#FKDSFJDEJLet'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'test_monitor'</span><span class=\"token punctuation\">,</span>endpoint<span class=\"token operator\">=</span><span class=\"token string\">'https://service-cn-hangzhou.odps.aliyun-inc.com'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>result <span class=\"token operator\">=</span> odps<span class=\"token punctuation\">.</span>executexecute_sql<span class=\"token punctuation\">(</span><span class=\"token string\">'select * from test_monitor where datetime=\"20240325\"'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">with</span> result<span class=\"token punctuation\">.</span>open_reader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">for</span> record <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>record<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>record<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># æ‰“å°è¡¨å</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">for</span> table <span class=\"token keyword\">in</span> odps<span class=\"token punctuation\">.</span>list_tables<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">[</span><span class=\"token string\">'appid123'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'pageid123'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'123456'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ua123'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'http://www.baidu.com'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'20240325'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'202403'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># å†™å…¥æ•°æ®</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>odps<span class=\"token punctuation\">.</span>write_table<span class=\"token punctuation\">(</span><span class=\"token string\">'test_table'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># .... ç­‰ç­‰åç»­æ“ä½œ</span></pre></td></tr></table></figure></li>\n</ol>\n<p><strong>å‰ç«¯ç›‘æ§å¹³å°å¯è§†åŒ–æ¶æ„å›¾ï¼š</strong></p>\n<p><img data-src=\"/images/Snipaste_2024-04-30_15-14-09.jpg\" alt=\"å‰ç«¯ç›‘æ§æµç¨‹æ¶æ„\" /></p>\n",
            "tags": [
                "å‰ç«¯ç›‘æ§",
                "å‰ç«¯ç›‘æ§"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/04/16/%E4%B8%89%E6%96%B9%E5%8C%85/",
            "url": "https://dmqweb.cn/2024/04/16/%E4%B8%89%E6%96%B9%E5%8C%85/",
            "title": "ä¸‰æ–¹åº“",
            "date_published": "2024-04-16T08:33:16.000Z",
            "content_html": "<h1 id=\"è„šæ‰‹æ¶å¼€å‘\"><a class=\"anchor\" href=\"#è„šæ‰‹æ¶å¼€å‘\">#</a> <strong>è„šæ‰‹æ¶å¼€å‘</strong></h1>\n<p><strong>å¸¸è§å·¥å…·åŒ…</strong></p>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY29tbWFuZGVy\">Commander</span></strong></th>\n<th><strong>æä¾›ä¸€ä¸ªè¿è´¯çš„  <code>API</code> ï¼Œç”¨äºå®šä¹‰  <code>CLI</code>  åº”ç”¨ç¨‹åºçš„å„ä¸ªæ–¹é¢ï¼Œå¦‚å‘½ä»¤ã€é€‰é¡¹ã€åˆ«åå’Œå¸®åŠ©ã€‚ç®€åŒ–äº†å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºçš„åˆ›å»ºã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UveWFyZ3M=\">yargs</span></strong></td>\n<td><strong>è„šæ‰‹æ¶å¼€å‘æ¡†æ¶ï¼Œé€šè¿‡è§£æå‚æ•°å’Œç”Ÿæˆä¼˜é›…çš„ç”¨æˆ·ç•Œé¢æ¥å¸®åŠ©æ‚¨æ„å»ºäº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbGVybmE=\">lerna</span></strong></td>\n<td><strong>å¤š package ç®¡ç†</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaW5xdWlyZXI=\">Inquirer</span></strong></td>\n<td><strong>ä¸€ä¸ªæ˜“äºåµŒå…¥ä¸”ç¾è§‚çš„  <code>Node.js</code>  å‘½ä»¤è¡Œç•Œé¢ã€‚ æä¾›äº†å¾ˆæ£’çš„æŸ¥è¯¢ä¼šè¯æµç¨‹ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY2hhbGs=\">Chalk</span></strong></td>\n<td><strong> <code>Chalk</code>  æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åº“ï¼Œåˆ›å»ºå®ƒçš„ç›®çš„å¾ˆç®€å• â€”â€” ç»™ä½ çš„ç»ˆç«¯å­—ç¬¦ä¸²æ·»åŠ æ ·å¼ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY29sb3Jz\">colors</span></strong></td>\n<td><strong>æ‰“å° <code>ä¸åŒé¢œè‰²çš„logä¿¡æ¯</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvb3Jh\">ora</span></strong></td>\n<td><strong>å‘½ä»¤è¡Œ <code>ä¸­é«˜çº§çš„</code> ã€ <code>åŠŸèƒ½ä¸°å¯Œçš„é«˜å¯å®šåˆ¶åŒ–åŠ è½½åŠ¨ç”»</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY2xpLXNwaW5uZXI=\">cli-spinner</span></strong></td>\n<td><strong>å‘½ä»¤è¡Œä¸­ <code>è½»é‡çš„ç¬¦å·åŠ è½½åŠ¨ç”»</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbnBtbG9n\">npmlog</span></strong></td>\n<td><strong>æ‰§è¡Œ npm çš„æ—¥å¿—è®°å½•ã€‚å®ƒæ”¯æŒ <code>è‡ªå®šä¹‰çº§åˆ«å’Œå½©è‰²è¾“å‡º</code> ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaW1wb3J0LWxvY2Fs\">import-local</span></strong></td>\n<td><strong>å½“ä¸å…¨å±€å†²çªçš„æ—¶å€™ï¼Œæ¯”å¦‚å…¨å±€å’Œæœ¬åœ°éƒ½æœ‰è¿™ä¸ªè„šæ‰‹æ¶æ—¶å¯ä»¥ä½¿ç”¨ï¼Œ <code>åˆ¤æ–­ä½¿ç”¨çš„æ˜¯å¦æ˜¯æœ¬åœ°ç‰ˆæœ¬</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZmluZHVw\">findup</span></strong></td>\n<td><strong> <code>å‘ä¸ŠæŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcGF0aC1leGlzdHM=\">path-exists</span></strong></td>\n<td><strong> <code>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZGVidWc=\">Debug</span></strong></td>\n<td><strong>ä¸€ä¸ªå¾ˆå°çš„  <code>JavaScript</code>  è°ƒè¯•å®ç”¨ç¨‹åºã€‚ åªéœ€å°†ä¸€ä¸ªå‡½æ•°çš„åç§°ä¼ é€’ç»™æ¨¡å—ï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ä¸ªç»è¿‡ä¿®é¥°çš„  <code>console.error</code>  ç‰ˆæœ¬ï¼Œä»¥ä¾¿ä½ å°†è°ƒè¯•è¯­å¥ä¼ é€’ç»™è¯¥æ¨¡å—</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZnMtZXh0cmE=\">fs-extra</span></strong></td>\n<td><strong>fs æ¨¡å—çš„æ‰©å±•ï¼Œæ”¯æŒæ›´å¤šæ–‡ä»¶æ“ä½œåŠŸèƒ½</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc2VtdmVy\">semver</span></strong></td>\n<td><strong> <code>ç‰ˆæœ¬æ¯”å¯¹å·¥å…·</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZmlnbGV0\">figlet</span></strong></td>\n<td><strong>è¾“å‡ºä¸€äº›ç‹¬ç‰¹çš„å¤§å‹ <code>ASCIIæ–‡æœ¬æ¨ªå¹…</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdXNlci1ob21l\">user-home</span></strong></td>\n<td><strong>è·å– <code>ç”¨æˆ·ä¸»ç›®å½•</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZG90ZW52\">dotenv</span></strong></td>\n<td><strong>è·å– <code>ç¯å¢ƒå˜é‡</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvcm9vdC1jaGVjaw==\">root-check</span></strong></td>\n<td><strong>æ£€æŸ¥æ˜¯å¦æ˜¯ <code>ç®¡ç†å‘˜æƒé™å¯åŠ¨å¹¶è‡ªåŠ¨é™çº§</code> ï¼Œé˜²æ­¢åç»­å› æ™®é€šæƒé™å¯¼è‡´æ— æ³•ä½¿ç”¨ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcGtnLWRpcg==\">pkg-dir</span></strong></td>\n<td><strong>ä»æŸä¸ªç›®å½•å¼€å§‹å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°å­˜åœ¨ <code>package.json</code>  çš„ç›®å½•ï¼Œå¹¶è¿”å›è¯¥ç›®å½•ã€‚å¦‚æœæœªæ‰¾åˆ°åˆ™è¿”å› null</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbWluaW1pc3Q=\">minimist</span></strong></td>\n<td><strong>ç”¨æ¥ <code>è§£æå‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„åº“</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbnBtaW5zdGFsbA==\">npminstall</span></strong></td>\n<td><strong> <code>å®‰è£…npmä¸Šçš„åŒ…</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZG93bmxvYWQtZ2l0LXJlcG8=\">download-git-repo</span></strong></td>\n<td><strong> <code>å®‰è£…gitä»“åº“ä¸­çš„åŒ…</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZWpz\">ejs</span></strong></td>\n<td><strong> <code>xmlæ¨¡æ¿æ•°æ®åŠ¨æ€æ¸²æŸ“</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZ2xvYg==\">glob</span></strong></td>\n<td><strong>æ ¹æ® <code>æ–‡ä»¶è·¯å¾„è¿›è¡Œéå†å’ŒåŒ¹é…æ–‡ä»¶</code> ï¼Œæ‹¿åˆ°æ–‡ä»¶çš„å†…å®¹ã€‚</strong></td>\n</tr>\n</tbody>\n</table>\n<p><strong>åº•å±‚åŸç†åŒ…</strong></p>\n<table>\n<thead>\n<tr>\n<th><strong>readlineï¼ˆnode å†…ç½®åº“ï¼‰</strong></th>\n<th><strong>å‘½ä»¤è¡Œçš„è¾“å…¥è¾“å‡º</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>eventsï¼ˆnode å†…ç½®åº“ï¼‰</strong></td>\n<td><strong>äº‹ä»¶é©±åŠ¨</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc3RyZWFt\">stream</span></strong></td>\n<td><strong>è¾“å…¥è¾“å‡ºæµ</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYW5zaS1lc2NhcGVz\">ansi-escapes</span></strong></td>\n<td><strong>è‡ªå®šä¹‰ <code>å‘½ä»¤è¡Œæ–‡å­—æ ·å¼</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvcnhqcw==\">rxjs</span></strong></td>\n<td><strong> <code>å¤„ç†å¼‚æ­¥äº‹ä»¶æµ</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYnVzYm95\">busboy</span></strong></td>\n<td><strong> <code>å¤šæ–‡ä»¶ä¸Šä¼ åº•å±‚åº“</code> ï¼Œå°¤å…¶ç”¨äºæµå¼æ–‡ä»¶ä¸Šä¼ ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc3R5bGVkLWNvbXBvbmVudHM=\">styled-components</span></strong></td>\n<td>css-in-js ç†è®ºå·¥å…·ï¼Œåœ¨ <code>jsä¸­ä¹¦å†™cssæ ·å¼</code></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc3R5bGVkLWpzeA==\">styled-jsx</span></strong></td>\n<td>css-in-js ç†è®ºå·¥å…·ï¼Œåœ¨ <code>jsä¸­ä¹¦å†™cssæ ·å¼</code> ï¼ˆts æ”¯æŒä¸å‹å¥½ï¼‰</td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZW1vdGlvbg==\">emotion</span></strong></td>\n<td>css-in-js ç†è®ºå·¥å…·ï¼Œåœ¨ <code>jsä¸­ä¹¦å†™cssæ ·å¼</code></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcmVhY3Qtcm91dGVyLWRvbQ==\">react-router-dom</span></strong></td>\n<td>react åœ¨ dom ç¯å¢ƒä¸‹çš„ <code>è·¯ç”±å·¥å…·</code></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"vue\"><a class=\"anchor\" href=\"#vue\">#</a> <strong>Vue</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQG53c2VlL2NvcmU=\">https://www.npmjs.com/package/@nwsee/core</span></strong></th>\n<th><strong>vue é¡¹ç›®æ’ä»¶ï¼Œç”¨äºé¡µé¢æ€§èƒ½ç›‘æ§</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"react\"><a class=\"anchor\" href=\"#react\">#</a> <strong>React</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQGV4Y2FsaWRyYXcvZXhjYWxpZHJhdw==\">excalidraw</span></strong></th>\n<th><strong> <code>ç”»æ¿ã€æµç¨‹å›¾å’Œæ€ç»´å¯¼å›¾</code> ç­‰</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZDM=\">d3</span></strong></td>\n<td><strong> <code>å¯è§†åŒ–æ•°æ®å›¾è¡¨åº“</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaW1tZXI=\">immer</span></strong></td>\n<td><strong>æ”¹å˜äº† react <code>è®¾ç½®stateçŠ¶æ€çš„æ–¹å¼</code> </strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY2xhc3NuYW1lcw==\">classnames</span></strong></td>\n<td><strong>æœ‰æ¡ä»¶åœ°å°†  <code>classNames è¿æ¥</code> åœ¨ä¸€èµ·</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYWhvb2tz\">ahooks</span></strong></td>\n<td><strong>å›½å†…å¸¸ç”¨çš„ <code>react-hookså‡½æ•°é›†</code> </strong></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"nodejs\"><a class=\"anchor\" href=\"#nodejs\">#</a> <strong>Node.js</strong></h1>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXhwcmVzcw==\">Express</span></strong></th>\n<th style=\"text-align:left\"><strong>è½»é‡çº§ web æ¡†æ¶</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQGhhcGkvaGFwaQ==\">Hapi</span></strong></td>\n<td style=\"text-align:left\"><strong>ä»¥æœ€å°çš„å¼€é”€å’Œå®Œå…¨å¼€ç®±æ€¥ç”¨çš„åŠŸèƒ½æ„å»ºå¼ºå¤§çš„ã€æ‹“å±•æ€§å¼ºçš„åº”ç”¨ç¨‹åº</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc2FpbHM=\">Sails</span></strong></td>\n<td style=\"text-align:left\"><strong>æœ€æµè¡Œçš„ Node.js çš„ MVC æ¡†æ¶</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cua29hanMubmV0Lw==\">Koa</span></strong></td>\n<td style=\"text-align:left\"><strong>ä¸‹ä¸€ä»£ web å¼€å‘æ¡†æ¶</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZnMtZXh0cmE=\">Fs-extra</span></strong></td>\n<td style=\"text-align:left\"><strong>fs -extra <code>åŒ…å«äº†</code>  Node.js <code> </code> fs <code>åŒ…ä¸­æ²¡æœ‰åŒ…å«çš„æ–¹æ³•ï¼Œæ¯”å¦‚</code>  copy () <code>, </code> remove() <code>, </code> mkdirs()</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvbm9kZS1jYWNoZQ==\">Node-cache</span></strong></td>\n<td style=\"text-align:left\"><strong>ä¸€ä¸ªç®€å•çš„ç¼“å­˜æ¨¡å—ï¼Œå…·æœ‰è®¾ç½®ï¼Œè·å–å’Œåˆ é™¤æ–¹æ³•çš„åŠŸèƒ½ï¼Œç±»ä¼¼äº<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tZW1jYWNoZWQub3JnLw==\"> memcached</span>ã€‚ key å€¼å¯ä»¥å…·æœ‰ä¸€ä¸ªè¶…æ—¶è®¾ç½®ï¼ˆttlï¼‰ï¼Œåœ¨æ­¤æ—¶é—´ä¹‹åå®ƒä»¬å°†è¿‡æœŸå¹¶ä»ç¼“å­˜ä¸­åˆ é™¤ã€‚</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc2hhcnA=\">sharp</span></strong></td>\n<td style=\"text-align:left\"><strong> <code>nodeå›¾ç‰‡å¤„ç†</code> è§£å†³æ–¹æ¡ˆ</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbG9hZHRlc3Q=\">Loadtest</span></strong></td>\n<td style=\"text-align:left\"><strong>node.js <code>å‹åŠ›æµ‹è¯•å·¥å…·</code> </strong></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"css\"><a class=\"anchor\" href=\"#css\">#</a> <strong>css</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdGFpbHdpbmRjc3M=\">Tailwind</span></strong></th>\n<th><strong>åŸå­åŒ– css</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc3R5bGVkLWNvbXBvbmVudHM=\">Styled-components</span></strong></td>\n<td><strong>css-in-jsï¼Œjs ä¸­ä¹¦å†™ css</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"æ—¥å¿—\"><a class=\"anchor\" href=\"#æ—¥å¿—\">#</a> <strong>æ—¥å¿—</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbW9yZ2Fu\">Morgan</span></strong></th>\n<th><strong>å…·ä½“æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ª  <code>HTTP</code>  è¯·æ±‚è®°å½•å™¨ï¼Œå­˜å‚¨  <code>HTTP</code>  è¯·æ±‚ï¼Œå¹¶ä¸ºä½ æä¾›æœ‰å…³åº”ç”¨ç¨‹åºå¦‚ä½•ä½¿ç”¨ä»¥åŠå¯èƒ½å­˜åœ¨æ½œåœ¨é”™è¯¯çš„ç®€è¦ä¿¡æ¯ã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvd2luc3Rvbg==\">Winston</span></strong></td>\n<td><strong>ä¸€ä¸ªå‡ ä¹æ‰€æœ‰å†…å®¹çš„æ—¥å¿—è®°å½•å™¨ï¼Œæ”¯æŒå¤šç§ä¼ è¾“æ–¹å¼ã€‚å®ƒå­˜å‚¨çš„æ—¶é—´æ¯”  <code>Morgan</code>  é•¿ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ªæ›´å¤§çš„ç»´æŠ¤è€…ç¤¾åŒºå’Œæ›´å¤šçš„ä¸‹è½½ã€‚</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"æ•°æ®åº“\"><a class=\"anchor\" href=\"#æ•°æ®åº“\">#</a> <strong>æ•°æ®åº“</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbW9uZ29vc2U=\">Mongoose</span></strong></th>\n<th><strong> <code>Mongoose</code>  æ˜¯ä¸€ä¸ª  <code>MongoDB</code>  å¯¹è±¡å»ºæ¨¡å·¥å…·ï¼Œè®¾è®¡ç”¨äºåœ¨å¼‚æ­¥ç¯å¢ƒä¸­å·¥ä½œã€‚ <code>Mongoose</code>  æ”¯æŒ  <code>Promise</code>  å’Œå›è°ƒã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc2VxdWVsaXpl\">Sequelize</span></strong></td>\n<td><strong> <code>Sequelize</code>  æ˜¯ä¸€ä¸ªåŸºäº  <code>Promise</code>  çš„  <code>Node.js</code>   <code>ORM</code>  å·¥å…·ï¼Œé€‚ç”¨äº  <code>Postgres</code> ã€MySQLã€MariaDBã€SQLite å’Œ Microsoft SQL Serverã€‚å®ƒå…·æœ‰å¯é çš„äº‹åŠ¡æ”¯æŒã€å…³ç³»ã€å³æ—¶å’Œå»¶è¿ŸåŠ è½½ã€è¯»å–å¤åˆ¶ç­‰ç‰¹æ€§ã€‚</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"æˆæƒ\"><a class=\"anchor\" href=\"#æˆæƒ\">#</a> <strong>æˆæƒ</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcGFzc3BvcnQ=\">Passport</span></strong></th>\n<th><strong> <code>Passport</code>  çš„ç›®çš„æ˜¯é€šè¿‡ä¸€ç»„å¯æ‰©å±•çš„æ’ä»¶ (ç§°ä¸ºç­–ç•¥) å¯¹è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯ã€‚å‘ <code>Passport</code>  æä¾›ä¸€ä¸ªèº«ä»½éªŒè¯è¯·æ±‚ï¼Œ <code>Passport</code>  æä¾›é’©å­æ¥æ§åˆ¶èº«ä»½éªŒè¯æˆåŠŸæˆ–å¤±è´¥æ—¶å‘ç”Ÿçš„æ“ä½œã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYmNyeXB0\">Bcrypt</span></strong></td>\n<td><strong>å®ƒæ˜¯å¯ä»¥å¸®åŠ©ä½ ç”Ÿæˆå“ˆå¸Œå¯†ç çš„åº“ã€‚ <code>Bcrypt</code>  æ˜¯ç”±  <code>Niels Provos</code>  å’Œ  <code>David Mazieres</code>  åŸºäº  <code>Blowfish cipher</code>  è®¾è®¡çš„å¯†ç å“ˆå¸Œå‡½æ•°ï¼Œå¹¶äº 1999 å¹´åœ¨ USENIX ä¸Šå±•å‡ºã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvanNvbndlYnRva2Vu\">JSONWebToken</span></strong></td>\n<td><strong> <code>JSON Web</code>  ä»¤ç‰Œ (JWT) æ˜¯ä¸€ç§å¼€æ”¾çš„ã€è¡Œä¸šæ ‡å‡†çš„  <code>RFC 7519</code>  æ–¹æ³•ï¼Œç”¨äºåœ¨åŒæ–¹ä¹‹é—´å®‰å…¨åœ°è¡¨ç¤ºå£°æ˜ã€‚è¿™ä¸ªåŒ…å…è®¸ä½ è§£ç ã€éªŒè¯å’Œç”Ÿæˆ JWTã€‚</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"é™æ€ç½‘ç«™ç”Ÿæˆ\"><a class=\"anchor\" href=\"#é™æ€ç½‘ç«™ç”Ÿæˆ\">#</a> <strong>é™æ€ç½‘ç«™ç”Ÿæˆ</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZ2F0c2J5\">Gatsby</span></strong></th>\n<th><strong>ä¸€ä¸ªç°ä»£çš„ç½‘ç«™ç”Ÿæˆå™¨ï¼Œå¯ä»¥åˆ›å»ºå¿«é€Ÿï¼Œé«˜è´¨é‡ï¼ŒåŠ¨æ€çš„  <code>React</code>  åº”ç”¨ç¨‹åºï¼Œä»åšå®¢åˆ°ç”µå­å•†åŠ¡ç½‘ç«™å†åˆ°ç”¨æˆ·ä»ªè¡¨æ¿ã€‚å…·æœ‰å¾ˆæ£’çš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿå’Œæ¨¡æ¿ã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbmV4dA==\">NextJS</span></strong></td>\n<td><strong> <code>NextJS</code>  é¦–å…ˆæ”¯æŒæœåŠ¡å™¨æ¸²æŸ“ä»¥åŠé™æ€ç”Ÿæˆçš„å†…å®¹ã€‚ ä½ è¿˜å¯ä»¥å°†  <code>serverless</code>  åŠŸèƒ½å®šä¹‰ä¸º  <code>API</code>  ç«¯ç‚¹ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbnV4dA==\">NuxtJS</span></strong></td>\n<td><strong>åœ¨  <code>Vue</code>  çš„ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œ <code>NuxtJS</code>  åŸºæœ¬ä¸Šæ˜¯  <code>NextJS</code>  çš„æ›¿ä»£å“ã€‚ <code>NuxtJS</code>  çš„ç›®æ ‡æ˜¯è®©  <code>web</code>  å¼€å‘åŠŸèƒ½å¼ºå¤§ï¼Œå¹¶ä¸”è®©å¼€å‘è€…å…·æœ‰è‰¯å¥½çš„å¼€å‘æ„è¯†ã€‚</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"æ¨¡æ¿è¯­æ³•\"><a class=\"anchor\" href=\"#æ¨¡æ¿è¯­æ³•\">#</a> <strong>æ¨¡æ¿è¯­æ³•</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbXVzdGFjaGU=\">Mustache</span></strong></th>\n<th><strong> <code>Mustache</code>  æ˜¯ä¸€ç§æ— é€»è¾‘çš„æ¨¡æ¿è¯­æ³•ã€‚å®ƒå¯ä»¥ç”¨äº  <code>HTML</code> ï¼Œé…ç½®æ–‡ä»¶ï¼Œæºä»£ç ç­‰ä»»ä½•ä¸œè¥¿ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯ä½¿ç”¨ hash æˆ–å¯¹è±¡ä¸­æä¾›çš„å€¼åœ¨æ¨¡æ¿ä¸­å±•å¼€æ ‡è®°ã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGFuZGxlYmFycw==\">Handlebars</span></strong></td>\n<td><strong>ä½¿ç”¨æ¨¡æ¿å’Œè¾“å…¥å¯¹è±¡ç”Ÿæˆ  <code>HTML</code>  æˆ–å…¶ä»–æ–‡æœ¬æ ¼å¼ã€‚ <code>Handlebars</code>  æ¨¡æ¿çœ‹èµ·æ¥åƒä¸€ä¸ªåµŒå…¥äº†æŠŠæ‰‹è¡¨è¾¾å¼çš„æ­£åˆ™æ–‡æœ¬ã€‚ <code>Handlebars</code>  å¾ˆå¤§ç¨‹åº¦ä¸Šä¸  <code>Mustache</code>  æ¨¡æ¿å…¼å®¹ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZWpz\">EJS</span></strong></td>\n<td><strong> <code>EJS</code>  æ˜¯ä¸€ç§ç®€å•çš„æ¨¡æ¿è¯­è¨€ï¼Œå¯è®©ä½ ä½¿ç”¨ç®€å•çš„è¯­æ³•ï¼Œå¿«é€Ÿçš„æ‰§è¡Œå’Œç®€å•çš„è°ƒè¯•  <code>JavaScript</code>  æ¥ç”Ÿæˆ  <code>HTML</code>  æ ‡è®°ã€‚  <code>EJS</code>  æ‹¥æœ‰å¤§é‡çš„æ´»è·ƒç”¨æˆ·ç¤¾åŒºï¼Œå¹¶ä¸”è¯¥åº“æ­£åœ¨ç§¯æå¼€å‘ä¸­ã€‚</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"mockæ•°æ®\"><a class=\"anchor\" href=\"#mockæ•°æ®\">#</a> <strong>mock æ•°æ®</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdXVpZA==\">Uuid</span></strong></th>\n<th><strong>æ–¹ä¾¿è€Œä¸”ä½“ç§¯å°çš„åŒ…ï¼Œå¯ä»¥å¿«é€Ÿã€è½»æ¾åœ°ç”Ÿæˆæ›´å¤æ‚çš„é€šç”¨æƒŸä¸€æ ‡è¯†ç¬¦ (UUIDs)</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZmFrZXI=\">Faker</span></strong></td>\n<td><strong>å®ç”¨çš„  <code>npm</code>  åŒ…ï¼Œç”¨äºåœ¨æµè§ˆå™¨å’Œ  <code>Node.js</code>  ä¸­åˆ¶é€ å¤§é‡å‡æ•°æ®ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvanNvbi1zZXJ2ZXI=\">jsonServer</span></strong></td>\n<td><strong>mock å¼€å‘æœåŠ¡å™¨æ•°æ®</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbmFub2lk\">nanoid</span></strong></td>\n<td><strong> <code>å­—ç¬¦ä¸² ID ç”Ÿæˆå™¨</code> ï¼Œæ²¡æœ‰å…¶ä½™ä¾èµ–ã€‚</strong></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"è¡¨å•å’Œé‚®ä»¶\"><a class=\"anchor\" href=\"#è¡¨å•å’Œé‚®ä»¶\">#</a> <strong>è¡¨å•å’Œé‚®ä»¶</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdmFsaWRhdG9y\">Validator</span></strong></th>\n<th><strong>ä¾¿æ·çš„å­—ç¬¦ä¸²éªŒè¯å™¨ï¼Œä½¿ç¨‹åºæ›´åŠ å¥å£®çš„åº“ã€‚è®¸å¤šæœ‰ç”¨æ–¹æ³•ï¼Œä¾‹å¦‚  <code>isEmail()</code> ï¼Œ  <code>isCreditCard()</code> ï¼Œ <code>isDate()</code>  å’Œ  <code>isURL()</code> ã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZm9ybWlr\">Formik</span></strong></td>\n<td><strong> <code>Formik</code>  æ˜¯  <code>React</code>  å’Œ  <code>React Native</code>  çš„ä¸€ä¸ªæµè¡Œå¼€æºè¡¨å•åº“ã€‚å®ƒå…·æœ‰æ˜“äºä½¿ç”¨ã€å£°æ˜æ€§å’Œé€‚åº”æ€§çš„ç‰¹ç‚¹ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbXVsdGVy\">Multer</span></strong></td>\n<td><strong> <code>Multer</code>  æ˜¯ç”¨äº  <code>multipart/form-data</code>  æ•°æ®æ ¼å¼çš„  <code>Node.js</code>  ä¸­é—´ä»¶ï¼Œä¸»è¦ç”¨äºä¸Šä¼ æ–‡ä»¶ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvbm9kZW1haWxlcg==\">Nodemailer</span></strong></td>\n<td><strong> <code>Nodemailer</code>  æ˜¯  <code>Node.js</code>  åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªæ¨¡å—ï¼Œå…è®¸è½»æ¾å‘é€ç”µå­é‚®ä»¶ã€‚è¿™ä¸ªé¡¹ç›®ä» 2010 å¹´å°±å¼€å§‹äº†ï¼Œç°åœ¨å®ƒæ˜¯å¤§å¤šæ•°  <code>Node.js</code>  ç”¨æˆ·é»˜è®¤ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚</strong></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"æµ‹è¯•\"><a class=\"anchor\" href=\"#æµ‹è¯•\">#</a> <strong>æµ‹è¯•</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvamVzdA==\">Jest</span></strong></th>\n<th><strong> <code>Jest</code>  æ˜¯ä¸€ä¸ªä»¤äººæ„‰å¿«çš„  <code>JavaScript</code>  æµ‹è¯•æ¡†æ¶ï¼Œä¸“æ³¨äºç®€æ´æ˜å¿«ã€‚å®ƒå…è®¸ä½ ä½¿ç”¨æ˜“äºä½¿ç”¨ã€ç†Ÿæ‚‰ä¸”åŠŸèƒ½ä¸°å¯Œçš„  <code>API</code>  ç¼–å†™æµ‹è¯•ï¼Œä»è€Œå¿«é€Ÿè·å¾—ç»“æœã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbW9jaGE=\">Mocha</span></strong></td>\n<td><strong> <code>Mocha</code>  æ˜¯ä¸€ä¸ª  <code>JavaScript</code>  æµ‹è¯•æ¡†æ¶ï¼Œä½¿å¾—å¼‚æ­¥æµ‹è¯•ç®€å•è€Œæœ‰è¶£ã€‚ <code>Mocha</code>  æµ‹è¯•æ˜¯ä¸²è¡Œè¿è¡Œçš„ï¼Œåœ¨å°†æœªæ•è·çš„å¼‚å¸¸æ˜ å°„åˆ°æ­£ç¡®çš„æµ‹è¯•ç”¨ä¾‹çš„åŒæ—¶ï¼Œå…è®¸è¿›è¡Œçµæ´»å’Œå‡†ç¡®çš„æŠ¥å‘Šã€‚</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"ä»£ç è§„èŒƒ\"><a class=\"anchor\" href=\"#ä»£ç è§„èŒƒ\">#</a> <strong>ä»£ç è§„èŒƒ</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXNsaW50\">ESLint</span></strong></th>\n<th><strong> <code>ESLint</code>  æ˜¯ç”¨äºè¯†åˆ«å’ŒæŠ¥å‘Š  <code>ECMAScript / JavaScript</code>  ä»£ç ä¸­çš„ä¹¦å†™æ–¹å¼çš„å·¥å…·ã€‚  <code>ESLint</code>  æ˜¯å®Œå…¨æ’ä»¶åŒ–çš„ï¼Œæ¯ä¸ªè§„åˆ™éƒ½æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ æ›´å¤šå†…å®¹ã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcHJldHRpZXI=\">Prettier</span></strong></td>\n<td><strong> <code>Prettier</code>  æ˜¯ä¸€ç§å›ºæ‰§å·±è§çš„ä»£ç æ ¼å¼åŒ–ç¨‹åºã€‚å®ƒé€šè¿‡è§£æä»£ç å¹¶ä½¿ç”¨è‡ªå·±çš„è§„åˆ™ (è€ƒè™‘åˆ°æœ€å¤§è¡Œçš„é•¿åº¦) é‡æ–°æ‰“å°ä»£ç ï¼Œä»¥åŠåœ¨å¿…è¦æ—¶åŒ…è£…ä»£ç ï¼Œæ¥å¼ºåˆ¶æ‰§è¡Œä¸€è‡´çš„æ ·å¼ã€‚</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"æ‰“åŒ…å’Œå‹ç¼©\"><a class=\"anchor\" href=\"#æ‰“åŒ…å’Œå‹ç¼©\">#</a> <strong>æ‰“åŒ…å’Œå‹ç¼©</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvd2VicGFjaw==\">Webpack</span></strong></th>\n<th><strong>ä¸€ä¸ªè‘—åçš„åŠŸèƒ½å¼ºå¤§çš„æ¨¡å—æ‰“åŒ…å™¨ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯å°†  <code>JavaScript</code>  æ–‡ä»¶æ‰“åŒ…ä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œä½†å®ƒä¹Ÿèƒ½å¤Ÿè½¬æ¢ã€æ†ç»‘æˆ–æ‰“åŒ…ä»»ä½•èµ„æºã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaHRtbC1taW5pZmllcg==\">HTML-Minifier</span></strong></td>\n<td><strong>è½»å·§ï¼Œé«˜åº¦å¯é…ç½®ä¸”ç»è¿‡è‰¯å¥½æµ‹è¯•çš„åŸºäº  <code>Javascript</code>  çš„  <code>HTML</code>  å‹ç¼©å™¨ / å‹ç¼©å™¨ï¼ˆæ”¯æŒ  <code>Node.js</code> ï¼‰ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY2xlYW4tY3Nz\">Clean-CSS</span></strong></td>\n<td><strong>é€‚ç”¨äº  <code>Node.js</code>  å¹³å°å’Œä»»ä½•ç°ä»£æµè§ˆå™¨çš„å¿«é€Ÿé«˜æ•ˆçš„  <code>CSS</code>  ä¼˜åŒ–å™¨ã€‚ å…·æœ‰é«˜åº¦å¯é…ç½®å’Œå¤šç§å…¼å®¹æ¨¡å¼ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdWdsaWZ5LWpz\">UglifyJS2</span></strong></td>\n<td><strong> <code>JavaScript</code>  è§£æå™¨ï¼Œå‹ç¼©ç¨‹åºå’Œç¾åŒ–å·¥å…·åŒ…ã€‚ å®ƒå¯ä»¥ä½¿ç”¨å¤šä¸ªè¾“å…¥æ–‡ä»¶ï¼Œå¹¶æ”¯æŒè®¸å¤šé…ç½®é€‰é¡¹ã€‚</strong></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"è¿›ç¨‹ç®¡ç†\"><a class=\"anchor\" href=\"#è¿›ç¨‹ç®¡ç†\">#</a> <strong>è¿›ç¨‹ç®¡ç†</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvbm9kZW1vbg==\">Nodemon</span></strong></th>\n<th><strong>åœ¨  <code>Node.js</code>  åº”ç”¨ç¨‹åºçš„å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ç®€å•çš„ç›‘æ§è„šæœ¬ã€‚å¯¹äºå¼€å‘éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒéå¸¸å®¹æ˜“é‡å¯ï¼Œå¹¶ä¸”é»˜è®¤å¯ç”¨äº†æ–‡ä»¶ç›‘å¬</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcG0y\">PM2</span></strong></td>\n<td><strong>å¸¦æœ‰å†…ç½®è´Ÿè½½å‡è¡¡çš„  <code>Node.JS</code>  åº”ç”¨ç¨‹åºçš„ç”Ÿäº§è¿›ç¨‹ç®¡ç†å™¨ã€‚ æ›´å…¨é¢ï¼Œæ›´é€‚åˆç”Ÿäº§ï¼Œç»™ä½ å¾ˆå¤šå‚æ•°ä»¥è¿›è¡Œè°ƒæ•´åŠŸèƒ½</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY29uY3VycmVudGx5\">Concurrently</span></strong></td>\n<td><strong>ç®€å•è€Œç›´æ¥ â€”â€” è¿™æ˜¯åŒæ—¶è¿è¡Œå¤šä¸ªå‘½ä»¤çš„æœ‰ç”¨å·¥å…·ã€‚</strong></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"å…¶ä»–\"><a class=\"anchor\" href=\"#å…¶ä»–\">#</a> <strong>å…¶ä»–</strong></h1>\n<table>\n<thead>\n<tr>\n<th><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYXhpb3M=\">Axios</span></strong></th>\n<th><strong>åŸºäº  <code>Promise</code>  çš„  <code>HTTP</code>  å®¢æˆ·ç«¯ï¼Œç”¨äºæµè§ˆå™¨å’Œ  <code>Node.js</code> ã€‚ ä¸  <code>JS</code>  å†…ç½® <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZldGNoX0FQSQ==\">Fetch API</span> ç›¸æ¯”ï¼Œå®ƒæ˜“äºè®¾ç½®ï¼Œç›´è§‚ä¸”ç®€åŒ–äº†å¾ˆå¤šå·¥ä½œã€‚</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><a href=\"https//www.npmjs.com/package/socket.io\">Socket.io</a></strong></td>\n<td><strong> <code>Socket.IO</code>  æ”¯æŒå®æ—¶ï¼ŒåŒå‘å’ŒåŸºäºäº‹ä»¶çš„é€šä¿¡ã€‚ å®ƒå¯ä»¥åœ¨æ¯ä¸ªå¹³å°ï¼Œæµè§ˆå™¨æˆ–å…¶ä»–è®¾å¤‡ä¸Šè¿è¡Œï¼Œå¹¶åŒæ—¶å…³æ³¨å¯é æ€§å’Œé€Ÿåº¦ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvd3M=\">WS</span></strong></td>\n<td><strong>ç®€å•æ˜“ç”¨ï¼Œå¿«é€Ÿä¸”ç»è¿‡å…¨é¢æµ‹è¯•çš„  <code>WebSocket</code>  å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å®ç°ã€‚ ä¸€ä¸ªå¾ˆå¥½çš„ï¼Œä¸å¤ªæŠ½è±¡çš„ï¼Œ <code>Socket.io</code>  çš„æ›¿ä»£æ–¹æ¡ˆ</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZGF5anM=\">DayJS</span></strong></td>\n<td><strong> <code>DayJS</code>  æ˜¯ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbW9tZW50\">MomentJS</span> ï¼ˆè‡ª 2020 å¹´ 9 æœˆèµ·å¤„äºç»´æŠ¤æ¨¡å¼ï¼‰çš„ä¸€ç§å¿«é€Ÿã€è½»å·§çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒä»¬çš„  <code>API</code>  ä½¿ç”¨ç±»ä¼¼ï¼Œå¦‚æœä½ ä½¿ç”¨è¿‡ <code>MomentJS</code> ï¼Œåˆ™å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨å¤§å¤šæ•°  <code>DayJS</code> ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbG9kYXNo\">Lodash</span></strong></td>\n<td><strong>ç°ä»£åŒ–çš„  <code>JavaScript</code>  å®ç”¨ç¨‹åºåº“ï¼Œæä¾›æ¨¡å—åŒ–ï¼Œé«˜æ€§èƒ½ä»¥åŠå…¶ä»–åŠŸèƒ½ã€‚ å…¬å¼€å…³äº  <code>JavaScript</code>  æ•°ç»„ï¼Œå¯¹è±¡å’Œå…¶ä»–æ•°æ®ç»“æ„çš„è®¸å¤šæœ‰ç”¨æ–¹æ³•ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdW5kZXJzY29yZQ==\">Underscore</span></strong></td>\n<td><strong> <code>Underscore</code>  æä¾›äº†è®¸å¤šå¸¸ç”¨çš„åŠŸèƒ½å·¥å…·ä»¥åŠæ›´ä¸“ä¸šçš„å·¥å…·ï¼šå‡½æ•°ç»‘å®šï¼Œ <code>javascript</code>  æ¨¡æ¿ï¼Œåˆ›å»ºå¿«é€Ÿç´¢å¼•ï¼Œæ·±åº¦ç›¸ç­‰æµ‹è¯•ç­‰ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYXN5bmM=\">Async</span></strong></td>\n<td><strong> <code>Async</code>  æ˜¯ä¸€ä¸ªå®ç”¨æ¨¡å—ï¼Œå®ƒä¸ºå¼‚æ­¥  <code>JavaScript</code>  æä¾›äº†ç›´æ¥ã€å¼ºå¤§çš„åŠŸèƒ½ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbWFya2Vk\">Marked</span></strong></td>\n<td><strong>ç”¨äºè§£æ  <code>markdown</code>  è€Œä¸éœ€è¦ç¼“å­˜æˆ–é•¿æ—¶é—´é˜»å¡çš„ä½çº§ç¼–è¯‘å™¨ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcmFuZG9tY29sb3I=\">Randomcolor</span></strong></td>\n<td><strong>ä¸€ä¸ªç”¨äºç”Ÿæˆæœ‰å¸å¼•åŠ›çš„éšæœºé¢œè‰²çš„å°è„šæœ¬ã€‚ ä½ å¯ä»¥ä¼ é€’é€‰é¡¹å¯¹è±¡ä»è€Œå†³å®šå…¶äº§ç”Ÿçš„é¢œè‰²ç±»å‹ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcGx1cmFsaXpl\">Pluralize</span></strong></td>\n<td><strong>è¯¥æ¨¡å—ä½¿ç”¨é¢„å…ˆå®šä¹‰çš„è§„åˆ™åˆ—è¡¨ï¼ŒæŒ‰é¡ºåºåº”ç”¨è¿™äº›è§„åˆ™ç»™æŒ‡å®šå•è¯å•æ•°æˆ–å¤æ•°ã€‚ åœ¨è®¸å¤šæƒ…å†µä¸‹è¿™å¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚åŸºäºç”¨æˆ·è¾“å…¥çš„ä»»ä½•è‡ªåŠ¨åŒ–ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZGVkZW50\">dedent</span></strong></td>\n<td><strong>ä»å¤šè¡Œå­—ç¬¦ä¸²ä¸­å»é™¤ç¼©è¿›ï¼ˆç©ºæ ¼ï¼‰</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbXM=\">ms</span></strong></td>\n<td><strong>å°†æ˜“ç†è§£çš„æ—¶é—´è½¬æ¢ä¸ºæ¯«ç§’æ•°ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaG90a2V5cy1qcw==\">hotkeys-js</span></strong></td>\n<td><strong> <code>é”®ç›˜äº‹ä»¶</code> ä½¿ç”¨åº“ã€‚</strong></td>\n</tr>\n<tr>\n<td><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcXM=\">qs</span></strong></td>\n<td><strong> <code>æŸ¥è¯¢å­—ç¬¦ä¸²è§£æå’Œå­—ç¬¦ä¸²åŒ–åº“</code> ï¼Œå…·æœ‰ä¸€äº›é™„åŠ çš„å®‰å…¨æ€§</strong></td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "ä¸‰æ–¹åº“",
                "ä¸‰æ–¹åº“"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/04/12/vue-router/",
            "url": "https://dmqweb.cn/2024/04/12/vue-router/",
            "title": "vue-router",
            "date_published": "2024-04-12T07:01:09.000Z",
            "content_html": "<h1 id=\"\"><a class=\"anchor\" href=\"#\">#</a> </h1>\n<h1 id=\"vue-routeræºç \"><a class=\"anchor\" href=\"#vue-routeræºç \">#</a> vue-router æºç </h1>\n<h3 id=\"vue-routerè·¯ç”±æ¨¡å¼\"><a class=\"anchor\" href=\"#vue-routerè·¯ç”±æ¨¡å¼\">#</a> vue-router è·¯ç”±æ¨¡å¼</h3>\n<h4 id=\"hashæ¨¡å¼\"><a class=\"anchor\" href=\"#hashæ¨¡å¼\">#</a> hash æ¨¡å¼ï¼ˆ#ï¼‰</h4>\n<p>SEO ä¸å‹å¥½ï¼Œèµ„æºä¸å˜ï¼Œä¸ä¼šåˆ·æ–°ã€‚</p>\n<h4 id=\"historyæ¨¡å¼\"><a class=\"anchor\" href=\"#historyæ¨¡å¼\">#</a> history æ¨¡å¼ï¼ˆ/ï¼‰</h4>\n<p>SEO å‹å¥½ï¼Œé‡æ–°è¯·æ±‚èµ„æºã€‚</p>\n<p><strong>history æ¨¡å¼å‘å¸ƒæ—¶å‡ºç°çš„é—®é¢˜ï¼š</strong></p>\n<p>å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸Šæ—¶ï¼Œç‚¹å‡»è·¯ç”±è·³è½¬æ­£å¸¸ä½†æ˜¯åˆ·æ–°åè·¯ç”±è·³è½¬ 404ï¼Œå‡ºç°çš„åŸå› åˆ·æ–°åè·³è½¬çš„æ ¹è·¯å¾„å¹¶ä¸æ˜¯å½“å‰é¡¹ç›®çš„ index.html å¯¼è‡´èµ„æºè·¯å¾„ä¸åŒ¹é…å•é¡µé¢åº”ç”¨è·¯ç”±ï¼Œé‡‡å–çš„æ–¹æ³•æ˜¯<strong>æ¯æ¬¡è¯·æ±‚èµ„æºéƒ½ fallback åˆ° index.html æ–‡ä»¶</strong>ï¼Œå¯ä»¥ä½¿ç”¨é™æ€èµ„æºæœåŠ¡å™¨çš„æ”¯æŒã€‚ï¼ˆä¾‹å¦‚åœ¨ nginx ä¸­ location å­—æ®µæ·»åŠ ï¼š<strong>try_files å­—æ®µ</strong>ï¼‰</p>\n<h3 id=\"vue-routerå†…éƒ¨å¤„ç†\"><a class=\"anchor\" href=\"#vue-routerå†…éƒ¨å¤„ç†\">#</a> vue-router å†…éƒ¨å¤„ç†</h3>\n<h6 id=\"vue-routerä¸»ä½“æ¶æ„\"><a class=\"anchor\" href=\"#vue-routerä¸»ä½“æ¶æ„\">#</a> vue-router ä¸»ä½“æ¶æ„ï¼š</h6>\n<p>å½“ä½¿ç”¨ vue.use (vue-router) æ—¶ï¼Œä¼šæ‰§è¡Œ vue-router å¯¼å‡ºçš„å®ä¾‹ä¸­çš„ install æ–¹æ³•ï¼Œå°† app ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œå†…éƒ¨ä¼šç”¨ app.component æ³¨å†Œä¸¤ä¸ªå…¨å±€ç»„ä»¶ RouterLink å’Œ RouterViewï¼Œæ¥ç€åœ¨ app.config.globalProperties ä¸Šè®¾ç½®<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mtext>å’Œ</mtext></mrow><annotation encoding=\"application/x-tex\">routeå’Œ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord cjk_fallback\">å’Œ</span></span></span></span> router å±æ€§ï¼Œé€šè¿‡ app.provide å°† router å’Œ currentRoute ä¼ é€’ä¸‹å»ã€‚</p>\n<h6 id=\"è·¯ç”±å˜åŒ–ä½†ä¸è·³è½¬åŸç†\"><a class=\"anchor\" href=\"#è·¯ç”±å˜åŒ–ä½†ä¸è·³è½¬åŸç†\">#</a> è·¯ç”±å˜åŒ–ä½†ä¸è·³è½¬åŸç†ï¼š</h6>\n<p>history.pushState å’Œ history.replaceState æ–¹æ³•ï¼Œä¼šæ”¹å˜åœ°å€æ çš„ä½†ä¸è¿›è¡Œè·³è½¬ã€‚</p>\n<h6 id=\"historyæ¨¡å¼å®ç°è·¯ç”±åŒ¹é…\"><a class=\"anchor\" href=\"#historyæ¨¡å¼å®ç°è·¯ç”±åŒ¹é…\">#</a> history æ¨¡å¼å®ç°è·¯ç”±åŒ¹é…ï¼š</h6>\n<p>å†…éƒ¨çš„ mather å‡½æ•°ä¼šå°† routes ä¸­çš„ path è·¯å¾„è½¬ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸å½“å‰çš„è·¯ç”±è¿›è¡ŒåŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸå°±å°†å¯¹åº”çš„ç»„ä»¶æ·»åŠ åˆ° router-view ä¸­ã€‚</p>\n<h6 id=\"router-viewå®ç°è·¯ç”±å±•ç¤º\"><a class=\"anchor\" href=\"#router-viewå®ç°è·¯ç”±å±•ç¤º\">#</a> router-view å®ç°è·¯ç”±å±•ç¤ºï¼š</h6>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineComponent <span class=\"token punctuation\">&#125;</span> from vue<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> Home <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/Home'</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// å¯¼å…¥é»˜è®¤çš„å…¨éƒ¨ç»„ä»¶</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> routerView <span class=\"token operator\">=</span>  <span class=\"token function\">defineComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">\"routerView\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> slots <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token comment\">//return h ('div',&#123;        // ä¸ä½¿ç”¨ç»„ä»¶é»˜è®¤çš„æ–¹å¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token comment\">//     class:'routerViewClass',</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token comment\">//     onClick()&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token comment\">//         // å¤„ç†ç‚¹å‡» é€»è¾‘</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token comment\">//     &#125;,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token comment\">// &#125;,slots.default())</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>Home<span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                    <span class=\"token comment\">// å¤„ç†å¯¹åº”çš„é€»è¾‘</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> routerView<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>è·¯ç”± provide ä¸€ä¸ª currentRouteï¼ˆshallowRef å¯¹è±¡ï¼‰å°†å½“å‰çš„è·¯ç”±è·¯å¾„æ†ç»‘åœ¨ä¸€èµ·ï¼Œä¼ é€’ä¸‹å»ï¼Œå½“ currentRoute å‘ç”Ÿå˜åŒ–çš„æ—¶å€™å°±ä¼šæ”¹å˜ç›¸åº”çš„ router-viewã€‚</p>\n",
            "tags": [
                "vue-routeråŸç†",
                "vue-routeråŸç†"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/04/12/%E8%84%9A%E6%89%8B%E6%9E%B6/",
            "url": "https://dmqweb.cn/2024/04/12/%E8%84%9A%E6%89%8B%E6%9E%B6/",
            "title": "è„šæ‰‹æ¶å¼€å‘",
            "date_published": "2024-04-12T00:36:07.000Z",
            "content_html": "<h1 id=\"éœ€æ±‚åˆ†æ\"><a class=\"anchor\" href=\"#éœ€æ±‚åˆ†æ\">#</a> éœ€æ±‚åˆ†æ</h1>\n<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ä¼˜åŒ–ç ”å‘æµç¨‹ï¼Ÿ</strong></p>\n<ul>\n<li>é¡¹ç›®é‡çº§å¢åŠ ï¼šå‡ å¹²è¡Œä»£ç  -&gt; å‡ ä¸‡è¡Œä»£ç </li>\n<li>é¡¹ç›®æ•°é‡æ‰©å¤§ï¼šå‡ ä¸ªé¡¹ç›® -&gt; å‡ å¹²ä¸ªé¡¹ç›®</li>\n<li>é¡¹ç›®å¤æ‚åº¦é«˜ï¼šWb é¡¹ç›® -&gt;H5/PC/ å°ç¨‹åº / åç«¯ / è„šæ‰‹æ¶</li>\n<li>å›¢é˜Ÿäººæ•°å¢é•¿ï¼šå‡ ä¸ªäºº -&gt; å‡ ç™¾äºº</li>\n<li>ä¼ ç»Ÿçš„é¡¹ç›®ç ”å‘æµç¨‹å·²ç»æ— æ³•æ»¡è¶³ä¸šåŠ¡éœ€æ±‚</li>\n</ul>\n<p><strong>é¡¹ç›®åˆ›å»ºæµç¨‹æ€è€ƒ</strong></p>\n<p>å½“å›¢é˜Ÿè¾ƒå¤§æ—¶ï¼Œè®©æ¯ä¸€ä¸ªå›¢é˜Ÿæˆå‘˜å¼€å‘åˆ›å»ºé¡¹ç›®ä½“éªŒè¶‹äºä¸€è‡´å°±éå¸¸é‡è¦ã€‚</p>\n<p><strong>é¡¹ç›®åˆ›å»ºæµç¨‹</strong></p>\n<ul>\n<li>é¡¹ç›®ä»£ç </li>\n<li>æŠ½è±¡å‡ºé¡¹ç›®æ¨¡æ¿</li>\n<li>å­˜å‚¨åˆ°æ•°æ®åº“</li>\n<li>è„šæ‰‹æ¶è¯»å–æ•°æ®åº“</li>\n<li>æ ¹æ®è„šæ‰‹æ¶åˆ›å»ºæ–°çš„é¡¹ç›®</li>\n</ul>\n<p><strong>æå‡å‰ç«¯ç ”å‘æ•ˆç‡çš„æ‰‹æ®µ</strong></p>\n<ul>\n<li>ç‰©æ–™å’Œæ¨¡æ¿</li>\n<li>ä½ä»£ç æ­å»º</li>\n<li>ç­‰ç­‰</li>\n</ul>\n<p>ä»ä½¿ç”¨è§’åº¦ç†è§£ä»€ä¹ˆæ˜¯è„šæ‰‹æ¶ï¼Ÿ</p>\n<h1 id=\"è„šæ‰‹æ¶ç®€ä»‹\"><a class=\"anchor\" href=\"#è„šæ‰‹æ¶ç®€ä»‹\">#</a> è„šæ‰‹æ¶ç®€ä»‹</h1>\n<p>è„šæ‰‹æ¶æœ¬è´¨æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å®¢æˆ·ç«¯ï¼Œå®ƒé€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œï¼Œæ¯”å¦‚ï¼š</p>\n<p>vue create vue-test-app</p>\n<p>bash</p>\n<p>ä¸Šé¢è¿™æ¡å‘½ä»¤ç”± 3 ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>\n<ul>\n<li>ä¸»å‘½ä»¤ï¼švue</li>\n<li>command:create</li>\n<li>command çš„ param:vue-test-app</li>\n</ul>\n<p>å®ƒè¡¨ç¤ºåˆ›å»ºä¸€ä¸ª vue é¡¹ç›®ï¼Œé¡¹ç›®çš„åç§°ä¸º vue-test-app, ä»¥ä¸Šæ˜¯æœ€ä¸€ä¸ªè¾ƒä¸ºç®€å•çš„è„šæ‰‹æ¶å‘½ä»¤ï¼Œä½†å®é™…åœºæ˜“<br />\nå¾€æ›´åŠ å¤æ‚ï¼Œæ¯”å¦‚ï¼š<br />\nå½“å‰ç›®å½•å·²ç»æœ‰æ–‡ä»¶äº†ï¼Œæˆ‘ä»¬éœ€è¦è¦†ç›–å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¼ºåˆ¶è¿›è¡Œå®‰è£… ue é¡¹ç›®ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥è¾“å…¥ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>vue create vue-test-app <span class=\"token parameter variable\">--force</span></pre></td></tr></table></figure><p>è¿™é‡Œçš„ - force å«åš option, ç”¨æ¥è¾…åŠ©è„šæ‰‹æ¶ç¡®è®¤åœ¨ç‰¹å®šåœºæ™¯ä¸‹ç”¨æˆ·çš„é€‰æ‹©ï¼ˆå¯ä»¥ç†è§£ä¸ºé…ç½®ï¼‰ã€‚è¿˜æœ‰ä¸€ç§åœºæ™¯<br />\né€šè¿‡ vue create<br />\n åˆ›å»ºé¡¹ç›®æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ npm install å¸®ç”¨æˆ·å®‰è£…ä¾èµ–ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨æ·˜å®æºæ¥å®‰è£…ï¼Œ<br />\nå¯ä»¥è¾“å…¥å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>vue create vue-test-app <span class=\"token parameter variable\">--force</span> <span class=\"token parameter variable\">-r</span> https://registry.npm.taobao.org</pre></td></tr></table></figure><p>è¿™é‡Œçš„ - x ä¹Ÿå«åš option, å®ƒä¸ --force ä¸åŒçš„æ˜¯å®ƒä½¿ç”¨ -ï¼Œå¹¶ä¸”ä½¿ç”¨ç®€å†™ï¼Œè¿™é‡Œçš„ - x ä¹Ÿå¯ä»¥æ›¿æ¢æˆ --registry, æœ‰çš„åŒå­¦å¯èƒ½è¦é—®ï¼Œä¸ºä»€ä¹ˆè€å¸ˆçŸ¥é“è¿™ä¸ªå‘½ä»¤ï¼Œå…¶å®æˆ‘ä»¬è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥çœ‹åˆ° vue create æ”¯æŒçš„æ‰€æœ‰ options:<br />\nvue create  --help</p>\n<p>-r  https:/registry.npm.taobao.org åé¢çš„ https://registry.npm.taobao.org æˆä¸º option çš„ param, å…¶å®ä»» - force å¯ä»¥ç†è§£ä¸ºï¼š-force true,f ç®€å†™ä¸ºï¼š--force æˆ– - f</p>\n<h1 id=\"è„šæ‰‹æ¶åŸç†\"><a class=\"anchor\" href=\"#è„šæ‰‹æ¶åŸç†\">#</a> è„šæ‰‹æ¶åŸç†</h1>\n<p><strong>è„šæ‰‹æ¶çš„æ‰§è¡ŒåŸç†å¦‚ä¸‹ï¼š</strong></p>\n<ul>\n<li>åœ¨ç»ˆç«¯è¾“å…¥ vue create vue-test-app</li>\n<li>ç»ˆç«¯è§£æå‡º vue å‘½ä»¤</li>\n<li>ç»ˆç«¯åœ¨ç¯å¢ƒå˜é‡ä¸­æ‰¾åˆ° ue å‘½ä»¤</li>\n<li>ç»ˆç«¯æ ¹æ® vue å‘½ä»¤é“¾æ¥åˆ°å®é™…æ–‡ä»¶ vue.js</li>\n<li>ç»ˆç«¯åˆ©ç”¨ node æ‰§è¡Œ `ue.js</li>\n<li>vue.js è§£æ command/options</li>\n<li>vue.js æ‰§è¡Œ command</li>\n<li>æ‰§è¡Œå®Œæ¯•ï¼Œé€€å‡ºæ‰§è¡Œ</li>\n</ul>\n<p><strong>ä»åº”ç”¨çš„è§’åº¦çœ‹å¦‚ä½•å¼€å‘ä¸€ä¸ªè„šæ‰‹æ¶</strong></p>\n<p>è¿™é‡Œä»¥ vue-cli ä¸ºä¾‹ï¼š</p>\n<ul>\n<li>å¼€å‘ npm é¡¹ç›®ï¼Œè¯¥é¡¹ç›®ä¸­åº”åŒ…å«ä¸€ä¸ª bin/vue.js æ–‡ä»¶ï¼Œå¹¶å°†è¿™ä¸ªé¡¹ç›®å‘å¸ƒåˆ° npm</li>\n<li>å°† npm é¡¹ç›®å®‰è£…åˆ° node çš„ lib/node_modules</li>\n<li>åœ¨ node çš„ bin ç›®å½•ä¸‹é…ç½® vue è½¯é“¾æ¥æŒ‡å‘ lib/node modules/Qvue/cli/bin/vue.js</li>\n<li>è¿™æ ·æˆ‘ä»¬åœ¨æ‰§è¡Œ vue å‘½ä»¤çš„æ—¶å€™å°±å¯ä»¥æ‰¾åˆ° vue.js è¿›è¡Œæ‰§è¡Œ</li>\n</ul>\n<p><strong>è¿˜æœ‰å¾ˆå¤šç–‘é—®éœ€è¦è§£ç­”</strong></p>\n<ul>\n<li>\n<p>ä¸ºä»€ä¹ˆå…¨å±€å®‰è£… vue/cli åä¼šæ·»åŠ çš„å‘½ä»¤ä¸º vue?  ï¼ˆnpm install -g @vue/cliï¼‰</p>\n</li>\n<li>\n<p>ç­”ï¼švue/cli é¡¹ç›®çš„ package.json ä¸­çš„ bin å­—æ®µé…ç½®çš„åç§°ä¸º vueã€‚</p>\n</li>\n<li>\n<p>å…¨å±€å®‰è£… vue/c1i æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>\n</li>\n<li>\n<p>ç­”ï¼šå…¨å±€ node_modules ä¸­ä¸‹è½½é¡¹ç›®æ–‡ä»¶ï¼Œå¹¶æ ¹æ®é¡¹ç›® package.json ä¸­çš„ bin å­—æ®µé…ç½®å¯æ‰§è¡Œæ–‡ä»¶è½¯é“¾æ¥ã€‚</p>\n</li>\n<li>\n<p>ä¸ºä»€ä¹ˆ vue æŒ‡å‘ä¸€ä¸ª js æ–‡ä»¶ï¼Œæˆ‘ä»¬å´å¯ä»¥ç›´æ¥é€šè¿‡ vue å‘½ä»¤ç›´æ¥å»æ‰§è¡Œå®ƒï¼Ÿ</p>\n</li>\n<li>\n<p>ç­”ï¼šjs æ–‡ä»¶é…ç½®äº†è›‡æ£’ï¼ˆæ“ä½œç³»ç»Ÿçš„æ¥å£ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>\n</li>\n<li>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token hashbang comment\">#!/usr/bin/env node</span></pre></td></tr></table></figure><p>é€šå¸¸ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­æ‰¾ node å‘½ä»¤ï¼Œå› ä¸ºæ¯ä¸ªç”µè„‘ä¸Šçš„ node æ–‡ä»¶ä½ç½®ä¸åŒï¼Œä½†æ˜¯ç¯å¢ƒå˜é‡ä¸­éƒ½ä¼šæœ‰ node è½¯è¿æ¥ã€‚</p>\n</li>\n</ul>\n<h1 id=\"è„šæ‰‹æ¶çš„å¼€å‘æµç¨‹\"><a class=\"anchor\" href=\"#è„šæ‰‹æ¶çš„å¼€å‘æµç¨‹\">#</a> è„šæ‰‹æ¶çš„å¼€å‘æµç¨‹</h1>\n<p><strong>è„šæ‰‹æ¶å¼€å‘æµç¨‹è¯¦è§£</strong></p>\n<p>å¼€å‘æµç¨‹</p>\n<ul>\n<li>åˆ›å»º npm é¡¹ç›®</li>\n<li>åˆ›å»ºè„šæ‰‹æ¶å…¥å£æ–‡ä»¶ï¼Œæœ€ä¸Šæ–¹æ·»åŠ  #!/usr/bin/env node</li>\n<li>é…ç½® package.json, æ·»åŠ  bin å±æ€§</li>\n<li>ç¼–å†™è„šæ‰‹æ¶ä»£ç </li>\n<li>å°†è„šæ‰‹æ¶å‘å¸ƒåˆ° npm</li>\n</ul>\n<p><strong>ä½¿ç”¨æµç¨‹</strong></p>\n<ul>\n<li>\n<p>å®‰è£…è„šæ‰‹æ¶</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> your-own-cli</pre></td></tr></table></figure></li>\n<li>\n<p>ä½¿ç”¨è„šæ‰‹æ¶</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>your-own-cli-binName</pre></td></tr></table></figure></li>\n</ul>\n<p><strong>è„šæ‰‹æ¶å¼€å‘éš¾ç‚¹è§£æ</strong></p>\n<ul>\n<li>\n<p>åˆ†åŒ…ï¼šå°†å¤æ‚çš„ç³»ç»Ÿæ‹†åˆ†æˆè‹¥å¹²ä¸ªæ¨¡å—</p>\n</li>\n<li>\n<p>å‘½ä»¤æ³¨å†Œï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>- vue create</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- vue <span class=\"token function\">add</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>- vue invoke</pre></td></tr></table></figure></li>\n<li>\n<p>å‚æ•°è§£æï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>vue <span class=\"token builtin class-name\">command</span> <span class=\"token punctuation\">[</span>options <span class=\"token operator\">&lt;</span>params<span class=\"token operator\">></span></pre></td></tr></table></figure></li>\n<li>\n<p>options: å…¨ç§°ï¼š--versionã€--helpã€‚ç®€å†™ä¸ºï¼š-v   -h</p>\n</li>\n<li>\n<p>å¸®åŠ©æ–‡æ¡£ï¼šglobal help</p>\n</li>\n<li>\n<p>å‘½ä»¤è¡Œäº¤äº’</p>\n</li>\n<li>\n<p>æ—¥å¿—æ‰“å°</p>\n</li>\n<li>\n<p>å‘½ä»¤è¡Œæ–‡å­—å˜è‰²</p>\n</li>\n<li>\n<p>ç½‘ç»œé€šä¿¡</p>\n</li>\n<li>\n<p>æ–‡ä»¶å¤„ç†</p>\n</li>\n</ul>\n<h1 id=\"å¼€å‘ç»†èŠ‚\"><a class=\"anchor\" href=\"#å¼€å‘ç»†èŠ‚\">#</a> å¼€å‘ç»†èŠ‚</h1>\n<p><strong>ä¸¤ç§é“¾æ¥æœ¬åœ°æ–‡ä»¶çš„æ–¹å¼</strong></p>\n<ul>\n<li>\n<p>npm  link å‘½ä»¤ä¼šå°†å‘½ä»¤æ‰§è¡Œçš„å½“å‰æ–‡ä»¶å¤¹æ ¹æ® bin å­—æ®µè½¯è¿æ¥åˆ°å…¨å±€çš„ node_modulsã€‚</p>\n</li>\n<li>\n<p>npm link åŒ…åç§° ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šå°†å…¨å±€åŒ…æ·»åŠ è½¯è¿æ¥åˆ°å½“å‰é¡¹ç›®çš„ node_modules ä¸­ã€‚</p>\n</li>\n<li>\n<p>npm unlink åŒ…åç§° ï¼Œè¿™ä¸ªå‘½ä»¤ç”¨äºç§»é™¤å…¨å±€ node_modules ä¸­æŒ‡å®šçš„è½¯è¿æ¥ã€‚ï¼ˆä¸è¿‡è¿™ä¸ªå‘½ä»¤ä¸å¥½ç”¨ï¼Œå»ºè®®ä½¿ç”¨ <code>npm uninstall -g </code> åŒ…åç§°ã€æˆ–è€… <code>npm remove -g </code> åŒ…åç§°  ä»£æ›¿ï¼‰</p>\n</li>\n<li>\n<p>è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå½“æœ¬åœ°åŒ…ç›¸äº’ä¾èµ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ File: è·¯å¾„è¿›è¡ŒæŒ‡å‘ã€‚</p>\n<p><strong>ä¸¤ç§æ–¹å¼çš„åŒºåˆ«</strong></p>\n</li>\n</ul>\n<p>npm  link çš„æ–¹å¼åˆ›å»ºçš„è½¯è¿æ¥å¯ä»¥å®æ—¶åŒæ­¥æ›´æ”¹çš„æ–‡ä»¶ï¼Œä½†æ˜¯é¡¹ç›®æ–‡ä»¶å¤šäº†å°±ä¸æ–¹ä¾¿ç®¡ç†ã€å¾ˆå¤æ‚ï¼ŒFile è·¯å¾„ä¸èƒ½å®æ—¶åŒæ­¥æ–‡ä»¶ä¿®æ”¹ï¼Œéœ€è¦æ‰§è¡Œ npm installï¼Œä½†æ˜¯ç®¡ç†æ–¹ä¾¿ã€‚</p>\n<h1 id=\"è„šæ‰‹æ¶å‘å¸ƒä½“ç³»\"><a class=\"anchor\" href=\"#è„šæ‰‹æ¶å‘å¸ƒä½“ç³»\">#</a> è„šæ‰‹æ¶å‘å¸ƒä½“ç³»</h1>\n<p><strong>åˆ©ç”¨è„šæ‰‹æ¶ç»Ÿä¸€ç®¡ç†å‘å¸ƒé˜¶æ®µ</strong></p>\n<p><strong>åˆ©ç”¨è„šæ‰‹æ¶åšå‘å¸ƒçš„ä¼˜åŠ¿</strong></p>\n<ul>\n<li>è§„èŒƒï¼šåˆ©ç”¨ç»Ÿä¸€å‘å¸ƒè§„èŒƒï¼Œå¦‚ commiti è®°å½•ã€åˆ†æ”¯åç§°ã€ä»£ç è§„èŒƒç­‰</li>\n<li>æ•ˆç‡ï¼šé¿å…å¤§é‡é‡å¤æ“ä½œï¼Œæµªè´¹å¼€å‘æ—¶é—´</li>\n<li>å®‰å…¨ï¼šæ„å»ºå’Œå‘å¸ƒå…¨éƒ¨åœ¨äº‘ç«¯æ“ä½œï¼Œé¿å…ä¸ªäººå‘å¸ƒæ—¶å¸¦æ¥çš„å®‰å…¨éšæ‚£</li>\n</ul>\n<p><strong>è„šæ‰‹æ¶å‘å¸ƒçš„æµç¨‹ï¼Ÿ</strong></p>\n<ul>\n<li>GitF1low è‡ªåŠ¨åŒ–ä»£ç æäº¤</li>\n<li>è¿œç¨‹ä»£ç è‡ªåŠ¨æ£€æŸ¥</li>\n<li>äº‘ç«¯å®Œæˆæ„å»ºä¸å‘å¸ƒæ“ä½œ</li>\n</ul>\n<h1 id=\"è„šæ‰‹æ¶å‘å¸ƒæµç¨‹\"><a class=\"anchor\" href=\"#è„šæ‰‹æ¶å‘å¸ƒæµç¨‹\">#</a> è„šæ‰‹æ¶å‘å¸ƒæµç¨‹</h1>\n<ul>\n<li>æ£€æŸ¥ package.json ä¸­ name å’Œ bin å­—æ®µï¼Œname å­—æ®µä¸èƒ½å’Œå·²å­˜åœ¨çš„çº¿ä¸ŠåŒ…åé‡å¤ï¼Œ</li>\n<li>æ£€æŸ¥ç‰ˆæœ¬å·ï¼Œæ˜¯å¦éœ€è¦æ›´æ–°</li>\n<li>npm login</li>\n<li>npm publish</li>\n</ul>\n<h1 id=\"npmæ–°ç‰¹æ€§workspace\"><a class=\"anchor\" href=\"#npmæ–°ç‰¹æ€§workspace\">#</a> npm æ–°ç‰¹æ€§ï¼šworkspace</h1>\n<p><strong>ä½œç”¨</strong></p>\n<p>æœ¬åœ°è°ƒè¯•æ—¶ï¼Œéœ€è¦å¤šæ¬¡æ‰§è¡Œ npm  linkï¼Œnode15 ç‰ˆæœ¬æ¨å‡º workspaceï¼Œworkspace æ–°ç‰¹æ€§å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œå¤š package åŒ…ç®¡ç†ï¼Œå¯ä»¥è®©å¤šä¸ª npm åŒ…åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­è¿›è¡Œå¼€å‘å’Œç®¡ç†ï¼š</p>\n<ul>\n<li>å°†å­åŒ…ä¸­æ‰€æœ‰çš„ä¾èµ–åŒ…éƒ½æå‡åˆ°æ ¹ç›®å½•è¿›è¡Œå®‰è£…ï¼Œæå‡åŒ…çš„å®‰è£…é€Ÿåº¦</li>\n<li>åˆå§‹åŒ– (npm install) åè‡ªåŠ¨å°†å­åŒ…ä¹‹é—´çš„ä¾èµ–è¿›è¡Œå…³è”</li>\n<li>å„ä¸ªå­åŒ…å…±äº«ä¸€äº›æµç¨‹ï¼ˆeslintã€githookã€publish flow ç­‰ç­‰ï¼‰</li>\n</ul>\n<h1 id=\"lernaå¤špackageç®¡ç†\"><a class=\"anchor\" href=\"#lernaå¤špackageç®¡ç†\">#</a> Lerna å¤š package ç®¡ç†</h1>\n<h3 id=\"lernaç®€ä»‹\"><a class=\"anchor\" href=\"#lernaç®€ä»‹\">#</a> Lerna ç®€ä»‹</h3>\n<p><strong>åŸç”Ÿè„šæ‰‹æ¶å¼€å‘ç—›ç‚¹åˆ†æ</strong>ï¼ˆLerna è§£å†³äº†å“ªäº›é—®é¢˜ï¼š ï¼‰</p>\n<p><strong>ç—›ç‚¹ä¸€ï¼šé‡å¤æ“ä½œ</strong></p>\n<ul>\n<li>å¤š Package æœ¬åœ° link</li>\n<li>å¤š Package ä¾èµ–å®‰è£…</li>\n<li>å¤š Package. å•å…ƒæµ‹è¯•</li>\n<li>å¤š Package ä»£ç æäº¤</li>\n<li>å¤š Package ä»£ç å‘å¸ƒ</li>\n</ul>\n<p><strong>ç—›ç‚¹äºŒï¼šç‰ˆæœ¬ä¸€è‡´æ€§</strong></p>\n<ul>\n<li>å‘å¸ƒæ—¶ç‰ˆæœ¬ä¸€è‡´æ€§</li>\n<li>å‘å¸ƒåç›¸äº’ä¾èµ–æ¿æœ¬å‡çº§</li>\n<li>package è¶Šå¤šï¼Œç®¡ç†å¤æ‚åº¦è¶Šé«˜</li>\n</ul>\n<p><strong>ç®€ä»‹ï¼š</strong></p>\n<p>Lerna æ˜¯ä¸€ä¸ªä¼˜åŒ–åŸºäº git+npm çš„å¤š package é¡¹ç›®çš„ç®¡ç†å·¥å…·ã€‚</p>\n<p><strong>ä¼˜åŠ¿ï¼š</strong></p>\n<ul>\n<li>å¤§å¹…å‡å°‘é‡å¤æ“ä½œ</li>\n<li>æå‡æ“ä½œçš„æ ‡å‡†åŒ–</li>\n</ul>\n<p>Lera æ˜¯æ¶æ„ä¼˜åŒ–çš„äº§ç‰©ï¼Œå®ƒæ­ç¤ºäº†ä¸€ä¸ªæ¶æ„çœŸç†ï¼šé¡¹ç›®å¤æ‚åº¦æå‡åï¼Œå°±éœ€è¦å¯¹é¡¹ç›®è¿›è¡Œæ¶æ„ä¼˜åŒ–ã€‚ä¼˜åŒ–çš„ä¸»è¦ç›®æ ‡å¾€å¾€éƒ½æ˜¯ä»¥æ•ˆèƒ½ä¸ºæ ¸å¿ƒã€‚</p>\n<h3 id=\"lernaä½¿ç”¨\"><a class=\"anchor\" href=\"#lernaä½¿ç”¨\">#</a> Lerna ä½¿ç”¨</h3>\n<p><strong>Lerna å¼€å‘è„šæ‰‹æ¶æµç¨‹å¦‚ä¸‹ï¼š</strong></p>\n<ul>\n<li>\n<p>npm ä¸Šåˆ›å»º group</p>\n</li>\n<li>\n<p>åˆå§‹åŒ– npm é¡¹ç›®</p>\n</li>\n<li>\n<p>å®‰è£… lerna</p>\n</li>\n<li>\n<p>package.json ä¸­é…ç½® workspaces</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"workspaces\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">\"packages/*\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//workspaces å­—æ®µå…è®¸æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•ä½œä¸ºå·¥ä½œåŒºã€‚ä¸€ã€å¯ä»¥åœ¨çˆ¶çº§ç›®å½•çš„ package.json ä¸­ç®¡ç†ä»–ä»¬çš„ä¾èµ–ï¼Œä»è€Œè¾ƒå°‘ä½“ç§¯ã€‚äºŒã€å·¥ä½œåŒºæ¯ä¸ªåŒ…ä¹‹é—´ç›´æ¥ç›¸äº’å¼•ç”¨ï¼Œæœ‰åŠ©äºæé«˜å¼€å‘æ•ˆç‡ã€‚ä¸‰ã€å·¥ä½œåŒºæ‰€æœ‰åŒ…å…±äº«ç‰ˆæœ¬æ§åˆ¶å†å²ã€‚</span></pre></td></tr></table></figure></li>\n<li>\n<p>lerna init åˆå§‹åŒ–é¡¹ç›®ï¼ˆåˆ›å»ºäº† gitï¼‰</p>\n</li>\n<li>\n<p>é…ç½® gitignore æ’é™¤ä¸éœ€è¦æäº¤çš„æ–‡ä»¶</p>\n</li>\n<li>\n<p>--------------------------- åˆå§‹åŒ–å®Œæˆ</p>\n</li>\n<li>\n<p>lerna create åˆ›å»º package</p>\n</li>\n<li>\n<p>lerna add å®‰è£…ä¾èµ–ï¼ˆæœ€æ–°ç‰ˆåºŸå¼ƒï¼‰ï¼Œä½¿ç”¨ npm install &lt;dependency&gt; --workspace  &lt;workspace &gt; ä»£æ›¿ã€‚</p>\n</li>\n<li>\n<p>lerna link é“¾æ¥ä¾èµ–ï¼ˆæœ€æ–°ç‰ˆåºŸå¼ƒï¼‰ï¼Œworkspace è‡ªåŠ¨é“¾æ¥ã€‚</p>\n</li>\n<li>\n<p>---------------------------- é¡¹ç›®åˆ›å»ºå®Œæˆ</p>\n</li>\n<li>\n<p>lerna exec æ‰§è¡Œ shell è„šæœ¬</p>\n</li>\n<li>\n<p>lerna run æ‰§è¡Œ npm å‘½ä»¤</p>\n</li>\n<li>\n<p>lerna clean æ¸…ç©ºä¾èµ–</p>\n</li>\n<li>\n<p>lerna bootstrap é‡è£…ä¾èµ–ï¼ˆæœ€æ–°ç‰ˆåºŸå¼ƒï¼‰ï¼Œä½¿ç”¨ npm install ä»£æ›¿</p>\n</li>\n<li>\n<p>---------------------------- é¡¹ç›®å¼€å‘å®Œæˆ</p>\n</li>\n<li>\n<p>git push æäº¤åˆ°è¿œç¨‹ä»“åº“</p>\n</li>\n<li>\n<p>lerna version å‡çº§ç‰ˆæœ¬å·</p>\n</li>\n<li>\n<p>lerna changed æŸ¥çœ‹ä¸Šç‰ˆæœ¬ä»¥æ¥å…¨éƒ¨çš„å˜æ›´ã€‚</p>\n</li>\n<li>\n<p>git add . æ·»åŠ åˆ° git å·¥ä½œåŒº</p>\n</li>\n<li>\n<p>lerna diff æŸ¥çœ‹ diff</p>\n</li>\n<li>\n<p>lerna publish è¿›è¡Œé¡¹ç›®å‘å¸ƒ</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// é»˜è®¤æ˜¯ç§æœ‰ä»“åº“ï¼Œéœ€è¦åœ¨ package.json ä¸­è¿›è¡Œé…ç½®ï¼š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token property\">\"publishConfig\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"access\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"public\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>---------------------------- é¡¹ç›®å‘å¸ƒå®Œæˆ</p>\n</li>\n</ul>\n<p>è¿™é‡Œæ³¨æ„ npm æœ€æ–°ç‰ˆ workspace ç‰¹æ€§çš„æ¨å¹¿å¯¼è‡´ lerna è®¸å¤šå‘½ä»¤åœ¨æœ€æ–°ç‰ˆè¢«åºŸå¼ƒã€‚</p>\n<h3 id=\"lernaå­¦ä¹ æ”¶è·\"><a class=\"anchor\" href=\"#lernaå­¦ä¹ æ”¶è·\">#</a> Lerna å­¦ä¹ æ”¶è·</h3>\n<ul>\n<li>ç†Ÿæ‚‰ Yargs è„šæ‰‹æ¶å¼€å‘æ¡†æ¶</li>\n<li>ç†Ÿæ‚‰å¤š Package ç®¡ç†å·¥å…· Lerna çš„ä½¿ç”¨æ–¹æ³•å’Œå®ç°åŸç†</li>\n<li>æ·±å…¥ç†è§£ Node.js æ¨¡å—è·¯å¾„è§£ææµç¨‹</li>\n</ul>\n<h4 id=\"ä¸€-yargs\"><a class=\"anchor\" href=\"#ä¸€-yargs\">#</a> <strong>ä¸€ã€yargs</strong></h4>\n<p><strong>è„šæ‰‹æ¶æ„æˆ</strong></p>\n<ul>\n<li>\n<p>bin:package,json ä¸­é…ç½® bin å±æ€§ï¼Œnpm link æœ¬åœ°å®‰è£…</p>\n</li>\n<li>\n<p>command: å‘½ä»¤</p>\n</li>\n<li>\n<p>options: å‚æ•° (boolean/string/number)</p>\n</li>\n<li>\n<p>æ–‡ä»¶é¡¶éƒ¨å¢åŠ   #ï¼/usr/bin/env node</p>\n</li>\n</ul>\n<p><strong>è„šæ‰‹æ¶åˆå§‹åŒ–æµç¨‹</strong></p>\n<ul>\n<li>\n<p>æ„é€ å‡½æ•°ï¼šYargs (0</p>\n</li>\n<li>\n<p>å¸¸ç”¨æ–¹æ³•ï¼š</p>\n</li>\n</ul>\n<ol>\n<li>\n<p>Yargs.options</p>\n</li>\n<li>\n<p>Yargs.option</p>\n</li>\n<li>\n<p>Yargs.group</p>\n</li>\n<li>\n<p>Yargs.demandCommand</p>\n</li>\n<li>\n<p>Yargs.recommendCommands</p>\n</li>\n<li>\n<p>Yargs.strict</p>\n</li>\n<li>\n<p>Yargs.fail</p>\n</li>\n<li>\n<p>Yargs.alias</p>\n</li>\n<li>\n<p>Yargs.wrap</p>\n</li>\n<li>\n<p>Yargs.epilogue</p>\n</li>\n</ol>\n<ul>\n<li>è„šæ‰‹æ¶å‚æ•°è§£æ</li>\n</ul>\n<ol>\n<li>hideBin(process.argv)/Yargs.argv</li>\n<li>Yargs.parse(argv,options)</li>\n</ol>\n<ul>\n<li>å‘½ä»¤æ³¨å†Œæ–¹æ³•</li>\n</ul>\n<ol>\n<li>Yargs.command(command,describe,builder,handler)</li>\n<li>Yargs.command({command,describe,builder,handler )</li>\n</ol>\n<h4 id=\"äºŒ-lernaå®ç°åŸç†\"><a class=\"anchor\" href=\"#äºŒ-lernaå®ç°åŸç†\">#</a> <strong>äºŒã€Lerna å®ç°åŸç†</strong></h4>\n<p>Lerna æ˜¯åŸºäº git+npm çš„å¤š package é¡¹ç›®ç®¡ç†å·¥å…·</p>\n<p><strong>å®ç°åŸç†ï¼š</strong></p>\n<ul>\n<li>é€šè¿‡ import-local ä¼˜å…ˆè°ƒç”¨æœ¬åœ° lerna å‘½ä»¤</li>\n<li>é€šè¿‡ Yargs ç”Ÿæˆè„šæ‰‹æ¶ï¼Œå…ˆæ³¨å†Œå…¨å±€å±æ€§ï¼Œå†æ³¨å†Œå‘½ä»¤ï¼Œæœ€åé€šè¿‡ parse æ–¹æ³•è§£æå‚æ•°</li>\n<li>lerna å‘½ä»¤æ³¨å†Œæ—¶éœ€è¦ä¼ å…¥ builder å’Œ handler ä¸¤ä¸ªæ–¹æ³•ï¼Œbuilder æ–¹æ³•ç”¨äºæ³¨å†Œå‘½ä»¤ä¸“å±çš„ options</li>\n<li>handler ç”¨æ¥å¤„ç†å‘½ä»¤çš„ä¸šåŠ¡é€»è¾‘</li>\n<li>lerna é€šè¿‡é…ç½® npm æœ¬åœ°ä¾èµ–çš„æ–¹å¼æ¥è¿›è¡Œæœ¬åœ°å¼€å‘ï¼Œå…·ä½“å†™æ³•æ˜¯åœ¨ package.json çš„ä¾èµ–ä¸­å†™å…¥ï¼šfile:your-local--module-path, åœ¨ lerna publish æ—¶ä¼šè‡ªåŠ¨å°†è¯¥è·¯å¾„æ›¿æ¢</li>\n</ul>\n<h4 id=\"ä¸‰-nodejsæ¨¡å—è·¯å¾„è§£ææµç¨‹\"><a class=\"anchor\" href=\"#ä¸‰-nodejsæ¨¡å—è·¯å¾„è§£ææµç¨‹\">#</a> ä¸‰ã€Node.js æ¨¡å—è·¯å¾„è§£ææµç¨‹</h4>\n<ul>\n<li>\n<p>Node.js é¡¹ç›®æ¨¡å—è·¯å¾„è§£ææ˜¯é€šè¿‡ require.resolve æ–¹æ³•æ¥å®ç°çš„</p>\n</li>\n<li>\n<p>require,resolve å°±æ˜¯é€šè¿‡ Module.reso1 veFileName æ–¹æ³•å®ç°çš„</p>\n</li>\n<li>\n<p>require,resolve å®ç°åŸç†ï¼š<strong>Module,resolveFileName æ–¹æ³•æ ¸å¿ƒæµç¨‹æœ‰ 3 ç‚¹ï¼š</strong></p>\n<ol>\n<li>\n<p>åˆ¤æ–­æ˜¯å¦ä¸ºå†…ç½®æ¨¡å—</p>\n</li>\n<li>\n<p>é€šè¿‡ Module,resolveLookupPaths æ–¹æ³•ç”Ÿæˆ node_modules å¯èƒ½å­˜åœ¨çš„è·¯å¾„</p>\n</li>\n<li>\n<p>é€šè¿‡ Module,findPath æŸ¥è¯¢æ¨¡å—çš„çœŸå®è·¯å¾„</p>\n</li>\n</ol>\n<p><strong>Module,findPath æ ¸å¿ƒæµç¨‹æœ‰ 4 ç‚¹ï¼š</strong></p>\n<ol>\n<li>\n<p>æŸ¥è¯¢ç¼“å­˜ï¼ˆå°† request å’Œ paths é€šè¿‡ \\xoo åˆå¹¶æˆ cacheKey)</p>\n</li>\n<li>\n<p>éå† paths, å°† path ä¸ request ç»„æˆæ–‡ä»¶è·¯å¾„ basePath</p>\n</li>\n<li>\n<p>å¦‚æœ basePath å­˜åœ¨åˆ™è°ƒç”¨ fs,realPathSync è·å–æ–‡ä»¶çœŸå®è·¯å¾„</p>\n</li>\n<li>\n<p>å°†æ–‡ä»¶çœŸå®è·¯å¾„ç¼“å­˜åˆ° Module.pathCache (key å°±æ˜¯å‰é¢ç”Ÿæˆçš„ cacheKey)</p>\n</li>\n</ol>\n<p><strong>fs.realPathSync æ ¸å¿ƒæµç¨‹æœ‰ 3 ç‚¹ï¼š</strong></p>\n</li>\n</ul>\n<ol>\n<li>\n<p>æŸ¥è¯¢ç¼“å­˜ï¼ˆç¼“å­˜çš„ key ä¸º p, å³ Module.findPath ä¸­ç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„ï¼‰ã€‘</p>\n</li>\n<li>\n<p>ä»å·¦å¾€å³éå†è·¯å¾„å­—ç¬¦ä¸²ï¼ŒæŸ¥è¯¢åˆ° / æ—¶ï¼Œæ‹†åˆ†è·¯å¾„ï¼Œåˆ¤æ–­è¯¥è·¯å¾„æ˜¯å¦ä¸ºè½¯é“¾æ¥ï¼Œå¦‚æœæ˜¯è½¯é“¾æ¥åˆ™æŸ¥è¯¢çœŸå®é“¾æ¥ï¼Œå¹¶ç”Ÿæˆæ–°è·¯å¾„ P, ç„¶åç»§ç»­å¾€åéå†ï¼Œè¿™é‡Œæœ‰ 1 ä¸ªç»†èŠ‚éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>\n<p>éå†è¿‡ç¨‹ä¸­ç”Ÿæˆçš„å­è·¯å¾„ base ä¼šç¼“å­˜åœ¨ knownHard å’Œ cache ä¸­ï¼Œé¿å…é‡å¤æŸ¥è¯¢</p>\n</li>\n<li>\n<p>éå†å®Œæˆå¾—åˆ°æ¨¡å—å¯¹åº”çš„çœŸå®è·¯å¾„ï¼Œæ­¤æ—¶ä¼šå°†åŸå§‹è·¯å¾„ original ä½œä¸º key, çœŸå®è·¯å¾„ä½œä¸º value, ä¿å­˜åˆ°ç¼“å­˜ä¸­</p>\n</li>\n</ol>\n<ul>\n<li>\n<p>require.resolve,paths ç­‰ä»·äº Module.resolveLookupPathsï¼Œ, è¯¥æ–¹æ³•ç”¨äºè·å–æ‰€æœ‰ node_modules å¯èƒ½å­˜åœ¨çš„è·¯å¾„</p>\n</li>\n<li>\n<p>require.resolve,paths å®ç°åŸç†ï¼š<br />\nå¦‚æœè·¯å¾„ä¸º /ï¼ˆæ ¹ç›®å½•ï¼‰ï¼Œç›´æ¥è¿”å›ã€'/node modules'ã€‘å¦åˆ™ï¼Œå°†è·¯å¾„å­—ç¬¦ä¸²ä»åå¾€å‰éå†ï¼ŒæŸ¥è¯¢åˆ° / æ—¶ï¼Œæ‹†åˆ†è·¯å¾„ï¼Œåœ¨åé¢åŠ ä¸Š node_modules, å¹¶ä¼ å…¥ä¸€ä¸ª paths æ•°ç»„ï¼Œç›´è‡³æŸ¥è¯¢ä¸åˆ° / åè¿”å› paths æ•°ç»„</p>\n</li>\n</ul>\n<h1 id=\"yargs\"><a class=\"anchor\" href=\"#yargs\">#</a> yargs</h1>\n<p><strong>yargs ä½¿ç”¨ç®€è¦ä»‹ç»ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token hashbang comment\">#! /usr/bin/env node</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// è·å¾— yargs æ„é€ å®ä¾‹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> yargs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'yargs/yargs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// å‚æ•°è§£æå‡½æ•°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> hideBin <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'yargs/helpers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> arg <span class=\"token operator\">=</span> <span class=\"token function\">hideBin</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> cli <span class=\"token operator\">=</span> <span class=\"token function\">yargs</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// é…ç½®å‘½ä»¤ï¼š</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>cli</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">usage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Usage: $0 [command] &lt;options>'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ä½¿ç”¨è¯´æ˜ï¼Œ$0 è¡¨ç¤ºå‘½ä»¤</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">demandCommand</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A command is required,pass --help to see info'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// æœ€å°‘ä¸€ä¸ªæ¬¡å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">strict</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// å¯¹äºæœªçŸ¥çš„å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œæç¤ºè¾“å‡ºã€‚</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">recommendCommands</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// æŸ¥æ‰¾æç¤ºè¿‘ä¼¼å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">alias</span><span class=\"token punctuation\">(</span><span class=\"token string\">'h'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'help'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//options åˆ«å</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">alias</span><span class=\"token punctuation\">(</span><span class=\"token string\">'v'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'version'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">wrap</span><span class=\"token punctuation\">(</span>cli<span class=\"token punctuation\">.</span><span class=\"token function\">terminalWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// å‘½ä»¤è¡Œè¾“å‡ºå®½åº¦</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">epilog</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">welcomn use cli-core</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ç»“è¯­</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">options</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// æ³¨å†Œå¤šä¸ª options é€‰é¡¹</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token literal-property property\">debug</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span><span class=\"token string\">\"boolean\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token literal-property property\">describe</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bootstrap debug mode\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token literal-property property\">alias</span><span class=\"token operator\">:</span> <span class=\"token string\">\"d\"</span> <span class=\"token comment\">// æ·»åŠ åˆ«å</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">option</span><span class=\"token punctuation\">(</span><span class=\"token string\">'registry'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// æ·»åŠ å•ä¸ªé€‰é¡¹</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token literal-property property\">hidden</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ä¸å¯¹å¤–æš´éœ²å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span><span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token literal-property property\">describe</span><span class=\"token operator\">:</span><span class=\"token string\">\"define global registry\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token literal-property property\">alias</span><span class=\"token operator\">:</span><span class=\"token string\">'r'</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'debug'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Dev Options'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// å¯¹ Options é€‰é¡¹è¿›è¡Œåˆ†ç±»</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'registry'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Extra Options\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token string\">'init [name]'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'init a project'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">yargs</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// æ³¨å†Œæ¬¡å‘½ä»¤ï¼Œåˆ¶å®šå¯¹åº” options</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    yargs</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">option</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token literal-property property\">describe</span><span class=\"token operator\">:</span> <span class=\"token string\">'Name of a project'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token literal-property property\">alias</span><span class=\"token operator\">:</span> <span class=\"token string\">'n'</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">argv</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>argv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>    <span class=\"token comment\">// ç¬¬äºŒç§æ³¨å†Œå‘½ä»¤çš„æ–¹æ³•ï¼ˆæ›´åŠ ç²¾ç»†ï¼‰</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token literal-property property\">command</span><span class=\"token operator\">:</span> <span class=\"token string\">'list'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token literal-property property\">aliases</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ls'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'la'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ll'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token literal-property property\">describe</span><span class=\"token operator\">:</span> <span class=\"token string\">'List local packages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token function-variable function\">builder</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">yargs</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token comment\">//.... æ“ä½œ</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token function-variable function\">handler</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">argv</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>argv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">;</span> <span class=\"token comment\">// ä½¿ç”¨å‚æ•°</span></pre></td></tr></table></figure><h1 id=\"commander\"><a class=\"anchor\" href=\"#commander\">#</a> commander</h1>\n<p><strong>commander ç®€å•å•ä¾‹æ¨¡å¼</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token hashbang comment\">#! /usr/bin/env node</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> commander <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'commander'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> pkg <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../package.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> program <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> commander<span class=\"token punctuation\">;</span> <span class=\"token comment\">//commander å•ä¾‹ï¼ŒåŒ…å«å·²æ³¨å†Œå¥½çš„åŸºç¡€å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>program</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">version</span><span class=\"token punctuation\">(</span>pkg<span class=\"token punctuation\">.</span>version<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>commander å¼ºå¤§åŠŸèƒ½</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token hashbang comment\">#! /usr/bin/env node</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> commander <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'commander'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> pkg <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../package.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> program <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">commander<span class=\"token punctuation\">.</span>Command</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ‰‹åŠ¨å®ä¾‹åŒ–ä¸€ä¸ª commander å®ä¾‹</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>program</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>pkg<span class=\"token punctuation\">.</span>bin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">usage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;command> [options]'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ä½¿ç”¨è¯´æ˜</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">version</span><span class=\"token punctuation\">(</span>pkg<span class=\"token punctuation\">.</span>version<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ç‰ˆæœ¬</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">option</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-d,--debug'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼'</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// é…ç½® option é€‰é¡¹ï¼šé€‰é¡¹ï¼Œå¸®åŠ©ä¿¡æ¯ï¼Œé»˜è®¤å€¼</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">option</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-e,--envName &lt;envName>'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'è·å–å˜é‡åç§°'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//option è·å¾—ä¼ å‚</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span> <span class=\"token comment\">// è§£æå‚æ•°</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// ä½¿ç”¨ command æ³¨å†Œå‘½ä»¤</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> clone <span class=\"token operator\">=</span> program<span class=\"token punctuation\">.</span><span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token string\">'clone &lt;source> [destination]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//&lt; å¿…é€‰é¡¹ >ï¼Œ[å¯é€‰é¡¹]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>clone</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">description</span><span class=\"token punctuation\">(</span><span class=\"token string\">'clone a repository'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">option</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-f,--force'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æ˜¯å¦å¼ºåˆ¶å…‹éš†'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">source<span class=\"token punctuation\">,</span>destination<span class=\"token punctuation\">,</span>cmdObj</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'do clone'</span><span class=\"token punctuation\">,</span>source<span class=\"token punctuation\">,</span>destination<span class=\"token punctuation\">,</span>cmdObj<span class=\"token punctuation\">.</span>force<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">// ä½¿ç”¨ addCommand æ³¨å†Œå­å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">const</span> service <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">commander<span class=\"token punctuation\">.</span>Command</span><span class=\"token punctuation\">(</span><span class=\"token string\">'service'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>service</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start [port]'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">description</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start service at port'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">port</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'do service start'</span><span class=\"token punctuation\">,</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>service</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stop'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">description</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stop service'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stop service'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>program<span class=\"token punctuation\">.</span><span class=\"token function\">addCommand</span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">// å‚æ•°è§£é‡Šå’Œè‡ªåŠ¨åŒ¹é…åŠŸèƒ½</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>program</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">arguments</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;cmd> [options]'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// å¼ºåˆ¶ä¼ å…¥å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">description</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test command'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// æè¿°</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token literal-property property\">cmd</span><span class=\"token operator\">:</span> <span class=\"token string\">'å‘½ä»¤'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token string\">'å‚æ•°'</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cmd<span class=\"token punctuation\">,</span>options</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// åŒ¹é…å…¨éƒ¨å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cmd<span class=\"token punctuation\">,</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token comment\">// é»˜è®¤å‘½ä»¤ä¸å‘½ä»¤è½¬å‘åŠŸèƒ½</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>program</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token string\">'install [name]'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'install package'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            <span class=\"token literal-property property\">executableFile</span><span class=\"token operator\">:</span> <span class=\"token string\">'imooc-cli'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// å°† install [name] å‘½ä»¤è½¬å‘ imooc-cli</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>            <span class=\"token literal-property property\">isDefault</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token comment\">// è®¾ç½®ä¸ºé»˜è®¤å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token literal-property property\">hidden</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token comment\">// å‘½ä»¤ä¸å¯è§</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">alias</span><span class=\"token punctuation\">(</span><span class=\"token string\">'i'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token comment\">// é«˜çº§å®šåˆ¶ 1ï¼šè‡ªå®šä¹‰ help ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>program<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">helpInformation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>program<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--help'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my help information'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token comment\">// é«˜çº§å®šåˆ¶ 2ï¼šç›‘å¬ debug</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>program<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'option:debug'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>program<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">LOG_LEVEL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'verbose'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">LOG_LEVEL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token comment\">// é«˜çº§å®šåˆ¶ 3ï¼šç›‘å¬æœªçŸ¥å‘½ä»¤ï¼ˆä¸é»˜è®¤å‘½ä»¤å†²çªï¼‰</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>program<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'command:*'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æœªçŸ¥å‘½ä»¤:'</span><span class=\"token operator\">+</span> obj<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token keyword\">const</span> avaliableCommands <span class=\"token operator\">=</span> program<span class=\"token punctuation\">.</span>commands<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cmd</span><span class=\"token operator\">=></span>cmd<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å¯ç”¨å‘½ä»¤ï¼š'</span><span class=\"token operator\">+</span>avaliableCommands<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre></pre></td></tr><tr><td data-num=\"79\"></td><td><pre><span class=\"token comment\">// æœ€åè¦è¿›è¡Œå‚æ•°è§£æï¼</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>program<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre></pre></td></tr><tr><td data-num=\"82\"></td><td><pre><span class=\"token comment\">// å†…ç½®å±æ€§å’Œæ–¹æ³•</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>program<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>program<span class=\"token punctuation\">.</span>envName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>program<span class=\"token punctuation\">.</span><span class=\"token function\">outputHelp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å†…ç½®æ–¹æ³•ï¼Œå¼¹å‡ºå¸®åŠ©ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>program<span class=\"token punctuation\">.</span><span class=\"token function\">opts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å†…ç½®æ–¹æ³•ï¼Œè¿”å› options ä¿¡æ¯</span></pre></td></tr></table></figure><h1 id=\"requireåŠ è½½æœºåˆ¶\"><a class=\"anchor\" href=\"#requireåŠ è½½æœºåˆ¶\">#</a> require åŠ è½½æœºåˆ¶</h1>\n<p><strong>require ç›´æ¥åŠ è½½.jsã€.json å’Œ.node æ–‡ä»¶ï¼Œå…¶ä½™æ–‡ä»¶æŒ‰ç…§ js è¯­æ³•è¿›è¡ŒåŠ è½½</strong></p>\n<ol>\n<li>åŠ è½½ js æ–‡ä»¶ï¼Œrequire åŠ è½½çš„ js æ–‡ä»¶éœ€è¦è¿›è¡Œå¯¼å‡º</li>\n<li>åŠ è½½ json æ–‡ä»¶ï¼Œé€šè¿‡ JSON.parse è¿›è¡Œæ–‡ä»¶è§£æ</li>\n<li>åŠ è½½ node æ–‡ä»¶ï¼Œé€šè¿‡ process.dlopen æ–¹æ³•åŠ è½½ï¼ˆnode æ–‡ä»¶æ˜¯ C++ è¯­æ³•ï¼‰</li>\n<li>å…¶ä½™æ–‡ä»¶ï¼Œä½¿ç”¨ js è¯­æ³•åŠ è½½ï¼Œæ­¤æ—¶è¯­æ³•é”™è¯¯çš„ä¼šæŠ¥é”™ã€‚</li>\n</ol>\n<h1 id=\"nodeå¤šè¿›ç¨‹\"><a class=\"anchor\" href=\"#nodeå¤šè¿›ç¨‹\">#</a> node å¤šè¿›ç¨‹</h1>\n<h3 id=\"ä»‹ç»\"><a class=\"anchor\" href=\"#ä»‹ç»\">#</a> ä»‹ç»</h3>\n<p><strong>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯ CPU è°ƒåº¦çš„æœ€å°å•ä½</strong></p>\n<p>ä»€ä¹ˆæ˜¯è¿›ç¨‹</p>\n<p>è¿›ç¨‹ (Process) æ˜¯è®¡ç®—æœºä¸­çš„ç¨‹åºå…³äºæŸæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•</p>\n<p>ä½ï¼Œæ˜¯æ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€ã€‚</p>\n<p>è¿›ç¨‹çš„æ¦‚å¿µä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p>\n<ul>\n<li>ç¬¬ä¸€ï¼Œè¿›ç¨‹æ˜¯ä¸€ä¸ªå®ä½“ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰å®ƒè‡ªå·±çš„åœ°å€ç©ºé—´ã€‚</li>\n<li>ç¬¬äºŒï¼Œè¿›ç¨‹æ˜¯ä¸€ä¸ª â€œæ‰§è¡Œä¸­çš„ç¨‹åºâ€ï¼Œå­˜åœ¨åµŒå¥—å…³ç³»ã€‚</li>\n</ul>\n<p>node å¤šè¿›ç¨‹å®˜æ–¹æ–‡æ¡£ï¼š</p>\n<p>ä¸­æ–‡ç‰ˆï¼š<span class=\"exturl\" data-url=\"aHR0cDovL25vZGVpcy5jbi9hcGkvY2hpbGRfcHJvY2VzcyxodG1s\">http://nodeis.cn/api/child_process,html</span></p>\n<p><strong>æ“ä½œç³»ç»Ÿä¼šä½¿ç”¨æ—¶ä¼šå¼€è¾Ÿä¸€ä¸ª node è¿›ç¨‹ï¼Œæ¯ä¸ª node æ–‡ä»¶åœ¨è¿è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ª child_process è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯ node.js çš„å­è¿›ç¨‹ã€‚</strong></p>\n<h3 id=\"child_precessç”¨æ³•\"><a class=\"anchor\" href=\"#child_precessç”¨æ³•\">#</a> child_precess ç”¨æ³•</h3>\n<p><strong>ä¸€ã€æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ã€‚</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> cp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'child_process'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// é»˜è®¤å†…ç½®åº“</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//exec æ–¹æ³•ï¼Œå¯ä»¥ä¼ æ‰§è¡Œå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥ä¼ æ–‡ä»¶è·¯å¾„ï¼Œä½†ä¸æ”¯æŒç»™æ–‡ä»¶ä¼ å‚ã€‚</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>cp<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ls -al|grep node_modules'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span>stdout<span class=\"token punctuation\">,</span>stderr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span>stdout<span class=\"token punctuation\">,</span>stderr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//execFile æ–¹æ³•ï¼Œä¼ æ–‡ä»¶è·¯å¾„ï¼Œå¹¶ä¸”æ”¯æŒç»™æ–‡ä»¶ä¼ å‚æ•°ã€‚</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>cp<span class=\"token punctuation\">.</span><span class=\"token function\">execFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ls'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token string\">'-al'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span>stdout<span class=\"token punctuation\">,</span>stderr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span>stdout<span class=\"token punctuation\">,</span>stderr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">//spawn æ–¹æ³•ï¼Œä¼ å…¥æ–‡ä»¶è·¯å¾„ï¼Œä»¥æµå¼çš„æ–¹å¼è¾“å‡ºï¼Œæ˜¯ exec å’Œ execFile çš„åº•å±‚åŸç†</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> cp<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'npm'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>install<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token literal-property property\">cwd</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/User/dmq/Desktop/test'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>child<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stdout'</span><span class=\"token punctuation\">,</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>child<span class=\"token punctuation\">.</span>stderr<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stderr'</span><span class=\"token punctuation\">,</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>exec å’Œ spawn ä½¿ç”¨åœºæ™¯ï¼š</strong></p>\n<p>å½“æ–‡ä»¶æ“ä½œè¿‡ç¨‹å¤æ‚ï¼Œå¹¶ä¸”éœ€è¦é¢‘ç¹è¾“å‡ºæ—¥å¿—æ—¶ï¼Œä½¿ç”¨ spawn è¿›è¡Œæµå¼æ“ä½œã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> cp<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'npm'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>install<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token literal-property property\">cwd</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/User/dmq/Desktop/test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">stdio</span><span class=\"token operator\">:</span> <span class=\"token string\">'inherit'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// å°†è¾“å‡ºä¼ ç»™çˆ¶è¿›ç¨‹ã€‚</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// ç›‘å¬é”™è¯¯äº‹ä»¶</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span><span class=\"token parameter\">e</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// ç›‘å¬é€€å‡ºäº‹ä»¶</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'exit'</span><span class=\"token punctuation\">,</span><span class=\"token parameter\">e</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å‘½ä»¤æ‰§è¡ŒæˆåŠŸ'</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>child<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stdout'</span><span class=\"token punctuation\">,</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>child<span class=\"token punctuation\">.</span>stderr<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stderr'</span><span class=\"token punctuation\">,</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å½“æ–‡ä»¶æ“ä½œè¿‡ç¨‹ç®€å•ï¼Œéœ€è¦ç›´æ¥è¾“å‡ºæ—¶ï¼Œä½¿ç”¨ exec æ–¹æ³•</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cp<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'npm install'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token literal-property property\">cwd</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/User/dmq/Desktop/test'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span>stdout<span class=\"token punctuation\">,</span>stderr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>stdout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>stderr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>äºŒã€æ‰§è¡ŒæŒ‡å®š JS æ–‡ä»¶ï¼ˆä¸æ”¯æŒå›è°ƒï¼‰</strong></p>\n<p>fork æ–¹æ³•ç±»ä¼¼äº require å‡½æ•°ï¼Œä½†æ˜¯åŒºåˆ«åœ¨äº fork æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª node å­è¿›ç¨‹æ‰§è¡Œ JS æ–‡ä»¶ï¼Œä½¿ç”¨ç‹¬ç«‹çš„ v8 å¼•æ“å»è§£æä»£ç ã€‚</p>\n<p>index.js æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> cp<span class=\"token punctuation\">.</span><span class=\"token function\">fork</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span><span class=\"token string\">'child.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>child<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello child process!'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    child<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// åŠæ—¶æ–­å¼€è¿æ¥ï¼Œé˜²æ­¢ä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹é•¿æœŸå¤„äºç­‰å¾…çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main pid:'</span><span class=\"token punctuation\">,</span>process<span class=\"token punctuation\">.</span>pid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>child.js æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'child process pid:'</span><span class=\"token punctuation\">,</span>process<span class=\"token punctuation\">.</span>pid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>process<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>process<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello main process'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"child_processæºç \"><a class=\"anchor\" href=\"#child_processæºç \">#</a> child_process æºç </h3>\n<p>ç–‘é—®ï¼š</p>\n<ul>\n<li>execã€execFileã€spanwn å’Œ fork åŒºåˆ«ï¼š\n<ul>\n<li>exec: åŸç†æ˜¯è°ƒç”¨ /bin/sh-c æ‰§è¡Œæˆ‘ä»¬ä¼ å…¥çš„ shell è„šæœ¬ï¼Œåº•å±‚è°ƒç”¨äº† execFile</li>\n<li>execFile: åŸç†æ˜¯ç›´æ¥æ‰§è¡Œæˆ‘ä»¬ä¼ å…¥çš„ file å’Œ args, åº•å±‚è°ƒç”¨ spawn åˆ›å»ºå’Œæ‰§è¡Œå­è¿›ç¨‹ï¼Œå¹¶å»ºç«‹äº†å›è°ƒï¼Œä¸€æ¬¡æ€§å°†æ‰€æœ‰çš„ stdout å’Œ stderr ç»“æœè¿”å›</li>\n<li>spawn: åŸç†æ˜¯è°ƒç”¨äº† internal/child_.process, å®ä¾‹åŒ–äº† ChildProcess å­è¿›ç¨‹å¯¹è±¡ï¼Œå†è°ƒç”¨ child.spawn åˆ›å»ºå­è¿›ç¨‹å¹¶æ‰§è¡Œå‘½ä»¤ï¼Œåº•å±‚æ˜¯è°ƒç”¨äº† child._handle.spawn æ‰§è¡Œ process_wrap ä¸­çš„ spwn æ–¹æ³•ï¼Œæ‰§è¡Œè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œæ‰§è¡Œå®Œæ¯•åé€šè¿‡ PIPE è¿›è¡Œå•å‘æ•°æ®é€šä¿¡ï¼Œé€šä¿¡ç»“æŸåä¼šå­è¿›ç¨‹å‘èµ· onexit å›è°ƒï¼ŒåŒæ—¶ Socket ä¼šæ‰§è¡Œ close å›è°ƒ</li>\n<li>fork: åŸç†æ˜¯é€šè¿‡ spawn åˆ›å»ºå­è¿›ç¨‹å’Œæ‰§è¡Œå‘½ä»¤ï¼Œé€šè¿‡ setupchannel åˆ›å»º IPC ç”¨äºå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¹‹</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"eggjsmongodb\"><a class=\"anchor\" href=\"#eggjsmongodb\">#</a> egg.js+mongodb</h1>\n<p><strong>1ã€egg.js</strong></p>\n<p>ç”¨äºå¿«é€Ÿç”Ÿæˆåç«¯ api çš„æ¡†æ¶ã€‚</p>\n<p><strong>2ã€npm init egg å‘½ä»¤</strong></p>\n<p>å½“æ‰§è¡Œ <code>npm init egg</code>  å‘½ä»¤æ—¶ï¼Œnpm ä¼šè‡ªåŠ¨æ‰¾åˆ° create-egg è¿™ä¸ªåŒ…ï¼ˆå…¶ä»–åŒ…åŒç†ï¼Œæ‰¾åˆ° create - åŒ…åï¼‰ï¼Œè¿›è¡Œæ‰§è¡Œã€‚<strong>å½“ä¸æƒ³å°†è„šæ‰‹æ¶å®‰è£…åˆ°æœ¬åœ°ï¼Œè€Œæ˜¯åœ¨çº¿ä¸Šç›´æ¥ä½¿ç”¨æ—¶ï¼Œè¿™ä¸ªæœºåˆ¶å°±æ˜¾å¾—ååˆ†é‡è¦ã€‚</strong></p>\n<p><strong>3ã€mongodb æ•°æ®åº“</strong></p>\n<p>éå…³ç³»å‹æ•°æ®åº“ã€‚</p>\n<ul>\n<li>\n<p><strong>äº‘ mongodb</strong></p>\n<ul>\n<li>\n<p>äº‘ mongodb å¼€é€š</p>\n</li>\n<li>\n<p>åœ°å€ï¼šhttps:/mongodb.console.aliyun.comL, åˆ›å»ºå®ä¾‹å¹¶ä»˜æ¬¾å³å¯</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>æœ¬åœ° mongodb</strong></p>\n<ul>\n<li>\n<p>åœ°å€ï¼šhttps:/www.runoob.com/mongodb/mongodb-tutorial.html</p>\n</li>\n<li>\n<p>mongodb ä½¿ç”¨æ–¹æ³•</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9tb25nb2RiL21vbmdvZGItZGF0YWJhc2VzLWRvY3VtZW50cy1jb2xsZWN0aW9ucy5odG1s\">https://www.runoob.com/mongodb/mongodb-databases-documents-collections.html</span></p>\n</li>\n</ul>\n</li>\n</ul>\n<p>4ã€egg.js é“¾æ¥ mongodb æ•°æ®åº“</p>\n<p>utils/mongo.js</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'npmlog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>logger<span class=\"token punctuation\">.</span>level <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">LOG_LEVEL</span> <span class=\"token operator\">?</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">LOG_LEVEL</span> <span class=\"token operator\">:</span> <span class=\"token string\">'info'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>logger<span class=\"token punctuation\">.</span>heading <span class=\"token operator\">=</span> <span class=\"token string\">'pick'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è‡ªå®šä¹‰å¤´éƒ¨</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>logger<span class=\"token punctuation\">.</span><span class=\"token function\">addLevel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'success'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">fg</span><span class=\"token operator\">:</span> <span class=\"token string\">'green'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">bold</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è‡ªå®šä¹‰ success æ—¥å¿—</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>logger<span class=\"token punctuation\">.</span><span class=\"token function\">addLevel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notice'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">fg</span><span class=\"token operator\">:</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">bg</span><span class=\"token operator\">:</span> <span class=\"token string\">'black'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è‡ªå®šä¹‰ notice æ—¥å¿—</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> MongoClient <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mongodb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>MongoClient<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Mongo</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token punctuation\">,</span> dbName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>url <span class=\"token operator\">=</span> url<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dbName <span class=\"token operator\">=</span> dbName<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      MongoClient<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>          <span class=\"token literal-property property\">useNewUrlParser</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token literal-property property\">useUnifiedTopology</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> client</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">db</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dbName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> db<span class=\"token punctuation\">,</span> client <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token function\">connectAction</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">docName<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> db<span class=\"token punctuation\">,</span> client <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">const</span> collection <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span>docName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token function\">action</span><span class=\"token punctuation\">(</span>collection<span class=\"token punctuation\">,</span> <span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>          logger<span class=\"token punctuation\">.</span><span class=\"token function\">verbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result'</span><span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>          <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>          logger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>          <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">docName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">connectAction</span><span class=\"token punctuation\">(</span>docName<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">collection<span class=\"token punctuation\">,</span> onSuccess<span class=\"token punctuation\">,</span> onError</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>      collection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">projection</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">_id</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> docs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>          <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>          <span class=\"token function\">onSuccess</span><span class=\"token punctuation\">(</span>docs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>  <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">docName<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">connectAction</span><span class=\"token punctuation\">(</span>docName<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">collection<span class=\"token punctuation\">,</span> onSuccess<span class=\"token punctuation\">,</span> onError</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>      collection<span class=\"token punctuation\">.</span><span class=\"token function\">insertMany</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>          <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>          <span class=\"token function\">onSuccess</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">docName<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">connectAction</span><span class=\"token punctuation\">(</span>docName<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">collection<span class=\"token punctuation\">,</span> onSuccess<span class=\"token punctuation\">,</span> onError</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>      collection<span class=\"token punctuation\">.</span><span class=\"token function\">deleteOne</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>          <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>          <span class=\"token function\">onSuccess</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  <span class=\"token comment\">//   update(collection, data) &#123;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>  <span class=\"token comment\">//   &#125;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>  <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">client</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    client <span class=\"token operator\">&amp;&amp;</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> Mongo<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>db.js</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> mongo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Mongodb</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mongodb://dmq:dmq0216@127.0.0.1:27017/dbName'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'dbName'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">mongo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string\">'project'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h1 id=\"inquireræºç \"><a class=\"anchor\" href=\"#inquireræºç \">#</a> inquirer æºç </h1>\n<h2 id=\"å­¦ä¹ è·¯å¾„\"><a class=\"anchor\" href=\"#å­¦ä¹ è·¯å¾„\">#</a> å­¦ä¹ è·¯å¾„</h2>\n<ul>\n<li>æŒæ¡ä¸€äº›åº“ï¼šreadlineï¼ˆå‘½ä»¤è¡Œè¯»å–ï¼‰/eventsï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰/streamï¼ˆè¾“å…¥è¾“å‡ºæµï¼‰/ansi-escapesï¼ˆå‘½ä»¤è¡Œæ–‡å­—æ ·å¼ï¼‰/rxjsï¼ˆå¤„ç†å¼‚æ­¥äº‹ä»¶ï¼‰</li>\n<li>æŒæ¡å‘½ä»¤è¡Œäº¤äº’çš„å®ç°åŸç†ï¼Œå¹¶å®ç°ä¸€ä¸ªå¯äº¤äº’çš„åˆ—è¡¨</li>\n<li>åˆ†æ inquirer æºç æŒæ¡å…¶ä¸­çš„å…³é”®å®ç°</li>\n</ul>\n<h1 id=\"ejsglob\"><a class=\"anchor\" href=\"#ejsglob\">#</a> ejs+glob</h1>\n<p>ejs ä¸‰æ–¹åº“ç”¨äº xml åŠ¨æ€æ¨¡æ¿æ¸²æŸ“ï¼Œglob ä¸‰æ–¹åº“ç”¨äºæ ¹æ® <code>æ–‡ä»¶è·¯å¾„è¿›è¡Œéå†å’ŒåŒ¹é…æ–‡ä»¶</code> ï¼Œæ‹¿åˆ°æ–‡ä»¶çš„å†…å®¹ã€‚</p>\n<h1 id=\"ejsæºç \"><a class=\"anchor\" href=\"#ejsæºç \">#</a> ejs æºç </h1>\n<p>çœç•¥ï¼Œè¯¦è§å®˜ç½‘</p>\n<h1 id=\"requireæºç \"><a class=\"anchor\" href=\"#requireæºç \">#</a> require æºç </h1>\n<p>çœç•¥ï¼Œè¯¦è§å®˜ç½‘</p>\n<h1 id=\"ä»£ç å¤ç”¨å®è·µ\"><a class=\"anchor\" href=\"#ä»£ç å¤ç”¨å®è·µ\">#</a> ä»£ç å¤ç”¨å®è·µ</h1>\n<p>** ä»£ç å¤ç”¨ç›®çš„ï¼š** æé«˜äººæ•ˆï¼Œé™ä½å¼€å‘æˆæœ¬ã€‚</p>\n<p><strong>è®¡ç®—å…¬å¼</strong>ä¸ºï¼š<strong>èŠ‚çº¦å·¥æ—¶ = æœç”¨ä»£ç èŠ‚çº¦æ—¶é—´  *  ä»£ç å¤ç”¨ç³»æ•°  *  å¤ç”¨æ¬¡æ•°</strong></p>\n<p><strong>èƒŒåæ€è€ƒï¼š</strong></p>\n<ul>\n<li>ä¸åŒå¼€å‘è€…ã€å›¢é˜Ÿä¹‹é—´ä¼šäº§ç”Ÿäº†å¤§é‡é‡å¤ã€é€šç”¨çš„ä»£ç </li>\n<li>è¿™äº›ä»£ç æ•£è½åœ¨å„è‡ªå›¢é˜Ÿçš„é¡¹ç›®ä»£ç é‡Œ</li>\n<li>å¤ç”¨çš„æ—¶å€™å¤§å®¶ä¹ æƒ¯äºç›´æ¥æ‹·è´è¿™äº›ä»£ç åˆ°é¡¹ç›®ä¸­ï¼Œå› ä¸ºè¿™æ ·åšå¯¹ä¸ªäººæˆæœ¬æœ€ä½ï¼ˆå¼€å‘è€…å¾€å¾€æ›´ç†Ÿæ‚‰è‡ªå·±å†™çš„ä»£ç )ï¼Œä½†æ˜¯è¿™ç§åšæ³•ä¸åˆ©äºå›¢é˜Ÿä¹‹é—´ä»£ç å…±äº«ï¼Œå› ä¸ºæ¯ä¸ªäººå¼€å‘ä¸åŒçš„ä¸šåŠ¡ï¼Œå¯¹ä¸åŒé¡µé¢çš„ç†Ÿæ‚‰ç¨‹åº¦ä¸ä¸€æ ·ï¼Œè€Œä»£ç å¤ç”¨çš„å®—æ—¨å°±æ˜¯è¦å°½å¯èƒ½å°†å›¢é˜Ÿä¸­çš„å¼€å‘ç€çš„æ•´ä½“æ°´å¹³æ‹‰é½</li>\n<li>æ‰€ä»¥éœ€è¦é€šè¿‡å·¥å…·åŒ–çš„æ–¹å¼é™ä½ä»£ç å¤ç”¨çš„æˆæœ¬</li>\n</ul>\n",
            "tags": [
                "è„šæ‰‹æ¶å¼€å‘",
                "è„šæ‰‹æ¶å¼€å‘"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/04/12/%E5%A4%8D%E6%9D%82%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B8%8A%E7%BA%BF/",
            "url": "https://dmqweb.cn/2024/04/12/%E5%A4%8D%E6%9D%82%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B8%8A%E7%BA%BF/",
            "title": "å¤æ‚ä¸šåŠ¡éƒ¨ç½²ä¸ä¼˜åŒ–",
            "date_published": "2024-04-12T00:33:58.000Z",
            "content_html": "<h1 id=\"è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ\"><a class=\"anchor\" href=\"#è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ\">#</a> è½¯ä»¶ç”Ÿå‘½å‘¨æœŸï¼š</h1>\n<p><img data-src=\"/images/Snipaste_2024-04-16_12-54-33.jpg\" alt=\"/images/Snipaste_2024-04-16_12-54-33.jpg\" /></p>\n<h1 id=\"æ¶æ„æµç¨‹å›¾\"><a class=\"anchor\" href=\"#æ¶æ„æµç¨‹å›¾\">#</a> æ¶æ„æµç¨‹å›¾</h1>\n<p><img data-src=\"/images/Snipaste_2024-04-17_12-16-04.jpg\" alt=\"/images/Snipaste_2024-04-17_12-16-04.jpg\" /></p>\n<h1 id=\"å¤æ‚é¡¹ç›®é€šç”¨æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#å¤æ‚é¡¹ç›®é€šç”¨æ–¹æ¡ˆ\">#</a> å¤æ‚é¡¹ç›®é€šç”¨æ–¹æ¡ˆ</h1>\n<h4 id=\"ä¸šåŠ¡çš„å¤æ‚åº¦\"><a class=\"anchor\" href=\"#ä¸šåŠ¡çš„å¤æ‚åº¦\">#</a> ä¸šåŠ¡çš„å¤æ‚åº¦</h4>\n<ul>\n<li>äº¤äº’çš„å¤æ‚æ€§</li>\n<li>æ•°æ®ç»“æ„å’ŒçŠ¶æ€çš„å¤æ‚æ€§</li>\n<li>å¤šé¡¹ç›®äº’ç›¸ä¾èµ–çš„å¤æ‚æ€§</li>\n<li>æ‰“åŒ…</li>\n<li>æ€§èƒ½ä¼˜åŒ–</li>\n<li>ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨å’Œè°ƒç ”ä»¥åŠäºŒæ¬¡å¼€å‘</li>\n</ul>\n<h4 id=\"æµç¨‹çš„å¤æ‚åº¦\"><a class=\"anchor\" href=\"#æµç¨‹çš„å¤æ‚åº¦\">#</a> æµç¨‹çš„å¤æ‚åº¦</h4>\n<ul>\n<li>git flow</li>\n<li>lint å·¥å…·</li>\n<li>å•å…ƒæµ‹è¯•</li>\n<li>commit ä¿¡æ¯</li>\n<li>PR revirew</li>\n<li>CI / CD</li>\n</ul>\n<h1 id=\"ci-cdçš„æ¦‚å¿µ\"><a class=\"anchor\" href=\"#ci-cdçš„æ¦‚å¿µ\">#</a> CI / CD çš„æ¦‚å¿µ</h1>\n<p>ä¸šåŠ¡ç»„ä»¶åº“çš„å¼€å‘å’Œå‘å¸ƒæ˜¯éšç€ä¸€äº›åˆ—ä»»åŠ¡è¿›åŒ–çš„ï¼š</p>\n<ul>\n<li>æœ¬åœ° commit é’©å­å‡½æ•°å®Œæˆ commit éªŒè¯</li>\n<li>ä»£ç  push åˆ°è¿œç«¯ä¹‹å</li>\n<li>è·‘ç‰¹å®šçš„ testï¼ˆä¸ä»…ä»…æ˜¯æœ¬æœºçš„ unit testï¼Œä¹Ÿå¯èƒ½æœ‰æ—¶é—´å¾ˆé•¿çš„ E2E testï¼‰</li>\n<li>test é€šè¿‡ä¹‹åæ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„ tagï¼Œå¦‚æœæœ‰å°±è‡ªåŠ¨ publish ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬</li>\n<li>ç”šè‡³è¿˜æœ‰æ›´å¤šï¼Œè‡ªåŠ¨éƒ¨ç½²æ–‡æ¡£ç«™ç‚¹ç­‰ç­‰ã€‚</li>\n</ul>\n<p>è¿™äº›ä»»åŠ¡å¦‚æœæ‰‹åŠ¨æ“ä½œï¼Œå°±è´¹æ—¶è´¹åŠ›ï¼Œæ‰€ä»¥éœ€è¦è‡ªåŠ¨åŒ–è¿›è¡Œã€‚</p>\n<h4 id=\"cicontinuous-integrationæŒç»­é›†æˆ\"><a class=\"anchor\" href=\"#cicontinuous-integrationæŒç»­é›†æˆ\">#</a> CIï¼ˆContinuous integrationï¼‰æŒç»­é›†æˆ</h4>\n<p>æŒç»­é›†æˆæ˜¯æŒ‡é¢‘ç¹åœ°å°†ä»£ç é›†æˆåˆ°ä¸»å¹²ï¼Œä¸€æ—¦å¼€å‘äººå‘˜å¯¹åº”ç”¨æ‰€åšçš„æ›´æ”¹è¢«åˆå¹¶ï¼Œç³»ç»Ÿå°±ä¼šé€šè¿‡è‡ªåŠ¨æ„å»ºåº”ç”¨å¹¶è¿è¡Œä¸åŒçº§åˆ«çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆé€šå¸¸æ˜¯å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼‰æ¥éªŒè¯è¿™äº›æ›´æ”¹ï¼Œç¡®ä¿è¿™äº›æ›´æ”¹æ²¡æœ‰å¯¹åº”ç”¨é€ æˆç ´åã€‚</p>\n<p>ä½œç”¨æœ‰ï¼š</p>\n<ul>\n<li>å¿«é€Ÿå‘ç°é”™è¯¯</li>\n<li>é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²</li>\n</ul>\n<p>æŒç»­é›†æˆçš„ç›®çš„å°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶ä¿æŒé«˜è´¨é‡ã€‚</p>\n<h4 id=\"cdcontinuous-deliveryæŒç»­äº¤ä»˜\"><a class=\"anchor\" href=\"#cdcontinuous-deliveryæŒç»­äº¤ä»˜\">#</a> CDï¼ˆContinuous Deliveryï¼‰æŒç»­äº¤ä»˜</h4>\n<p>æŒç»­äº¤ä»˜æ˜¯æŒ‡é¢‘ç¹åœ°å°†è½¯ä»¶çš„æ–°ç‰ˆæœ¬ï¼Œäº¤ä»˜ç»™è´¨é‡å›¢é˜Ÿæˆ–è€…ç”¨æˆ·ï¼Œä»¥ä¾›è¯„å®¡ã€‚</p>\n<h4 id=\"cdcontinuous-deploymentæŒç»­éƒ¨ç½²\"><a class=\"anchor\" href=\"#cdcontinuous-deploymentæŒç»­éƒ¨ç½²\">#</a> CDï¼ˆContinuous Deploymentï¼‰æŒç»­éƒ¨ç½²</h4>\n<p>æŒç»­éƒ¨ç½²æ˜¯æŒç»­äº¤ä»˜çš„ä¸‹ä¸€æ­¥ï¼ŒæŒ‡çš„æ˜¯ä»£ç é€šè¿‡è¯„å®¡ä»¥åï¼Œè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p>\n<h4 id=\"ci-cdä¸¤å¤§æœåŠ¡\"><a class=\"anchor\" href=\"#ci-cdä¸¤å¤§æœåŠ¡\">#</a> CI / CD ä¸¤å¤§æœåŠ¡ï¼š</h4>\n<ul>\n<li>github actions</li>\n<li>travis-ci</li>\n</ul>\n<h1 id=\"åˆ—è¡¨æ’åºè§£å†³æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#åˆ—è¡¨æ’åºè§£å†³æ–¹æ¡ˆ\">#</a> åˆ—è¡¨æ’åºè§£å†³æ–¹æ¡ˆ</h1>\n<p>åˆ—è¡¨æ’åºåŸç†ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token operator\">&lt;</span>ul <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"ul\"</span> @drop<span class=\"token operator\">=</span><span class=\"token string\">\"onDrop\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token operator\">&lt;</span>li </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"(item,index) in list\"</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token operator\">:</span>data<span class=\"token operator\">-</span>index<span class=\"token operator\">=</span><span class=\"token string\">\"index\"</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token operator\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            @dragover<span class=\"token operator\">=</span><span class=\"token string\">\"onDragover($event,index)\"</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            @dragstartart<span class=\"token operator\">=</span><span class=\"token string\">\"dragstart($event,index)\"</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            @dragenter<span class=\"token operator\">=</span><span class=\"token string\">\"dragenter($event,index)\"</span> </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            draggable<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token operator\">:</span><span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"[item.id==currentLi?'glost':'']\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swigï¿¼<span class=\"token number\">0</span><span class=\"token operator\">--</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">/*eslint-disable*/</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"vue\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span>arrayMoveImmutable<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'array-move'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">let</span> currentLi <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">'åˆ—è¡¨1'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">'åˆ—è¡¨2'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">'åˆ—è¡¨3'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">'åˆ—è¡¨4'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">'åˆ—è¡¨5'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dragstart</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span>inde</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  currentLi<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> inde<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dragenter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span>ind</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>ind <span class=\"token operator\">!=</span> currentLi<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      list<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token function\">arrayMoveImmutable</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span>ind<span class=\"token punctuation\">,</span>currentLi<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      currentLi<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> ind<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onDrop</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span><span class=\"token string\">'drop'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  list<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token function\">arrayMoveImmutable</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span>index<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span>currentLi<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onDragover</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span>inde</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  index<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> inde<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token operator\">&lt;</span>style  scoped<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token punctuation\">.</span>ul<span class=\"token operator\">></span>li<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token operator\">%</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> 50px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> 1px solid red<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token punctuation\">.</span>glost<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  box<span class=\"token operator\">-</span>shadow<span class=\"token operator\">:</span> 10px 10px 3px 3px gray<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span></pre></td></tr></table></figure><p>åˆ—è¡¨æ’åºå¸¸ç”¨å·¥å…·åŒ…ï¼š</p>\n<ul>\n<li>vue-draggable</li>\n<li>sortable.js</li>\n<li>array-move.js</li>\n</ul>\n<h1 id=\"æ‹–åŠ¨æ”¹å˜ä½ç½®åŸç†\"><a class=\"anchor\" href=\"#æ‹–åŠ¨æ”¹å˜ä½ç½®åŸç†\">#</a> æ‹–åŠ¨æ”¹å˜ä½ç½®åŸç†</h1>\n<p>é€šè¿‡ç›‘å¬ mousedown å’Œ mousemove äº‹ä»¶ï¼Œç”¨ element.getBoundingClientRect æ–¹æ³•è·å¾— x å’Œ yï¼Œleft å’Œ top ç­‰å±æ€§ï¼Œæ”¹å˜å¯¹åº”å…ƒç´ çš„ top å’Œ left å±æ€§ã€‚</p>\n<h1 id=\"æ‹–åŠ¨æ”¹å˜å¤§å°åŸç†\"><a class=\"anchor\" href=\"#æ‹–åŠ¨æ”¹å˜å¤§å°åŸç†\">#</a> æ‹–åŠ¨æ”¹å˜å¤§å°åŸç†</h1>\n<p>è®¾ç½®è¾¹æ¡†å…ƒç´ ï¼Œè¾¹æ¡†å…ƒç´ çš„å››ä¸ªè§’æ·»åŠ åœ†ç‚¹å…ƒç´ ï¼Œç›‘å¬ mousedown äº‹ä»¶å’Œ mousemove äº‹ä»¶ï¼Œå¹¶å°†æœ€æ–°çš„åæ ‡èµ‹å€¼ç»™å…ƒç´ çš„å°ºå¯¸å¤§å°ã€‚</p>\n<h1 id=\"å¿«æ·é”®å®ç°åŸç†\"><a class=\"anchor\" href=\"#å¿«æ·é”®å®ç°åŸç†\">#</a> å¿«æ·é”®å®ç°åŸç†</h1>\n<p>å¥½ç”¨çš„å¿«æ·é”®ç¬¬ä¸‰æ–¹åº“ï¼šHotkeys.js</p>\n<p>äº‹ä»¶åŸç†ï¼škeydown äº‹ä»¶çš„ç›‘å¬ï¼Œé€šè¿‡ event.key åˆ¤æ–­æ˜¯é‚£ä¸ªå¿«æ·é”®ï¼Œä»è€Œæ‰§è¡Œå¯¹åº”çš„æ“ä½œã€‚</p>\n<h1 id=\"æ’¤é”€é‡åšåŸç†\"><a class=\"anchor\" href=\"#æ’¤é”€é‡åšåŸç†\">#</a> æ’¤é”€é‡åšåŸç†</h1>\n<p>ç»´æŠ¤ä¸€ä¸ªå›ºå®šé•¿åº¦çš„ histories æ•°ç»„å’Œ historyIndex æŒ‡é’ˆï¼Œæ¯æ¬¡ä¿®æ”¹çš„æ—¶å€™æ·»åŠ ä¸€æ¡è®°å½•ï¼ˆæ ‡è¯†æ“ä½œç±»å‹å’Œæ•°æ®ï¼‰ã€‚å›æ»šæ—¶æ”¹å˜ historyIndex æŒ‡é’ˆã€‚</p>\n<h1 id=\"å³é”®èœå•åŸç†\"><a class=\"anchor\" href=\"#å³é”®èœå•åŸç†\">#</a> å³é”®èœå•åŸç†</h1>\n<p>åœ¨éœ€è¦æ˜¾ç¤ºçš„åŒºåŸŸæ‹¦æˆªé»˜è®¤çš„å³é”®ç‚¹å‡»äº‹ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦ç‚¹å‡»åœ¨ç»„ä»¶å…ƒç´ ä¸Šï¼ˆé€šè¿‡ event.targetï¼‰ï¼Œæ˜¾ç¤ºä¸€ä¸ªè‡ªå®šä¹‰èœå•ï¼Œå…¶ä¸­åŒ…æ‹¬æ“ä½œé¡¹ï¼Œæ˜¾ç¤ºåœ¨é¼ æ ‡çš„ä½ç½®ï¼ˆevent.clientX å’Œ event.clientYï¼‰ï¼Œç‚¹å‡»å®Œæˆæ“ä½œï¼Œé€šè¿‡ display:none éšè—ã€‚</p>\n<h1 id=\"è‡ªåŠ¨ä¿å­˜å®ç°æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#è‡ªåŠ¨ä¿å­˜å®ç°æ–¹æ¡ˆ\">#</a> è‡ªåŠ¨ä¿å­˜å®ç°æ–¹æ¡ˆ</h1>\n<ul>\n<li>å®šæ—¶ä¿å­˜ï¼ˆè¯­é›€ï¼‰</li>\n<li>å®æ—¶ä¿å­˜ï¼ˆçŸ³å¢¨ï¼‰</li>\n</ul>\n<p>å®ç°åŸç†ï¼šæ·»åŠ  isDrity å­—æ®µæ ‡è®°æ•°æ®æ˜¯å¦æœ‰ä¿®æ”¹ï¼Œå½“ä¿®æ”¹æ—¶å°† isDirty è®¾ç½®ä¸º trueï¼Œæ ¹æ® isDIrty çš„å€¼è®¾ç½®å®šæ—¶å™¨ï¼Œå®šæ—¶è§¦å‘ä¿å­˜é€»è¾‘ã€‚</p>\n<h1 id=\"domå…ƒç´ æˆªå›¾å®ç°æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#domå…ƒç´ æˆªå›¾å®ç°æ–¹æ¡ˆ\">#</a> DOM å…ƒç´ æˆªå›¾å®ç°æ–¹æ¡ˆ</h1>\n<p>å·¥å…·åŒ…ï¼šhtml2canvas</p>\n<p>å®ç°åŸç†ï¼šæ ¹æ® DOM å…ƒç´ çš„ styles æ ·å¼ï¼Œé€šè¿‡ svg çš„ foreignObject å…ƒç´ å¼•å…¥ XML å‘½åç©ºé—´çš„å…ƒç´ ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª image æ ‡ç­¾ï¼Œå°† svg é€šè¿‡ url.createObjectURL æ–¹æ³•åˆ›å»ºä¸€ä¸ªè·¯å¾„èµ‹å€¼ç»™ image æ ‡ç­¾çš„ src å±æ€§ï¼Œé€šè¿‡ canvas ç”»ç¬” çš„ drawImage æ–¹æ³•å°† image å›¾ç‰‡ç»˜åˆ¶åˆ° canvas ç”»å¸ƒä¸Šã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\"<span class=\"token operator\">&lt;</span>svg xmlns<span class=\"token operator\">=</span><span class=\"token string\">'http://www.w3.org/2000/svg'</span>width<span class=\"token operator\">=</span><span class=\"token string\">'400px'</span>height<span class=\"token operator\">=</span>'<span class=\"token number\">40</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token string\">\"&lt;foreignabject width='100%'height='100%'>\"</span><span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token string\">\"&lt;div xmlns='http://ww.w3.org/1999/xhtml'>\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>element<span class=\"token punctuation\">.</span>innerHTML<span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token string\">\"&lt;/div>\"</span><span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token string\">\"&lt;/foreignobject>\"</span> <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token string\">\"&lt;/svg>\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> svg <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Blob</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span><span class=\"token string\">\"image/svg+xml;charset=utf-8\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token constant\">URL</span><span class=\"token punctuation\">.</span><span class=\"token function\">createobjectURL</span><span class=\"token punctuation\">(</span>svg<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">const</span> image <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>image<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> url</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>image<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">const</span> ctx <span class=\"token operator\">=</span>anvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    ctx<span class=\"token punctuation\">.</span><span class=\"token function\">drawImage</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h1 id=\"äºŒç»´ç ç”Ÿæˆæ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#äºŒç»´ç ç”Ÿæˆæ–¹æ¡ˆ\">#</a> äºŒç»´ç ç”Ÿæˆæ–¹æ¡ˆ</h1>\n<ul>\n<li>å·¥å…·åŒ…ï¼šnode-qrcode</li>\n<li>ts é¡¹ç›®ä¸­éœ€è¦å®‰è£…é¢å¤–çš„å®šä¹‰æ–‡ä»¶ã€‚</li>\n</ul>\n<p>ç®€å•åŸç†ï¼šå°†æ•°æ®å˜ä¸ºäºŒè¿›åˆ¶ï¼Œç„¶åé€šè¿‡ canvas å°†äºŒè¿›åˆ¶å˜ä¸ºå›¾åƒã€‚</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>canvas</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>qrcode<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>128<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>128<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>canvas</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// å°†å­—ç¬¦ä¸²è½¬ä¸ºäºŒè¿›åˆ¶å½¢å¼</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">function</span> <span class=\"token function\">toBianary</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">let</span> charCode <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">let</span> binaryCharCode <span class=\"token operator\">=</span> charCode<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            res <span class=\"token operator\">+=</span> binaryCharCode<span class=\"token punctuation\">.</span><span class=\"token function\">padStart</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// ç»˜åˆ¶</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">function</span> <span class=\"token function\">drawQRCode</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> canvas</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token keyword\">var</span> context <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token comment\">// ç»˜åˆ¶é»‘ç™½åƒç´ ç‚¹</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> text<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">var</span> row <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">/</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">var</span> col <span class=\"token operator\">=</span> i <span class=\"token operator\">%</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">var</span> color <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"1\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"#000000\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"#FFFFFF\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        context<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> color<span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span>col<span class=\"token punctuation\">,</span> row<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">var</span> qrcodeCanvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qrcode\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token function\">drawQRCode</span><span class=\"token punctuation\">(</span><span class=\"token function\">toBianary</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://dmqweb.cn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> qrcodeCanvas<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¤ºä¾‹ï¼šç»˜åˆ¶ä¸€ä¸ªç®€å•çš„äºŒç»´ç </span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h1 id=\"å¤åˆ¶åŠŸèƒ½å®ç°åŸç†\"><a class=\"anchor\" href=\"#å¤åˆ¶åŠŸèƒ½å®ç°åŸç†\">#</a> å¤åˆ¶åŠŸèƒ½å®ç°åŸç†</h1>\n<ul>\n<li>å·¥å…·åŒ…ï¼šclipboard.js</li>\n<li>è‡ªå¸¦ type å®šä¹‰æ–‡ä»¶</li>\n</ul>\n<p>å®ç°åŸç†ï¼š</p>\n<p>æ–¹æ¡ˆä¸€ï¼šdocument.execCommand () æ–¹æ³•ã€‚å†…ç½®ä¸€ç³»åˆ—åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¤åˆ¶æ–‡æœ¬ï¼ˆä½†<strong>å‰ææ˜¯éœ€è¦é€‰ä¸­æ–‡æœ¬</strong>ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä¸å¯è§å…ƒç´ è¿‚å›ã€‚</p>\n<p>æ–¹æ¡ˆäºŒï¼šClipboard APIï¼ˆ navigator.clipboard ï¼‰ï¼Œä½†æ˜¯å¯¹äº<strong>æµè§ˆå™¨å…¼å®¹æ€§æœ‰å¾…åŠ å¼ºã€‚</strong></p>\n<h1 id=\"ä¸‹è½½æ–‡ä»¶åŸç†\"><a class=\"anchor\" href=\"#ä¸‹è½½æ–‡ä»¶åŸç†\">#</a> ä¸‹è½½æ–‡ä»¶åŸç†</h1>\n<ul>\n<li>å·¥å…·åŒ…ï¼šFileSaver.jsï¼ˆå°æ–‡ä»¶ï¼‰</li>\n<li>StreamSaver.jsï¼ˆå¤§æ–‡ä»¶ï¼‰</li>\n</ul>\n<p>æ–¹æ¡ˆä¸€ï¼šè¶…é“¾æ¥ a æ ‡ç­¾æ·»åŠ  download å±æ€§ï¼Œå±æ€§å€¼ä¸ºæ–‡ä»¶åï¼Œrel å±æ€§è®¾ç½®æ‰“å¼€é¡µé¢çš„å…·ä½“å®ç°ç»†èŠ‚ã€‚ï¼ˆä½†å‰ææ˜¯<strong> href å±æ€§ä¸ºå½“å‰åŒæºæƒ…å†µä¸‹</strong>ã€‚ï¼‰</p>\n<p>æ–¹æ¡ˆäºŒï¼šé€šè¿‡ axios è¯·æ±‚åˆ°å›¾ç‰‡åœ°å€ï¼Œé€šè¿‡ URL.createObjectURL åˆ›å»ºä¸ºä¸€ä¸ªä¸ document ç›¸ç»‘å®šçš„åœ°å€ï¼Œèµ‹å€¼ç»™ a æ ‡ç­¾å³å¯ã€‚ï¼ˆä¸è¦å¿˜è®°ä½¿ç”¨ URL.revokeObjectURL å°†åˆ›å»ºçš„åœ°å€ç§»é™¤ã€‚ï¼‰</p>\n<p>æ–¹æ¡ˆä¸‰ï¼šé€šè¿‡ FileReader.readAsDataURLï¼Œåˆ›å»ºä¸€ä¸ª FileReader å®ä¾‹ï¼Œä½¿ç”¨ readAsDataURL è¯»å–å¯¹è±¡è¿”å›ä¸€æ®µ base64 æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œç›‘å¬ reader å®ä¾‹çš„ onload äº‹ä»¶ï¼Œåˆ›å»º a æ ‡ç­¾å°† reader.result èµ‹å€¼ç»™ a æ ‡ç­¾çš„ href å±æ€§ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function-variable function\">downloadFile</span><span class=\"token operator\">:</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span>fileName</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token comment\">// ä¼ å…¥è¢«è¯»å–çš„ blob å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsDataURL</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token comment\">// è¯»å–å®Œæˆçš„å›è°ƒäº‹ä»¶</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       <span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>       a<span class=\"token punctuation\">.</span>download <span class=\"token operator\">=</span> fileName</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>       a<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>       <span class=\"token comment\">// ç”Ÿæˆçš„ base64 ç¼–ç </span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>       <span class=\"token keyword\">let</span> url <span class=\"token operator\">=</span> reader<span class=\"token punctuation\">.</span>result</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>       a<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> url</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>       document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>       a<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>       document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç»ˆæè§£å†³æ–¹æ¡ˆï¼šç”±äºé€šè¿‡ URL.createObjectURL å’Œ FileReader éƒ½ä¼šå…ˆå°†æ•°æ®ä¿å­˜åˆ°å†…å­˜ä¸­ï¼Œä¸šåŠ¡ä¸­ç»å¸¸éœ€è¦åç«¯éªŒè¯ token ä¹‹åæ‰èƒ½æ‹¿åˆ°æ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ a æ ‡ç­¾ã€‚å› æ­¤å®é™…ä¸­å¯ä»¥å…ˆå‘é€ ajax è¯·æ±‚éªŒè¯ tokenï¼ŒéªŒè¯ä¹‹åé¢å‘ä¸€ä¸ªè¿‡æœŸæ—¶é—´çŸ­çš„ cookieï¼Œä¹‹åä½¿ç”¨ a æ ‡ç­¾è¿›è¡Œä¸‹è½½å³å¯ã€‚ä½†æ˜¯åŒæ ·ä¼šå—åˆ° a æ ‡ç­¾ download å±æ€§è·¨åŸŸè¯·æ±‚çš„é™åˆ¶ã€‚</p>\n<h1 id=\"åº”ç”¨éƒ¨ç½²çš„æµç¨‹\"><a class=\"anchor\" href=\"#åº”ç”¨éƒ¨ç½²çš„æµç¨‹\">#</a> åº”ç”¨éƒ¨ç½²çš„æµç¨‹</h1>\n<p><em><strong>æ„å»º</strong><br />\n Javascript è¯­è¨€æœ¬èº«æ˜¯ä¸éœ€è¦ç¼–è¯‘çš„ã€‚<br />\nä½†æ˜¯ç°ä»£çš„å‰ç«¯é¡¹ç›®ä½¿ç”¨çš„è¯­è¨€å’Œæˆ–è€…çš„æ¨¡å—ç³»ç»Ÿéƒ½æ— æ³•åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œéƒ½éœ€è¦ä½¿ç”¨ç‰¹å®šçš„<br />\n bundler å°†æºä»£ç æœ€ç»ˆè½¬æ¢ä¸ºæµè§ˆå™¨æ”¯æŒçš„ã€avascript ä»£ç ã€‚<br />\n<strong>ä¸åŒçš„ç¯å¢ƒ:</strong></em><br />\n å¼€å‘ç¯å¢ƒ (development) ï¼šæœ¬åœ°çš„æµ‹è¯•ç¯å¢ƒ<br />\næµ‹è¯•ç¯å¢ƒ (test æˆ–è€… stagingï¼‰ï¼šçº¿ä¸Šçš„æµ‹è¯•ç¯å¢ƒ</p>\n<p>ç”Ÿäº§ç¯å¢ƒï¼ˆproduction)ï¼šçº¿ä¸Šçš„ç”Ÿäº§ç¯å¢ƒ</p>\n<p><strong>ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒçš„åŒºåˆ«</strong><br />\n * å¼€å‘ç¯å¢ƒ<br />\n * ä¼šæ·»åŠ ä¸°å¯Œçš„é”™è¯¯æç¤º<br />\nå¯ä»¥ä½¿ç”¨ mock server æˆ–è€…æœ¬åœ°åç«¯ç¯å¢ƒ<br />\næ·»åŠ å„ç§ä¾¿åˆ©çš„åŠŸèƒ½ - æ¯”å¦‚ hot reload, è‡ªåŠ¨åˆ·æ–°<br />\n * ä¸å¤ªå…³å¿ƒé™æ€èµ„æºçš„å¤§å°ï¼Œæœ€å¥½æä¾›æœ€ä¸°å¯Œçš„è°ƒè¯•ä¿¡æ¯ (sourcemap) ç­‰ã€‚</p>\n<p><strong>ç”Ÿäº§ç¯å¢ƒ</strong><br />\nç¨³å®šæ˜¯æœ€é‡è¦çš„åŸåˆ™<br />\né€Ÿåº¦æ˜¯ç¬¬ä¸€è¦åŠ¡<br />\n<strong>ç”Ÿäº§ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒçš„åŒºåˆ«</strong><br />\né«˜åº¦ç›¸ä¼¼<br />\nä½¿ç”¨çš„åç«¯æœåŠ¡ä¸ä¸€æ ·</p>\n<p><strong>ç¯å¢ƒå˜é‡è®¾ç½®ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰</strong></p>\n<ul>\n<li>è·¨å¹³å°è®¾ç½®ç¯å¢ƒå˜é‡å·¥å…·åŒ…ï¼šcross-env</li>\n<li>å‘½ä»¤ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼ˆå¹³å°é™åˆ¶ï¼‰</li>\n<li>ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­é…ç½®</li>\n</ul>\n<p><strong>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ”¾ç½®ä¸‹åˆ—æ–‡ä»¶æ¥æŒ‡å®šç¯å¢ƒå˜é‡</strong><br />\n.env                                        #åœ¨æ‰€æœ‰çš„ç¯å¢ƒä¸­è¢«è½½å…¥<br />\n.env.local                             #åœ¨æ‰€æœ‰çš„ç¯å¢ƒä¸­è¢«è½½å…¥ï¼Œä½†ä¼šè¢« git å¿½ç•¥<br />\n env.[mode]                         #åªåœ¨æŒ‡å®šçš„æ¨¡å¼ä¸­è¢«è½½å…¥<br />\n env.[mode].local             #åªåœ¨æŒ‡å®šçš„æ¨¡å¼ä¸­è¢«è½½å…¥ï¼Œä½†ä¼šè¢« git å¿½ç•¥</p>\n<h1 id=\"webpackæ„å»ºä¼˜åŒ–\"><a class=\"anchor\" href=\"#webpackæ„å»ºä¼˜åŒ–\">#</a> webpack æ„å»ºä¼˜åŒ–</h1>\n<h3 id=\"bundler\"><a class=\"anchor\" href=\"#bundler\">#</a> Bundlerï¼š</h3>\n<p>å°†æµè§ˆå™¨ä¸æ”¯æŒçš„æ¨¡å—è¿›è¡Œç¼–è¯‘ï¼Œè½¬æ¢ï¼Œ<br />\nåˆå¹¶æœ€åç”Ÿæˆçš„ä»£ç å¯ä»¥åœ¨æµè§ˆå™¨ç«¯è‰¯å¥½çš„è¿è¡Œçš„å·¥å…·ã€‚</p>\n<h3 id=\"loaders\"><a class=\"anchor\" href=\"#loaders\">#</a> <strong>Loadersï¼š</strong></h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvY29uY2VwdHMvbG9hZGVycy8=\">https://webpack.docschina.org/concepts/loaders/</span><br />\nloader ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚loader å¯ä»¥ä½¿ä½ åœ¨ import æˆ– &quot;Ioad (åŠ è½½)&quot; æ¨¡å—æ—¶é¢„å¤„ç†æ–‡ä»¶ã€‚<br />\n<strong>å¤šä¸ª Loader</strong><br />\nmodule.rules å…è®¸ä½ åœ¨ webpack é…ç½®ä¸­æŒ‡å®šå¤šä¸ª loaderã€‚è¿™ç§æ–¹å¼æ˜¯å±•ç¤º loader çš„ä¸€ç§ç®€æ˜æ–¹å¼ï¼Œå¹¶ä¸”æœ‰åŠ©äºä½¿ä»£ç å˜å¾—ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚</p>\n<p><strong>webpack ä¸­ loader é…ç½®ï¼š</strong></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>const path = require('path')</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module.exports = <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    entry<span class=\"token operator\">:</span>'./main.js'<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    output<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        path<span class=\"token operator\">:</span>path.resolve(dirname<span class=\"token punctuation\">,</span>'dist')<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        filename<span class=\"token operator\">:</span>bundle.js'<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>module<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    rules<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        test<span class=\"token operator\">:</span>/å…«.css$/<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        use<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            loader<span class=\"token operator\">:</span>'style-loader'<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// å…ˆå†™çš„ loader åæ‰§è¡Œã€‚</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            loader<span class=\"token operator\">:</span>'css-loader'<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h6 id=\"åŸç†\"><a class=\"anchor\" href=\"#åŸç†\">#</a> åŸç†</h6>\n<p><strong>webpack ä¸­ loader åŸç†ï¼š</strong></p>\n<p>åœ¨ webpack.config.js çš„ module å­—æ®µçš„ rules æ•°ç»„ä¸­è¿›è¡Œé…ç½®ï¼šæ·»åŠ ä¸€ä¸ªå¯¹è±¡æ ‡è¯†ä¸€ä¸ªç‹¬ç«‹çš„åŒ¹é…é¡¹ï¼Œtest å­—æ®µä½¿ç”¨æ­£åˆ™è¡¨ç¤ºåŒ¹é…çš„æ–‡ä»¶åï¼Œuse æ•°ç»„è¡¨ç¤ºå¯¹åº”æ–‡ä»¶éœ€è¦æ‰§è¡Œçš„ loaderï¼Œwebpack åœ¨æ‰“åŒ…æ—¶ä¼š<strong>å°†æ–‡ä»¶å†…å®¹ä¼ å…¥å¹¶æ‰§è¡Œå¯¹åº”çš„ loader</strong>ï¼ˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œ<strong>æ‰§è¡Œ loader å‡½æ•°åä¼šå°†å‡½æ•°è¿”å›å€¼åŒ…è£…æˆä¸€ä¸ªæ–°çš„å‡½æ•°</strong>ï¼Œå› æ­¤ webpack ä¸­çš„ loader é€šå¸¸éœ€è¦è¿›è¡Œä¸¤æ¬¡ module.exportsã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æ‰‹å†™ä¸€ä¸ª md æ–‡ä»¶çš„ loader</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> marked <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'marked'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ç¬¬ä¸‰æ–¹åº“ï¼Œç”¨äºå°† md è½¬ä¸º html</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> utils <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'loader-utils'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// å®˜æ–¹åº“ï¼Œç”¨äºè·å–ç”¨æˆ·é…ç½® loader æ—¶ä¼ å…¥çš„å‚æ•°</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">markdownLoader</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">source</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> utils<span class=\"token punctuation\">.</span><span class=\"token function\">getOptions</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">const</span> html <span class=\"token operator\">=</span> <span class=\"token function\">marked</span><span class=\"token punctuation\">(</span>source <span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span>  <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">module.exports = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> markdownLoader<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>é…ç½®ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span><span class=\"token string\">'./main.js'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>dirname<span class=\"token punctuation\">,</span><span class=\"token string\">'dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span>bundle<span class=\"token punctuation\">.</span>js'<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">å…«.css$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span><span class=\"token string\">'style-loader'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// å…ˆå†™çš„ loader åæ‰§è¡Œã€‚</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span><span class=\"token string\">'css-loader'</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">å…«.md$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">'./markdonwn-loader'</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">headerIds</span><span class=\"token operator\">:</span><span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// å…¶ä¸­ options æ˜¯ç»™ loader å‡½æ•°ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œloader ä¸­å¯ä»¥ä½¿ç”¨ loader-utils å®˜æ–¹ä¸‰æ–¹åº“è¿›è¡Œæ¥å—</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>å¤šä¸ª Loader ä¸²è”</strong><br />\næœ€åçš„ loader æœ€æ—©è°ƒç”¨ï¼Œå°†ä¼šä¼ å…¥åŸå§‹èµ„æºå†…å®¹ã€‚<br />\nç¬¬ä¸€ä¸ª loader æœ€åè°ƒç”¨ï¼ŒæœŸæœ›å€¼æ˜¯ä¼ å‡º JavaScript å’Œ source map (å¯é€‰)ã€‚<br />\nä¸­é—´çš„ loader æ‰§è¡Œæ—¶ï¼Œä¼šä¼ å…¥å‰ä¸€ä¸ª loader ä¼ å‡ºçš„ç»“æœã€‚<br />\n<strong>å°† markdown è½¬æ¢ä¸º html:turndown</strong><br />\n åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIub20vZG9tY2hyaXN0aWUvdHVybmRvd24=\">https://github.om/domchristie/turndown</span></p>\n<h3 id=\"plugins\"><a class=\"anchor\" href=\"#plugins\">#</a> <strong>plugins:</strong></h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvY29uY2VwdHMvcGx1Z2lucy8=\">https://webpack.docschina.org/concepts/plugins/</span><br />\n æ’ä»¶æ˜¯ webpack çš„æ”¯æŸ±åŠŸèƒ½ã€‚webpack è‡ªèº«ä¹Ÿæ˜¯æ„å»ºå¼€ä½ åœ¨ webpack é…ç½®ä¸­ç”¨åˆ°çš„ç›¸åŒçš„æ’ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼æ’ä»¶ç›®çš„åœ¨äºè§£å†³ loader æ— æ³•å®ç°çš„å…¶ä»–äº‹ã€‚(æˆ‘è‡ªå·±çš„ç†è§£ï¼Œloader è§£å†³çš„æ˜¯å„ç§ä¸åŒèµ„æºçš„é—®é¢˜ï¼Œplugins æ›´å¤šè§£å†³çš„æ˜¯é¡¹ç›®æ•´ä½“çš„äº‹æƒ…)</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>const path = require('path');</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>const HtmlWebpackPlugin = require('html-webpack-plugin');</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>module.exports = <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    entry<span class=\"token operator\">:</span>'./main.js'<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    output<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        path<span class=\"token operator\">:</span>path.resolve(dirname<span class=\"token punctuation\">,</span>'dist')<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        filename<span class=\"token operator\">:</span>bundle.js'<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>module<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    rules<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        test<span class=\"token operator\">:</span>/å…«.css$/<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        use<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            loader<span class=\"token operator\">:</span>'style-loader'<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// å…ˆå†™çš„ loader åæ‰§è¡Œã€‚</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            loader<span class=\"token operator\">:</span>'css-loader'<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>plugins<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    new BundlesizeWebpackPlugin( <span class=\"token punctuation\">&#123;</span> sizeLimit<span class=\"token operator\">:</span><span class=\"token number\">3</span> <span class=\"token punctuation\">&#125;</span> )  <span class=\"token comment\">// è‡ªå·±æ‰‹å†™çš„æ’ä»¶ï¼ˆå¦‚ä¸‹ï¼‰</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    new webpack.ProgressPlugin()<span class=\"token punctuation\">,</span> <span class=\"token comment\">// æ˜¾ç¤ºæ‰“åŒ…è¿‡ç¨‹ï¼ˆwebpack å†…ç½®æ’ä»¶ï¼‰</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    new HtmlwebpackPlugin()<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h6 id=\"åŸç†-2\"><a class=\"anchor\" href=\"#åŸç†-2\">#</a> åŸç†</h6>\n<p><strong>webpack ä¸­ plugins åŸç†ï¼š</strong></p>\n<p>webpack æ‰§è¡Œæ—¶ä¼šå°† plugins å­—æ®µä¸­çš„æ’ä»¶å®ä¾‹å–å‡ºå¹¶å°† webpack å®ä¾‹ä¼ å…¥å¹¶æ‰§è¡Œå…¶<strong> apply æ–¹æ³•</strong>ï¼Œé€šè¿‡ webpack å®ä¾‹çš„ hooks ä¸­çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥æ“æ§å¯¹åº”çš„é’©å­å‡½æ•°ã€‚</p>\n<p>å®˜æ–¹çš„æ•™ç¨‹ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb250cmlidXRlL3dyaXRpbmctYS1wbHVnaW4v\">https://webpack.js.org/contribute/writing-a-plugin/</span><br />\n<strong> æ’ä»¶çš„æ ¼å¼</strong><br />\nä¸€ä¸ª JavaScript å‡½æ•°æˆ– JavaScript ç±»<br />\nåœ¨å®ƒåŸå‹ä¸Šå®šä¹‰çš„ apply æ–¹æ³•ï¼Œä¼šåœ¨å®‰è£…æ’ä»¶æ—¶è¢«è°ƒç”¨ï¼Œå¹¶è¢« webpack compiler è°ƒç”¨ä¸€æ¬¡<br />\næŒ‡å®šä¸€ä¸ªè§¦åŠåˆ° webpack æœ¬èº«çš„äº‹ä»¶é’©å­ï¼Œå³ hooks, ç”¨äºç‰¹å®šæ—¶æœºå¤„ç†é¢å¤–çš„é€»è¾‘<br />\n Compiler Hooks åˆ—è¡¨<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93ZWJwYWNrLmlzLm9yZy9hcGkvY29tcGlsZXItaG9va3Mv\"> https://webpack.is.org/api/compiler-hooks/</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æ‰‹å†™ä¸€ä¸ª webpack æ’ä»¶ï¼Œæ‰“åŒ…æ–‡ä»¶è¶…å‡ºé™åˆ¶æ—¶ï¼ŒæŠ¥é”™ã€‚</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> resolve <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> statSync <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//fs æ¨¡å—ä¸­åŒæ­¥è¯»å–æ–‡ä»¶ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">BundlesizeWebpackPlugin</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">options</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options <span class=\"token operator\">=</span> options<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">compiler</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// è·å–åˆ°ä¼ å…¥çš„å‚æ•°</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> sizeLimit <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        compiler<span class=\"token punctuation\">.</span>hooks<span class=\"token punctuation\">.</span>compile<span class=\"token punctuation\">.</span><span class=\"token function\">tap</span><span class=\"token punctuation\">(</span><span class=\"token string\">'BundleSizePlugin'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">compilationParams</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ç¼–è¯‘æ—¶é’©å­ï¼Œå‚æ•°æ˜¯å‚æ•°</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'compileé˜¶æ®µ'</span><span class=\"token punctuation\">,</span>compilationParams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        compiler<span class=\"token punctuation\">.</span>hooks<span class=\"token punctuation\">.</span>done<span class=\"token punctuation\">.</span><span class=\"token function\">tap</span><span class=\"token punctuation\">(</span><span class=\"token string\">'BundleSizePlugin'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stats</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ç»“æŸæ—¶é’©å­ï¼Œå‚æ•°æ˜¯æ‰“åŒ…åçš„ä¿¡æ¯ã€‚</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done'</span><span class=\"token punctuation\">,</span>stats<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token comment\">// æ‹¿åˆ°æ‰“åŒ…åæ–‡ä»¶çš„è·¯å¾„å’Œæ–‡ä»¶å</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> path <span class=\"token punctuation\">,</span> filename <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> stats<span class=\"token punctuation\">.</span>compilation<span class=\"token punctuation\">.</span>outputOptions<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token comment\">// æ‹¼æ¥æˆæ–‡ä»¶è·¯å¾„</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">const</span> bundlePath <span class=\"token operator\">=</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token comment\">// è·å–åˆ°æ–‡ä»¶ size</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> size <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">statSync</span><span class=\"token punctuation\">(</span>bundlePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token keyword\">const</span> bundleSize <span class=\"token operator\">=</span> size <span class=\"token operator\">/</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bundleSize <span class=\"token operator\">&lt;</span> sizeLimit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Safe:Bundle-Size'</span><span class=\"token punctuation\">,</span>bundleSize<span class=\"token punctuation\">,</span><span class=\"token string\">'\\n Size Limit:'</span><span class=\"token punctuation\">,</span>sizeLimit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Unsafe:Bundle-Size'</span><span class=\"token punctuation\">,</span>bundleSize<span class=\"token punctuation\">,</span><span class=\"token string\">'\\n Size Limit:'</span><span class=\"token punctuation\">,</span>sizeLimit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> BundlesizeWebpackPlugin<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"æ€»ç»“\"><a class=\"anchor\" href=\"#æ€»ç»“\">#</a> æ€»ç»“</h3>\n<p><strong>Loaders å…³æ³¨ä»£ç ä¸­çš„å•ä¸ªèµ„æºï¼ŒPlugins å…³æ³¨æ•´ä½“æµç¨‹ï¼Œå¯ä»¥æ¥è§¦åˆ° webpack æ„å»ºæµç¨‹ä¸­çš„<br />\nå„ä¸ªé˜¶æ®µå¹¶åŠ«æŒåšä¸€äº›ä»£ç å¤„ç†ã€‚</strong></p>\n<h1 id=\"nodeåç«¯æ¡†æ¶\"><a class=\"anchor\" href=\"#nodeåç«¯æ¡†æ¶\">#</a> node åç«¯æ¡†æ¶</h1>\n<h2 id=\"nodejsåç«¯æ¡†æ¶è°ƒç ”\"><a class=\"anchor\" href=\"#nodejsåç«¯æ¡†æ¶è°ƒç ”\">#</a> Node.js åç«¯æ¡†æ¶è°ƒç ”</h2>\n<p><strong>åç«¯æ¡†æ¶åº”è¯¥æ³¨æ„çš„ä¸‰å¤§é—®é¢˜</strong><br />\nè·¯ç”± Routes<br />\n è¯·æ±‚ Request<br />\n å“åº” Response</p>\n<h4 id=\"express\"><a class=\"anchor\" href=\"#express\">#</a> Express</h4>\n<p>å®˜æ–¹ç½‘å€ï¼š[https:l/expressis.com (https:expressis.com)<br />\n<strong> å®‰è£…</strong><br />\nå®˜æ–¹ç½‘å€ï¼š[<span class=\"exturl\" data-url=\"aHR0cHM6Ly9leHByZXNzaXMuY29tL3poLWNuL3N0YXJ0ZXIvaW5zdGFsbGluZy5odG1s\">https://expressis.com/zh-cn/starter/installing.html</span>](https:l/expressjs.com/zh-<br />\ncn/starter/installing.html)<br />\n ä½¿ç”¨ç”Ÿæˆå™¨å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—çš„è„šæ‰‹æ¶ä»£ç ï¼š[https:/expressjs.com/zh<br />\ncn/starter/generator.htmll(<span class=\"exturl\" data-url=\"aHR0cHM6Ly9leHByZXNzaXMuY29tL3poLWNuL3N0YXJ0ZXIvZ2VuZXJhdG9yLmh0bWw=\">https://expressis.com/zh-cn/starter/generator.html</span>)</p>\n<p><strong>ä¼˜ç‚¹</strong></p>\n<p>å¿«é€Ÿç®€å•ã€æ˜“ä¸Šæ‰‹</p>\n<p><strong>ç¼ºç‚¹</strong></p>\n<ul>\n<li>è·¯ç”±å“åº”ä¸­ï¼Œå¾ˆå¯èƒ½æœ‰ï¼šä»å¤–éƒ¨è¯·æ±‚æ•°æ®çš„æœåŠ¡ï¼Œæœ‰éªŒè¯è·¯ç”±çš„è¯·æ±‚å‚æ•°ï¼Œè¿”å›ç‰¹å®šçš„æ ¼å¼ã€‚</li>\n<li>æ‰€æœ‰é€»è¾‘ä¸åˆ†é’çº¢çš‚ç™½çš„å†™åœ¨ä¸€èµ·ï¼å¾ˆå®¹æ˜“äº§ç”Ÿå†—é•¿çš„éš¾ä»¥ç»´æŠ¤çš„ä»£ç ã€‚</li>\n<li>ä¸€äº›å¤§å‹å¿…å¤‡çš„æ¨¡å—ï¼Œå¦‚ç¬¬ä¸‰æ–¹æœåŠ¡åˆå§‹åŒ–ï¼Œå®‰å…¨ï¼Œæ—¥å¿—éƒ½æ²¡æœ‰æ˜ç¡®çš„æ ‡å‡†ã€‚</li>\n</ul>\n<p><strong>Express ä¸­é—´ä»¶ï¼š</strong></p>\n<p>Express æ˜¯ä¸€ä¸ªåŸºäºä¸­é—´ä»¶çš„æ¡†æ¶ï¼Œå…¶ä½™ä»»åŠ¡éƒ½ä¼šåœ¨ä¸­é—´ä»¶ä¸­æ‰§è¡Œï¼Œä¸­é—´ä»¶æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ç»“æ„ï¼Œå…ˆå†™å…¥çš„ä»»åŠ¡å…ˆæ‰§è¡Œï¼Œä¸­é—´ä»¶çš„å†™æ³•æ˜¯ï¼šapp.use ()ï¼Œå½“è°ƒç”¨ä¸­é—´ä»¶æ—¶ï¼Œä¼šå‘ä¼ å…¥çš„å‡½æ•°ä¸­ä¼ å…¥ req,res å’Œ next å‡½æ•°ã€‚</p>\n<p><strong>ä¸­é—´ä»¶å¯ä»¥å®Œæˆçš„ä»»åŠ¡</strong></p>\n<ul>\n<li>æ‰§è¡Œä»»ä½•ä»£ç ã€‚</li>\n<li>å¯¹è¯·æ±‚å’Œå“åº”å¯¹è±¡è¿›è¡Œæ›´æ”¹ã€‚</li>\n<li>ç»“æŸè¯·æ±‚ / å“åº”å¾ªç¯ã€‚</li>\n<li>è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</li>\n</ul>\n<h4 id=\"koa2\"><a class=\"anchor\" href=\"#koa2\">#</a> Koa2</h4>\n<p><strong>å®˜ç½‘åœ°å€</strong>ï¼š[https:I/koajs.com (https:/koajs.com)</p>\n<p><strong>Koa2 å’Œ Express çš„åŒºåˆ«</strong></p>\n<ul>\n<li>ä½¿ç”¨ Promise (async,await) ä»£æ›¿ callback (node&gt;v7.6.0)</li>\n<li>ä½¿ç”¨ ctx (ä¸Šä¸‹æ–‡å¯¹è±¡) å°è£… req (Request) å’Œ res (Response), ä»¥åŠä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ã€‚</li>\n<li><strong>å®Œå…¨ä¸åŒçš„ä¸­é—´ä»¶æœºåˆ¶</strong></li>\n<li><strong>æ›´è½»é‡çº§ï¼Œæ²¡æœ‰æ†ç»‘ä»»ä½•ä¸­é—´ä»¶</strong></li>\n<li>å®˜æ–¹æ–‡ç« ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2tvYWpzL2tvYS9ibG9iL21hc3Rlci9kb2NzL2tvYS12cy1leHByZXNzLm1k\">https://github.com/koajs/koa/blob/naster/docs/koa-vs-express.md</span></li>\n</ul>\n<p><strong>Koa2 ä¸­é—´ä»¶ï¼š</strong></p>\n<ol>\n<li>Koa2 ä¸­é—´ä»¶ï¼Œç”± Express çš„é˜Ÿåˆ—æ¨¡å‹ï¼ˆåŒæ­¥ï¼‰è½¬å˜ä¸ºæ´‹è‘±æ¨¡å‹ï¼Œå½“ç¨‹åºè¿è¡Œåˆ° <code>await next()</code>  çš„æ—¶å€™å°±ä¼šæš‚åœå½“å‰ç¨‹åºï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¤„ç†å®Œä¹‹åæ‰ä¼šä»”å›è¿‡å¤´æ¥ç»§ç»­å¤„ç†ã€‚</li>\n<li>Koa2 æ´‹è‘±æ¨¡å‹è§£å†³çš„é—®é¢˜å°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶å¯ä»¥è°ƒç”¨å…¶ä»–ä¸­é—´ä»¶æ‰§è¡Œåï¼Œå†ç»§ç»­è‡ªå·±çš„æ“ä½œï¼ŒExpress æ¡†æ¶ä¸­ next () æ‰§è¡Œåå°±ç›´æ¥åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æ“ä½œï¼Œæ— æ³•é€€å›ã€‚</li>\n</ol>\n<p><img data-src=\"/images/Snipaste_2024-04-22_14-30-49.jpg\" alt=\"Koa2ä¸­é—´ä»¶\" /></p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> Koa <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'koa'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Koa</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">await</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">await</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://localhost:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong>Koa2 ç‰¹ç‚¹ï¼š</strong></p>\n<ul>\n<li>å“åº”æœºåˆ¶çš„ä¸åŒ</li>\n<li>Express: æˆ‘ä»¬ç›´æ¥æ“ä½œçš„æ˜¯ res å¯¹è±¡ï¼Œç›´æ¥ res.send ä¹‹åå°±ç«‹å³å“åº”äº†ã€‚</li>\n<li>Koa2: æ•°æ®çš„å“åº”æ˜¯é€šè¿‡ ctx.body è¿›è¡Œè®¾ç½®ï¼Œæ³¨æ„è¿™é‡Œä»…æ˜¯è®¾ç½®å¹¶æ²¡æœ‰ç«‹å³å“åº”ï¼Œè€Œæ˜¯åœ¨æ‰€æœ‰çš„ä¸­é—´ä»¶ç»“æŸä¹‹ååšäº†å“åº”ã€‚</li>\n</ul>\n<p>** ç¼ºç‚¹ï¼š**Koa2 åœ¨ä½¿ç”¨ä¸Šæœ‰ä¸€å®šçš„ç¼ºç‚¹ï¼Œå› ä¸ºå¤ªè¿‡äºè½»é‡ä½¿å¾—åœ¨ä½¿ç”¨æ—¶éœ€è¦æ‰‹åŠ¨å¤„ç†å¾ˆå¤šæ“ä½œï¼Œå¯ä»¥ä½¿ç”¨åŸºäº Koa2 çš„ä¸Šå±‚æ¡†æ¶ï¼ˆå¦‚ï¼šegg.jsï¼‰</p>\n<h4 id=\"eggjs\"><a class=\"anchor\" href=\"#eggjs\">#</a> egg.js</h4>\n<p><strong>Express å’Œ Koa2 çš„ä¸è¶³</strong></p>\n<ul>\n<li>ç®€å•è€Œä¸”æ‰©å±•æ€§å¼ºï¼Œé€‚åˆä¸ªäººçš„æ¯”è¾ƒå°çš„é¡¹ç›®</li>\n<li>æ²¡æœ‰çº¦å®šï¼Œå¯¹äºç»Ÿä¸€ç»´æŠ¤å’Œå¼€å‘éå¸¸ä¸åˆ©</li>\n</ul>\n<p><strong>å¯¹äºåç«¯æ¡†æ¶çš„éœ€æ±‚</strong></p>\n<ul>\n<li>éœ€è¦æœ‰ä¸€å¥—ä¼˜ç§€çš„ç»Ÿä¸€çš„çº¦å®šæˆ–è€…æ¶æ„è¿›è¡Œå¼€å‘</li>\n<li>æœ‰ä¸°å¯Œçš„æ‰©å±•æœºåˆ¶å’Œå¯å®šåˆ¶æ€§</li>\n<li>Typescript æ”¯æŒ</li>\n</ul>\n<p><strong>egg.js</strong></p>\n<ul>\n<li>åœ°å€ï¼š[https:l/eggis.org/zh-cnI (https:l/eggjs.org/zh-cn) ï¼ˆåŸºäº Koa2ï¼‰</li>\n<li>é˜¿é‡Œå¤§å‚å‡ºå“ï¼Œç»´æŠ¤æœ‰ä¿éšœã€‚å›½å†…å¼€å‘è€…å¼€å‘ï¼Œä¸­æ–‡æ–‡æ¡£è´¨é‡æœ‰ä¿è¯ã€‚</li>\n<li><strong>çº¦å®šä¼˜äºé…ç½®ï¼ŒæŒ‰ç…§ä¸€å¥—ç»Ÿä¸€çš„çº¦å®šè¿›è¡Œåº”ç”¨å¼€å‘ã€‚</strong></li>\n<li>ä¸€ä¸ªæ’ä»¶åªåšä¸€ä»¶äº‹ï¼Œé«˜åº¦å¯æ‰©å±•çš„æ’ä»¶æœºåˆ¶</li>\n<li>æ”¯æŒ Typescript</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>//nodejsç‰ˆæœ¬10ä»¥ä¸Š</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">npm</span> init egg <span class=\"token parameter variable\">--type</span><span class=\"token operator\">=</span>ts</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">npm</span> run dev</pre></td></tr></table></figure><p><strong>egg.js æ¦‚å¿µï¼š</strong></p>\n<ul>\n<li>\n<p>Application - å…¨å±€åº”ç”¨å¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>\n</li>\n<li>\n<p>Context - ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ¯æ¬¡è¯·æ±‚ç”Ÿæˆä¸€ä¸ªå®ä¾‹ã€‚</p>\n</li>\n<li>\n<p>Request - è¯·æ±‚å¯¹è±¡ï¼Œæ¥è‡ª Koaã€‚</p>\n</li>\n<li>\n<p>Response - å“åº”å¯¹è±¡ï¼Œæ¥è‡ª Koa çš„ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p>\n</li>\n<li>\n<p>Helper - ç”¨æ¥æä¾›ä¸€äº›å®ç”¨çš„ utility å‡½æ•°ã€‚æ¡†æ¶å†…ç½®äº†å‡ ä¸ªç®€å•çš„ Helper å‡½æ•°ã€‚</p>\n</li>\n</ul>\n<h4 id=\"nestjs\"><a class=\"anchor\" href=\"#nestjs\">#</a> Nest.js</h4>\n<ul>\n<li>åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6L2RvY3MubmVzdGlzLmNvbQ==\">https:/docs.nestjs.com</span></li>\n<li>å†…ç½®å¹¶ä¸”å®Œå…¨æ”¯æŒ Typescript</li>\n<li>å¼€ç®±å³ç”¨çš„åº”ç”¨ç¨‹åºæ¶æ„</li>\n<li>å¯æ‰©å±•ï¼Œæ¾æ•£è€¦åˆ</li>\n<li>å¤§é‡é‡‡ç”¨äº†è£…é¥°å™¨çš„å†™æ³• <span class=\"exturl\" data-url=\"aHRwczovL2RvY3MubmVzdGlzLmNuLzgvY29udHJvbGxlcnM=\">https://docs.nestjs.cn/8/controllers</span></li>\n</ul>\n<h1 id=\"vueconfigjs\"><a class=\"anchor\" href=\"#vueconfigjs\">#</a> vue.config.js</h1>\n<p><strong>ä¸ªæ€§åŒ–æ„å»ºç»“æœ - vue.config,js</strong><br />\n åœ¨åŸºç¡€çš„é…ç½®ä¸Šï¼Œè‡ªå®šä¹‰æ„å»ºçš„ç»“æœ - å¯ä»¥ä½¿ç”¨ vue.config.js<br />\n æ–‡æ¡£åœ°å€ï¼šhttps:l/cli.vuejs.org/zh/config#vue-config-js<br />\n ç®€ä»‹ä¸¤ä¸ªå­—æ®µ<br />\n *<strong>PublicPath</strong> - éƒ¨ç½²åº”ç”¨åŒ…æ—¶çš„åŸºæœ¬ URL, è¿™ä¸ªé…ç½®å¯¹åº”çš„æ˜¯ webpack çš„ PublicPath å±æ€§<br />\nâ˜…<br />\né»˜è®¤å€¼ä¸º '/'ï¼ŒVue CLI ä¼šå‡è®¾ä½ çš„åº”ç”¨æ˜¯è¢«éƒ¨ç½²åœ¨ä¸€ä¸ªåŸŸåçš„æ ¹è·¯å¾„ä¸Š<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9hYmMuY29tLw==\"> https://abc.com/</span><br />\nâ˜…<br />\nå¯ä»¥è®¾ç½®ä¸ºå­è·¯å¾„ - å¦‚æœä½ çš„åº”ç”¨è¢«éƒ¨ç½²åœ¨ https:abc,com/sub/ é‚£ä¹ˆå°±è®¾ç½®ä¸º '/sub'<br />\n* å¯ä»¥è®¾ç½®ä¸º CDN è·¯å¾„ - åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ï¼Œæœ€åé™æ€èµ„æºæ˜¯è¦å…¨éƒ¨ä¸Šä¼ åˆ° CDN çš„ï¼Œï¼ˆè„šæ‰‹<br />\næ¶è‡ªåŠ¨å®Œæˆ)ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ª cDN åŸŸå -'https:l/oss.imooc-Iego.com/editor'<br />\n* è¿˜å¯ä»¥è®¾ç½®ä¸ºç»å¯¹è·¯å¾„ ('' æˆ–è€… './')ï¼Œè¿™æ ·æ‰€æœ‰çš„èµ„æºéƒ½ä¼šè¢«é“¾æ¥ä¸ºç›¸å¯¹è·¯å¾„</p>\n<p><strong>css.loaderOptions</strong> å±æ€§<br />\n * å‘ CSS ç›¸å…³çš„ loader ä¼ é€’é€‰é¡¹<br />\n * Ant-design-vue çš„æ ·å¼å˜é‡ï¼šhttps:lww,antd,com docs/vue/customize-theme-cn<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Z1ZUNvbXBvbmVudC9hbnQtZGVzaWduLQ==\">https://github.com/vueComponent/ant-design-</span><br />\nyue/blob/master/components/style/themes/default.less<br />\n * æ·»åŠ æ›´å¤šçš„ CSS é¢„å¤„ç†å™¨ï¼š<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbGkudnVlanMub3JnL3poL2d1aWRlL2Nzcy5odG1sIyVFOSVBMiU4NCVFNSVBNCU4NCVFNyU5MCU4NiVFNSU5OSVBOA==\">https://cli.vuejs.org/zh/guide/css.html# é¢„å¤„ç†å™¨</span><br />\n * ç‰¹åˆ«æ³¨æ„ less å’Œ Iess-loader çš„ç‰ˆæœ¬é—®é¢˜ã€‚ä¸è¦è£…æœ€æ–°çš„ï¼Œå»ºè®®é€‰ç”¨ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//vue.config.js é…ç½®ï¼š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> isstaging <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VUE_APP_STAGINE</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> isProduction <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token string\">'production'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token operator\">/</span>ç”Ÿäº§ç¯å¢ƒè¦ä½¿ç”¨0SSåœ°å€</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token operator\">/</span>å…¶ä»–ç¯å¢ƒéƒ½ä½¿ç”¨ç»å¯¹è·¯å¾„</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token literal-property property\">publicPath</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span>isProduction <span class=\"token number\">6</span> <span class=\"token operator\">!</span>isStaging<span class=\"token punctuation\">)</span>'https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">oss.imooc-lego.com</span><span class=\"token regex-delimiter\">/</span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">css</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    \t<span class=\"token literal-property property\">loaderOptions</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    \t<span class=\"token literal-property property\">less</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    \t\t<span class=\"token literal-property property\">lessoptions</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    \t\t\t<span class=\"token literal-property property\">modifyVars</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          \t\t <span class=\"token string-property property\">'primary-color'</span><span class=\"token operator\">:</span><span class=\"token string\">'#3E7FFF'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    \t\t\t<span class=\"token punctuation\">&#125;</span>ï¼Œ</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token literal-property property\">javascriptEnabled</span><span class=\"token operator\">:</span><span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    \t\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    \t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token function-variable function\">configureWebpack</span><span class=\"token operator\">:</span> <span class=\"token parameter\">config</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        config<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        \t<span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>IgnorePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>        <span class=\"token comment\">// æ‰“åŒ…æ—¶å¿½ç•¥å¯¹åº”çš„æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token literal-property property\">resourceRegExp</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\.\\/locale$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token literal-property property\">contextRegExp</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">moment$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    \t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>isAnalyzeMode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    \t\tconfig<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    \t\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">BundleAnalyzerPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>    <span class=\"token comment\">// æ·»åŠ æ‰“åŒ…åçš„æ–‡ä»¶åˆ†æå·¥å…·ï¼ˆBundleAnalyzerPluginï¼‰</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    \t\t\t\t<span class=\"token literal-property property\">analyzerMode</span> <span class=\"token operator\">:</span> <span class=\"token string\">'static'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    \t\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    \t\t<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    \t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"é¡¹ç›®æ„å»ºä¼˜åŒ–\"><a class=\"anchor\" href=\"#é¡¹ç›®æ„å»ºä¼˜åŒ–\">#</a> é¡¹ç›®æ„å»ºä¼˜åŒ–</h1>\n<p><strong>å¥½ç”¨çš„ webpack æ’ä»¶:webpack-bundle-analyzer</strong></p>\n<p>å¯è§†åŒ– webpack æ‰“åŒ…åçš„å·¥å…·åŒ…å¤§å°ï¼Œä¾¿äºåˆ†æä¾èµ–å’Œè¿›è¡Œé¡¹ç›®ä¼˜åŒ–ã€‚å¦‚ä¸Š vue.config.js ä¸­é…ç½®ã€‚</p>\n<p><strong>æ ¹æ®å›¾è¡¨çš„ä¼˜åŒ–æ­¥éª¤</strong></p>\n<p>ä¸€ã€çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆé‡å¤çš„æ¨¡å—ï¼Œæˆ–è€…æ²¡æœ‰ç”¨çš„æ¨¡å—è¢«æ‰“åŒ…åˆ°äº†æœ€ç»ˆçš„ä»£ç ä¸­<br />\näºŒã€çœ‹çœ‹ package.json, å¯¹æ¯”ä¸€ä¸‹æ˜¯å¦æœ‰åº”è¯¥åœ¨ devDeps çš„æ¨¡å—ï¼Œè¢«é”™è¯¯çš„æ”¾ç½®åˆ°äº† deps å½“ä¸­<br />\nä¸‰ã€æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤åŠ è½½çš„æ¨¡å—ï¼Œæˆ–è€…æ˜¯åŠŸèƒ½å¤§ä½“ç›¸åŒçš„æ¨¡å—ã€‚<br />\næ¯”å¦‚ï¼šä½¿ç”¨<strong> es</strong> ç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹åº“ï¼Œäº«å— tree-shaking çš„çº¢åˆ©ã€‚<br />\nå››ã€æ£€æŸ¥æ˜¯å¦æœ‰æ²¡æœ‰ç”¨çš„æ¨¡å—æ˜¯å¦æ‰“åŒ…åˆ°äº†æœ€ç»ˆçš„æ–‡ä»¶ä¸­ï¼Œé€šè¿‡å¦‚ä¸‹æ’ä»¶å¿½ç•¥å¯¹åº”çš„æ–‡ä»¶ï¼Œä»è€Œ tree-shaking æ‰å¿½ç•¥çš„æ–‡ä»¶ï¼ˆå¦‚å›½é™…åŒ–éœ€è¦çš„å„ç§è¯­è¨€åŒ…ï¼‰, è¯¦ç»†é…ç½®å¦‚ä¸Š vue.config.js ä¸­ã€‚</p>\n<p>*webpack ignore plugin <span class=\"exturl\" data-url=\"aHR0cHM6Ly93ZWJwYWNrLmpzLm9yZ2xwbHVnaW5zL2lnbm9yZS1wbHVnaW4vI3Jvb3Q=\">https://webpack.js.orglplugins/ignore-plugin/#root</span></p>\n<p><strong>å°†ä¸‰æ–¹åº“ä¸­å…¨éƒ¨å¯¼å…¥æ›´æ¢ä¸ºæŒ‰éœ€å¯¼å…¥</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span>Input<span class=\"token punctuation\">,</span>Dropdown<span class=\"token punctuation\">,</span>Slider<span class=\"token punctuation\">,</span>Select<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'Antd-vue'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> components <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>Input<span class=\"token punctuation\">,</span>Dropdown<span class=\"token punctuation\">,</span>Slider<span class=\"token punctuation\">,</span>Select<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">install</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">app</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    components<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        app<span class=\"token punctuation\">.</span><span class=\"token function\">component</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">&#123;</span> install <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// åœ¨ main.js ä¸­å¯¼å…¥ï¼Œç„¶å app.use</span></pre></td></tr></table></figure><p><strong>æµè§ˆå™¨ç¼“å­˜ä¼˜åŒ–</strong></p>\n<p>ä¸€ã€é¡¹ç›®å³ä½¿æ˜¯ä¸Šçº¿ä¹‹åä¹Ÿä¼šåœ¨åç»­è¿½åŠ æˆ–ä¿®æ”¹ä»£ç ï¼Œå¦‚æœåˆ†åŒ…è¾ƒå°‘é‡æ–°ä¸Šçº¿åå°±ä¸èƒ½ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜çš„æ–‡ä»¶ï¼Œå½“åˆ†åŒ…æ•°é‡è¾ƒå¤šæ—¶ï¼Œå°±å¯ä»¥å……åˆ†åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚</p>\n<p>äºŒã€åˆ†åŒ…è¾ƒå¤šæ—¶å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ”¯æŒå¹³è¡ŒåŠ è½½å¤šä¸ªæ–‡ä»¶çš„ç‰¹æ€§ã€‚ï¼ˆHTTP1 å¯¹åŒä¸€åŸŸåå¹¶è¡Œè¯·æ±‚çš„ä¸ªæ•°è¿›è¡Œäº†é™åˆ¶ï¼ŒHTTP2 å®Œå…¨çªç ´äº†è¿™ä¸ªé™åˆ¶ï¼‰</p>\n<p><strong>æ‰‹åŠ¨åˆ†å‰²ç¬¬ä¸‰æ–¹åº“ä¸ºå¤šä¸ªæ–‡ä»¶</strong></p>\n<p>webpack çš„ config.optimization ä¸­è‡ªå¸¦ä¸€äº›ä¼˜åŒ–çš„é…ç½®é¡¹ï¼š</p>\n<ul>\n<li>minimizeï¼šå‹ç¼©</li>\n<li>splitChunksï¼šåˆ†åŒ…ï¼ˆå¯ä»¥é…ç½® minSize ç­‰ï¼‰</li>\n<li>ç­‰ç­‰</li>\n</ul>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//vue.config.js é…ç½®ï¼š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">//.... çœç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function-variable function\">configureWebpack</span><span class=\"token operator\">:</span> <span class=\"token parameter\">config</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        config<span class=\"token punctuation\">.</span>optimization<span class=\"token punctuation\">.</span>splitChunks <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token literal-property property\">maxInitialRequests</span><span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token literal-property property\">minSize</span><span class=\"token operator\">:</span> <span class=\"token number\">300</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token literal-property property\">chunks</span><span class=\"token operator\">:</span> <span class=\"token string\">'all'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token literal-property property\">cacheGroups</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token literal-property property\">antVendor</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'ant-design-vue'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                    <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[\\\\/]node_modules[\\\\/](ant-design-vue)[\\\\/]</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token literal-property property\">canvasVendor</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> 'html2canvas<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                    <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[\\\\/]node_modules[\\\\/](html2canvas)[\\\\/]</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token literal-property property\">vendor</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'vendor'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                    <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[\\\\/]node_modules[\\\\/](!html2canvas)(!ant-design-vue)[\\\\/]</span><span class=\"token regex-delimiter\">/</span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                all <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                    <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[\\\\/]node_modules[\\\\/]</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// åŒ¹é…å…¨éƒ¨çš„ node_modules ä¸­çš„æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                \t<span class=\"token function\">name</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">module</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">const</span> packageName <span class=\"token operator\">=</span> module<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[\\\\/]node_modules[\\\\/](.*?)([\\\\/]|$)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">npm.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>packageName<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@'</span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"é¡¹ç›®è¿è¡Œä¼˜åŒ–\"><a class=\"anchor\" href=\"#é¡¹ç›®è¿è¡Œä¼˜åŒ–\">#</a> é¡¹ç›®è¿è¡Œä¼˜åŒ–</h1>\n<p><strong>è·¯ç”±æ‡’åŠ è½½</strong></p>\n<p>ä½¿ç”¨ import å‡½æ•°åŠ¨æ€åŠ è½½ï¼Œé…åˆé­”æ³•æ³¨é‡Šå¯ä»¥å’Œ webpack ä¸­çš„ bundler ç›¸é…åˆä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* webpackChunkName: \"my-lodash\" */</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">lodash</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     <span class=\"token comment\">// ....</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>æ”¹å˜ HTML æ ‡é¢˜ï¼Œå¢å¼º SEO</strong></p>\n<p>é¡¹ç›®ä¸­åŠ¨æ€æ·»åŠ æ ‡é¢˜çš„åŸç†ï¼šä½¿ç”¨ HtmlWebpackPlugin æ’ä»¶ï¼Œæ’å…¥åŠ¨æ€ js è¯­å¥è¿›è¡Œå ä½ï¼Œç„¶åé€šè¿‡é¡¹ç›®ä¸­ package.json ä¸­çš„ name è¿›è¡Œæ›¿æ¢ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//vue.config.js é…ç½®ï¼š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">//.... çœç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token function-variable function\">chainWebpack</span><span class=\"token operator\">:</span> <span class=\"token parameter\">config</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       config<span class=\"token punctuation\">.</span><span class=\"token function\">plugin</span><span class=\"token punctuation\">(</span><span class=\"token string\">'html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">tap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">args</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>           args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">'ç½‘ç«™æ ‡é¢˜'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>           args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>desc <span class=\"token operator\">=</span> <span class=\"token string\">'ç½‘ç«™è¯¦æƒ…æè¿°'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>           <span class=\"token keyword\">return</span> args<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>       <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// è®°å¾—æ·»åŠ  &lt;meta name=\"viewport\" content=\"&lt;%= htmlWebpackPlugin.options.desc %>\"></span></pre></td></tr></table></figure><p><strong>åŒæ„æ¸²æŸ“æ–¹å¼</strong><br />\næœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“çš„åŒºåˆ«å°±åœ¨äºåœ¨å“ªé‡Œå®Œæˆ html å®Œæ•´æ–‡ä»¶çš„æ‹¼æ¥ï¼š</p>\n<h3 id=\"å®¢æˆ·ç«¯æ¸²æŸ“\"><a class=\"anchor\" href=\"#å®¢æˆ·ç«¯æ¸²æŸ“\">#</a> å®¢æˆ·ç«¯æ¸²æŸ“</h3>\n<p>å®¢æˆ·ç«¯æ¸²æŸ“ç”±å®¢æˆ·ç«¯å®Œæˆ html æ–‡ä»¶çš„æ‹¼æ¥ï¼ŒæœåŠ¡ç«¯åªè´Ÿè´£æä¾›æ•°æ®ã€‚<br />\nä¼˜åŠ¿ï¼šé¦–å±åŠ è½½å¿«<br />\nåŠ£åŠ¿ï¼šä¸åˆ©äº SEO</p>\n<h3 id=\"æœåŠ¡ç«¯æ¸²æŸ“\"><a class=\"anchor\" href=\"#æœåŠ¡ç«¯æ¸²æŸ“\">#</a> æœåŠ¡ç«¯æ¸²æŸ“</h3>\n<p>æœåŠ¡ç«¯æ¸²æŸ“ç”±æœåŠ¡ç«¯å®Œæˆ html æ–‡ä»¶çš„å‡­å€Ÿï¼Œå®¢æˆ·ç«¯ç›´æ¥æ¸²æŸ“å³å¯<br />\nä¼˜åŠ¿ï¼šåˆ©äº SEOï¼Œ<br />\nåŠ£åŠ¿ï¼šç™½å±é—®é¢˜ï¼ˆè·å– html æ–‡ä»¶è¾ƒæ…¢ï¼‰, æœåŠ¡ç«¯å‹åŠ›å¤§ï¼Œå ç”¨ CPU èµ„æºã€‚</p>\n<h3 id=\"åŒæ„æ¸²æŸ“\"><a class=\"anchor\" href=\"#åŒæ„æ¸²æŸ“\">#</a> åŒæ„æ¸²æŸ“</h3>\n<p>æœåŠ¡ç«¯å…ˆé€šè¿‡æœåŠ¡ç«¯æ¸²æŸ“ï¼Œç”Ÿæˆ html ä»¥åŠåˆå§‹åŒ–æ•°æ®ï¼Œå®¢æˆ·ç«¯æ‹¿åˆ°ä»£ç å’Œåˆå§‹åŒ–æ•°æ®ï¼Œåœ¨å®¢æˆ·ç«¯è¿›è¡Œæ¿€æ´»æ¸²æŸ“ã€‚<br />\nä¼˜åŠ¿ï¼šå…¼å®¹äº†å‰ç«¯æ¸²æŸ“çš„å¤§éƒ¨åˆ†ä¼˜ç‚¹ï¼ˆèŠ‚çœæœåŠ¡ç«¯èµ„æºã€å¤šç»ˆç«¯é€‚é…æ¸²æŸ“ã€å±€éƒ¨åˆ·æ–°ç­‰ï¼‰ï¼ŒåŒæ—¶ä¹Ÿå…·æœ‰æœåŠ¡ç«¯æ¸²æŸ“é¦–å±åŠ è½½å¿«ï¼ŒSEO æ”¯æŒå¥½çš„ç‰¹ç‚¹ã€‚<br />\nåŠ£åŠ¿ï¼šæœåŠ¡ç«¯å¿…é¡»æ˜¯è¦ js æ”¯æŒçš„è¯­è¨€ï¼Œå¢åŠ äº†æ•´ä¸ªç³»ç»Ÿçš„å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬ã€‚</p>\n<h1 id=\"éƒ¨ç½²ä¸httpä¼˜åŒ–\"><a class=\"anchor\" href=\"#éƒ¨ç½²ä¸httpä¼˜åŒ–\">#</a> éƒ¨ç½²ä¸ HTTP ä¼˜åŒ–</h1>\n<h3 id=\"éƒ¨ç½²\"><a class=\"anchor\" href=\"#éƒ¨ç½²\">#</a> <strong>éƒ¨ç½²</strong></h3>\n<p><strong>å‰ç«¯éƒ¨ç½²ï¼šhttps:llci,uejs,org/zh/guide/deployment.html</strong></p>\n<p>åŸç†å°±æ˜¯ï¼šå°†æ„å»ºç”Ÿæˆçš„äº§ç‰©ç›´æ¥çƒ¤è´åˆ°ä»»ä½•çš„é™æ€æ–‡ä»¶æœåŠ¡å™¨å½“ä¸­ã€‚</p>\n<p><strong>åç«¯éƒ¨ç½²ï¼šhttps:/eggis.org/zh-cn/core/deployment.html</strong></p>\n<p>å‡ ä¹æ²¡æœ‰æ„å»ºè¿‡ç¨‹ï¼šé™¤éä½ ç”¨äº† typescript ç­‰éœ€è¦ç¼–è¯‘çš„è¯­è¨€ã€‚</p>\n<p>æ–¹æ¡ˆä¸€ï¼šç›´æ¥å°†æœ¬åœ°çš„æºä»£ç æ‰“ä¸ªå‹ç¼©åŒ…æ‹·è´åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œç„¶åå¯åŠ¨æœåŠ¡å™¨ã€‚</p>\n<p>æ–¹æ¡ˆäºŒï¼šåœ¨æœåŠ¡å™¨ä¸­ç›´æ¥ pu å·æºä»£ç ï¼Œinstall,. ç„¶åå¯åŠ¨æœåŠ¡å™¨ã€‚</p>\n<h3 id=\"nginxåå‘ä»£ç†\"><a class=\"anchor\" href=\"#nginxåå‘ä»£ç†\">#</a> <strong>Nginx: åå‘ä»£ç†</strong></h3>\n<p><strong>Nginx</strong> ä½œä¸ºæœåŠ¡å™¨è½¯ä»¶ï¼Œå®ƒçš„ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>ç‰¹åˆ«é€‚åˆå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®</li>\n<li>ä¿è¯å®‰å…¨</li>\n<li>éå¸¸å¿«</li>\n<li>æ”¯æŒè´Ÿè½½å‡è¡¡</li>\n</ul>\n<p>ä½¿ç”¨ï¼š</p>\n<ul>\n<li>å®‰è£… nginx</li>\n<li>nginx    å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨</li>\n<li>nginx -s stop    å‘½ä»¤å…³é—­æœåŠ¡å™¨</li>\n<li>nginx -v      å‘½ä»¤æŸ¥çœ‹é…ç½®ä¿¡æ¯</li>\n<li>nginx -s reload      å‘½ä»¤é‡å¯æœåŠ¡</li>\n<li>é…ç½® nginx.conf æ–‡ä»¶</li>\n</ul>\n<h3 id=\"httpç¼“å­˜\"><a class=\"anchor\" href=\"#httpç¼“å­˜\">#</a> <strong>HTTP ç¼“å­˜</strong></h3>\n<p>ï¼ˆè‹¥æœåŠ¡å™¨ä½¿ç”¨ nginxï¼Œåˆ™åœ¨ nginx.conf ä¸­é…ç½®ï¼‰</p>\n<p>Expires <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRUUC9IZWFkZXJzL0V4cGlyZXM=\">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Expires</span><br />\n<strong>Expires å“åº”å¤´åŒ…å«æ—¥æœŸ / æ—¶é—´ï¼Œå³åœ¨æ­¤æ—¶å€™ä¹‹åï¼Œå“åº”è¿‡æœŸ</strong><br />\nä½¿ç”¨ nginx æ·»åŠ å¯¹åº”çš„å“åº”å¤´ï¼šexpires æŒ‡ä»¤<br />\næ–‡æ¡£åœ°å€ï¼šhttp:l/nginx.org/en/docs/http/ngx http headers module.html</p>\n<p>ä½†æ˜¯ç”±äºå®¢æˆ·ç«¯æ—¶é—´å’Œç”¨æˆ·ç«¯æ—¶é—´å¹¶ä¸æ€»æ˜¯ç›¸åŒçš„ï¼Œäºæ˜¯æœ‰äº† Cache-Controlï¼š</p>\n<p><strong>Cache-Control</strong>: é€šç”¨æ¶ˆæ¯å¤´å­—æ®µï¼Œè¢«ç”¨äºåœ¨ http è¯·æ±‚å’Œå“åº”ä¸­ï¼Œé€šè¿‡æŒ‡å®šæŒ‡ä»¤æ¥å®ç°ç¼“å­˜æœºåˆ¶ã€‚<br />\næ–‡æ¡£åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXI=\">https://developer</span> <span class=\"exturl\" data-url=\"aHR0cDovL21vemlsbGEub3JnL3poLUNOL2RvY3MvV2ViL0hUVFAvSGVhZGVycy9DYWNoZS1Db250cm9s\">mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control</span></p>\n<p>*<strong>Etag</strong>:ETagHTTP å“åº”å¤´æ˜¯èµ„æºçš„ç‰¹å®šç‰ˆæœ¬çš„æ ‡è¯†ç¬¦ã€‚è¿™å¯ä»¥è®©ç¼“å­˜æ›´é«˜æ•ˆï¼Œå¹¶èŠ‚çœå¸¦å®½<br />\nå› ä¸ºå¦‚æœå†…å®¹æ²¡æœ‰æ”¹å˜ï¼ŒWb æœåŠ¡å™¨ä¸éœ€è¦å‘é€å®Œæ•´çš„å“åº”ï¼Œç›´æ¥è¿”å› 304 è¡¨ç¤ºå¯ä»¥ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ã€‚<br />\n* æ–‡æ¡£åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRUUC9IZWFkZXJzL0VUYWc=\">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/ETag</span><br />\n<strong>Last-Modified</strong>: æ˜¯ä¸€ä¸ªå“åº”é¦–éƒ¨ï¼Œå…¶ä¸­åŒ…å«æºå¤´æœåŠ¡å™¨è®¤å®šçš„èµ„æºåšå‡ºä¿®æ”¹çš„æ—¥æœŸåŠæ—¶é—´ã€‚<br />\næ–‡æ¡£åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRUUC9IZWFkZXJzL0xhc3QtTW9kaWZpZWQ=\">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Last-Modified</span><br />\nnginx Etag:<span class=\"exturl\" data-url=\"aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfY29yZV9tb2R1bGUuaHRtbCNldGFn\">http://nginx.org/en/docs/http/ngx_http_core_module.html#etag</span><br />\n304 Not Modified <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSElUUC9TdGF0dXMvMzA0\">https://developer.mozilla.org/zh-CN/docs/Web/HITP/Status/304</span></p>\n<p>æµè§ˆå™¨ä½¿ç”¨ç¼“å­˜ï¼š</p>\n<p><img data-src=\"/images/image.png\" alt=\"/images/image.png\" /></p>\n<h3 id=\"å‹ç¼©ç®—æ³•\"><a class=\"anchor\" href=\"#å‹ç¼©ç®—æ³•\">#</a> å‹ç¼©ç®—æ³•</h3>\n<p>å‹ç¼©æ¯”å¯¹ç…§è¡¨<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9xdWl4ZGIuZ2l0aHViLmlvL3NxdWFzaC1iZW5jaG1hcmsvI3JhdGlvLXZzLWNvbXByZXNzaW9u\"> https://quixdb.github.io/squash-benchmark/#ratio-vs-compression</span></p>\n<h4 id=\"gzip\"><a class=\"anchor\" href=\"#gzip\">#</a> gzip</h4>\n<p><strong>ä¸€ã€åŠ¨æ€å‹ç¼©ï¼ˆæœåŠ¡å™¨åœ¨è¿”å›é™æ€æ–‡ä»¶ä¹‹å‰ï¼Œç”±æœåŠ¡å™¨å¯¹æ¯ä¸ªè¯·æ±‚å‹ç¼©åå†è¿›è¡Œè¾“å‡ºï¼‰</strong></p>\n<p>nginx ä¸­å¯ç”¨ gzipï¼šåœ¨ nginx.conf ä¸­é…ç½®ï¼š</p>\n<ul>\n<li>gzip  on;        å¼€å¯ gzip</li>\n<li>gzip_types     text/plain  application/javascript              è®¾ç½®é‚£äº›æ–‡ä»¶éœ€è¦å‹ç¼©</li>\n<li>gzip_min_length   1k;         å°äºè®¾ç½®å€¼ä¸ä¼šå‹ç¼©</li>\n<li>gzip_comp_level     1;          å‹ç¼©çº§åˆ«</li>\n<li>ç­‰ç­‰</li>\n</ul>\n<p><strong>äºŒã€é™æ€å‹ç¼©ï¼ˆæœåŠ¡å™¨ç›´æ¥ä½¿ç”¨å‹ç¼©æ–‡ä»¶è¿›è¡Œè¾“å‡ºï¼‰</strong></p>\n<p>ä¸¤ä¸ªæ­¥éª¤</p>\n<ul>\n<li>ç”Ÿæˆå‹ç¼©æ–‡ä»¶ï¼ˆgzip å‘½ä»¤æˆ–ä½¿ç”¨ webpack æ’ä»¶ compression-webpack-pluginï¼‰</li>\n<li>åœ¨ nginÃ— å¼€å¯æ”¯æŒé™æ€å‹ç¼©çš„æ¨¡å—ï¼ˆä¾‹å¦‚ gzip_static  :  onï¼‰</li>\n</ul>\n<h4 id=\"brotli\"><a class=\"anchor\" href=\"#brotli\">#</a> Brotli</h4>\n<p><strong>ä¸€ã€åŠ¨æ€å‹ç¼©ï¼ˆæœåŠ¡å™¨åœ¨è¿”å›é™æ€æ–‡ä»¶ä¹‹å‰ï¼Œç”±æœåŠ¡å™¨å¯¹æ¯ä¸ªè¯·æ±‚å‹ç¼©åå†è¿›è¡Œè¾“å‡ºï¼‰</strong></p>\n<p><strong>ä½¿ç”¨å‰æ</strong><br />\næµè§ˆå™¨æ”¯æŒï¼šhttps:caniuse.com/brot å±± i<br />\n<strong>HTTPS åè®®</strong><br />\n NGINX å¯¹åº”çš„æ¨¡å—ï¼šhttps:/github.com/google/ngx._brot å±± i</p>\n<p>nginx ä¸­å¯ç”¨ Brotliï¼šåœ¨ nginx.conf ä¸­é…ç½®ï¼š</p>\n<ul>\n<li>brotli  on;        å¼€å¯ Brotli</li>\n<li>brotli_types     text/plain  application/javascript              è®¾ç½®é‚£äº›æ–‡ä»¶éœ€è¦å‹ç¼©</li>\n<li>ç­‰ç­‰</li>\n</ul>\n<p><strong>äºŒã€é™æ€å‹ç¼©ï¼ˆæœåŠ¡å™¨ç›´æ¥ä½¿ç”¨å‹ç¼©æ–‡ä»¶è¿›è¡Œè¾“å‡ºï¼Œå¦‚ä¸Šã€‚ï¼‰</strong></p>\n<h3 id=\"httpä¼˜åŒ–\"><a class=\"anchor\" href=\"#httpä¼˜åŒ–\">#</a> HTTP ä¼˜åŒ–</h3>\n<p>HTTP æ˜¯å»ºç«‹åœ¨ TCP åè®®ä¹‹ä¸Šï¼Œæ‰€ä»¥<strong> HTTP åè®®çš„ç“¶é¢ˆåŠå…¶ä¼˜åŒ–æŠ€å·§éƒ½æ˜¯åŸºäº TCP åè®®æœ¬èº«çš„ç‰¹æ€§</strong>ï¼Œä¾‹å¦‚ tcp å»ºç«‹è¿æ¥çš„ 3 æ¬¡æ¡æ‰‹å’Œæ–­å¼€è¿æ¥çš„ 4 æ¬¡æŒ¥æ‰‹ä»¥åŠæ¯æ¬¡å»ºç«‹è¿æ¥å¸¦æ¥çš„å»¶è¿Ÿæ—¶é—´ã€‚æ‰€ä»¥å‡å°‘è¿™äº›é‡æ–°æ¡æ‰‹å’Œè‡³å…³é‡è¦ã€‚</p>\n<h4 id=\"keepaliveå±æ€§\"><a class=\"anchor\" href=\"#keepaliveå±æ€§\">#</a> keepAlive å±æ€§</h4>\n<p>keepAlive å±æ€§å¯ä»¥ä¿æŒæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯å»ºç«‹çš„ä¼šè¯è¿æ¥ï¼Œå¼€å¯ä¹‹åé™¤é¦–æ¬¡å»ºç«‹è¿æ¥å¤–çš„å…¶ä»–è¯·æ±‚ä¸ä¼šè¿›è¡Œ<strong> DNS Lookup</strong>ï¼ˆNDS åŸŸåè§£æï¼‰å’Œ<strong> Initial connection</strong>ï¼ˆä¸‰æŠ¥æ–‡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼‰ï¼Œå¯ä»¥åœ¨æœåŠ¡ç«¯æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚</p>\n<p><strong>KeepAlive çš„ä¼˜ç‚¹</strong></p>\n<ul>\n<li>TCP è¿æ¥æ›´å°‘ï¼ŒI è¿™æ ·å°±ä¼šèŠ‚çº¦ TCP è¿æ¥åœ¨å»ºç«‹ã€é‡Šæ”¾è¿‡ç¨‹ä¸­ï¼Œä¸»æœºå’Œè·¯ç”±å™¨ä¸Šçš„ CPU å’Œå†…å­˜å¼€é”€ã€‚</li>\n<li>ç½‘ç»œæ‹¥å¡ä¹Ÿå‡å°‘äº†ï¼Œæ‹¿åˆ°å“åº”çš„å»¶æ—¶ä¹Ÿå‡å°‘äº†</li>\n</ul>\n<h4 id=\"http2\"><a class=\"anchor\" href=\"#http2\">#</a> HTTP2</h4>\n<p><strong>ä½¿ç”¨ HTTP/2 æå‡æ€§èƒ½</strong></p>\n<ul>\n<li>2010 å¹´ SPDY <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZQ==\">https://baike</span> <span class=\"exturl\" data-url=\"aHR0cDovL2JhaWR1LmNvbS9pdGVtL1NQRFklRTYlQkMlOTQlRTUlOEMlOTYlRTUlODglQjA=\">baidu.com/item/SPDY æ¼”åŒ–åˆ°</span></li>\n<li>2015 HTTP/2 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXI=\">https://developer</span>,mozilla,org/zh-CN/docs/Glossary/HTTP_2</li>\n</ul>\n<p><strong>å…¼å®¹æ€§</strong></p>\n<p>éœ€è¦æµè§ˆå™¨æ”¯æŒ - https:/caniuse.com/http2</p>\n<p>éœ€è¦ HTTPS åè®®æ”¯æŒ</p>\n<p><strong>ä¸»è¦ç‰¹æ€§</strong></p>\n<p>ä¸€ã€äºŒè¿›åˆ¶åè®®ï¼š</p>\n<p>HTTP2 ç”±åŸæ¥çš„æ–‡æœ¬è¯·æ±‚ï¼ˆæŠ¥æ–‡ï¼‰è½¬å˜ä¸ºäºŒè¿›åˆ¶è¯·æ±‚å¸§ï¼ŒåŠ å¿«ä¼ è¾“</p>\n<p>äºŒã€å¤šè·¯å¤ç”¨ï¼š</p>\n<p><strong>HTTP2 å¤šè·¯å¤ç”¨è§£å†³äº†æµè§ˆå™¨åŒä¸€åŸŸåå¹¶è¡Œè¯·æ±‚æ•°é‡çš„é™åˆ¶ã€‚</strong></p>\n<p>åœ¨ HTTP/2 ä¸­å¼•å…¥äº†å¤šè·¯å¤ç”¨çš„æŠ€æœ¯ã€‚å¤šè·¯å¤ç”¨å¾ˆå¥½çš„è§£å†³äº†æµè§ˆå™¨é™åˆ¶åŒä¸€ä¸ªåŸŸåä¸‹çš„è¯·æ±‚æ•°é‡çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿæ¥æ›´å®¹æ˜“å®ç°å…¨é€Ÿä¼ è¾“ï¼Œæ¯•ç«Ÿå¼€ä¸€ä¸ª TCP è¿æ¥éƒ½éœ€è¦æ…¢æ…¢æå‡ä¼ è¾“é€Ÿåº¦ã€‚</p>\n<p><strong>åŒä¸ªåŸŸååªéœ€è¦å ç”¨ä¸€ä¸ª TCP è¿æ¥</strong>ï¼Œä½¿ç”¨ä¸€ä¸ªè¿æ¥å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œ<strong>æ¶ˆé™¤äº†å› å¤šä¸ª TCP è¿æ¥è€Œå¸¦æ¥çš„å»¶æ—¶å’Œå†…å­˜æ¶ˆè€—</strong>ã€‚</p>\n<p>ä¸‰ã€Header å‹ç¼©å¤ç”¨</p>\n<p>TTP/2 åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨ â€œ<strong>é¦–éƒ¨è¡¨</strong>â€ æ¥è·Ÿè¸ªå’Œå­˜å‚¨ä¹‹å‰å‘é€çš„é”®ä¸€å€¼å¯¹ï¼Œå¯¹äºç›¸åŒçš„æ•°æ®ï¼Œä¸å†é€šè¿‡æ¯æ¬¡è¯·æ±‚å’Œå“åº”å‘é€ã€‚</p>\n<p><strong>é…ç½® HTTP2ï¼š</strong></p>\n<p>ä¾ nginx ä¸ºä¾‹ï¼šåœ¨ server å­—æ®µçš„ listen å­—æ®µæ·»åŠ ï¼šlisten   443   ssl   http2;</p>\n<h1 id=\"mongodbæ•°æ®åº“\"><a class=\"anchor\" href=\"#mongodbæ•°æ®åº“\">#</a> Mongodb æ•°æ®åº“</h1>\n<h3 id=\"åŸºæœ¬æ“ä½œ\"><a class=\"anchor\" href=\"#åŸºæœ¬æ“ä½œ\">#</a> <strong>åŸºæœ¬æ“ä½œ</strong></h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å¯¼å…¥ Mongodb å®¢æˆ·ç«¯æ„é€ å‡½æ•°</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> MongoClient<span class=\"token punctuation\">,</span>ObjectId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mongodb\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// åˆ›å»º mongo å®ä¾‹ (ä¼ å…¥ url)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MongoClient</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mongodb://localhost:27017/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// æ‰§è¡Œå‡½æ•°ï¼Œè¿æ¥ mongodb æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç­‰å¾…å®ä¾‹è¿æ¥</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">db</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// åˆ›å»ºæ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">ping</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//ping å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'connected'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">const</span> userCollection <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// åˆ›å»ºé›†åˆè¡¨</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// æ•°æ®çš„æ’å…¥</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">//const result = await userCollection.insertOne (&#123;name:\"å¼ ä¸‰\",age:18&#125;)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">//const results = await userCollection.insertMany ([&#123;name:\"æå››\",age:12&#125;,&#123;name:\"ç‹äº”\",age:13&#125;]);</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">//console.log (result,results); // è¿”å›å½±å“çš„ä¿¡æ¯ï¼Œid ç­‰</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// æ•°æ®çš„æŸ¥æ‰¾</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">'å¼ ä¸‰'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">const</span> resultCursor <span class=\"token operator\">=</span>  userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//find è¿”å›çš„æ˜¯æŒ‡é’ˆå¯¹è±¡ï¼Œä¸æ˜¯ç»“æœ</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token comment\">// å°†æ¸¸æ ‡å˜ä¸ºæ•°ç»„ç»“æœ</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// console.log(results);</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">// æ¯”è¾ƒæ“ä½œç¬¦ $lt å°äº $gt å¤§äº</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">const</span> results2 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">$lt</span><span class=\"token operator\">:</span><span class=\"token number\">16</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\">// console.log(results2);</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">// é€»è¾‘æ“ä½œç¬¦ $or</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">const</span> results3 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">$or</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">$gt</span><span class=\"token operator\">:</span><span class=\"token number\">12</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">\"ç‹äº”\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token comment\">// console.log(results3);</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">// å…ƒç´ æ“ä½œç¬¦  $exists å­˜åœ¨ä¸å¦  $type æŒ‡å®šç±»å‹</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">const</span> results4 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">$type</span><span class=\"token operator\">:</span><span class=\"token string\">'number'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\">// console.log(results4);</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">//limit  ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ options é…ç½®ï¼ˆprojection è¡¨ç¤ºåŒ…å«å­—æ®µå“ªäº›å­—æ®µï¼‰</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">const</span> result5 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">$type</span><span class=\"token operator\">:</span><span class=\"token string\">'number'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">limit</span><span class=\"token operator\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">skip</span><span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">sort</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">projection</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\">// console.log(result5);</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">// æ›´æ–°æ›¿æ¢æ•°æ®   update æ›´æ–°æ•°æ®  replaceOne æ›¿æ¢æ•°æ®ï¼Œä¿®æ”¹æ“ä½œè¦ä¼ å…·ä½“æ›´æ–°æ“ä½œç¬¦ï¼š</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">// æ™®é€šæ›´æ–°æ“ä½œç¬¦ï¼š $set è®¾ç½®å€¼ $inc å¢åŠ  $rename é‡å‘½å $unset åˆ é™¤ </span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\">// æ•°ç»„æ›´æ–°æ“ä½œç¬¦ï¼š $push æ•°ç»„å­—æ®µæ·»åŠ  $pop åˆ é™¤ $all åŒ…å« $regex æ­£åˆ™ã€‚å±æ€§ç¬¦ .$ å±æ€§å ä½ç¬¦</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token keyword\">const</span> result6 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">replaceOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">\"å¼ ä¸‰\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">\"Lebrown\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">const</span> result7 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">updateOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">_id</span><span class=\"token operator\">:</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'6628b9876bac632e95ead1bb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">$set</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">\"updateOne\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">$inc</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">const</span> result8 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">updateOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">_id</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'6628b9876bac632e95ead1bb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">$set</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token string-property property\">\"hobbies.0\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"golf\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token keyword\">const</span> result9 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">updateOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">_id</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'6628b9876bac632e95ead1bb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">hobbies</span><span class=\"token operator\">:</span><span class=\"token string\">'glof'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">$set</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token string-property property\">\"hobbies.$\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"golf-new\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token comment\">//console.log (result8);// è¿”å›å½±å“ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\">// åˆ é™¤æ•°æ®ï¼šdeleteOne (filter) å’Œ deleteMany</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"mongodbé«˜çº§\"><a class=\"anchor\" href=\"#mongodbé«˜çº§\">#</a> <strong>mongodb é«˜çº§</strong></h3>\n<h5 id=\"ç´¢å¼•\"><a class=\"anchor\" href=\"#ç´¢å¼•\">#</a> ç´¢å¼•</h5>\n<p><strong>MongoDB ç´¢å¼•</strong></p>\n<ul>\n<li>ç´¢å¼• (Index)<strong> ä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡</strong></li>\n<li>MongoDB çš„æ–‡ä»¶ç±»å‹ï¼š<strong>BSON</strong>,Binary JSON, ä¸»è¦è¢«ç”¨ä½œ MongoDB æ•°æ®åº“ä¸­çš„æ•°æ®å­˜å‚¨å’Œç½‘ç»œä¼ è¾“æ ¼å¼ã€‚</li>\n<li>å‡å¦‚æ²¡æœ‰ç´¢å¼•ï¼Œå¿…é¡»æ‰«æè¿™ä¸ªå·¨å¤§ BSON å¯¹è±¡é›†åˆä¸­çš„æ¯ä¸ªæ–‡æ¡£å¹¶é€‰å–é‚£äº›ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„è®°å½•ï¼Œè¿™æ ·æ˜¯ä½æ•ˆçš„ã€‚</li>\n<li>ç´¢å¼•æ˜¯ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œç´¢å¼•å­˜å‚¨åœ¨ä¸€ä¸ªæ˜“äºéå†è¯»å–çš„æ•°æ®é›†åˆä¸­ã€‚</li>\n<li>ä¸ºæŸä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ä¹‹åæŸ¥æ‰¾é€Ÿåº¦éå¸¸å¿«ï¼ŒObjectId æ˜¯è‡ªå¸¦çš„ç´¢å¼•ï¼ˆ _ id _ ï¼‰ã€‚</li>\n</ul>\n<p><strong>åˆ›å»ºç´¢å¼•</strong></p>\n<p>åˆ›å»ºç´¢å¼•å¯ä»¥ç›´æ¥ç”¨ Navicate ç­‰å·¥å…·ï¼Œä¹Ÿå¯ä»¥ä»£ç ä¸­ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//...... çœç•¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// ç»™ name å­—æ®µåˆ›å»ºç´¢å¼•ä¹‹å‰è€—æ—¶å¾ˆå¤§ï¼Œåˆ›å»ºä¹‹åè€—æ—¶å¾ˆå°</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> indexResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">\"James\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">explain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>indexResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// åˆ›å»ºç´¢å¼•ï¼Œå±æ€§è¡¨ç¤ºå­—æ®µï¼Œå€¼è¡¨ç¤ºå‡åºé™åº</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//1 è¡¨ç¤ºå‡åº</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// å–æ¶ˆç´¢å¼•</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> result1 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">dropIndex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name_1\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h5 id=\"èšåˆ\"><a class=\"anchor\" href=\"#èšåˆ\">#</a> èšåˆ</h5>\n<p>èšåˆæ“ä½œå°†æ¥è‡ªå¤šä¸ªæ–‡æ¡£çš„å€¼ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸”å¯ä»¥å¯¹åˆ†ç»„æ•°æ®æ‰§è¡Œå„ç§æ“ä½œä»¥è¿”å›ç›¸åº”çš„ç»“æœã€‚<br />\n<strong>linux å¸¸ç”¨çš„ç®¡é“å†™æ³•ï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ps</span> aux <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> mongo</pre></td></tr></table></figure><p><strong>èšåˆå¸¸ç”¨çš„æ“ä½œç¬¦ï¼š</strong></p>\n<ul>\n<li>$group å°† collection ä¸­çš„ document: åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœ</li>\n<li>$natch è¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆç»“æœçš„æ–‡æ¡£</li>\n<li>$project ä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ï¼ˆä¾‹å¦‚é‡å‘½åï¼Œå¢åŠ ã€åˆ é™¤å­—æ®µï¼Œåˆ›å»ºç»“ç®—ç»“æœç­‰ï¼‰</li>\n<li>$sot å°†ç»“æœè¿›è¡Œæ’åºåè¾“å‡º</li>\n<li>$imit é™åˆ¶ç®¡é“è¾“å‡ºçš„ç»“æœä¸ªæ•°</li>\n<li>$skp è·³è¿‡åˆ¶å®šæ•°é‡çš„ç»“æœï¼Œå¹¶ä¸”è¿”å›å‰©ä¸‹çš„ç»“æœ</li>\n</ul>\n<p><strong>è¡¨è¾¾å¼æ“ä½œç¬¦ï¼š</strong></p>\n<ul>\n<li>sumè®¡ç®—æ€»å’Œï¼Œ{sum:1} è¡¨ç¤ºè¿”å›æ€»å’Œ Ã—1 çš„å€¼ï¼ˆå³æ€»å’Œçš„æ•°é‡ï¼‰ï¼Œä½¿ç”¨ {<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><msup><mo>:</mo><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">â€²</mo></msup></mrow><annotation encoding=\"application/x-tex\">sum:&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\">:</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">â€²</span></span></span></span></span></span></span></span></span></span></span></span> åˆ¶å®šå­—æ®µ '} ä¹Ÿèƒ½ç›´æ¥è·å–åˆ¶å®šå­—æ®µçš„å€¼çš„æ€»å’Œ</li>\n<li>$avg æ±‚å¹³å‡å€¼</li>\n<li>$min æ±‚ min å€¼</li>\n<li>$max æ±‚ max å€¼</li>\n<li>$push å°†ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­</li>\n<li>$frst æ ¹æ®æ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®</li>\n<li>$last åŒç†ï¼Œè·å–æœ€åä¸€ä¸ªæ•°æ®</li>\n</ul>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//.....</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> pipeLine <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">$match</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">age</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">$gt</span> <span class=\"token operator\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">$group</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">_id</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"$steam\"</span> <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">total</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">$sum</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"$age\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">$sum</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">$sort</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">total</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>cosnt result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userCollection<span class=\"token punctuation\">.</span><span class=\"token function\">aggregate</span><span class=\"token punctuation\">(</span>pipeLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">//....</span></pre></td></tr></table></figure><h5 id=\"å¤šè¡¨è”æŸ¥\"><a class=\"anchor\" href=\"#å¤šè¡¨è”æŸ¥\">#</a> å¤šè¡¨è”æŸ¥</h5>\n<p><strong>æ™®é€šæ–¹å¼ä½¿ç”¨å¤šè¡¨è”æŸ¥éœ€è¦ä¸¤æ¬¡æŸ¥è¯¢</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å¯¼å…¥ Mongodb å®¢æˆ·ç«¯æ„é€ å‡½æ•°</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> MongoClient<span class=\"token punctuation\">,</span>ObjectId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mongodb\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// åˆ›å»º mongo å®ä¾‹ (ä¼ å…¥ url)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MongoClient</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mongodb://localhost:27017/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// æ‰§è¡Œå‡½æ•°ï¼Œè¿æ¥ mongodb æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç­‰å¾…å®ä¾‹è¿æ¥</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">db</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// åˆ›å»ºæ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">ping</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//ping å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'connected'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// è·å–è¡¨</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>     <span class=\"token keyword\">const</span> teamCollection <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'team'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>     <span class=\"token keyword\">const</span> playerCollection <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'player'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>     <span class=\"token keyword\">const</span> netsTeam <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> teamCollection<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">team</span><span class=\"token operator\">:</span><span class=\"token string\">\"NETS\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>     <span class=\"token keyword\">const</span> netsPlayers <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> playerCollection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">team</span><span class=\"token operator\">:</span>netsTeam<span class=\"token punctuation\">.</span>_id<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong>ä½¿ç”¨èšåˆä¸­ $lookup è¿›è¡Œå¤šè¡¨è”æŸ¥åªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//...</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> pipeLine2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token literal-property property\">$match</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">team</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">$exists</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token literal-property property\">$lookup</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token literal-property property\">from</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"team\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token literal-property property\">localField</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"team\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token literal-property property\">foreignField</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"_id\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">as</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"team\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">]</span> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">const</span> playerWithTeam <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> playerCollection<span class=\"token punctuation\">.</span><span class=\"token function\">aggregate</span><span class=\"token punctuation\">(</span>pipeLine2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>playerWithTeam<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">//...</span></pre></td></tr></table></figure><h3 id=\"æ•°æ®åº“è®¾è®¡\"><a class=\"anchor\" href=\"#æ•°æ®åº“è®¾è®¡\">#</a> æ•°æ®åº“è®¾è®¡</h3>\n<p><em>MongoDB æœ€ä½³è®¾è®¡å®è·µï¼š</em>[https:lwww.mongodb.Com/developer/article/mongodb-schema-design-best-practices/](<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZGV2ZWxvcGVyL2FydGljbGUvbW9uZ29kYi0=\">https://www.mongodb.com/developer/article/mongodb-</span><br />\nschema-design-best-practices/)</p>\n<p>å…³é”®é—®é¢˜ï¼šæ•°æ®äº§ç”Ÿå…³ç³»çš„æ—¶å€™ï¼Œé€‰æ‹©å†…åµŒè¿˜æ˜¯å¼•ç”¨ï¼Ÿ</p>\n<p><strong>å†…åµŒæ¨¡å¼ï¼š</strong></p>\n<p>ä¼˜åŠ¿ï¼š</p>\n<ul>\n<li>åªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢å°±å¯ä»¥æŸ¥è¯¢æ‰€æœ‰çš„ä¿¡æ¯ã€‚</li>\n<li>é¿å…å¤šé›†åˆæŸ¥è¯¢ã€‚</li>\n<li>åªéœ€è¦ä¸€ä¸ªæ“ä½œå°±å¯ä»¥æ›´æ–°å¤šä¸ªä¿¡æ¯ã€‚</li>\n</ul>\n<p>åŠ£åŠ¿ï¼š</p>\n<ul>\n<li>å•ä¸ªæ–‡æ¡£å¤ªå¤§ï¼ŒæŸ¥è¯¢å¯èƒ½æ›´è€—æ—¶ï¼Œè·å¾—çš„æ— å…³ä¿¡æ¯æ¦‚ç‡å¢å¤§ã€‚</li>\n<li>é’ˆå¯¹æ¯ä¸ªæ–‡æ¡£ï¼ŒMongoDB æœ‰ä¸€ä¸ª 16M çš„æœ€å¤§é™åˆ¶ï¼Œå†…åµŒå¤ªå¤šï¼Œå¯èƒ½è¶…è¿‡è¿™ä¸ªé™åˆ¶ã€‚</li>\n</ul>\n<p><strong>å¼•ç”¨æ¨¡å¼ï¼š</strong></p>\n<p>ä¼˜åŠ¿ï¼š</p>\n<ul>\n<li>å°†æ•°æ®åˆ†æ•£åˆ°ä¸åŒæ–‡æ¡£ï¼Œæ•°æ®é‡ä¼šå˜å°ã€‚</li>\n<li>ä¸å¤ªä¼šè¶…è¿‡ 16M æœ€å¤§é™åˆ¶ã€‚</li>\n<li>æ¯æ¬¡æŸ¥è¯¢å–å¾—ä¸å¿…è¦æ•°æ®çš„æ…¨ç‡é™ä½ã€‚</li>\n</ul>\n<p>åŠ£åŠ¿ï¼šéœ€è¦å¤šæ¬¡æŸ¥è¯¢æ‰èƒ½è·å¾—æœ€ç»ˆæ•°æ®</p>\n<p><strong>æœ€ä½³è®¾è®¡å®è·µï¼š</strong></p>\n<ul>\n<li>\n<p>ä¸€å¯¹å‡ ä¸ªï¼šæ¨èä½¿ç”¨å†…åµŒå½¢å¼</p>\n</li>\n<li>\n<p>ä¸€å¯¹å¾ˆå¤šï¼šæ¨èä½¿ç”¨å¼•ç”¨å½¢å¼</p>\n<ul>\n<li>å­é›†åˆä¸­ä½¿ç”¨ä¸€ä¸ªå­—æ®µä¿å­˜çˆ¶é›†åˆçš„_id   ï¼› æˆ–è€…ï¼š</li>\n<li>çˆ¶é›†åˆä¸­ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ä¿å­˜å­é›†åˆçš„_id</li>\n</ul>\n</li>\n<li>\n<p>ä¸€å¯¹äº¿ä¸‡ï¼šåªèƒ½å­é›†åˆä¸­ä½¿ç”¨ä¸€ä¸ªå­—æ®µä¿å­˜çˆ¶é›†åˆçš„_id</p>\n</li>\n</ul>\n<h3 id=\"è®¿é—®æƒé™ç®¡ç†\"><a class=\"anchor\" href=\"#è®¿é—®æƒé™ç®¡ç†\">#</a> <strong>è®¿é—®æƒé™ç®¡ç†</strong></h3>\n<p><strong>æˆæƒæ–‡æ¡£</strong>ï¼šhttps:/docs.mongodb.com/manual/core/authentication/<br />\n<strong> å†…ç½®çš„ Roles</strong>ï¼šhttps:/docs.mongodb.com/manual/reference/built-in-roles/</p>\n<p><strong>åœ¨ mongo å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š</strong></p>\n<pre><code class=\"language-cmd\">show dbs\nuse admin\n# mongodbåŸºäºRBACè¿›è¡Œæƒé™ç®¡ç†ï¼Œè®¾ç½®roleså¯ä»¥è®¾ç½®ç›¸åº”çš„å…¨é€‰ï¼Œè§ä¸Šã€‚\ndb.createUser(&#123; user : 'root' , pwd : '123456' , roles : ['root'] &#125;) \ndb.auth('root','123456')\n# --auth å¼€å¯æ•°æ®åº“çš„æƒé™éªŒè¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨mongo.confä¸­é…ç½®ï¼ˆå…ˆç»ˆæ­¢è¿è¡Œmongodï¼‰\nmongod --config /usr/local/etc/mongo.conf --auth\n# æ“ä½œé…ç½®äº†æƒé™ç®¡ç†çš„æ•°æ®åº“\nmongo -u &quot;root&quot; -p &quot;123456&quot; --authenticationDatabase &quot;admin&quot;\n</code></pre>\n<p><strong>åˆå§‹åŒ–ä¸€ä¸ªæ–°æ•°æ®åº“ä»¥åæœŸæœ›çš„æ­¥éª¤</strong></p>\n<ul>\n<li>åˆ›å»º admin çº§è°œåˆ«çš„ root ç”¨æˆ· /roles:root</li>\n<li>åˆ›å»ºå¯¹åº”çš„æ•°æ®åº“ lego</li>\n<li>åˆ›å»ºè¯¥æ•°æ®åº“çš„ç®¡ç†å‘˜ dmq/roles:readWrite</li>\n<li>ä»£ç ä¸­ï¼Œä½¿ç”¨ç®¡ç†å‘˜ dmq çš„ç”¨æˆ·åå¯†ç é“¾æ¥æ•°æ®åº“å¹¶ä¸”å®Œæˆæ“ä½œã€‚</li>\n</ul>\n<p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<pre><code>show dbs\nuse lego\ndb.createUser(&#123; user : &quot;dmq&quot; , pwd : '123456' , roles : [&#123; role : &quot;readWrite&quot; , db : &quot;lego&quot; &#125;]&#125;)\n# é‡å¯æœåŠ¡ï¼šmongod --config /usr/local/etc/mongo.conf --auth\n# è¿™æ ·åœ¨mongodbçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç”¨æˆ·ä¿¡æ¯ï¼Œå°±ä¿è¯åªèƒ½è¯»å–æ•°æ®åº“ä¿¡æ¯ï¼Œä¿è¯äº†æ•°æ®åº“çš„å®‰å…¨ã€‚ï¼ˆå¦‚æœç”¨æˆ·ä¿¡æ¯æ¥è‡ªadminæ•°æ®åº“å°±éœ€è¦é…ç½®authSource:'admin'ã€‚ï¼‰\n</code></pre>\n<h1 id=\"mongoose\"><a class=\"anchor\" href=\"#mongoose\">#</a> Mongoose</h1>\n<p><strong>å‡ºç°çš„åŸå› ï¼š</strong></p>\n<p>ä½¿ç”¨åŸç”Ÿçš„ mongoDB nodejs driver æ•°æ®ç»“æ„åŠå…¶æ“ä½œè¿‡äºçµæ´»ï¼Œç±»ä¼¼äº ORMï¼š</p>\n<p><strong>mongooseï¼š</strong>ï¼ˆmongoose ä¹‹äº mongodb ç±»ä¼¼äº ts ä¹‹äº jsï¼Œéƒ½æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¹‹ä¸ŠåŠ ä¸€å±‚æŠ½è±¡å±‚ï¼Œè¿›è¡Œç±»å‹å®šä¹‰ç­‰æ“ä½œï¼‰</p>\n<p>mongooseï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tb25nb29zZWlzLmNvbS8=\">https://mongooseis.com/</span></p>\n<ul>\n<li>å»ºç«‹åœ¨ native mongoDB nodejs driver ä¹‹ä¸Š</li>\n<li>æå‡º Modl, æ•°æ®æ¨¡å‹çš„æ¦‚å¿µï¼Œç”¨æ¥çº¦æŸé›†åˆä¸­çš„æ•°æ®ç»“æ„</li>\n<li>éå¸¸å¤šæ‰©å±•çš„å†…å®¹</li>\n<li>å®ƒæ˜¯ä¸€ä¸ª ODM (Object Document Mapping) å·¥å…·ã€‚</li>\n</ul>\n<h3 id=\"orm\"><a class=\"anchor\" href=\"#orm\">#</a> ORM</h3>\n<p>ORM æŒ‡çš„æ˜¯<strong> Object Relational Mapping å¯¹è±¡å…³ç³»æ˜ å°„</strong>ï¼Œé’ˆå¯¹äºå…³ç³»å‹æ•°æ®åº“ã€‚</p>\n<p><strong>ç®€å•è¯´ï¼ŒORM å°±æ˜¯é€šè¿‡å®ä¾‹å¯¹è±¡çš„è¯­æ³•ï¼Œå®Œæˆå…³ç³»å‹æ•°æ®åº“çš„æ“ä½œçš„æŠ€æœ¯ã€‚</strong></p>\n<p><strong>ORM ä¼˜ç‚¹</strong></p>\n<ul>\n<li>ä¸éœ€è¦å†å»å†™æ™¦æ¶©çš„ SQL è¯­å¥ã€‚</li>\n<li>ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ“ä½œæ•°æ®ï¼Œä»£ç é‡å°‘ï¼Œè¯­ä¹‰æ€§å¥½ï¼Œå®¹æ˜“ç†è§£ã€‚</li>\n<li>Classes ç±» - Tables</li>\n<li>Objects å®ä¾‹ - Records (è¡¨ä¸­çš„ä¸€è¡Œæ•°æ®)</li>\n<li>Attributes å±æ€§ - Records</li>\n<li>å†…ç½®å¾ˆå¤šåŠŸèƒ½ï¼Œæ•°æ®éªŒè¯ï¼Œæ¸…æ´—ï¼Œé¢„å¤„ç†ç­‰ç­‰æ“ä½œã€‚</li>\n</ul>\n<h3 id=\"odm\"><a class=\"anchor\" href=\"#odm\">#</a> ODM</h3>\n<p>ODM æŒ‡çš„æ˜¯<strong> Object Document Mapping å¯¹è±¡æ–‡æ¡£æ˜ å°„</strong>ã€‚ODM é’ˆå¯¹äº noSql æ•°æ®åº“ï¼Œå…³æ³¨æ–‡æ¡£æ¨¡å‹ï¼Œmongoose æ˜¯ ODM çš„ä¸€ç§å®ç°ï¼Œå¯ä»¥ç”¨äºçº¦æŸæ•°æ®ç±»å‹ã€‚</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> User <span class=\"token operator\">=</span> mongoose<span class=\"token punctuation\">.</span><span class=\"token function\">model</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"User\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">type</span> <span class=\"token operator\">:</span> string <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">type</span> <span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//user object</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> newUser <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span><span class=\"token string\">\"john-doe\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span><span class=\"token string\">\"helloworld\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">await</span> newUser<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h1 id=\"egg-mongoose\"><a class=\"anchor\" href=\"#egg-mongoose\">#</a> egg-mongoose</h1>\n<p>è¯¦è§æºç ï¼Œæ­¤å¤„çœç•¥ã€‚</p>\n<h1 id=\"stream\"><a class=\"anchor\" href=\"#stream\">#</a> Stream</h1>\n<h3 id=\"ä»‹ç»\"><a class=\"anchor\" href=\"#ä»‹ç»\">#</a> ä»‹ç»</h3>\n<p>Stream çš„å®˜æ–¹æ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ub2RlanM=\">https://nodejs</span>,org/api/stream.html<br />\n<strong> æµæ˜¯ Node.js ä¸­æœ€å¥½ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“è¯¯è§£çš„æ…¨å¿µ</strong><br />\næµå°±æ˜¯æ•°æ®çš„åˆé›†ï¼Œæ•°æ®å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ï¼Œæµçš„æ•°æ®ä¸æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨è·å¾—çš„ã€‚</p>\n<p>å¤§æ–‡ä»¶è¾“å‡ºæ–¹å¼ï¼š</p>\n<ul>\n<li>\n<p>ç›´æ¥è¯»å–</p>\n<p>è¾“å…¥çš„æ–‡ä»¶ ------------ è¯»å–åˆ°å†…å­˜ ---------------- è¾“å‡ºæ–‡ä»¶å†…å®¹</p>\n</li>\n<li>\n<p>æµå¼è¯»å–</p>\n<p>è¾“å…¥çš„æ–‡ä»¶ ------------ é€šè¿‡å¯è¯»æµè¯»å–åˆ°ç®¡é“ ----------------- é€šè¿‡å¯å†™æµè¾“å‡ºæ–‡ä»¶å†…å®¹</p>\n</li>\n</ul>\n<p><strong>Node.js æ”¯æŒæµçš„å†…ç½®æ¨¡å—ï¼š</strong></p>\n<p><strong>Readable Streams:</strong></p>\n<ul>\n<li>HTTP responses,on the client</li>\n<li>HTTP requests,on the server</li>\n<li>fs read streams</li>\n<li>zlib streams</li>\n<li>crypto streams</li>\n<li>TCP sockets</li>\n<li>child process stdout and stderr</li>\n<li>process.stdin</li>\n</ul>\n<p><strong>Writable  Streams:</strong></p>\n<ul>\n<li>HTTP requests,on the client</li>\n<li>HTTP responses,on the server</li>\n<li>fs write streams</li>\n<li>zlib streams</li>\n<li>crypto streams</li>\n<li>TCP sockets</li>\n<li>child process stdin</li>\n<li>process.stdout,process.stderr</li>\n</ul>\n<p><strong>æµçš„ç±»å‹ï¼š</strong></p>\n<ul>\n<li>Readable - å¯è¯»æ“ä½œã€‚</li>\n<li>Vritable - å¯å†™æ“ä½œã€‚</li>\n<li>Duplex - å¯è¯»å¯å†™æ“ä½œ.</li>\n<li>Transform - æ“ä½œè¢«å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å‡ºç»“æœã€‚</li>\n</ul>\n<h3 id=\"pipe\"><a class=\"anchor\" href=\"#pipe\">#</a> pipe</h3>\n<p><strong>æµçš„æµåŠ¨ï¼š</strong></p>\n<p>å¯è¯»æµ Readableï¼ˆæ•°æ®æº inputï¼‰----------------------pipe ç®¡é“ ---------------------------------------- å¯å†™æµ Writableï¼ˆè¾“å‡º outputï¼‰</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createReadStream<span class=\"token punctuation\">,</span> createWriteStream <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fs'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> readStream <span class=\"token operator\">=</span> <span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./a.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>readStream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å¯è¯»æµ Readableï¼ˆæ•°æ®æº inputï¼‰-------------pipe ç®¡é“ --------------- è½¬æ¢æµ Transform----------------pipe ç®¡é“ ----------- å¯å†™æµ Writableï¼ˆè¾“å‡º outputï¼‰</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createReadStream<span class=\"token punctuation\">,</span> createWriteStream<span class=\"token punctuation\">,</span> write <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fs'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> readStream <span class=\"token operator\">=</span> <span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./a.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> writeStream <span class=\"token operator\">=</span> <span class=\"token function\">createWriteStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./b.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>readStream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>writeStream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"åŸç†-3\"><a class=\"anchor\" href=\"#åŸç†-3\">#</a> åŸç†</h3>\n<p><strong>æµæ˜¯åŸºäº EventEmitterï¼ˆäº‹ä»¶ï¼‰ï¼Œpipe æ–¹æ³•æ˜¯åŸºäºäº‹ä»¶å°è£…çš„çš„è¯­æ³•ç³–ï¼Œå¸¸è§çš„äº‹ä»¶æœ‰ï¼š</strong></p>\n<p><strong>Readable  Streamsï¼šå¯è¯»æµäº‹ä»¶å’Œå‡½æ•°</strong></p>\n<ul>\n<li>Events\n<ul>\n<li>data-- å½“æ²¡æœ‰æ•°æ®æ—¶è§¦å‘</li>\n<li>end-- æ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æ—¶è§¦å‘</li>\n<li>error-- åœ¨æ¥å—å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</li>\n<li>finish-- æ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘</li>\n<li>close</li>\n<li>readable</li>\n</ul>\n</li>\n<li>Functions\n<ul>\n<li>pipe() , unpipe()</li>\n<li>read() , unshift() , resume()</li>\n<li>pause() , isPaused()</li>\n<li>setEncoding()</li>\n</ul>\n</li>\n</ul>\n<p><strong>Writable  Streamsï¼šå†™å…¥æµäº‹ä»¶å’Œå‡½æ•°</strong></p>\n<ul>\n<li>Events\n<ul>\n<li>drain</li>\n<li>finish</li>\n<li>error</li>\n<li>close</li>\n<li>pipe/unpipe</li>\n</ul>\n</li>\n<li>Functions\n<ul>\n<li>write()</li>\n<li>end()</li>\n<li>cork() , uncork()</li>\n<li>setDefaultEncoding()</li>\n</ul>\n</li>\n</ul>\n<p><strong>pipe æ–¹æ³•åŸç†ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createReadStream <span class=\"token punctuation\">,</span> createWriteStream <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fs'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> readStream <span class=\"token operator\">=</span> <span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./a.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> writeStream <span class=\"token operator\">=</span> <span class=\"token function\">createWriteStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./b.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>readStream<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span> <span class=\"token punctuation\">,</span> <span class=\"token parameter\">chunk</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    writeStream<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>readStream<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    writeStream<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å‹ç¼©ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createReadStream <span class=\"token punctuation\">,</span> createWriteStream <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fs'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createGzip <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'zlib'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> readStream <span class=\"token operator\">=</span> <span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./a.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> writeStream <span class=\"token operator\">=</span> <span class=\"token function\">createWriteStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./b.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>readStream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">createGzip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>writeStream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å°è£…ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cosnt savePromise <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>readStream <span class=\"token punctuation\">,</span> writeStream <span class=\"token operator\">=</span> stdout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span>reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        readStream</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>writeStream<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'finish'</span><span class=\"token punctuation\">,</span>resolve<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        \t<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span>reject<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"pipeline\"><a class=\"anchor\" href=\"#pipeline\">#</a> pipeline</h3>\n<p><strong>ä½¿ç”¨ pipe æ–¹æ³•æœ‰æ—¶ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//....</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./a.txt'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>stdout<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'finish'</span><span class=\"token punctuation\">,</span>finishFn<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span>errFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// è¿™é‡Œç›‘å¬çš„æ˜¯ pipe åçš„é”™è¯¯ï¼Œå¯¹äº createReadStream çš„é”™è¯¯åˆ™ä¼šå¡æ­»</span></pre></td></tr></table></figure><p><strong>äºæ˜¯æ¨å‡ºäº† pipeline æ–¹æ³•ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//...</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">pipeLine</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./a.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>zlib<span class=\"token punctuation\">.</span><span class=\"token function\">createGzip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">createWriteStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./b.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pipeline failed'</span><span class=\"token punctuation\">,</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'successed'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h1 id=\"å¯¹è±¡å­˜å‚¨æœåŠ¡\"><a class=\"anchor\" href=\"#å¯¹è±¡å­˜å‚¨æœåŠ¡\">#</a> å¯¹è±¡å­˜å‚¨æœåŠ¡</h1>\n<p><strong>è‡ªå·±å®Œæˆé™æ€æ–‡ä»¶å­˜å‚¨çš„é—®é¢˜</strong></p>\n<ul>\n<li>Nod.js ä¸æ“…é•¿å¤„ç†é™æ€æ–‡ä»¶çš„å­˜å‚¨å’Œå±•ç¤ºï¼Œæ²¡æœ‰æœªé™æ€æ–‡ä»¶åšç‰¹æ®Šçš„ä¼˜åŒ–</li>\n<li>å¦‚æœå°†å›¾ç‰‡ç”Ÿæˆå¤šç§å¤„ç†æ ¼å¼è¦è€—è´¹å¤§é‡çš„èµ„æºå’Œç©ºé—´</li>\n</ul>\n<p><strong>å„ä¸‰æ–¹æ¯”å¯¹</strong></p>\n<h3 id=\"é˜¿é‡Œäº‘oss\"><a class=\"anchor\" href=\"#é˜¿é‡Œäº‘oss\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYWxpeXVuLmNvbS9wcm9kdWN0Li9vc3M=\">é˜¿é‡Œäº‘ OSS</span></h3>\n<p><strong>ç‰¹ç‚¹</strong></p>\n<ul>\n<li>æ”¯æŒä¸°å¯Œçš„å›¾ç‰‡å¤„ç† https://help.aliyun.com/document._detail/44686.html</li>\n<li>egg.js æœ‰å¯¹åº”çš„æ’ä»¶ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2VnZ2pzL2VnZy1vc3M=\">https://github.com/eggjs/egg-oss</span></li>\n</ul>\n<p><strong>ä»·æ ¼</strong></p>\n<ul>\n<li>ä¸‹è¡Œæµé‡ 100GB ä¸€å¹´ 352 å…ƒ https://common-buy.aliyun.com/?spm=5176.7933691.J_5253785160.1.2e394c59q3FIsA&amp;commodityCode=ossbag#/buy</li>\n<li>åŸºæœ¬å›¾ç‰‡å¤„ç†ï¼šæ¯æœˆ 0-10TB: å…è´¹ &gt; 10TB:0.025 å…ƒ / GB</li>\n</ul>\n<h3 id=\"ä¸ƒç‰›äº‘kodo\"><a class=\"anchor\" href=\"#ä¸ƒç‰›äº‘kodo\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucWluaXUuY29tL3ByaWNlcy9rb2Rv\">ä¸ƒç‰›äº‘ KODO</span></h3>\n<p><strong>ç‰¹ç‚¹ï¼š</strong></p>\n<ul>\n<li>å¤šåª’ä½“å¤„ç†åŠŸèƒ½éå¸¸ä¸°å¯Œ https://www.giniu.com/products/dora</li>\n<li>å›¾ç‰‡è§†é¢‘å¤„ç†</li>\n<li>å®¡æ ¸</li>\n<li>äººå·¥æ™ºèƒ½åˆ†æ</li>\n</ul>\n<p><strong>ä»·æ ¼ï¼š</strong></p>\n<ul>\n<li>å¤–ç½‘æµå‡º 100GB - å¹´ 278.4 å…ƒ https://qmall.qiniu.com/template./MTEy?spec_combo=MzE0NQ</li>\n<li>åŸºæœ¬å›¾ç‰‡å¤„ç†ï¼šæ¯æœˆ 0-20TB: å…è´¹ 20TB ä»¥ä¸Šï¼š0.025 å…ƒ / GB https:/www.qiniu.com/prices/dora</li>\n</ul>\n<h3 id=\"è…¾è®¯äº‘cos\"><a class=\"anchor\" href=\"#è…¾è®¯äº‘cos\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kb2N1bWVudC9wcm9kdWN0LzQzNg==\">è…¾è®¯äº‘ COS</span></h3>\n<p><strong>ç‰¹ç‚¹ï¼š</strong></p>\n<p>å›¾åƒå¤„ç†æœ‰ä¸€äº›æ–°çš„äº®ç‚¹ï¼Œæ¯”å¦‚è‡ªç ”çš„ TPG å‹ç¼©ç­‰</p>\n<p><strong>ä»·æ ¼ï¼š</strong></p>\n<ul>\n<li>å¤–ç½‘æµå‡º 100GB ä¸€å¹´ 396 å…ƒ https://buy.cloud.tencent..com/price/cos#tab0-list1</li>\n<li>åŸºæœ¬å›¾ç‰‡å¤„ç†ï¼šæ¯æœˆ 0-20TB: å…è´¹ 20TB ä»¥ä¸Šï¼š0.025 å…ƒ / GB</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kb2N1bWVudC9wcm9kdWN0LzEyNDYvNDUyNzQ=\">https://cloud.tencent.com/document/product/1246/45274</span></li>\n<li>å›¾ç‰‡å‹ç¼©ï¼š1 å…ƒ / åƒæ¬¡</li>\n</ul>\n<h1 id=\"ssræœåŠ¡ç«¯æ¸²æŸ“\"><a class=\"anchor\" href=\"#ssræœåŠ¡ç«¯æ¸²æŸ“\">#</a> SSR æœåŠ¡ç«¯æ¸²æŸ“</h1>\n<h3 id=\"ä»‹ç»-2\"><a class=\"anchor\" href=\"#ä»‹ç»-2\">#</a> ä»‹ç»</h3>\n<p><strong>SSR-Server Side Rendering</strong></p>\n<p>Vue å…³äº SSR çš„ä»‹ç»ï¼šhttps:/sSr.uejs.org/zh</p>\n<p><strong>SSR çš„ä¼˜ç‚¹</strong></p>\n<ul>\n<li>æ›´å¥½çš„ SEO</li>\n<li>æ›´å¿«çš„æ¸²æŸ“æ—¶é—´ (Time to content)ï¼Œ</li>\n</ul>\n<p><strong>SSR çš„ç¼ºç‚¹</strong></p>\n<ul>\n<li>\n<p>å¼€å‘çš„é™åˆ¶ï¼Œæµè§ˆå™¨ç›¸å…³çš„æ“ä½œåªèƒ½åœ¨ç‰¹å®šçš„é’©å­å‡½æ•°ä¸­ä½¿ç”¨</p>\n</li>\n<li>\n<p>SPA åº”ç”¨å®Œå…¨é™æ€åŒ–ï¼Œè€Œ SSR app éœ€è¦ Node.js Server æ‰èƒ½è¿è¡Œ</p>\n</li>\n<li>\n<p>æœåŠ¡ç«¯è´Ÿè·æ›´é«˜</p>\n</li>\n</ul>\n<p><strong>SSR çš„å®ç°ï¼š</strong></p>\n<ul>\n<li>\n<p>åŸºæœ¬åŸç†ï¼š@vue/server-renderer https:lv3.uejs.org/guide/ssr/getting-started.html#installation</p>\n</li>\n<li>\n<p>ä½¿ç”¨ createSSRApp,renderToString ä»¥åŠ renderToStream æ–¹æ³•</p>\n</li>\n</ul>\n<p><strong>æˆç†Ÿçš„ï¼Œå¤§è€Œå…¨çš„ SSR é€šç”¨å¼€å‘æ¡†æ¶ï¼š</strong></p>\n<ul>\n<li>Nuxt.js <span class=\"exturl\" data-url=\"aHR0cHM6Ly9udXh0anMub3JnLw==\">https://nuxtjs.org/</span>  ï¼ˆVueï¼‰</li>\n<li>React ç±»ä¼¼çš„ Next.js https:/nextjs.orgl ï¼ˆReactï¼‰</li>\n</ul>\n<h3 id=\"ssr\"><a class=\"anchor\" href=\"#ssr\">#</a> SSR</h3>\n<p>express ç­‰æ¡†æ¶çš„ res.render æ–¹æ³•å¯ä»¥æ¸²æŸ“ html æ¨¡æ¿ï¼Œä½¿ç”¨çš„æ˜¯ nunjucks åº“è¿›è¡Œæ•°æ®å¡«å……ã€‚</p>\n<p>index.html</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no-js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>description<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Document<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>  //æ ¹æ®ä¼ å…¥çš„propsåŠ¨æ€æ·»åŠ styleæ ·å¼</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>index.js  (ä¾æ® express æ¡†æ¶ä¸ºä¾‹ï¼š)</p>\n<pre><code>//...resæ˜¯å“åº”å‚æ•°\nres.render('index',function(err,html)&#123;\n\tres.send(html);\n&#125;)\n</code></pre>\n<h3 id=\"vueä¸­ssr\"><a class=\"anchor\" href=\"#vueä¸­ssr\">#</a> vue ä¸­ SSR</h3>\n<p>1ã€vue3 æœ‰åŒ…ï¼š@vue/server-rendererï¼Œåœ¨ 3.2.13 ç‰ˆæœ¬ä»¥ä¸Šå†…ç½®äº†ï¼Œä½äºæ­¤ç‰ˆæœ¬éœ€è¦è‡ªè¡Œå®‰è£…ã€‚</p>\n<p>2ã€ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//.......... res æ˜¯æœåŠ¡ç«¯è¿”å›</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> pipeline <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'stream/promises'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createSSRApp <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> renderToString <span class=\"token punctuation\">,</span> renderToNodeStream <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@vue/server-renderer'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> vueApp <span class=\"token operator\">=</span> <span class=\"token function\">createSSRApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function-variable function\">data</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">msg</span><span class=\"token operator\">:</span><span class=\"token string\">'hello world'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token literal-property property\">template</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;h1>&lt;/h1>'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> appContent <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>vueApp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>res<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>res<span class=\"token punctuation\">.</span>body <span class=\"token operator\">=</span> appContent<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// æˆ–è€…ä½¿ç”¨æµå¼è¾“å‡ºï¼š</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> <span class=\"token function\">renderToNodeStream</span><span class=\"token punctuation\">(</span>vueApp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>res<span class=\"token punctuation\">.</span>statys <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">await</span> <span class=\"token function\">pipeline</span><span class=\"token punctuation\">(</span>stream<span class=\"token punctuation\">,</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h1 id=\"rbacæƒé™éªŒè¯\"><a class=\"anchor\" href=\"#rbacæƒé™éªŒè¯\">#</a> RBAC æƒé™éªŒè¯</h1>\n<h3 id=\"ä»‹ç»-3\"><a class=\"anchor\" href=\"#ä»‹ç»-3\">#</a> ä»‹ç»</h3>\n<p><strong>æƒé™éªŒè¯çš„åœºæ™¯ä»¥åŠéœ€æ±‚ï¼š</strong></p>\n<ul>\n<li>ç‰¹å®šçš„è§’è‰²çš„ç”¨æˆ·æ‰èƒ½æ“ä½œç‰¹å®šçš„èµ„æº</li>\n<li>ä¸åŒçš„ç”¨æˆ·èƒ½æ“ä½œåŒç±»èµ„æºçš„ç‰¹å®šå®ä½“</li>\n<li>ä¸åŒçš„ç”¨æˆ·æ“ä½œç‰¹å®šèµ„æºçš„ä¸åŒå±æ€§</li>\n</ul>\n<p><strong>è° (User) æ‹¥æœ‰ä»€ä¹ˆæƒé™ (Authorityï¼‰å»æ“ä½œ (Operation) å“ªäº›èµ„æº (Resource)</strong><br />\n æ ¹æ®è§’è‰²å®Œæˆæƒé™çš„æ§åˆ¶ - RBAC (role based access control)ï¼Œå…¶å®å°±æ˜¯åœ¨åŸæœ¬ç”¨æˆ· ------- æƒé™çš„å¯¹åº”å…³ç³»ä¹‹ä¸ŠåŠ ä¸€å±‚ä¸­é—´å±‚è§’è‰²ï¼šç”¨æˆ· ------ è§’è‰² ----- æƒé™ã€‚å¥½å¤„æ˜¯ä½¿å¾—ç”¨æˆ·å’Œæƒé™çš„å¯¹åº”å…³ç³»æ›´åŠ æ¸…æ™°å’Œæ˜“äºæŒæ§ã€‚</p>\n<h3 id=\"ä½¿ç”¨\"><a class=\"anchor\" href=\"#ä½¿ç”¨\">#</a> ä½¿ç”¨</h3>\n<p>Node.js å®ç° RBAC çš„åº“ï¼š</p>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL29udXJ5L2FjY2Vzc2NvbnRyb2w=\">AccessControl.jsï¼ˆä¸æ¨èï¼Œä¸ç»´æŠ¤äº†ï¼‰</span></p>\n<ul>\n<li>1.6k Star</li>\n<li>3 å¹´æ²¡æœ‰æ›´æ–°ï¼Œå¾ˆå¤š issue æ²¡äººå¤„ç†</li>\n<li>ä¸æ”¯æŒ ts</li>\n</ul>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2Nhc2Jpbi9ub2RlLWNhc2Jpbg==\">Casbin</span></p>\n<ul>\n<li>1.7k Star</li>\n<li>ts ç¼–å†™ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€</li>\n<li>æ¦‚å¿µæ¯”è¾ƒå¤æ‚ï¼Œä½¿ç”¨ç•¥ç¹ç</li>\n</ul>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3N0YWxuaXkvY2FzbA==\">Casl</span></p>\n<ul>\n<li>\n<p>3.4k Star</p>\n</li>\n<li>\n<p>ts ç¼–å†™</p>\n</li>\n<li>\n<p>ç®€å•æ˜“ç”¨ï¼Œå¯è¯»æ€§è‰¯å¥½</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"caslä½¿ç”¨\"><a class=\"anchor\" href=\"#caslä½¿ç”¨\">#</a> <strong>Casl ä½¿ç”¨</strong></h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> AbilityBuilder <span class=\"token punctuation\">,</span> Ability <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@casl/ability'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Work</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">attrs</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>attrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> templateWork <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Work</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">id</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">isTemplate</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> notWork <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Work</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">id</span> <span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">isTemplate</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">defineRules</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> can <span class=\"token punctuation\">,</span> cannot <span class=\"token punctuation\">,</span>build <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AbilityBuilder</span><span class=\"token punctuation\">(</span>Ability<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token string\">'read'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Work'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token function\">cannot</span><span class=\"token punctuation\">(</span><span class=\"token string\">'delete'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Work'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token string\">'update'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Work'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">isTemplate</span><span class=\"token operator\">:</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>templateWork<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">const</span> rules <span class=\"token function\">defineRules</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rules<span class=\"token punctuation\">.</span><span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token string\">'read'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Work'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rules<span class=\"token punctuation\">.</span><span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token string\">'delete'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Work'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rules<span class=\"token punctuation\">.</span><span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token string\">'update'</span><span class=\"token punctuation\">,</span>templateWork<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rules<span class=\"token punctuation\">.</span><span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token string\">'update'</span><span class=\"token punctuation\">,</span>notWork<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h1 id=\"éƒ¨ç½²-2\"><a class=\"anchor\" href=\"#éƒ¨ç½²-2\">#</a> éƒ¨ç½²</h1>\n<h3 id=\"ä¼ ç»Ÿæ¨¡å¼\"><a class=\"anchor\" href=\"#ä¼ ç»Ÿæ¨¡å¼\">#</a> ä¼ ç»Ÿæ¨¡å¼</h3>\n<p><strong>æœ¬åœ°å¼€å‘</strong><br />\nä½¿ç”¨ egg-bin https:github.com/eggjs/egg-bin, æä¾›äº†ä¾¿æ·çš„æ–¹å¼åœ¨æœ¬åœ°è¿›è¡Œå¼€å‘ã€è°ƒè¯•ã€å•å…ƒæµ‹è¯•ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨çš„ç›‘æ§æ–‡ä»¶çš„ä¿®æ”¹ï¼Œç„¶åé‡æ–°è¿è¡Œå¯¹åº”çš„å‘½ä»¤ã€‚<br />\né‡‡ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯ï¼šconfig.default.ts<br />\n å¯åŠ¨å¼€å‘ç¯å¢ƒå‘½ä»¤ä¸º <code>egg-bin dev</code> <br />\n<strong> ç”Ÿäº§ç¯å¢ƒè¿è¡Œç¨‹åº</strong><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wbTIua2V5bWV0cmljcy5pby8=\"> pm2-process manager</span></p>\n<p><code>node script.js pm2 start script.js</code></p>\n<p><strong>PM2 çš„ä¼˜åŠ¿ï¼š</strong></p>\n<ul>\n<li>cluster æ¨¡å¼è¿è¡Œ</li>\n<li>è‡ªåŠ¨é‡å¯ auto reload</li>\n<li>çƒ­æ›¿æ¢ hot reload</li>\n<li>æ€§èƒ½ç›‘æ§ Monitoring</li>\n</ul>\n<p><strong>egg.js ä¸­æœ‰å¯¹åº”äº PM2 çš„å†…ç½®æ–¹æ³•ï¼š</strong></p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2VnZ2pzL2VnZy1zY3JpcHRz\">egg-scripts</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2VnZ2pzL2VnZy1jbHVzdGVy\">egg-cluster</span></li>\n</ul>\n<p><strong>egg.js ç”Ÿäº§ç¯å¢ƒå¯åŠ¨å’Œå…³é—­</strong><br />\n <code>egg-scripts start egg-scripts stop</code></p>\n<p><strong>é…ç½®æ–‡ä»¶</strong><br />\n config.prod.ts config.default.ts<br />\n<strong> ç¼–è¯‘è¿‡ç¨‹</strong><br />\néœ€è¦æ‰‹åŠ¨å°† ts è½¬æ¢ä¸º js, å€ŸåŠ©<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3doeGF4ZXMvZWdnLXRzLWhlbHBlcg==\"> ets</span><br />\n <code>ç‰¹åˆ«æ³¨æ„å°†é¡¹ç›®ä¸­çš„typscriptç‰ˆæœ¬å‡çº§åˆ°4.4.3 </code></p>\n<p><code>npm run tsc</code></p>\n<h2 id=\"clusteræ¨¡å‹\"><a class=\"anchor\" href=\"#clusteræ¨¡å‹\">#</a> Cluster æ¨¡å‹</h2>\n<p><strong>Egg.js Cluster æ¨¡å‹çš„åŸç†</strong><br />\n Egg.js å…³äºè¿™éƒ¨åˆ†å†…å®¹çš„æ–‡æ¡£ï¼šhttps:l/eggjs.org/zh-cn/core/cluster-and-ipc.html<br />\n<strong> ä¸ºä»€ä¹ˆè¦é‡‡ç”¨ Cluster æ¨¡å¼</strong><br />\n JavaScript ä»£ç æ˜¯è¿è¡Œåœ¨å•çº¿ç¨‹ä¸Šçš„ï¼Œé‚£ä¹ˆå¦‚æœç”¨ Node.js æ¥åš Web Server, å°±æ— æ³•äº«å—åˆ°å¤šæ ¸è¿ç®—çš„å¥½å¤„ã€‚<br />\n<strong>ä»€ä¹ˆæ˜¯ Cluster æ¨¡å¼</strong><br />\næ–‡æ¡£ï¼šhttp:l/nodejs.cn/api/cluster.html</p>\n<p>Node.jS çš„å•ä¸ªå®ä¾‹åœ¨å•ä¸ªçº¿ç¨‹ä¸­è¿è¡Œã€‚ä¸ºäº†åˆ©ç”¨å¤šæ ¸ç³»ç»Ÿï¼Œç”¨æˆ·æœ‰æ—¶ä¼šæƒ³<br />\nè¦å¯åŠ¨ Node.js è¿›ç¨‹çš„é›†ç¾¤æ¥å¤„ç†è´Ÿè½½ã€‚</p>\n<ul>\n<li>åœ¨æœåŠ¡å™¨ä¸ŠåŒæ—¶å¯åŠ¨å¤šä¸ªè¿›ç¨‹</li>\n<li>æ¯ä¸ªè¿›ç¨‹é‡Œéƒ½è·‘çš„æ˜¯åŒä¸€ä»½æºä»£ç ï¼ˆå°†ä¸€ä¸ªè¿›ç¨‹çš„å·¥ä½œåˆ†ç»™å¤šä¸ªè¿›ç¨‹å»åšï¼‰</li>\n<li>è¿™äº›è¿›ç¨‹å¯ä»¥åŒæ—¶ç›‘å¬ä¸€ä¸ªç«¯å£</li>\n</ul>\n<p><strong>Cluster çš„è¿è¡Œæ¨¡å¼ï¼š</strong></p>\n<p>Request-------------master_process ä¸»è¿›ç¨‹ ---------------------workers è¿›ç¨‹ï¼ˆå¤šä¸ªï¼‰</p>\n<p><strong>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ï¼š</strong></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU4JUExJThDJUU3JUE4JThCJUU5JTk2JTkzJUU5JTgwJTlBJUU4JUE4JThB\">IPC Inter-Process Communication</span></p>\n<p>IPC æŒ‡çš„æ˜¯è‡³å°‘ä¸¤ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹é—´ä¼ é€æ•°æ®æˆ–ä¿¡å·çš„ä¸€äº›æŠ€æœ¯æˆ–è€…æ–¹æ³•ï¼ŒNode.js å°†å…¶å°è£…ä¸ºåŸºäºäº‹ä»¶çš„å½¢å¼ä¾¿äºä½¿ç”¨ã€‚</p>\n<p><strong>Cluster ä½¿ç”¨ï¼š</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> http <span class=\"token keyword\">from</span> <span class=\"token string\">'http'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> cluster <span class=\"token keyword\">from</span> <span class=\"token string\">'cluster'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> cpus <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'os'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> process <span class=\"token keyword\">from</span> <span class=\"token string\">'process'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>cluster<span class=\"token punctuation\">.</span>isPrimary<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">master </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>process<span class=\"token punctuation\">.</span>pid<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\"> running</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">const</span> cpuLength <span class=\"token operator\">=</span> <span class=\"token function\">cpus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> cpuLength <span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        cluster<span class=\"token punctuation\">.</span><span class=\"token function\">fork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    cluster<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'exit'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">worker</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">worker </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>worker<span class=\"token punctuation\">.</span>process<span class=\"token punctuation\">.</span>pid<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\"> exited</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span>res</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        res<span class=\"token punctuation\">.</span><span class=\"token function\">writeHead</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">8000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">worker </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>process<span class=\"token punctuation\">.</span>pid<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\"> started</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cluster<span class=\"token punctuation\">.</span>workers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è·å¾—å­è¿›ç¨‹ï¼Œå¯ä»¥é€šè¿‡ process.send å’Œ on ('message') äº‹ä»¶è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ã€‚</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>egg.js ä¸­å¯¹äº Cluster çš„äºŒæ¬¡å°è£…ï¼š</strong></p>\n<ul>\n<li>ä½¿ç”¨ egg-scripts å¯åŠ¨ master process</li>\n<li>ä½¿ç”¨ egg-cluster å¯åŠ¨å’Œ CPU æ ¸æ•°ç›¸ç­‰çš„ app_worker process</li>\n<li>ä½¿ç”¨ egg-cluster å¯åŠ¨çš„ä¸€ä¸ªç‹¬ç‰¹çš„ agent_.worker process</li>\n</ul>\n<p><strong>è¿›ç¨‹å®ˆæŠ¤</strong><br />\nè€ƒè™‘åˆ°ç”Ÿäº§ç¯å¢ƒçš„å¥å£®æ€§ï¼Œå¿…é¡»ä¿è¯è¿›ç¨‹å¼‚å¸¸çš„æƒ…å†µä¸‹æ€æ ·å¤„ç†ã€‚<br />\n<strong>å½“ä»£ç æŠ›å‡ºå¼‚å¸¸å¹¶æ²¡æœ‰è¢«æ•è·çš„æ—¶å€™ï¼Œworker ä½¿ç”¨ process.on ('uncaughtException',handler) æ¥æ•è·å¯¹åº”çš„é”™è¯¯ï¼Œè¿™æ—¶è¿›ç¨‹å¤„äºä¸ç¡®å®šçš„çŠ¶æ€ï¼Œéœ€è¦ä¼˜é›…é€€å‡ºã€‚</strong></p>\n<p><strong>ç³»ç»Ÿå¼‚å¸¸</strong><br />\nè€Œå½“ä¸€ä¸ªè¿›ç¨‹å‡ºç°å¼‚å¸¸å¯¼è‡´ crash æˆ–è€…è¢«ç³»ç»Ÿæ€æ­»æ—¶ï¼Œä¸åƒæœªæ•è·å¼‚å¸¸å‘ç”Ÿæ—¶æˆ‘ä»¬è¿˜æœ‰æœºä¼šè®©è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼ŒMaster ç«‹åˆ» fork ä¸€ä¸ªæ–°çš„ Workerã€‚<br />\n<strong>Agent æœºåˆ¶</strong><br />\næœ‰ä¸€äº›ç‰¹æ®Šæ€§è´¨çš„å·¥ä½œï¼Œä¸èƒ½å¤šä¸ª worker ä¸€èµ·åˆä½œï¼Œå®¹æ˜“é€ æˆæ··ä¹±ã€‚å¯¹äºè¿™ç§å·¥ä½œ egg.js æä¾›äº†ä¸€ä¸ªæ–°çš„ agent è¿›ç¨‹æ¥å®Œæˆã€‚</p>\n<p><strong>Egg.js ä¸‰ç§è¿›ç¨‹çš„æ€»ç»“ï¼š</strong></p>\n<table>\n<thead>\n<tr>\n<th>ç±»å‹</th>\n<th>è¿›ç¨‹æ•°é‡</th>\n<th>ä½œç”¨</th>\n<th>ç¨³å®šæ€§</th>\n<th>æ˜¯å¦è¿è¡Œä¸šåŠ¡ä»£ç </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Master è¿›ç¨‹</td>\n<td>1</td>\n<td>è¿›ç¨‹ç®¡ç†ï¼Œè¿›ç¨‹é—´æ¶ˆæ¯è½¬å‘</td>\n<td>éå¸¸é«˜</td>\n<td>å¦</td>\n</tr>\n<tr>\n<td>Agent è¿›ç¨‹</td>\n<td>1</td>\n<td>åå°è¿è¡Œå·¥ä½œ</td>\n<td>é«˜</td>\n<td>å°‘é‡</td>\n</tr>\n<tr>\n<td>Workers è¿›ç¨‹</td>\n<td>CPU æ ¸æ•°</td>\n<td>æ‰§è¡Œä¸šåŠ¡ä»£ç </td>\n<td>ä¸€èˆ¬</td>\n<td>æ˜¯</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Cluster æ¨¡å‹å’Œ Node å¤šè¿›ç¨‹çš„åŒºåˆ«ï¼š</strong></p>\n<ul>\n<li>Cluster æ¨¡å—å¯ä»¥å°†ä¸€ä¸ª node è¿›ç¨‹åˆ†è£‚æˆå¤šä¸ªå­è¿›ç¨‹ï¼Œæ¯ä¸ªå­è¿›ç¨‹ç‹¬ç«‹è¿è¡Œåœ¨ cpu å†…æ ¸ä¸Šï¼Œä»¥æå‡åº”ç”¨ç¨‹åºçš„å¹¶å‘èƒ½åŠ›å’Œæ€§èƒ½ï¼Œé€šè¿‡ä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ¥å®ç°è´Ÿè½½å‡è¡¡ï¼Œå¤„ç†å¹¶å‘è¯·æ±‚ã€‚</li>\n<li>node å¤šè¿›ç¨‹ä½¿ç”¨ child_process æ¨¡å—ï¼Œå…¶ä¸å…·å¤‡è´Ÿè½½å‡è¡¡å’Œé€šä¿¡æœºåˆ¶ï¼Œéœ€è¦è‡ªè¡Œå®ç°è¿›ç¨‹é—´é€šä¿¡å’Œè´Ÿè½½å‡è¡¡é€»è¾‘ã€‚å¯ç”¨äºå¤„ç†é•¿æ—¶æ“ä½œï¼Œè¿”å›ç»“æœç»™ä¸»è¿›ç¨‹ã€‚</li>\n</ul>\n<p><strong>Node.js å‹åŠ›æµ‹è¯•å·¥å…·ï¼š</strong></p>\n<p>æ¨¡æ‹Ÿé«˜å¹¶å‘åœºæ™¯ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbG9hZHRlc3Q=\">Loadtest</span></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># n                   æ€»è¿‡å‘é€å¤šå°‘ä¸ªè¯·æ±‚</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># c concurrency       åŒæ—¶æœ‰å‡ ä¸ªå®¢æˆ·ç«¯åœ¨å‘é€è¯·æ±‚</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># rps request per seconds   æ¯ç§’å‘é€å¤šå°‘ä¸ªè¯·æ±‚</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>loadtest <span class=\"token parameter variable\">-n</span> <span class=\"token number\">400</span> <span class=\"token parameter variable\">-c</span> <span class=\"token number\">10</span> <span class=\"token parameter variable\">--rps</span> <span class=\"token number\">200</span> http://mysite.com/</pre></td></tr></table></figure><h1 id=\"äº‘æœåŠ¡å™¨\"><a class=\"anchor\" href=\"#äº‘æœåŠ¡å™¨\">#</a> äº‘æœåŠ¡å™¨</h1>\n<h4 id=\"è´­ä¹°\"><a class=\"anchor\" href=\"#è´­ä¹°\">#</a> è´­ä¹°</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYWxpeXVuLmNvbS9wcm9kdWN0L2Vjcw==\">é˜¿é‡Œäº‘ ECS</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9wcm9kdWN0L2N2bQ==\">è…¾è®¯äº‘ CVM</span></p>\n<p>ä»·æ ¼ï¼ˆå­¦ç”Ÿä¼˜æƒ ï¼‰ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9hY3QvY2FtcHVzP2Zyb209MTQ1OTk=\">https://cloud.tencent.com/act/campus?from=14599</span> 12G 38</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaHVhd2VpY2xvdWQuY29tL3Byb2R1Y3QvZWNzLmh0bWw=\">åä¸ºäº‘ ECS</span></p>\n<h4 id=\"ç™»å½•\"><a class=\"anchor\" href=\"#ç™»å½•\">#</a> ç™»å½•</h4>\n<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ root ç™»å½•æ—¶ä¸€ä¸ªä¸å¥½çš„å®è·µ</strong></p>\n<ul>\n<li>æœ‰éå¸¸å¤šçš„ bot ä¼šå°è¯•ä½¿ç”¨ root+pwd çš„ ssh æ–¹å¼æš´åŠ›ç™»å½•æœºå™¨ï¼Œå½“å°è¯•æˆåŠŸä»¥åï¼Œé»‘å®¢å°±ä¼šæ§åˆ¶æ•´ä¸ªç³»ç»Ÿã€‚</li>\n<li><em>å‡å¦‚ä½¿ç”¨ç‰¹å®šç”¨æˆ·å + pwd,bot éœ€è¦å…ˆçŒœæµ‹ç”¨æˆ·å (N æ¬¡)ï¼Œç„¶åæ˜¯å¯†ç  (M æ¬¡)ï¼Œè¿™æ ·å¤æ‚åº¦æå‡åˆ° N</em>M</li>\n<li>root å¯ä»¥é€ æˆæ›´å¤§çš„å±å®³ï¼Œå½±å“æ•´ä¸ªç³»ç»Ÿï¼Œè€ŒæŸä¸ªç‰¹å®šç”¨æˆ·åªèƒ½å½±å“å®ƒçš„æ–‡ä»¶ç³»ç»Ÿ</li>\n</ul>\n<p><strong>åˆ›å»ºä¸€ä¸ªç”¨æˆ·è´¦å·è¿›è¡Œç™»å½•</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è¿œç¨‹ç™»å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">ssh</span> root@xxx.xx.xx.xx</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æ·»åŠ ç”¨æˆ·ä»¥åŠè®¾ç½®å¯†ç </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>adduser dmq</pre></td></tr></table></figure><p><strong>è®¾ç½®è¯¥ç”¨æˆ·æ‹¥æœ‰ sudo æƒé™ï¼Œç»™äºˆå®ƒåœ¨ç™»å½•ä»¥ååˆ‡æ¢åˆ° root çš„èƒ½åŠ›</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä¿®æ”¹æƒé™ï¼Œu è¡¨ç¤ºæ‰€æœ‰è€…ï¼Œw è¡¨ç¤ºå†™æƒé™ + è¡¨ç¤ºæ·»åŠ </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">chmod</span> u+w /etc/sudoers</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç¼–è¾‘æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">vim</span> /etc/sudoers</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æ‰¾åˆ°  `root ALL=(ALL)  ALL`</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># å†åŠ ä¸€è¡Œ  `dmq ALL=(ALL)  ALL`</span></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æ–°ç”¨æˆ·ç™»å½•å¹¶ä¸”æµ‹è¯•æƒé™</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ssh</span> dmq@xxx.xx.xx.xx</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># å¯ä»¥ä½¿ç”¨ su ç›´æ¥åˆ‡æ¢ä¸º root ç”¨æˆ·</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ä¹Ÿå¯ä»¥ä½¿ç”¨ sudo å¿«æ·çš„ä½¿ç”¨ root æƒé™è¿›è¡Œæ“ä½œ</span></pre></td></tr></table></figure><p><strong>ç¦æ­¢ä½¿ç”¨ root è¿œç¨‹ç™»å½• ssh</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä¿®æ”¹ ssh é…ç½®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vim</span> /etc/ssh/sshd_config I</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ä¿®æ”¹ yes ä¸º no</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>PermitRootLogin no</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># é‡å¯ sshd æœåŠ¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">service</span> sshd restart</pre></td></tr></table></figure><p><strong>å¯é€‰ï¼šä¸ä½¿ç”¨å¯†ç ç™»å½•</strong><br />\nä¸ºä»€ä¹ˆä½¿ç”¨å¯†ç ç™»å½•æœ‰æ—¶å€™æ˜¯ä¸€ä¸ªä¸å¥½çš„å®è·µï¼Ÿ<br />\n<strong>éå¸¸ç®€å•ï¼šç”¨æˆ·ç»å¸¸ä½¿ç”¨éå¸¸é”™è¯¯ï¼ˆç®€å•çš„ï¼‰ç”¨æˆ·å¯†ç ï¼Œå…¨çƒæœ€å¸¸ç”¨çš„å¯†ç æ˜¯ 123456 ä»¥åŠ bc123, è€Œä¸”ç”¨æˆ·ä¼šåœ¨å¤šä¸ªè´¦æˆ·å¤§é‡é‡å¤ä½¿ç”¨ï¼Œæ‰€ä»¥é»‘å®¢ä»åˆ«çš„åœ°æ–¹ç›—å–çš„å¯†ç å¾ˆå¯èƒ½åœ¨å…¶ä»–è´¦æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨</strong></p>\n<p><strong>ä½¿ç”¨ SSH kev è®²è¡Œç™»å½•</strong><br />\n SSH key é‡‡è§’äº†ç»å…¸çš„éå¯¹ç§°åŠ å¯†æŠ€æœ¯ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·åˆ›å»ºä¸€ä¸ªå…¬é’¥å’Œç§é’¥ï¼Œä½ å¯ä»¥å°†å…¬é’¥æ”¾ç½®åœ¨ä»»ä½•çš„æœåŠ¡å™¨å½“ä¸­ï¼Œåœ¨æœ¬åœ°ä¿ç•™ç§é’¥ã€‚åœ¨ ssh ç™»å½•çš„æ—¶å€™ï¼ŒSSH éªŒè¯å…¬é’¥å’Œç§é’¥çš„åˆæ³•æ€§ï¼Œå½“åˆæ³•çš„æ—¶å€™ï¼Œå°±å¯ä»¥å…å¯†ç ç™»å½•äº†ã€‚è¯ä¹¦ç”± 1024Bits åˆ° 4096Bitsï¼ˆ128 åˆ° 512 å­—ç¬¦) çš„éšæœºå­—ç¬¦ç»„æˆï¼Œ<br />\nè¦æ¯”ä½ è‡ªå·±çš„å¯†ç å®‰å…¨çš„å¤šã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#åˆ›å»º ssh key pair</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ssh-keygen <span class=\"token parameter variable\">-t</span> rsa <span class=\"token parameter variable\">-b</span> <span class=\"token number\">4096</span> <span class=\"token parameter variable\">-C</span> <span class=\"token string\">\"your email@example.com\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>windowså¯ä»¥ä½¿ç”¨puttyæˆ–è€…git scmaè½¯ä»¶ç”Ÿæˆï¼Œå¤‡æ³¨ç½‘å€ï¼š</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>https://www.jianshu.com/p/95262f5eba7a</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æœ¬åœ° ssh è¯ä¹¦çš„ä½ç½®</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>-/.ssh/id rsa</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>-/.ssh/id rsa.pub</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># ç™»å½•è¿œç¨‹æœºå™¨</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">ssh</span> viking@xxx.xx.xx.xx</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºå—ä¿¡ä»»çš„ç™»å½•å¯†é’¥</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># è¿™ä¸ªæ–‡ä»¶å½“ä¸­çš„å…¬é’¥ä¼šè¢«å½“å‰çš„ä¸»æœºè®¾ç½®ä¸ºä¿¡ä»»æ–¹</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token function\">touch</span> -/.ssh/authorized keys</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># å°† id rsa.pub çš„æ–‡æœ¬å†…å®¹é»è´´è¿›æ¥</span></pre></td></tr></table></figure><p><strong>å¯é€‰ï¼Œå…³é—­å¯†ç ç™»å½•æœåŠ¡å™¨çš„åŠŸèƒ½</strong></p>\n<pre><code class=\"language-bash#ä¿®æ”¹sshé…ç½®\">vim /etc/ssh/sshd config\n#ä¿®æ”¹ä¸ºno\nPasswordAuthentication no\n#é‡å¯æœåŠ¡\nservice sshd i restart\n</code></pre>\n<h4 id=\"ä½¿ç”¨-2\"><a class=\"anchor\" href=\"#ä½¿ç”¨-2\">#</a> ä½¿ç”¨</h4>\n<p><strong>å‡†å¤‡äº‘æœåŠ¡å™¨å¿…å¤‡è½¯ä»¶</strong></p>\n<ul>\n<li>nodejs (16)</li>\n<li>MongoDB</li>\n<li>Redis</li>\n<li>Git</li>\n</ul>\n<p><strong>Linux å‘è¡Œç‰ˆçš„ä¸¤å¤§å®¶æ—</strong></p>\n<ul>\n<li>Debian (å®Œå…¨å…è´¹çš„ Linux å‘è¡Œç‰ˆ)-Ubuntu (åŸºäº Debian, æ›´åŠ å®¹æ˜“ä¸Šæ‰‹)-apt åŒ…ç®¡ç†ç³»ç»Ÿ - è½¯ä»¶æ ¼å¼ä¸º deb åŒ…å¤§</li>\n<li>Red Hat (å•†ç”¨ Linux å‘è¡Œç‰ˆ)-CentOS (Red Hat å‡å»æ”¶è´¹è½¯ä»¶)-yum åŒ…ç®¡ç†ç³»ç»Ÿ - è½¯ä»¶æ ¼å¼ä¸º rpm</li>\n</ul>\n<p><strong>è½¯ä»¶å®‰è£…</strong><br />\n<strong>å®‰è£… Node.js</strong><br />\n1 å®‰è£… nvm ç®¡ç† node ç‰ˆæœ¬ https://github.com/nvm-sh/nvm<br />\n2 ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£… node æœ€æ–°ç‰ˆæœ¬ https://github.com/nodesource/distributions/blob/master/README.md#deb</p>\n<p><strong>å®‰è£… MongoDB</strong><br />\n1 ä»æºä»£ç ä¸‹è½½å®‰è£…ï¼Œå›é¡¾ä¹‹å‰çš„å†…å®¹<br />\n 2 ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…<br />\n Ubuntu:<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1vbmdvZGIuY29tL21hbnVhbC90dXRvcmlhbC9pbnN0YWxsLW1vbmdvZGItb24tdWJ1bnR1Lw==\">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/</span><br />\nCentos:<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1vbmdvZGIuY29tL21hbnVhbC90dXRvcmlhbC9pbnN0YWxsLW1vbmdvZGItb24tcmVkLWhhdC8=\">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/</span></p>\n<p><strong>å®‰è£… Redis</strong><br />\n*1 ä»æºä»£ç ä¸‹è½½å®‰è£…ï¼Œå›é¡¾ä¹‹å‰çš„åŸºç¡€çŸ¥è¯†<br />\n * 2 ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…<br />\n CentOS:<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZGlnaXRhbG9jZWFuLmNvbS9jb21tdW5pdHkvdHV0b3JpYWxzL2hvdy10by1pbnN0YWxsLXNlY3VyZS1yZWRpcy1jZW50b3MtNw==\">https://www.digitalocean.com/community/tutorials/how-to-install-secure-redis-centos-7</span><br />\nUbuntu:<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZGlnaXRhbG9jZWFuLmNvbS9jb21tdW5pdHkvdHV0b3JpYWxzL2hvdy10by1pbnN0YWxsLWFuZC1zZWN1cmUtcmVkaXMtb24tdWJ1bnR1LTE4LTA0\">https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-redis-on-ubuntu-18-04</span></p>\n<h4 id=\"ç®¡ç†\"><a class=\"anchor\" href=\"#ç®¡ç†\">#</a> ç®¡ç†</h4>\n<p><strong>ä½¿ç”¨ service æˆ–è€… systemctl ç®¡ç†æœåŠ¡</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># systemd æ¨¡å— - https://en.wikipedia.org/wiki/Systemd</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">service</span>  æœåŠ¡åç§°<span class=\"token punctuation\">(</span>mongod<span class=\"token punctuation\">)</span>  æ“ä½œæŒ‡ä»¤<span class=\"token punctuation\">(</span>status/start/stop/restart<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>systemctl  æ“ä½œæŒ‡ä»¤<span class=\"token punctuation\">(</span>start/stop/status/restart/reload<span class=\"token punctuation\">)</span>  æœåŠ¡åç§°service</pre></td></tr></table></figure><h1 id=\"æ™®é€šéƒ¨ç½²\"><a class=\"anchor\" href=\"#æ™®é€šéƒ¨ç½²\">#</a> æ™®é€šéƒ¨ç½²</h1>\n<p><strong>åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²å¹¶è¿è¡Œ</strong></p>\n<ul>\n<li>\n<p>1 ç™»å½•è¿œç¨‹æœºå™¨ï¼Œä½¿ç”¨æ™®é€šç”¨æˆ·ã€‚</p>\n</li>\n<li>\n<p>2 åœ¨è‡ªå·±çš„ç›®å½•ä¸‹é¢ï¼Œclone ä»£ç </p>\n</li>\n<li>\n<p>3 å®‰è£…å¯¹åº”çš„ä¾èµ–</p>\n<ul>\n<li>\n<p>å¯ä»¥ä½¿ç”¨ sharp æ·˜å® mirror æ¥å®‰è£…æ¯”è¾ƒå¤§çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaGFycC5waXhlbHBsdW1iaW5nLmNvbS9pbnN0YWxsI2NoaW5lc2UtbWlycm9y\">https://sharp.pixelplumbing.com/install#chinese-mirror</span></p>\n</li>\n</ul>\n</li>\n<li>\n<p>4 åˆ›å»ºå¹¶ä¸”è®¾ç½®.env æ–‡ä»¶</p>\n</li>\n<li>\n<p>5 å¼€å¯äº‘æœåŠ¡å¯¹åº”çš„ç«¯å£ (7001) è®¿é—®ã€‚</p>\n<ul>\n<li>\n<p>é˜¿é‡Œäº‘ï¼šå·¦ä¾§å¯¼èˆª â€œæœ¬å®ä¾‹å®‰å…¨ç»„â€ï¼Œâ€œé…ç½®è§„åˆ™â€ï¼Œâ€œæ‰‹åŠ¨æ·»åŠ  &quot; ç«¯å£</p>\n</li>\n<li>\n<p>å…¶ä»–äº‘å¹³å°è¯·è‡ªè¡ŒæŸ¥çœ‹ã€‚</p>\n</li>\n</ul>\n</li>\n<li>\n<p>6 å¯åŠ¨æœåŠ¡å™¨</p>\n<ul>\n<li>\n<p>ç¡®è®¤ mongo,redis åœ¨è¿è¡ŒçŠ¶æ€</p>\n</li>\n<li>\n<p>npm run tsc</p>\n</li>\n<li>\n<p>npm run start</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>äºæ­¤å¯ä»¥å®ŒæˆåŸºæœ¬çš„é¡¹ç›®éƒ¨ç½²ï¼Œä½†æ˜¯è¿™ç§éƒ¨ç½²æ–¹å¼å¯åŠ¨å’Œæ›´æ–°æ—¶è¿‡äºå¤æ‚ï¼Œå­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼š</p>\n<p>ä¸‰ä¸ªé—®é¢˜</p>\n<ul>\n<li>å‰ç½®è½¯ä»¶çš„å®‰è£…ï¼Œå®ƒä»¬åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸­å®‰è£…çš„æ–¹å¼ï¼Œå¯åŠ¨çš„è„šæœ¬ï¼Œé¢„è®¾åˆå§‹çš„æ–¹å¼æœ‰å¯èƒ½éƒ½ä¸ç›¸åŒï¼Œè¿™å°±ç»™æˆ‘ä»¬é€ æˆä¸€ä¸ªå¾ˆå¤§çš„å›°æ‰°ï¼Œå‡å¦‚ä½ åœ¨å¤šå°æœºå™¨ä¸Šéƒ¨ç½²çš„è¯ï¼Œå¯èƒ½ä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ã€‚</li>\n<li>é¡¹ç›®éœ€è¦è¿è¡Œä¸€ç³»åˆ—å¯¹åº”çš„å‘½ä»¤æ‰èƒ½å¯åŠ¨</li>\n<li>é¡¹ç›®æ›´æ–°çš„é—®é¢˜ï¼Œéœ€è¦ä¸€ç³»åˆ—æ‰‹åŠ¨çš„æ­¥éª¤ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç¹çï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™çš„æ­¥éª¤ã€‚æœ‰æ²¡æœ‰æ›´æ–¹ä¾¿çš„æ–¹å¼å¯ä»¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹å‘¢ï¼Ÿ\n<ul>\n<li>å®Œæˆå¯¹åº”çš„ pu å·ä»£ç ï¼Œæ›´æ–°ä¾èµ–ï¼Œå¯åŠ¨åº”ç”¨çš„è¿‡ç¨‹</li>\n<li>æ˜¯åœ¨ç‰¹å®šçš„æäº¤è‡ªåŠ¨è§¦å‘è¿™ä¸ªè¿‡ç¨‹</li>\n</ul>\n</li>\n</ul>\n<p>æƒ³è¦æ›´åŠ æ–¹ä¾¿çš„è¿›è¡Œéƒ¨ç½²å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å·¥å…·ï¼š</p>\n<h2 id=\"docker\"><a class=\"anchor\" href=\"#docker\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZG9ja2VyLmNvbS9wcm9kdWN0cy9kb2NrZXItZGVza3RvcA==\">Docker</span></h2>\n<h3 id=\"ä»‹ç»-4\"><a class=\"anchor\" href=\"#ä»‹ç»-4\">#</a> ä»‹ç»</h3>\n<p><strong>é—®é¢˜</strong><br />\næˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªå·¥å…·å¯ä»¥å¸®æˆ‘ä»¬ä¸€é”®æ™ºèƒ½éƒ¨ç½²ï¼Œå‡å¦‚ä½ è¦éƒ¨ç½²åœ¨å¤šå°ä¸åŒçš„æœºå™¨ä¸Šï¼Œå¯ä»¥ä¸ç”¨åœ¨æ‹…å¿ƒä¸åŒç³»ç»Ÿï¼Œä¸åŒç‰ˆæœ¬çš„å·®å¼‚ï¼Œä»¥åŠè¿è¡Œä¹‹å‰éœ€è¦å®‰è£…ä¸åŒè½¯ä»¶çš„ç—›è‹¦ã€‚<br />\n<strong>è§£å†³</strong><br />\nå½“çº¢çš„è™šæ‹ŸåŒ–è½¯ä»¶ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6L3d3dy5kb2NrZXIuY29tbA==\">Docker</span><br />\nDocker çš„è¿›åŒ–</p>\n<p><img data-src=\"/images/Snipaste_2024-04-26_20-27-53.jpg\" alt=\"Dockerçš„è¿›åŒ–\" /></p>\n<ul>\n<li>ä¼ ç»Ÿè™šæ‹Ÿæœºï¼Œè™šæ‹Ÿç¡¬ä»¶ä»¥åï¼Œéœ€è¦åœ¨ä¸Šé¢å®‰è£…ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿã€‚</li>\n<li>Docker: æ¨å‡ºäº†å®¹å™¨çš„æ¦‚å¿µï¼Œæ¯ä¸ªå®¹å™¨ä¸éœ€è¦å®‰è£…å®Œæˆçš„æ“ä½œç³»ç»Ÿï¼Œé‡Œé¢çš„è¿›ç¨‹ç›´æ¥è¿è¡Œåœ¨ Docker åˆ›é€ çš„å®¿ä¸»å†…æ ¸ä¸­ï¼Œä¸éœ€è¦è™šæ‹Ÿç¡¬ä»¶ã€‚</li>\n</ul>\n<p><strong>Docker çš„ä¼˜ç‚¹</strong></p>\n<ul>\n<li>æ›´å¿«é€Ÿçš„å¯åŠ¨é€Ÿåº¦</li>\n<li>æ›´å°‘çš„èµ„æºå ç”¨</li>\n<li>ä¸€è‡´çš„è¿è¡Œç¯å¢ƒï¼Œä½¿ç”¨æˆ·ä¸å…³æ³¨æ“ä½œç³»ç»Ÿè€Œåªå…³å¿ƒåº”ç”¨ç¨‹åºã€‚</li>\n<li>å¾®æœåŠ¡æ¶æ„ï¼Œdocker å¤©ç”Ÿé€‚é…å¾®æœåŠ¡æ¶æ„ï¼ˆDocker æœ‰åŠ©äºå°†ä¸€ä¸ªå¤æ‚ç³»ç»Ÿåˆ†è§£æˆä¸€ç³»åˆ—å¯ç»„åˆçš„éƒ¨åˆ†ï¼Œè¿™è®©ç”¨æˆ·å¯ä»¥ç”¨æ›´ç¦»æ•£çš„æ–¹å¼æ¥æ€è€ƒå…¶æœåŠ¡ã€‚ç”¨æˆ·å¯ä»¥åœ¨ä¸å½±å“å…¨å±€çš„å‰æä¸‹é‡ç»„è½¯ä»¶ï¼Œä½¿å…¶å„éƒ¨åˆ†æ›´æ˜“äºç®¡ç†å’Œå¯æ’æ‹”ã€‚ï¼‰</li>\n<li>ç”¨æˆ·å¯ä»¥æ›´å‡†ç¡®åœ°æ§åˆ¶æ„å»ºç¯å¢ƒçš„çŠ¶æ€ï¼ŒDocker æ„å»ºæ¯”ä¼ ç»Ÿè½¯ä»¶æ„å»ºæ–¹æ³•æ›´å…·æœ‰å¯é‡ç°æ€§å’Œå¯å¤åˆ¶æ€§ã€‚ä½¿æŒç»­äº¤ä»˜çš„å®ç°å˜å¾—æ›´å®¹æ˜“ã€‚</li>\n</ul>\n<h3 id=\"docker-images\"><a class=\"anchor\" href=\"#docker-images\">#</a> <strong>Docker  images</strong></h3>\n<p>å¯ä»¥åœ¨ https:/hub.docker.com/search?g=&amp;type=image ä¸­è·å–å„ç§å®˜æ–¹çš„é•œåƒï¼Œå¹¶ä¸”å¯ä»¥ä¸Šä¼ ä½ è‡ªå·±çš„è‡ªå®šä¹‰é•œåƒ<br />\n Docker é•œåƒä»“åº“è·å–é•œåƒçš„å‘½ä»¤æ˜¯ docker pull</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä¸‹è½½é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> pull <span class=\"token operator\">&lt;</span>image-name<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>tag<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹ä»¥åŠä¸‹è½½çš„é•œåƒ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">docker</span> images</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># åˆ é™¤é•œåƒ</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">docker</span> rmi <span class=\"token operator\">&lt;</span>image-id<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># ä¸Šä¼ </span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">docker</span> push <span class=\"token operator\">&lt;</span>username<span class=\"token operator\">></span>/<span class=\"token operator\">&lt;</span>repository<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>tag<span class=\"token operator\">></span></pre></td></tr></table></figure><p><strong>ä½¿ç”¨é•œåƒä»£ç†ï¼š</strong></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"registry-mirrors\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">\"https://docker.mirrors.ustc.edu.cn/\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token string\">\"https://reg-mirror.qiniu.com\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h3 id=\"docker-container\"><a class=\"anchor\" href=\"#docker-container\">#</a> <strong>Docker Container</strong></h3>\n<p><strong>å¯åŠ¨ Docker å®¹å™¨</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">-p</span> ä¸»æœºç«¯å£:é•œåƒç«¯å£ <span class=\"token parameter variable\">--name</span> å®¹å™¨åç§° é•œåƒåç§°</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># ä¾‹å¦‚ï¼šï¼ˆ--name å®¹å™¨åç§°çœç•¥ï¼‰</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">81</span>:80 nginx</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># -d  åå°è¿è¡Œ</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># -p  ç«¯å£æ˜ å°„ï¼Œ81 ä¸ºä¸»æœºçš„ç«¯å£ï¼Œ80 ä¸ºé•œåƒç«¯å£</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># --name è‡ªå®šä¹‰å®¹å™¨åç§°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># é•œåƒåç§°ï¼Œå‡å¦‚æœ¬åœ°æ²¡æœ‰ï¼Œä¼šè‡ªåŠ¨ pull ä¸€æ¬¡é•œåƒè¿›è¡Œä¸‹è½½ã€‚</span></pre></td></tr></table></figure><p><strong>å…¶ä»–å‘½ä»¤</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span>  <span class=\"token function\">ps</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># åœæ­¢å®¹å™¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">docker</span> stop container-id</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># åˆ é™¤å®¹å™¨</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token function\">rm</span> container-id</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">docker</span> container start container-id</pre></td></tr></table></figure><p><strong>è¿›å…¥å®¹å™¨å†…éƒ¨</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token operator\">&lt;</span>container-id<span class=\"token operator\">></span> <span class=\"token builtin class-name\">command</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token parameter variable\">-i</span> <span class=\"token builtin class-name\">:</span> å³ä½¿æ²¡æœ‰é™„åŠ ä¹Ÿä¿æŒSTDIN æ‰“å¼€</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token parameter variable\">-t</span> <span class=\"token builtin class-name\">:</span> åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯</pre></td></tr></table></figure><h3 id=\"æŒä¹…åŒ–å®¹å™¨æ•°æ®\"><a class=\"anchor\" href=\"#æŒä¹…åŒ–å®¹å™¨æ•°æ®\">#</a> <strong>æŒä¹…åŒ–å®¹å™¨æ•°æ®</strong></h3>\n<p>ä½¿ç”¨ - v å‚æ•°ï¼Œå¯ä»¥è®¾å®šä¸€ä¸ªæ•°æ®çš„æ˜ å°„å…³ç³»ï¼Œå°†æœ¬åœ°çš„æ–‡ä»¶æ˜ å°„åˆ°å®¹å™¨ä¸­å¯¹åº”çš„æ–‡ä»¶ä¸­å»ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">81</span>:80 <span class=\"token parameter variable\">-v</span> host:container image-name</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#ä¾‹å¦‚ï¼šå°†æœ¬åœ°æ•°æ®å·æ˜ å°„åˆ°å®¹å™¨ä¸­</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">-v</span> /data/db:/data/db mongo</pre></td></tr></table></figure><p><strong>åˆ›å»ºå¯¹åº”çš„æ•°æ®å· volumn</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºæ•°æ®å·</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> volume create <span class=\"token operator\">&lt;</span>volumn-name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#ä¾‹å¦‚ï¼šdocker volume create mongo</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨ volumn æ•°æ®å·</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">-v</span> <span class=\"token operator\">&lt;</span>volumn-name<span class=\"token operator\">></span>:/data/db mongo</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># ä¾‹å¦‚ï¼šdocker run -d -v mongo:/data/db mongo</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># æ£€æŸ¥æ•°æ®å·</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">docker</span> volume inspect <span class=\"token operator\">&lt;</span>volumn-name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># åˆ é™¤æ•°æ®å·</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token function\">docker</span> volume remove mongo</pre></td></tr></table></figure><h3 id=\"dockerfileè‡ªå®šä¹‰é•œåƒ\"><a class=\"anchor\" href=\"#dockerfileè‡ªå®šä¹‰é•œåƒ\">#</a> Dockerfile è‡ªå®šä¹‰é•œåƒ</h3>\n<p>Docker image ä¸­çš„é•œåƒè™½ç„¶éå¸¸å¤šï¼Œä½†æ˜¯ä¸èƒ½å®Œå…¨ç¬¦åˆè‡ªå·±é¡¹ç›®çš„å…¨éƒ¨éœ€æ±‚ï¼Œå¯ä»¥è‡ªå®šä¹‰æ„å»ºä¸€ä¸ªè‡ªå·±çš„é•œåƒã€‚</p>\n<p>Dockerfile æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œç”¨äºæ„å»ºå¯¹åº”çš„é•œåƒã€‚</p>\n<p><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNmcm9t\">æŒ‡ä»¤</span></strong></p>\n<p><strong>Dockerfile ç¤ºä¾‹ï¼š</strong></p>\n<figure class=\"highlight dockerfile\"><figcaption data-lang=\"Docker\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šåŸºç¡€é•œåƒï¼Œä» node14 å¼€å§‹æ„å»º</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> node:14</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œä½œä¸ºé¡¹ç›®è¿è¡Œçš„ä½ç½®</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> mkdir -p /usr/src/app</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šå·¥ä½œåŒºï¼Œåé¢çš„è¿è¡Œä»»ä½•å‘½ä»¤éƒ½æ˜¯åœ¨è¿™ä¸ªå·¥ä½œåŒºä¸­å®Œæˆçš„</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /usr/sec/app</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># ä»æœ¬åœ°æ‹·è´å¯¹åº”çš„æ–‡ä»¶ åˆ° å·¥ä½œåŒº</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> server.js /usr/src/app</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># æ‰§è¡Œå®‰è£…å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> npm install --registry=https://registry.npm.taobao.org</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> npm run tsc</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#å‘ŠçŸ¥å½“å‰ Docker image æš´éœ²çš„æ˜¯ 3000 ç«¯â˜</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">EXPOSE</span> 3000</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼Œä¸€ä¸ª Dockerfile åªèƒ½æœ‰ä¸€ä¸ª</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">CMD</span> node server.js</span></pre></td></tr></table></figure><p><strong>æ„å»ºï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è¿™é‡Œç‰¹åˆ«æ³¨æ„ä¸Šä¸‹æ–‡çš„æ¦‚å¿µï¼Œä¸è¦åœ¨æ ¹ç›®å½•ä½¿ç”¨ Dockerfi1e</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> build <span class=\"token punctuation\">[</span>é€‰é¡¹<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span>ä¸Šä¸‹æ–‡è·¯å¾„/URL/-<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ä¾‹å¦‚ï¼š(åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­è¿è¡Œ)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-t</span> test-node <span class=\"token builtin class-name\">.</span></pre></td></tr></table></figure><p><strong>.dockerignore æ–‡ä»¶ç”¨äºå¿½ç•¥ docker ä¸­éœ€è¦æ‰“åŒ…è¿›é•œåƒçš„æ–‡ä»¶</strong></p>\n<p><strong>.dockerignore ç¤ºä¾‹ï¼š</strong></p>\n<figure class=\"highlight dockerfile\"><figcaption data-lang=\"Docker\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># Microbundle cache</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>.rpt2_cache/</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>.rts2_cache_cjs/</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>.rts2_cache_es/</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>.rts2_cache_umd/</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># Optional REPL history</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>.node_repl_history</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># Output of 'npm pack'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>*.tgz</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># Yarn Integrity file</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>.yarn-integrity</pre></td></tr></table></figure><p><strong>å¤šä¸ªå®¹å™¨ç›¸äº’é€šä¿¡ï¼š</strong></p>\n<p>è¦ç‚¹ï¼šDocker ä¸­æ¯ä¸€ä¸ª container åº”è¯¥åªå®Œæˆä¸€ä¸ªå·¥ä½œï¼Œå¹¶ä¸”å°†å®ƒåšå¥½ã€‚</p>\n<p><strong>ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>è§£è€¦ï¼Œè¿™æ ·ä¸åŒçš„æœåŠ¡å’Œåç«¯ä»£ç €éƒ½å¯ä»¥å®Œå…¨åˆ†ç¦»å¼€æ¥ï¼Œæ–¹ä¾¿ç®¡ç†ä»¥åŠæœªæ¥çš„æ‰©å±•ã€‚</li>\n<li>æœåŠ¡çš„æ›´æ–°ä»¥åŠå‡çº§éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚</li>\n<li>åœ¨ä¸€ä¸ª container ä¸­ï¼Œå¯åŠ¨å¤šä¸ªä¸åŒçš„è¿›ç¨‹ï¼Œéœ€è¦ä¸€ä¸ªè¿›ç¨‹ç®¡ç†å™¨</li>\n</ul>\n<p><strong>é€šä¿¡è¿‡ç¨‹ï¼š</strong></p>\n<p>docker å®¹å™¨ä¹‹é—´ä¸èƒ½ç›´æ¥è¿›è¡Œè®¿é—®ï¼Œè€Œæ˜¯åº”è¯¥é€šè¿‡ docker ç½‘ç»œè¿›è¡Œè®¿é—®ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åˆ›å»º docker ç½‘ç»œ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> network create <span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># åœ¨åˆ›å»ºçš„ docker ç½‘ç»œä¸­å¯åŠ¨æœåŠ¡</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--network</span> <span class=\"token builtin class-name\">test</span> <span class=\"token parameter variable\">--name</span> mongo <span class=\"token parameter variable\">-p</span> <span class=\"token number\">27017</span>:27017 mongo</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å°†åŸæ¥é¡¹ç›®ä¸­çš„çš„ ip åœ°å€æ›¿æ¢ä¸º docker çš„ name åç§°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># ä¾‹å¦‚åŸæ¥ä¸ºï¼šmongodb://localhost:27017/api  çš„åœ°å€è¦æ›¿æ¢ä¸ºï¼š mongodb://mongo:27017/api</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># åªæœ‰åœ¨åŒä¸€ä¸ª docker ç½‘ç»œä¸­å¯åŠ¨çš„é¡¹ç›®é—´æ‰èƒ½è¿›è¡Œè®¿é—®ã€‚</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--network</span> <span class=\"token builtin class-name\">test</span> <span class=\"token parameter variable\">--name</span> use <span class=\"token parameter variable\">-p</span> <span class=\"token number\">80</span>:3000 use</pre></td></tr></table></figure><p>å¦‚æœæ¯ä¸ªå®¹å™¨éƒ½è¦è¿™æ ·æ“ä½œä¸€éå°±ä¼šæ˜¾å¾—éå¸¸éº»çƒ¦ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨ Docer compose å·¥å…·ï¼ˆé…ç½® docker-compose.yml æ–‡ä»¶ï¼‰</p>\n<p>Docker compose å·¥å…·</p>\n<p>Docker compose æ˜¯ Docker å®˜æ–¹æ¨å‡ºçš„å·¥å…·ï¼Œç”¨æ¥ç®¡ç†å’Œå…±äº«å¤šä¸ªå®¹å™¨çš„åº”ç”¨ï¼ŒMac ç³»ç»Ÿå’Œ Windows ç³»ç»Ÿå®‰è£…å®¢æˆ·ç«¯æ—¶è‡ªå¸¦ã€‚<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vY29tcG9zZS9pbnN0YWxsLw==\">Linux éœ€è¦å•ç‹¬å®‰è£…</span>ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker-compose</span> version</pre></td></tr></table></figure><p><strong>é…ç½®ï¼š</strong></p>\n<ul>\n<li>docker compose é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„ yml æ–‡ä»¶ï¼Œè¿›è¡Œé…ç½®ï¼Œè¿™ä¸ªæ–‡ä»¶å¿…é¡»å‘½åä¸º<strong> docker-compose.yml</strong></li>\n<li>docker-compose æ‰€æœ‰çš„å­—æ®µå‚è€ƒæ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vY29tcG9zZS9jb21wb3NlLWZpbGUvY29tcG9zZS1maWxlLXYzLw==\">https://docs.docker.com/compose/compose-file/compose-file-v3/</span></li>\n</ul>\n<p><strong>docker-compose.yml æ–‡ä»¶é…ç½®ç¤ºä¾‹ï¼š</strong></p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span> <span class=\"token comment\"># docker æŒ‡ä»¤ç‰ˆæœ¬</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è¦å¯åŠ¨çš„æœåŠ¡</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">test-mongo</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># æœåŠ¡åç§°ï¼Œè¿™é‡Œçš„æœåŠ¡åç§°å¯¹åº”ç€å®¹å™¨é€šä¿¡æ—¶çš„å‰ç¼€ï¼</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mongo <span class=\"token comment\"># ä½¿ç”¨çš„é•œåƒåç§°</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>mongo <span class=\"token comment\"># å®¹å™¨åç§°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># ä½¿ç”¨çš„æ•°æ®å·æ˜ å°„</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'.docker-volumes/mongo/data:/data/db'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># ç«¯å£æ˜ å°„</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token punctuation\">-</span> 27017<span class=\"token punctuation\">:</span><span class=\"token number\">27017</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è®¾ç½®ç¯å¢ƒå˜é‡</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token punctuation\">-</span> MONGO_INITDB_ROOT_USERNAME=admin  <span class=\"token comment\"># å†…ç½®çš„ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥åˆå§‹åŒ–æ·»åŠ ä¸€ä¸ª User</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token punctuation\">-</span> MONGO_INITDB_ROOT_PASSWORD=pass</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">env_file</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è®¾ç½®ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œå°†æ•æ„Ÿä¿¡æ¯æ”¾ç½®åˆ°ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">-</span> .env</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">test-use</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># ç¬¬äºŒä¸ªé¡¹ç›®ï¼Œæ³¨æ„å¯¹é½å…³ç³»</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># é…ç½®æ‰€ä¾èµ–çš„æœåŠ¡</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">-</span> test<span class=\"token punctuation\">-</span>mongo</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è®¾ç½®æ„å»ºé…ç½®</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> . <span class=\"token comment\"># æ“ä½œä¸Šä¸‹æ–‡ä¸ºå½“å‰ç›®å½•</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token key atrule\">dockerfile</span><span class=\"token punctuation\">:</span> Dockerfile <span class=\"token comment\"># åŸºäº Dockerfile è¿›è¡Œæ„å»º</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>use<span class=\"token punctuation\">-</span>image</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>use</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">-</span> 7001<span class=\"token punctuation\">:</span><span class=\"token number\">7001</span></pre></td></tr></table></figure><p><strong>å¯åŠ¨ä»¥åŠå…³é—­ï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¯åŠ¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker-compose</span> up <span class=\"token parameter variable\">-d</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å…³é—­</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">docker-compose</span> down</pre></td></tr></table></figure><h3 id=\"æ•°æ®åº“é…ç½®\"><a class=\"anchor\" href=\"#æ•°æ®åº“é…ç½®\">#</a> æ•°æ®åº“é…ç½®</h3>\n<p><strong>æ•°æ®åº“å‡†å¤‡å·¥ä½œ</strong></p>\n<ul>\n<li>æ•°æ®åº“é…ç½®ï¼Œåˆå§‹åŒ–å·¥ä½œï¼Œæ¯”å¦‚æ’å…¥ä¸€äº›ç‰¹å®šçš„æ•°æ®</li>\n<li>é¿å…ä½¿ç”¨ root ç”¨æˆ·å»å¯åŠ¨æœåŠ¡ï¼Œä»è€Œæé«˜å®‰å…¨æ€§ï¼ˆé…ç½®æ•°æ®åº“è®¿é—®æƒé™ï¼‰</li>\n</ul>\n<p><strong>ç‰¹æ®Šçš„åˆå§‹åŒ–æ•°æ®åº“çš„ä½ç½®ï¼š/docker-entrypoint-initdb.dï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„è„šæœ¬ä¼šåœ¨å®¹å™¨å¯åŠ¨å‰è‡ªåŠ¨æ‰§è¡Œï¼‰</strong></p>\n<ul>\n<li>\n<p>å¯ä»¥åˆ›å»º js æ–‡ä»¶æˆ–è€… sh æ–‡ä»¶ï¼ˆshellï¼‰è¿›è¡Œæ‰§è¡Œã€‚</p>\n</li>\n<li>\n<p>mongoDBï¼šhttps:hub.docker,com/_/mongo</p>\n</li>\n<li>\n<p>Postgres:<span class=\"exturl\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9fbHBvc3RncmVz\">https://hub.docker.com/_lpostgres</span></p>\n</li>\n<li>\n<p>ç‰¹åˆ«æ³¨æ„ï¼Œåªæœ‰åœ¨æ•°æ®åº“æ²¡æœ‰è¢«åˆ›å»ºçš„æƒ…å†µä¸‹ï¼Œä¹Ÿå°±æ˜¯<strong>æ•°æ®åº“çš„æ–‡ä»¶å¤¹æ˜¯ç©ºçš„æƒ…å†µä¸‹</strong>ï¼Œè„šæœ¬æ‰ä¼šè¢«æ‰§è¡Œã€‚</p>\n</li>\n</ul>\n<p><strong>docker-compose.yml æ–‡ä»¶ä¸­é…ç½® env_file ä¸ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„.env æ–‡ä»¶ã€‚</strong></p>\n<p>å¯ä»¥ä½¿ç”¨ js æ–‡ä»¶æˆ–è€… sh æ–‡ä»¶ï¼Œä½†æ˜¯ç”±äºæ­¤æ–‡ä»¶åœ¨å…¶ä½™æ–‡ä»¶ä¹‹å‰è¿è¡Œï¼Œæ­¤æ—¶ js æ–‡ä»¶ä¸­é€šè¿‡ process.env è·å–ä¸åˆ°æ‰€éœ€è¦çš„ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥é€‰ç”¨ sh æ–‡ä»¶ã€‚</p>\n<p><strong>Shell ä¸­ EOF&lt;&lt; çš„ç”¨æ³•</strong><br />\nåœ¨ Shell ä¸­æˆ‘ä»¬é€šå¸¸å°† EOF ä¸ &lt; ç»“åˆä½¿ç”¨ï¼Œè¡¨ç¤ºï¼ŒäºŒå€ºçš„è¾“å…¥ä½œä¸ºå­å‘½ä»¤æˆ–å­ Shell çš„è¾“å…¥ï¼Œç›´åˆ°é‡åˆ° EOF ä¸ºæ­¢ï¼Œå†è¿”å›åˆ°ä¸»è°ƒ Shellã€‚.</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token shebang important\">#!/bin/bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mongo <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>use admin</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.auth('root','123456')</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>use lego</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db.createUser(&#123;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tuser: '<span class=\"token variable\">$MONGO_DB_USERNAME</span>',</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tpwd: '<span class=\"token variable\">$MONGO_DB_PASSWORD</span>',</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\troles: [&#123;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\trole: 'readWrite',</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\tdb: 'lego'</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t&#125;]</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>&#125;)</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>db.createCollection('works')</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>db.works.insertMany([</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t&#123;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  \t\tid:19,</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  \t\ttitle:'æµ‹è¯•æ ‡é¢˜',</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  \t\tname:'å¼ ä¸‰'</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t&#125;</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>])</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>EOF</span></pre></td></tr></table></figure><h3 id=\"ä¼˜åŒ–é•œåƒå¤§å°\"><a class=\"anchor\" href=\"#ä¼˜åŒ–é•œåƒå¤§å°\">#</a> ä¼˜åŒ–é•œåƒå¤§å°</h3>\n<p><strong>Docker é•œåƒæ„å»ºä¼˜åŒ–ï¼šä½¿ç”¨ alpine ç‰ˆæœ¬çš„é•œåƒ</strong></p>\n<p>ä¼˜åŒ–é•œåƒå¤§å°  ï¼š   ä»€ä¹ˆæ˜¯ Alpine Linux:https:l/alpinelinux.orgl</p>\n<p><strong>Alpine çš„ä¼˜ç‚¹</strong></p>\n<ul>\n<li>\n<p>Small å°</p>\n<ul>\n<li>\n<p>é»˜è®¤è½¯ä»¶åŒ…ï¼Œalpine é€‰æ‹© busybox</p>\n</li>\n<li>\n<p>C è¿è¡Œåº“ï¼Œä¸€èˆ¬ä¼šç”¨ glibc,alpine é€‰æ‹© musl</p>\n</li>\n</ul>\n</li>\n<li>\n<p>æœ€ç®€ä¾èµ–ï¼ŒSimple</p>\n<ul>\n<li>\n<p>å¾ˆå¤šå†…ç½®è½¯ä»¶çš„æ’ä»¶éƒ½å»æ‰ã€‚</p>\n</li>\n<li>\n<p>å›½é™…åŒ–å†…å®¹éƒ½è¢«åˆ é™¤</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Secure å®‰å…¨</p>\n</li>\n</ul>\n<p><strong>ä½¿ç”¨ alpine ç‰ˆæœ¬çš„é•œåƒå¯ä»¥å¤§å¤§å‡å°é•œåƒçš„ä½“ç§¯ã€‚</strong></p>\n<p><strong>DockerBuild æ„å»ºæé€Ÿ</strong></p>\n<p>docker ä¸­è¿è¡Œå‘½ä»¤æ˜¯åŸºäºä¸€å±‚ä¸€å±‚çš„ï¼Œå½“ä¿®æ”¹æ–‡ä»¶ä¹‹åï¼ŒCOPY åçš„ç¼“å­˜å…¨éƒ¨å¤±æ•ˆï¼Œè¿™æ—¶å°±ä¼šé‡æ–°æ‰§è¡Œåç»­å‘½ä»¤ï¼Œä½¿ç”¨ä¸äº†ç¼“å­˜ï¼Œå¯¼è‡´æ„å»ºé€Ÿåº¦å¾ˆæ…¢ã€‚æ­¤æ—¶å¯ä»¥å°†åŸæ¥ COPY æ–‡ä»¶å¤¹ï¼Œæ”¹ä¸º COPY å…·ä½“çš„æ–‡ä»¶ï¼ˆè¿›è¡Œæ‹†åˆ†ï¼‰ï¼Œä»¥æ›´å¥½åœ°ä½¿ç”¨ç¼“å­˜ã€‚</p>\n<h3 id=\"éƒ¨ç½²-3\"><a class=\"anchor\" href=\"#éƒ¨ç½²-3\">#</a> éƒ¨ç½²</h3>\n<p><strong>å®‰è£… Dockerï¼ˆæœ‰çš„äº‘æœåŠ¡å¯ä»¥è‡ªå®šä¹‰å®‰è£…ï¼‰</strong></p>\n<p>Ubuntuï¼šï¼ˆéœ€è¦ä½¿ç”¨ root è´¦æˆ·è¿›è¡Œå®‰è£…ï¼‰</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29i\">https://www.runoob</span>..com/docker/ubuntu-docker-install.html</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2luc3RhbGwvdWJ1bnR1Lw==\">https://docs.docker.com/engine/install/ubuntu/</span></li>\n</ul>\n<p><strong>é…ç½®ç”¨æˆ·ç»„</strong><br />\nå› ä¸ºæ˜¯ root å®‰è£…ï¼Œæ™®é€šç”¨æˆ·æ‰§è¡Œå¯¹åº”çš„å‘½ä»¤çš„æ—¶å€™æœ‰å¯èƒ½ä¼šæŠ¥é”™ï¼š<br />\n <code>Can't connect to docker daemonGot permission denied while trying to connect to the Docker daemonsocket at unix:///var/run/docker.sock</code></p>\n<p><strong>éœ€è¦å°†å¯¹åº”çš„ç”¨æˆ·æ·»åŠ åˆ° docker çš„ç”¨æˆ·ç»„ä¸­ã€‚</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#usermod å‘½ä»¤ä¿®æ”¹ç”¨æˆ·è´¦æˆ·</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#a--append æ·»åŠ  - G--groups</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ç»„çš„åç§°</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sudo</span> usermod-aG dockerä½ çš„ç”¨æˆ·å</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#å¦‚æœç»„ä¸å­˜åœ¨ï¼Œæ·»åŠ å¯¹åº”çš„ docker ç»„</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">groupadd</span> <span class=\"token function\">docker</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#æŸ¥çœ‹ä¸€ä¸ªç”¨æˆ·æ‰€å±çš„ç»„</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">groups</span></pre></td></tr></table></figure><p><strong>æ·»åŠ ä¸‹è½½é•œåƒï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># root</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vim</span> /etc/docker/daemon.json</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token string\">\"registry-mirrors\"</span><span class=\"token builtin class-name\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token string\">\"https://docker.mirrors.ustc.edu.cn/\"</span>,</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token string\">\"https://reg-mirror.qiniu.com\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p><strong>è¿è¡Œï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ‹‰æœ€æ–°çš„ä»£ç </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> pull</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å…ˆæŸ¥çœ‹ç›®å‰ç«¯å£æ˜¯å¦è¢«å ç”¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># å¦‚æœè¢«å ç”¨ï¼Œé‡Šæ”¾ç«¯å£</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æˆ–è€…æ”¹å˜ docker-compose,yml çš„æ˜ å°„ç«¯å£</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">docker-compose</span> up <span class=\"token parameter variable\">-d</span></pre></td></tr></table></figure><h1 id=\"yamlè¯­è¨€\"><a class=\"anchor\" href=\"#yamlè¯­è¨€\">#</a> YAML è¯­è¨€</h1>\n<p>YAML<br />\n (YAML Ain't a Markup Language) æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼Œå®ƒä½¿ç”¨ç©ºæ ¼ä½œä¸ºç¼©è¿›ï¼Œçœ‹èµ·æ¥éå¸¸çš„ç®€æ´ï¼Œå¯è¯»æ€§éå¸¸çš„å¥½ï¼Œéå¸¸é€‚åˆä¸€äº›å†…å®¹å¤§çº²å’Œé…ç½®æ–‡ä»¶ã€‚ä»–æœ€ç»ˆæ˜¯é€šè¿‡å·¥å…·è½¬åŒ–ä¸º JSON æ–‡ä»¶çš„ï¼Œä½†æ˜¯ YAML çš„å¯è¯»æ€§æ¯” JSON å¼ºå¾ˆå¤šï¼Œå› æ­¤å¤æ‚çš„é…ç½®æ–‡ä»¶ä¸€èˆ¬ä½¿ç”¨ YAMLã€‚</p>\n<p><strong>ä¾‹å¦‚ï¼š</strong></p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å­—ç¬¦ä¸²ä¸ç”¨åŠ å¼•å·</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> value</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">boolean</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å­—ç¬¦ä¸²ä¸ç”¨åŠ å¼•å·ï¼Œä½†æ˜¯åŠ ä¸Šä¹Ÿä¸ä¼šæŠ¥é”™</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key atrule\">quote_string</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'quote String'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># å¤šè¡Œå­—ç¬¦ä¸²ä½¿ç”¨ literal block è¯­æ³•ï¼šä¹Ÿå°±æ˜¯ç«–çº¿</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token key atrule\">mutiple_string</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  line one</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  line two</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  line three</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># collection types é›†åˆç±»å‹</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œæœ€å¥½ä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼ï¼Œä¸æ˜¯ä¸¤ä¸ªç©ºæ ¼ä¹Ÿæ²¡å…³ç³»ï¼Œå¯¹é½å°±è¡Œ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token key atrule\">person</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dmq</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token key atrule\">age</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token key atrule\">address</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">city</span><span class=\"token punctuation\">:</span> ä¸Šæµ·</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># sequences æ•°ç»„æˆ–è€…åˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token key atrule\">hobbies</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">-</span> Item 1</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">-</span> Item 2</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> weson</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> xyz</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token key atrule\">address</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token key atrule\">city</span><span class=\"token punctuation\">:</span> åŒ—äº¬</pre></td></tr></table></figure><h1 id=\"github-action\"><a class=\"anchor\" href=\"#github-action\">#</a> Github Action</h1>\n<p>Github å®˜æ–¹çš„ CI/CD å·¥å…·ï¼Œä½œä¸º github çš„äº²å„¿å­ï¼Œå’Œ github å‡ ä¹æ˜¯å®Œç¾çš„æ— ç¼è¡”æ¥çš„ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚</p>\n<p>CI   CD å¸¸ç”¨å·¥å…·ï¼š</p>\n<ul>\n<li>Github actions <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vZW4vYWN0aW9ucw==\">https://docs.github.com/en/actions</span></li>\n<li>Travis <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudHJhdmlzLWNpLmNvbS8=\">https://www.travis-ci.com/</span></li>\n<li>CircleCl <span class=\"exturl\" data-url=\"aHR0cHM6Ly9jaXJjbGVjaS5jb20v\">https://circleci.com/</span></li>\n<li>Jenkins <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamVua2lucy5pby8=\">https://www.jenkins.io/</span></li>\n<li>ä¼˜åŠ¿è®¨è®ºï¼šhtps:/www.zhihu.com/question/306195033/answer/1870322118</li>\n</ul>\n<p><img data-src=\"/images/Snipaste_2024-04-27_18-37-04.jpg\" alt=\"/images/Snipaste_2024-04-16_12-54-33.jpg\" /></p>\n<p><strong>Workflow</strong><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vY24vYWN0aW9ucy9sZWFybi1naXRodWItYWN0aW9ucy91bmRlcnN0YW5kaW5nLWdpdGh1Yi1hY3Rpb25zI3dvcmtmbG93cw==\">https://docs.github.com/cn/actions/learn-github-actions/understanding-github-actions#workflows</span><br />\nWorkflow æ˜¯ä¸€ä¸ªå¯é…ç½®çš„è‡ªåŠ¨åŒ–æµç¨‹ï¼Œå¯ä»¥åŒ…å«å¤šä¸ª jobs, é€šè¿‡ä¸€ä¸ªåœ¨ repo å½“ä¸­çš„ yml æ–‡ä»¶æ¥å®šä¹‰å¯¹åº”çš„æµç¨‹ï¼Œä¸€ä¸ª repo å¯ä»¥åŒ…å«å¤šä¸ª workflowã€‚<br />\n<strong>Events</strong><br />\nEvent æ˜¯è§¦å‘ workflow çš„ç‰¹æ®Šäº‹ä»¶ï¼Œæ¯”å¦‚ pull request,push æˆ–è€… issue, ä¹Ÿå¯ä»¥å®Œå…¨è‡ªå®šä¹‰ï¼Œå®Œæ•´åˆ—è¡¨è¯·çœ‹ï¼šhttps:/docs.github.com/cn/actions/learn-github-actions/events-that-trigger-workflows</p>\n<p><strong>Jobs</strong></p>\n<p>Job æ˜¯ Workflow å½“ä¸­ä¸€ç³»åˆ—çš„å¯æ‰§è¡Œæ­¥éª¤ï¼Œæ¯ä¸ª Job æ˜¯åœ¨åŒä¸€ä¸ª runner ä¸­è¿›è¡Œçš„ï¼ˆ(Runner æ˜¯æŒ‡å¤„äº github çš„ä¸€å°ç‰¹æ®Šçš„è™šæ‹Ÿæœºï¼Œæ”¯æŒå„ç§æ“ä½œç³»ç»Ÿ)ï¼Œæ¯ä¸ªæ­¥éª¤æˆ–è€…æ˜¯ä¸€ä¸ª shell è„šæœ¬ï¼ŒæŠ‘æˆ–æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„ action, æ¯ä¸ªæ­¥éª¤æ˜¯æŒ‰é¡ºåºæ‰§è¡Œï¼Œå¹¶ä¸”äº’ç›¸ä¾èµ–çš„ã€‚</p>\n<p><img data-src=\"Snipaste_2024-04-27_19-54-06.jpg\" alt=\"/images/Snipaste_2024-04-16_12-54-33.jpg\" /></p>\n<p><strong>Actions</strong></p>\n<p>Action æ˜¯ github actions ä¸­çš„ä¸€ä¸ªè‡ªå®šä¹‰åº”ç”¨ï¼Œå®ƒå¯ä»¥è¿è¡Œä¸€ç³»åˆ—å¤æ‚çš„å¹¶ä¸”å¸¸ç”¨çš„ä»»åŠ¡ï¼Œä½¿ç”¨ action å¯ä»¥å¸®æˆ‘ä»¬å‡å°‘åœ¨ workflow ä¸­å†™é‡å¤ä»£ç ï¼ŒGithub æä¾›äº†éå¸¸å¤šå¸¸ç”¨çš„ action, å¯ä»¥åœ¨<span class=\"exturl\" data-url=\"aHR0cHM6Z2l0aHViLmNvbS9tYXJrZXRwbGFjZT90eXBlPWFjdGlvbnM=\">è¿™é‡ŒæŸ¥é˜…</span>ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å†™è‡ªå·±çš„ actionã€‚</p>\n<p><strong>github secrets</strong></p>\n<p>é¡¹ç›®ä¸­æœ‰çš„ç§å¯†ä¿¡æ¯ä¸å¸Œæœ›å…¬å¼€æš´éœ²ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å°†ç§å¯†ä¿¡æ¯å†™é“ env æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ gitingore å°†å…¶å¿½ç•¥æ‰ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªåšæ³•å°±æ˜¯ github secretsï¼Œåœ¨ github å®˜ç½‘è®¾ç½® github secretï¼Œç„¶ååœ¨æ–‡ä»¶ä¸­ç›´æ¥ä¹¦å†™å˜é‡ã€‚</p>\n<p><strong>ä¾‹å¦‚ï¼š.github æ–‡ä»¶å¤¹ä¸‹ workflow æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª yml æ–‡ä»¶ï¼Œå†™å…¥ï¼š</strong></p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Github Actions Demo</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>push<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">Check-Github-actions</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo \"triggered by a $&lt;<span class=\"token tag\">!--swig</span>ï¿¼5<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span> event\"</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo \"running on a $&lt;<span class=\"token tag\">!--swig</span>ï¿¼6<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span> server hosted by github\"</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> check out repo code</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2 <span class=\"token comment\"># åœ¨å·¥ä½œæµç¨‹ä¸­æ£€å‡ºä»£ç ä»“åº“çš„å†…å®¹ã€ç¡®ä¿å·¥ä½œæµç¨‹å§‹ç»ˆä½¿ç”¨ä¸€è‡´çš„ä»£ç ç‰ˆæœ¬</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo \"the $&lt;<span class=\"token tag\">!--swig</span>ï¿¼7<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span> has been cloned\"</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> List files in the repo</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          ls $</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token key atrule\">width</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'vikingmute/lego-bricks'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> List files in the repo</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>          ls $</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v2</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'16'</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> node <span class=\"token punctuation\">-</span>v</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install <span class=\"token punctuation\">-</span>g typescript</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> tsc <span class=\"token punctuation\">-</span>v</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token key atrule\">SECRET-SSH-ACTIONS</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token comment\">#ä½¿ç”¨ ssh-action å®Œæˆè¿œç¨‹ç™»é™†ï¼šæ–‡æ¡£åœ°å€ï¼šhttps://github.com/appleboy/ssh-action</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> appleboy/ssh<span class=\"token punctuation\">-</span>action@master </pre></td></tr><tr><td data-num=\"36\"></td><td><pre>          <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> $&lt;<span class=\"token tag\">!--swig</span>ï¿¼10<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            username: $</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            password: $</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            script_stop: true</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            script: |</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>              pwd</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>              ls -l</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>              touch secret.txt</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>              echo $ >> secret.txt</span></pre></td></tr></table></figure><h1 id=\"è‡ªåŠ¨åŒ–éƒ¨ç½²\"><a class=\"anchor\" href=\"#è‡ªåŠ¨åŒ–éƒ¨ç½²\">#</a> è‡ªåŠ¨åŒ–éƒ¨ç½²</h1>\n<h2 id=\"æ¨é€è¿œç¨‹é•œåƒä»“åº“\"><a class=\"anchor\" href=\"#æ¨é€è¿œç¨‹é•œåƒä»“åº“\">#</a> æ¨é€è¿œç¨‹é•œåƒä»“åº“</h2>\n<p><strong>æ™®é€šçº¿ä¸Šæ›´æ–°æµç¨‹ï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ¯æ¬¡ä»£ç æ›´æ–°ä»¥åï¼Œç™»å½•åˆ° ssh æœåŠ¡å™¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># å…³é—­æœåŠ¡</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">docker-compose</span> down</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æ›´æ–°ä»£ç </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">git</span> pull</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># å‡å¦‚æœ‰.envï¼Œçš„æ›´æ–°éœ€è¦é‡æ–°è®¾ç½®ï¼Œenv æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># é‡æ–° build åº”ç”¨é•œåƒ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">docker-compose</span> build lego-backend</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># é‡å¯æœåŠ¡</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token function\">docker-compose</span> up <span class=\"token parameter variable\">-d</span></pre></td></tr></table></figure><p><strong>å¼Šç«¯ï¼š</strong></p>\n<ul>\n<li>\n<p>åˆæ¬¡ä¸Šçº¿å’Œæ›´æ–°å±äºä¸¤æ­¥</p>\n</li>\n<li>\n<p>åˆæ¬¡ä¸Šçº¿éœ€è¦ç‰¹åˆ«çš„æ“ä½œï¼Œå°±æ˜¯ä¹‹å‰æ‰‹åŠ¨éƒ¨ç½²ä¸Šçº¿çš„è¿è¡Œçš„è¿‡ç¨‹</p>\n<ul>\n<li>\n<p>clone ä»£ç </p>\n</li>\n<li>\n<p>è®¾ç½®ç¯å¢ƒå˜é‡.env</p>\n</li>\n<li>\n<p>docker-compose up -d</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>è¿½æ±‚çš„æˆæœï¼š</strong></p>\n<p><strong>æ¯æ¬¡æäº¤ï¼Œå¯ä»¥è‡ªåŠ¨ä¸€æ¬¡æ€§çš„éƒ¨ç½²åˆ°ä»»ä½•æœåŠ¡å™¨ï¼Œå®ç°åˆæ¬¡å¯åŠ¨æˆ–è€…æ›´æ–°çš„æ•ˆæœï¼Œè¿™æ‰æ˜¯ä¸€ä¸ªå®Œç¾çš„ devops çš„æµç¨‹</strong></p>\n<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>\n<p>å°†ä¸Šé¢æœ¬åœ°çš„é•œåƒå­˜åœ¨äº docker hub æœåŠ¡å™¨ä¸­ï¼Œè¿™æ ·æ¯æ¬¡å°±ä¸ç”¨é‡æ–° buildï¼Œè€Œæ˜¯ç›´æ¥æ‹‰å–ã€‚</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">lego-redis</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    image<span class=\"token punctuation\">:</span>redis<span class=\"token punctuation\">:</span><span class=\"token number\">6</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">lego-mongo</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    image<span class=\"token punctuation\">:</span>mongo<span class=\"token punctuation\">:</span>latest</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">lego-backend</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    image<span class=\"token punctuation\">:</span>lego<span class=\"token punctuation\">-</span>backend</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#æˆ‘ä»¬éœ€è¦æ¯æ¬¡æ‰‹åŠ¨çš„ build é•œåƒï¼Œä¹Ÿå°±è¯´é•œåƒåªå­˜åœ¨äºæœ¬åœ°</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">...</span><span class=\"token punctuation\">...</span>context<span class=\"token punctuation\">:</span>.</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    dockerfile<span class=\"token punctuation\">:</span>Dockerfile</pre></td></tr></table></figure><p><strong>æ”¹ä¸ºï¼š</strong></p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ›´å¥½çš„æ–¹æ¡ˆ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># ä¸éœ€è¦ä»»ä½•ä»£ç åº“ä¸­çš„æ–‡ä»¶ï¼Œåªéœ€è¦ä¸€ä¸ª docker-compose,yml æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å°±å¯ä»¥è½»æ¾çš„åœ¨ä»»ä½•æœåŠ¡å™¨è¿è¡Œ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">lego-redis</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    image<span class=\"token punctuation\">:</span>redis<span class=\"token punctuation\">:</span><span class=\"token number\">6</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  lego<span class=\"token punctuation\">-</span>mongo</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    image<span class=\"token punctuation\">:</span>mongo<span class=\"token punctuation\">:</span>latest</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">lego-backend</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># ä¸éœ€è¦ build, è€Œæ˜¯å­˜åœ¨äº docker hub æœåŠ¡å™¨ä¸­ï¼Œå¯ä»¥æ¯æ¬¡ç›´æ¥æ‹‰å–</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    image<span class=\"token punctuation\">:</span>lego<span class=\"token punctuation\">-</span>backend<span class=\"token punctuation\">:</span>1.0.1</pre></td></tr></table></figure><p><strong>docker hub å…è´¹ç‰ˆæœ‰é™åˆ¶ï¼Œæ¨èä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ï¼š</strong></p>\n<p><strong><span class=\"exturl\" data-url=\"aHR0cHM6bFd3dy5hbGl5dW4uY29tL3Byb2R1Y3QvYWNy\">é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ ACR</span></strong><br />\n ä¸ªäººç‰ˆå®Œå…¨å…è´¹</p>\n<p>åˆ›å»ºé•œåƒä»“åº“ä¹‹åï¼Œéœ€è¦å°†æœ¬åœ°é•œåƒæ¨é€åˆ° ACR ä»“åº“ä¸­ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ¥åˆ°é•œåƒä»“åº“çš„åŸºæœ¬ä¿¡æ¯é¡µé¢</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># ç™»å½•</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">docker</span> login <span class=\"token parameter variable\">--username</span><span class=\"token operator\">=</span>ç”¨æˆ·å registry.cn-hangzhou.aliyuncs.com</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># tag ä¸¤ç§æ–¹å¼ï¼š</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 1: ä½¿ç”¨ tag bui1d</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">docker</span> build--tag <span class=\"token string\">\"registry.cn-hangzhou.aliyuncs.com/dmq00/test:[é•œåƒç‰ˆæœ¬å·]\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 2: ç»™ build å¥½çš„æ‰“ tag</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">docker</span> tag <span class=\"token punctuation\">[</span>ImageId<span class=\"token punctuation\">]</span> registry.cn-hangzhou.aliyuncs.com/dmq00/test:<span class=\"token punctuation\">[</span>é•œåƒç‰ˆæœ¬å·<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹é•œåƒæ˜¯å¦ build å®Œæˆ</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token function\">docker</span> images</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># æ¨é€é•œåƒ</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token function\">docker</span> push registry.cn-hangzhou.aliyuncs.com/dmq00/test:<span class=\"token punctuation\">[</span>é•œåƒç‰ˆæœ¬å·<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># åœ¨é˜¿é‡Œäº‘ ACR ç•Œé¢æ£€æŸ¥çœ‹æ˜¯å¦å·²ç»å­˜åœ¨</span></pre></td></tr></table></figure><h2 id=\"github-actionsè‡ªåŠ¨éƒ¨ç½²\"><a class=\"anchor\" href=\"#github-actionsè‡ªåŠ¨éƒ¨ç½²\">#</a> Github Actions è‡ªåŠ¨éƒ¨ç½²</h2>\n<p><strong>ä½¿ç”¨ github actions åŠ æˆè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå½“æ¨é€ä»£ç åˆ° github ä»“åº“æ—¶ï¼Œè®©æˆ‘ä»¬çš„ä»£ç è‡ªåŠ¨æäº¤é•œåƒåˆ°é•œåƒä»“åº“ã€‚</strong></p>\n<p><strong>å¤§ä½“åˆ†ä¸ºä¸¤æ­¥</strong></p>\n<ul>\n<li>\n<h6 id=\"åœ¨githubæœåŠ¡å™¨ä¸Šbuild-imageå¹¶ä¸”push\"><a class=\"anchor\" href=\"#åœ¨githubæœåŠ¡å™¨ä¸Šbuild-imageå¹¶ä¸”push\">#</a> åœ¨ github æœåŠ¡å™¨ä¸Š build image å¹¶ä¸” push</h6>\n</li>\n<li>\n<p><strong>ä½¿ç”¨ docker-compose-online æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œåº”ç”¨</strong></p>\n</li>\n</ul>\n<p><strong>ç¬¬ä¸€æ­¥è¯¦ç»†æµç¨‹åˆ†æï¼Œåœ¨ github runner ä¸Šè¿è¡Œ</strong></p>\n<ul>\n<li>\n<p>checkout ä»£ç ï¼ˆåœ¨ github æœåŠ¡å™¨ä¸Šï¼‰</p>\n</li>\n<li>\n<p>åˆ›å»º.env æ–‡ä»¶ï¼Œå¹¶ä¸”æ·»åŠ ä¸¤ä¸ªç¯å¢ƒå˜é‡ (upload to OSS éœ€è¦ä¸¤ä¸ªå¯¹åº”çš„ä¿¡æ¯)</p>\n</li>\n<li>\n<p>ä½¿ç”¨é˜¿é‡Œäº‘ ACR å®Œæˆ docker login</p>\n</li>\n<li>\n<p>ä½¿ç”¨æ­£ç¡®çš„é˜¿é‡Œäº‘ tag è¿›è¡Œ docker build</p>\n<ul>\n<li>æ€æ ·æ¯æ¬¡ push ç”Ÿæˆç‰¹æ®Šçš„ tagï¼Ÿæ˜¯ä¸€ä¸ªåç»­çš„é—®é¢˜</li>\n</ul>\n</li>\n<li>\n<p>docker push</p>\n</li>\n</ul>\n<p>ä¾‹å¦‚ï¼šã€1ã€‘åœ¨é¡¹ç›®æ–‡ä»¶å¤¹.github/workflow ä¸‹åˆ›å»º yml æ–‡ä»¶ï¼Œå†™å…¥ï¼š</p>\n<pre><code>name: build image,push to ACR\non: [push]\njobs:\n  build-and-push:\n    runs-on: ubuntu-latest\n    steps:\n      # checkout ä»£ç \n      - uses: actions/checkout@v2\n      # åˆ›å»ºenvæ–‡ä»¶\n      - run: touch .env\n      # ä½¿ç”¨â€œ &gt;&gt; â€æ·»åŠ ä¿¡æ¯\n      - run: echo ALC_ACCESS_KEY=$&#123;&#123; secrets.ALC_ACCESS_KEY &#125;&#125; &gt;&gt; .env\n      - run: echo ALC_SECRET_KEY=$&#123;&#123; secrets.ALC_SECRET_KEY &#125;&#125; &gt;&gt; .env\n      # ä½¿ç”¨é˜¿é‡Œäº‘ACR å®Œæˆ docker login\n      - name: Login to Aliyun ACR\n        uses: aliyun/acr-login@v1 # ä½¿ç”¨ä¸“å±çš„é•œåƒ\n        with:\n          login-server: https://registry.cn-hangzhou.aliyuncs.com\n          region-id: cn-hangzhou # æŸ¥çœ‹å®˜ç½‘è‡ªå·±ä»“åº“çš„ä¿¡æ¯\n          username: &quot;$&#123;&#123; secrets.ACR_USERNAME &#125;&#125;&quot;\n          password: &quot;$&#123;&#123; secrets.ACR_PASSWORD &#125;&#125;&quot;\n        # ä½¿ç”¨æ­£ç¡®çš„é˜¿é‡Œäº‘ tag è¿›è¡Œ docker build\n        - name: Build image for Docker\n          run: docker build --tag &quot;registry.cn-hangzhou.aliyuncs.com/dmq00/test:0.0.2&quot;\n        - name: Push Image to ACR\n          run: docker push registry.cn-hangzhou.aliyuncs.com/dmq00/test:0.0.2\n</code></pre>\n<p>è¿™æ ·å°±èƒ½ä¿è¯ä»£ç  push åˆ° github ä¸Šä¹‹åè‡ªåŠ¨å°†é•œåƒæ¨é€åˆ° docker é•œåƒä»“åº“ï¼Œç»“åˆ dockerfile æ–‡ä»¶å°±èƒ½ä¿è¯ä½¿ç”¨ docker é•œåƒæ—¶è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£…å¯¹åº”ä¾èµ–å¹¶æ‰§è¡Œé¡¹ç›®ã€‚</p>\n<p><strong>ç¬¬äºŒæ­¥è¯¦ç»†æµç¨‹åˆ†æï¼Œåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²å¯¹åº”çš„ä»£ç å¹¶ä¸”è¿è¡Œ</strong></p>\n<ul>\n<li>\n<p>checkout ä»£ç </p>\n</li>\n<li>\n<p>åˆ›å»º.env æ–‡ä»¶ï¼Œæ·»åŠ å¤šä¸ªç¯å¢ƒå˜é‡ã€‚(åº”ç”¨æ‰€æœ‰éœ€è¦çš„ç¯å¢ƒå˜é‡)ï¼Œgithub  secrets ä¸­æ·»åŠ ã€‚</p>\n</li>\n<li>\n<p>åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œæ‹·è´å¦‚ä¸‹æ–‡ä»¶åˆ°æ–‡ä»¶å¤¹å†…</p>\n<ul>\n<li>.env</li>\n<li>docker-compose-online.yml</li>\n<li>mongo-entrypoint æ–‡ä»¶å¤¹</li>\n</ul>\n</li>\n<li>\n<p>å°†æ–°å»ºçš„æ–‡ä»¶å¤¹æ‹·è´åˆ°æœåŠ¡å™¨ (SCP) å½“ä¸­</p>\n<ul>\n<li>ä½¿ç”¨ https:/github.com/appleboy/scp-action</li>\n</ul>\n</li>\n<li>\n<p>SSH åˆ°æœåŠ¡å™¨ä¸­</p>\n<ul>\n<li>è¿›å…¥æ‹·è´çš„æ–‡ä»¶å¤¹å†…</li>\n<li>ç™»å½•é˜¿é‡Œäº‘ ACR</li>\n<li>åœæ­¢æœåŠ¡ docker-compose down ï¼ˆç¬¬ä¸€æ¬¡çš„è¯ï¼Œæ²¡æœ‰å¯åŠ¨ä¹Ÿä¸ä¼šæŠ¥é”™ï¼‰</li>\n<li>å¯åŠ¨æœåŠ¡ docker-compose up</li>\n<li>æ¸…ç†å·¥ä½œå¯é€‰ï¼Œä¿è¯å®‰å…¨ï¼ˆåˆ é™¤.env æ–‡ä»¶ï¼Œç™»å‡º docker è´¦æˆ·ï¼‰</li>\n</ul>\n</li>\n</ul>\n<p><strong>åç»­è¿‡ç¨‹éœ€è¦å®Œæˆï¼š</strong></p>\n<ul>\n<li>\n<p>åœ¨ push tags çš„æ—¶å€™æ‰è§¦å‘å¯¹åº”çš„ job</p>\n<p>ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vY24vYWN0aW9ucy9sZWFybi1naXRodWItYWN0aW9ucy9ldmVudHMtdGhhdC10cmlnZ2VyLXdvcmtmbG93cw==\">https://docs.github.com/cn/actions/learn-github-actions/events-that-trigger-workflows</span></p>\n</li>\n<li>\n<p>æ€æ ·è·å–å¯¹åº”çš„æ¯æ¬¡æäº¤ç›¸å…³çš„ç‰¹æ®Šä¿¡æ¯</p>\n<p>ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vZW4vYWN0aW9ucy9sZWFybi1naXRodWItYWN0aW9ucy9jb250ZXh0cw==\">https://docs.github.com/en/actions/learn-github-actions/contexts</span></p>\n</li>\n<li>\n<p>ä½¿ç”¨è¿™ä¸ªç‰¹æ®Šä¿¡æ¯ï¼Œåœ¨å¯¹åº”çš„ docker-compose-online.yml ä¸­è¿›è¡Œæ›¿æ¢ï¼Œå°†è¦å¯åŠ¨çš„ç‰ˆæœ¬æ›¿æ¢ä¸ºå°†è¦æ„å»ºçš„ç‰ˆæœ¬ã€‚</p>\n</li>\n</ul>\n",
            "tags": [
                "å¤æ‚ä¸šåŠ¡éƒ¨ç½²ä¸ä¼˜åŒ–",
                "å¤æ‚ä¸šåŠ¡éƒ¨ç½²ä¸ä¼˜åŒ–"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/03/30/jest/",
            "url": "https://dmqweb.cn/2024/03/30/jest/",
            "title": "jest",
            "date_published": "2024-03-30T12:33:01.000Z",
            "content_html": "<h1 id=\"jestæµ‹è¯•\"><a class=\"anchor\" href=\"#jestæµ‹è¯•\">#</a> jest æµ‹è¯•</h1>\n<p>å¸‚é¢ä¸Šæœ‰å¾ˆå¤šæµ‹è¯•æ¡†æ¶ï¼Œä¾‹å¦‚ï¼šmocha ã€jasmineã€vue test utilsã€vitestã€react testing library å’Œ testing frameworks for jacascript ç­‰ï¼Œä½†è¯­æ³•å’Œæ€æƒ³å¤§è‡´ç›¸åŒï¼Œç°åœ¨ä¾ jest æ¡†æ¶è¿›è¡Œç®€å•çš„ä½¿ç”¨</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * jest ç®€å•çš„è¯­æ³•</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * expect  toBe è¯­æ³•</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tow plus to 4'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> * toEqual è¯­æ³•ï¼Œé€’å½’æ£€æŸ¥å¯¹è±¡æˆ–æ•°ç»„çš„æ¯ä¸ªå­—æ®µ</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'object assignment'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">\"å¼ ä¸‰\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    data<span class=\"token punctuation\">[</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">\"å¼ ä¸‰\"</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span><span class=\"token number\">18</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"17\"></td><td><pre> * expect  not  toBe</pre></td></tr><tr><td data-num=\"18\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'adding is not 0'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"27\"></td><td><pre> * æ£€æŸ¥æŒ‡å®šç©ºç±»å‹ï¼ˆnull,undefined,definedï¼Œtrue å’Œ falseï¼‰</pre></td></tr><tr><td data-num=\"28\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'toBe null'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'toBe defined'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeDefined</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'toBe Undefined'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token keyword\">let</span> n<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeUndefined</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'toBe Truthy'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">const</span> m <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">&amp;&amp;</span> m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeTruthy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'toBe falsy'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">const</span> m <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">&amp;&amp;</span> m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeFalsy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"52\"></td><td><pre> * jest å¯¹ 0 è¿›è¡Œç²¾ç¡®æµ‹è¯•çš„ç»“æœ</pre></td></tr><tr><td data-num=\"53\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'zero'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token keyword\">const</span> z <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toBeNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// é null</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeDefined</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//defined</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toBeUndefined</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toBeTruthy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// é true</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeFalsy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//false</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"63\"></td><td><pre> * jest æµ‹è¯•æ•°å­—</pre></td></tr><tr><td data-num=\"64\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'two and two'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeGreaterThan</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeGreaterThanOrEqual</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeLessThanOrEqual</span><span class=\"token punctuation\">(</span><span class=\"token number\">4.5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeLessThanOrEqual</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"75\"></td><td><pre> * toBeCloseTo æ£€æŸ¥æµ®ç‚¹æ•°ç›¸ç­‰</pre></td></tr><tr><td data-num=\"76\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test float number'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token number\">0.1</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token comment\">//expect (value).toBe (0.3)  æŠ¥é”™ï¼Œå› ä¸ºè®¡ç®—æœºç²¾åº¦çš„åŸå› </span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeCloseTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"83\"></td><td><pre> * toMatch æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"84\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test reg'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'team'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toMatch</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">I</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Christoph'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatch</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">stop</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello world'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lo w'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"91\"></td><td><pre> * toContain æµ‹è¯•æ•°ç»„å’Œå¯è¿­ä»£å¯¹è±¡</pre></td></tr><tr><td data-num=\"92\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre><span class=\"token keyword\">const</span> List <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'d'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'list to be'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>List<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toContain</span><span class=\"token punctuation\">(</span><span class=\"token string\">'c'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>List<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toContain</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"99\"></td><td><pre> * æµ‹è¯•å¼‚æ­¥ä»£ç </pre></td></tr><tr><td data-num=\"100\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre><span class=\"token keyword\">const</span> testPromise <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre><span class=\"token comment\">//1 ä½¿ç”¨ return</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'returnå¼‚æ­¥ä»£ç '</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    <span class=\"token keyword\">return</span> testPromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>        <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token comment\">//2 ä½¿ç”¨ async å’Œ await è¯­æ³•</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">fetchMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>            <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'async and await'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre><span class=\"token comment\">//expect.assertions éªŒè¯æ˜¯å¦è°ƒç”¨äº†ä¸€å®šæ•°é‡çš„æ–­è¨€ï¼Œç¡®ä¿å…‘ç°çš„æ‰¿è‹¥é€šè¿‡æµ‹è¯•</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre><span class=\"token comment\">//catch æ•æ‰ï¼ˆç¡®ä¿ Promise ä¸ä¼šè¢«å…‘ç°ï¼‰</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre><span class=\"token comment\">// test('catch fails with errors',()=>&#123;</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre><span class=\"token comment\">//     return fetchData2().catch(e=>expect(e).toMatch('error'))</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre><span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre></pre></td></tr><tr><td data-num=\"126\"></td><td><pre><span class=\"token comment\">// 3 ä½¿ç”¨å›è°ƒå‡½æ•° done</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done to async'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>    testPromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>        <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>    <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre><span class=\"token comment\">// 4 .resolves åŒ¹é…å™¨ç­‰å¾… Promise è§£æï¼ˆreject åˆ™å¤±è´¥ï¼‰</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.resolvesåŒ¹é…å™¨'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>testPromise<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>resolves<span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"138\"></td><td><pre> * beforeEach å’Œ afterEach é’©å­å‡½æ•°</pre></td></tr><tr><td data-num=\"139\"></td><td><pre> * å½“æ¯ä¸€ä¸ªæµ‹è¯•ä¹‹å‰æˆ–ä¹‹åéƒ½éœ€è¦è°ƒç”¨ç›¸åŒçš„æ–¹æ³•å°±å¯ä»¥ä½¿ç”¨è¿™ä¸¤ä¸ªé’©å­å‡½æ•°</pre></td></tr><tr><td data-num=\"140\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre></pre></td></tr><tr><td data-num=\"142\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"143\"></td><td><pre> * describe å—</pre></td></tr><tr><td data-num=\"144\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre></pre></td></tr><tr><td data-num=\"146\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"147\"></td><td><pre> * test.only åªè¿è¡Œä¸€ä¸ªæµ‹è¯•</pre></td></tr><tr><td data-num=\"148\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>test<span class=\"token punctuation\">.</span><span class=\"token function\">only</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test only'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test only'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'t o'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure>",
            "tags": [
                "TDD",
                "jest"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/03/30/%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E9%93%BE%E6%8E%A5/",
            "url": "https://dmqweb.cn/2024/03/30/%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E9%93%BE%E6%8E%A5/",
            "title": "æœ¬åœ°æ–‡ä»¶é“¾æ¥",
            "date_published": "2024-03-30T11:31:00.000Z",
            "content_html": "<h1 id=\"é“¾æ¥æœ¬åœ°æ–‡ä»¶çš„æ–¹å¼\"><a class=\"anchor\" href=\"#é“¾æ¥æœ¬åœ°æ–‡ä»¶çš„æ–¹å¼\">#</a> é“¾æ¥æœ¬åœ°æ–‡ä»¶çš„æ–¹å¼</h1>\n<h3 id=\"npm-link\"><a class=\"anchor\" href=\"#npm-link\">#</a> npm link</h3>\n<p>1ã€å¸¦æœ‰ package.json æ–‡ä»¶çš„æ–‡ä»¶å¤¹å†…è¿è¡Œï¼šnpm link ï¼Œå³å¯åœ¨ç”¨æˆ·å…¨å±€ä¸­åˆ›å»ºè¯¥æ–‡ä»¶å¤¹çš„å…¨å±€é“¾æ¥ã€‚</p>\n<p>2ã€åœ¨éœ€è¦ä½¿ç”¨æ–‡ä»¶çš„åœ°æ–¹æ‰§è¡Œï¼šnpm link  æ–‡ä»¶åï¼Œæ³¨æ„æ–‡ä»¶åæ˜¯ package.json ä¸­çš„ name å­—æ®µå€¼ã€‚</p>\n<h3 id=\"fileè·¯å¾„\"><a class=\"anchor\" href=\"#fileè·¯å¾„\">#</a> file è·¯å¾„</h3>\n<p>åœ¨éœ€è¦ä½¿ç”¨çš„ package.json çš„ dependence ä¸­æ·»åŠ ï¼šæ–‡ä»¶åï¼š&quot;file:  ....&quot;ï¼Œæ·»åŠ ä¸Š file è·¯å¾„æŒ‡å‘æœ¬åœ°æ–‡ä»¶ã€‚</p>\n<h3 id=\"åŒºåˆ«\"><a class=\"anchor\" href=\"#åŒºåˆ«\">#</a> åŒºåˆ«ï¼š</h3>\n<p>ä¸¤ç§æ–¹å¼çš„åŒºåˆ«åœ¨äºå¦‚æœé¡¹ç›®è¾ƒä¸ºç®€å•ï¼Œä½¿ç”¨ file: è·¯å¾„å³å¯è§£å†³ï¼Œä½†å¦‚æœé¡¹ç›®è¾ƒä¸ºå¤æ‚ï¼Œä¸”æ–‡ä»¶åŒ…æ‹¬æ–‡ä»¶åœ°å€éœ€è¦ä¸æ–­ç§»åŠ¨æ—¶ï¼Œä½¿ç”¨ npm  link çš„æ–¹å¼æ›´å¥½ã€‚</p>\n",
            "tags": [
                "è„šæ‰‹æ¶å¼€å‘",
                "è„šæ‰‹æ¶ cli"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/03/29/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96/",
            "url": "https://dmqweb.cn/2024/03/29/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96/",
            "title": "å‰ç«¯æ¨¡å—åŒ–",
            "date_published": "2024-03-29T14:34:14.000Z",
            "content_html": "<h1 id=\"modulesæ¨¡å—åŒ–\"><a class=\"anchor\" href=\"#modulesæ¨¡å—åŒ–\">#</a> modules æ¨¡å—åŒ–</h1>\n<h3 id=\"æ¨¡å—åŒ–çš„ä¼˜ç‚¹\"><a class=\"anchor\" href=\"#æ¨¡å—åŒ–çš„ä¼˜ç‚¹\">#</a> æ¨¡å—åŒ–çš„ä¼˜ç‚¹ï¼š</h3>\n<p>å¯ç»´æŠ¤æ€§ã€å¯å¤ç”¨æ€§ã€‚</p>\n<h4 id=\"æ¨¡å—åŒ–çš„å‘å±•\"><a class=\"anchor\" href=\"#æ¨¡å—åŒ–çš„å‘å±•\">#</a> æ¨¡å—åŒ–çš„å‘å±•</h4>\n<p>1ã€ES6 ä¹‹å‰æ²¡æœ‰æ¨¡å—åŒ–æ—¶ï¼Œæµè§ˆå™¨ç¯å¢ƒéœ€è¦ä½¿ç”¨ script è¿›è¡Œå¼•å…¥ js æ–‡ä»¶<br />\n 2ã€åæ¥ä½¿ç”¨å…¨å±€å˜é‡ + å‘½åç©ºé—´ï¼ˆnamespaceï¼‰å¤„ç†ï¼Œå°±æ˜¯ä½¿ç”¨ IIFE è‡ªåŠ¨æ‰§è¡Œå‡½æ•°åˆ›å»ºä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸï¼Œèµ‹å€¼ç»™ä¸€ä¸ªå…¨å±€å˜é‡ã€‚<br />\nè¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ï¼šä¾èµ–äºå…¨å±€å˜é‡ï¼Œæ±¡æŸ“å…¨å±€å˜é‡ï¼Œä¸å®‰å…¨ã€‚<br />\nä¾èµ–äºçº¦å®šå‘½åç©ºé—´æ¥é¿å…å†²çªï¼Œå¯é æ€§ä¸é«˜ã€‚<br />\néœ€è¦æ‰‹åŠ¨ç®¡ç†ä¾èµ–å¹¶æ§åˆ¶æ‰§è¡Œé¡ºåºï¼Œå®¹æ˜“å‡ºé”™ã€‚<br />\néœ€è¦åœ¨æœ€ç»ˆä¸Šçº¿å‰æ‰‹åŠ¨åˆå¹¶æ‰€æœ‰ç”¨åˆ°çš„æ¨¡å—ã€‚<br />\n3ã€node ç«¯æ¨¡å—ç³»ç»Ÿï¼šCommon.jsï¼Œç¼ºç‚¹æ˜¯æµè§ˆå™¨ç«¯æ— æ³•ä½¿ç”¨<br />\n 4ã€AMD (Asynchronous module definition) å¼‚æ­¥åŠ è½½æ¨¡å—å®šä¹‰ï¼ŒCMD (æ¨¡å—æ ‡å‡†)<br />\n é‡‡ç”¨å¼‚æ­¥æ–¹å¼åŠ è½½ï¼Œéœ€è¦å…¨å±€ç¯å¢ƒå®šä¹‰ require å’Œ defineï¼Œä¸éœ€è¦å¼•å…¥å…¶ä»–çš„å˜é‡ã€‚<br />\n5ã€ES6 modulesã€å¼•å…¥å’Œæš´éœ²æ–¹å¼æ›´åŠ å¤šæ ·ï¼Œæ”¯æŒå¤æ‚çš„é™æ€åˆ†æå’Œé™æ€ã€åŠ¨æ€å¯¼å…¥ã€‚</p>\n<h1 id=\"bundleræ‰“åŒ…å·¥å…·\"><a class=\"anchor\" href=\"#bundleræ‰“åŒ…å·¥å…·\">#</a> Bundler æ‰“åŒ…å·¥å…·</h1>\n<h3 id=\"è¯ç”ŸåŸå› \"><a class=\"anchor\" href=\"#è¯ç”ŸåŸå› \">#</a> è¯ç”ŸåŸå› ï¼š</h3>\n<p>ä½¿ç”¨ import export è¿™ç§å¼‚æ­¥åŠ è½½æ–¹å¼åœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­æ— æ³•ä½¿ç”¨ã€‚</p>\n<h3 id=\"å¸¸è§å·¥å…·\"><a class=\"anchor\" href=\"#å¸¸è§å·¥å…·\">#</a> å¸¸è§å·¥å…·</h3>\n<p>ä¸€ã€<strong>Webpack</strong>ï¼ˆå• JS æ–‡ä»¶å…¥å£ï¼‰ï¼ŒWebpack é‡‡ç”¨ä»£ç åˆ†å‰²ã€å¼‚æ­¥åŠ è½½ç­‰æŠ€æœ¯ï¼Œå¯ä»¥å°†å¤šä¸ªæ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–è€…å¤šä¸ª bundle,ï¼Œæ„å»ºçš„äº§ç‰©æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚Webpack ä¸»è¦ç”¨äºæ„å»ºå¤æ‚çš„å‰ç«¯é¡¹ç›®ï¼Œå¦‚ Web åº”ç”¨ã€SPA å•é¡µé¢åº”ç”¨ç­‰ï¼Œæ”¯æŒæ¨¡å—åŒ–å¼€å‘ã€ä»£ç åˆ†å‰²ã€èµ„æºä¼˜åŒ–å’Œé™æ€æ–‡ä»¶å¤„ç†ç­‰åŠŸèƒ½ã€‚ã€‚</p>\n<p>äºŒã€<strong>rollup</strong> ç”¨é™æ€çš„æ–¹å¼åˆ†æä»£ç ï¼Œå¯¹æœªä½¿ç”¨çš„ä»£ç æ›´åŠ å½»åº•çš„è¿›è¡Œæ ‘æ‘‡ä¼˜åŒ–ï¼Œè¾“å‡ºçš„ bundle æ›´åŠ çš„ç²¾ç®€ã€‚</p>\n<p>ä¸‰ã€<strong>snowpack</strong>ï¼ˆä½¿ç”¨äºæ–°ç‰ˆæµè§ˆå™¨ï¼‰<br />\n1ã€å‡ºç°çš„åŸå› ï¼ˆå…¶ä»– Bundler çš„é—®é¢˜ï¼‰ï¼š<br />\nå½“èµ„æºè¶Šæ¥è¶Šå¤šæ—¶ï¼Œæ‰“åŒ…çš„é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ï¼Œå¤§ä¸­å‹é¡¹ç›®ä¸­ï¼Œå¯åŠ¨æ—¶é—´å¯èƒ½è¾¾åˆ°å¥½å‡ åˆ†é’Ÿã€‚ï¼ˆvite çš„ç†å¿µæ¥æºäº snowpackï¼Œå……åˆ†ä½¿ç”¨äº†æ–°ç‰ˆæµè§ˆå™¨æ”¯æŒ es modules çš„ç‰¹æ€§ã€‚ï¼‰<br />\n2ã€ä¼˜åŠ¿ï¼š<br />\nsnowpack åˆ©ç”¨æ–°ç‰ˆæµè§ˆå™¨æ”¯æŒ es modules çš„ç‰¹æ€§ï¼Œå¼€å‘æ¨¡å¼ä¸ä¼šè¢«æ‰“åŒ…ï¼Œæ¯ä¸ªæ–‡ä»¶ç¼–è¯‘ä¸€æ¬¡ï¼Œæ°¸ä¹…è¢«ç¼“å­˜ï¼Œå½“ä¸€ä¸ªæ–‡ä»¶ä¿®æ”¹çš„æ—¶å€™å°±åªéœ€è¦é‡æ–° build é‚£ä¸€ä¸ªæ–‡ä»¶ã€‚ï¼ˆé€‚ç”¨äºæ–°ç‰ˆæµè§ˆå™¨ï¼‰<br />\nå››ã€<strong>vite</strong><br />\nvite åŸºäº snowpack çš„ç†å¿µï¼ˆåˆ©ç”¨æ–°ç‰ˆæµè§ˆå™¨æ”¯æŒ es modules çš„ç‰¹æ€§ï¼‰ï¼ŒåŸºäº esbuildï¼Œé‡‡ç”¨ rollup è¿›è¡Œæ„å»º ï¼Œå¼€å‘æ¨¡å¼ä¸ä¼šæ‰“åŒ…ï¼Œæ¯ä¸ªæ–‡ä»¶å½“ä½¿ç”¨æ—¶æ‰ä¼šå»åŠ è½½ï¼Œä¿®æ”¹æ—¶åªéœ€è¦é‡æ–° build é‚£ä¸€ä¸ªæ–‡ä»¶ã€‚<br />\näº”ã€<strong>vue-cli</strong><br />\nvue-cli åº•å±‚åŸºäº webpackï¼Œwebpack é€šè¿‡å¯¼å…¥å¯¼å‡ºçš„è¯­å¥åˆ†ææ•´ä¸ªé¡¹ç›®ï¼Œå°†ç›®æ ‡ä»£ç è½¬åŒ–æˆå…¼å®¹æµè§ˆå™¨çš„ js ä»£ç ï¼Œåªæœ‰æ‰“åŒ…åçš„å‡ ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦è€—è´¹ä¸€äº›æ—¶é—´ã€‚</p>\n<h1 id=\"webpacké…ç½®æ”¯æŒes-module\"><a class=\"anchor\" href=\"#webpacké…ç½®æ”¯æŒes-module\">#</a> webpack é…ç½®æ”¯æŒ ES Module</h1>\n<p>webpack é»˜è®¤åªæ”¯æŒ CommonJS è§„èŒƒï¼Œé…ç½®æ”¯æŒ ES Module è§„èŒƒï¼Œéœ€è¦è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š<br />\nä¸€ï¼šå°† ES Module è¯­æ³•çš„ js æ–‡ä»¶é€šè¿‡ webpack è¿›è¡Œæ‰“åŒ…å³å¯ã€‚<br />\näºŒï¼šwebpack é»˜è®¤ target ä¸º webï¼Œåœ¨ä½¿ç”¨ node å†…ç½®åº“æ—¶ä¼šæŠ¥é”™ï¼Œå¯ä»¥ä¿®æ”¹ target å±æ€§ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">'./bin/core.js'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span><span class=\"token string\">'/dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'core.js'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// æ”¹å˜æ‰“åŒ…æ¨¡å¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">'node'</span> <span class=\"token comment\">// è¿›å…¥ node ç¯å¢ƒï¼Œé»˜è®¤æ˜¯ web</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¸‰ã€webpack é…ç½® babel-loaderï¼Œå…¼å®¹ä½ç‰ˆæœ¬ node<br />\n æ–¹æ¡ˆä¸€ï¼šå®‰è£… babel-loaderã€@babel/coreã€@babel/preset-envï¼ˆæœ‰æ—¶éœ€è¦ @babel/plugin-transform-runtime æ’ä»¶ï¼‰</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">'./bin/core.js'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span><span class=\"token string\">'/dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'core.js'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// æ”¹å˜æ‰“åŒ…æ¨¡å¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">'node'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// è¿›å…¥ node ç¯å¢ƒï¼Œé»˜è®¤æ˜¯ web</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.js$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                    <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// ä½¿ç”¨ babel-loader</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                    <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                        <span class=\"token literal-property property\">presets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'@babel/preset-env'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                        <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                            <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                                <span class=\"token string\">'@babel/plugin-transform-runtime'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                                    <span class=\"token literal-property property\">corejs</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                                    <span class=\"token literal-property property\">regenerator</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                                    <span class=\"token literal-property property\">useESModules</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                                    <span class=\"token literal-property property\">helpers</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–¹æ¡ˆäºŒï¼šnode.js å®éªŒåŠŸèƒ½<br />\nå°† js åç¼€æ›´æ”¹ä¸º mjs åç¼€ï¼Œå³å¯ï¼ˆéœ€è¦ node ç‰ˆæœ¬ä¸º 14 ä»¥ä¸Šï¼‰, å°äº 14 ç‰ˆæœ¬çš„æ—¶å€™ï¼Œnode æ‰§è¡Œæ—¶éœ€è¦åŠ ä¸Š --experimental-modules å‚æ•°ï¼Œä¾‹å¦‚ï¼š<br />\n <code>node --experimental-modules index.js</code></p>\n",
            "tags": [
                "å‰ç«¯å·¥ç¨‹åŒ–",
                "ESModules"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/03/29/TDD/",
            "url": "https://dmqweb.cn/2024/03/29/TDD/",
            "title": "TDDæµ‹è¯•é©±åŠ¨å¼€å‘",
            "date_published": "2024-03-29T13:47:28.000Z",
            "content_html": "<h1 id=\"tddtest-drive-developmentæµ‹è¯•é©±åŠ¨å¼€å‘\"><a class=\"anchor\" href=\"#tddtest-drive-developmentæµ‹è¯•é©±åŠ¨å¼€å‘\">#</a> TDD (test drive development) æµ‹è¯•é©±åŠ¨å¼€å‘</h1>\n<h3 id=\"æµ‹è¯•é©±åŠ¨å¼€å‘çš„å£å·\"><a class=\"anchor\" href=\"#æµ‹è¯•é©±åŠ¨å¼€å‘çš„å£å·\">#</a> æµ‹è¯•é©±åŠ¨å¼€å‘çš„å£å·ï¼š</h3>\n<p>æµ‹è¯•å…ˆè¡Œ</p>\n<h3 id=\"æµ‹è¯•é©±åŠ¨å¼€å‘çš„ç›®æ ‡\"><a class=\"anchor\" href=\"#æµ‹è¯•é©±åŠ¨å¼€å‘çš„ç›®æ ‡\">#</a> æµ‹è¯•é©±åŠ¨å¼€å‘çš„ç›®æ ‡ï¼š</h3>\n<p>ä¿è¯ä»£ç çš„ç®€æ´å¯ç”¨</p>\n<h3 id=\"tdd-çš„è§„åˆ™\"><a class=\"anchor\" href=\"#tdd-çš„è§„åˆ™\">#</a> TDD çš„è§„åˆ™</h3>\n<p>åœ¨ TDD çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦éµå¾ªä¸¤æ¡ç®€å•çš„è§„åˆ™ï¼š</p>\n<p>ä»…åœ¨è‡ªåŠ¨æµ‹è¯•å¤±è´¥æ—¶æ‰ç¼–å†™æ–°ä»£ç ã€‚<br />\næ¶ˆé™¤é‡å¤è®¾è®¡ï¼ˆå»é™¤ä¸å¿…è¦çš„ä¾èµ–å…³ç³»ï¼‰ï¼Œä¼˜åŒ–è®¾è®¡ç»“æ„ï¼ˆé€æ¸ä½¿ä»£ç ä¸€èˆ¬åŒ–ï¼‰ã€‚</p>\n<p>ç¬¬ä¸€æ¡è§„åˆ™çš„è¨€ä¸‹ä¹‹æ„æ˜¯æ¯æ¬¡åªç¼–å†™åˆšåˆšå¥½ä½¿æµ‹è¯•é€šè¿‡çš„ä»£ç ï¼Œå¹¶ä¸”åªåœ¨æµ‹è¯•è¿è¡Œå¤±è´¥çš„æ—¶å€™æ‰ç¼–å†™æ–°çš„ä»£ç ï¼Œå› ä¸ºæ¯æ¬¡å¢åŠ çš„ä»£ç å°‘ï¼Œå³ä½¿æœ‰é—®é¢˜å®šä½èµ·æ¥ä¹Ÿéå¸¸å¿«ï¼Œç¡®ä¿æˆ‘ä»¬å¯ä»¥éµå¾ªå°æ­¥å¿«è·‘çš„èŠ‚å¥ï¼›ç¬¬äºŒæ¡è§„åˆ™å°±æ˜¯è®©å°æ­¥å¿«è·‘æ›´åŠ è¸å®ï¼Œåœ¨è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ”¯æ’‘ä¸‹ï¼Œé€šè¿‡é‡æ„ç¯èŠ‚æ¶ˆé™¤ä»£ç çš„åå‘³é“æ¥é¿å…ä»£ç æ—¥æ¸è…çƒ‚ï¼Œä¸ºæ¥ä¸‹æ¥ç¼–ç æ‰“é€ ä¸€ä¸ªèˆ’é€‚çš„ç¯å¢ƒã€‚<br />\nå…³æ³¨ç‚¹åˆ†ç¦»æ˜¯è¿™ä¸¤æ¡è§„åˆ™éšå«çš„å¦ä¸€ä¸ªéå¸¸é‡è¦çš„åŸåˆ™ã€‚å…¶è¡¨è¾¾çš„å«ä¹‰æŒ‡åœ¨ç¼–ç é˜¶æ®µå…ˆè¾¾åˆ°ä»£ç  â€œå¯ç”¨â€ çš„ç›®æ ‡ï¼Œåœ¨é‡æ„é˜¶æ®µå†è¿½æ±‚ â€œç®€æ´â€ ç›®æ ‡ï¼Œæ¯æ¬¡åªå…³æ³¨ä¸€ä»¶äº‹</p>\n<h3 id=\"é‡‡ç”¨-tdd-çš„åŠ¨æœº\"><a class=\"anchor\" href=\"#é‡‡ç”¨-tdd-çš„åŠ¨æœº\">#</a> é‡‡ç”¨ TDD çš„åŠ¨æœº</h3>\n<p>æ§åˆ¶ç¼–ç¨‹è¿‡ç¨‹ä¸­çš„å¿§è™‘æ„Ÿã€‚</p>\n<p>æœ‰ä¸€ä¸ªæœ‰è¶£çš„æƒ³è±¡ï¼Œå½“æˆ‘æ„Ÿè§‰å‹åŠ›è¶Šå¤§ï¼Œè‡ªèº«å°±è¶Šä¸æƒ³å»åšè¶³å¤Ÿå¤šçš„æµ‹è¯•ã€‚å½“çŸ¥é“è‡ªå·±åšçš„æµ‹è¯•ä¸å¤Ÿæ—¶ï¼Œå°±ä¼šå¢åŠ è‡ªèº«çš„å‹åŠ›ï¼Œå› ä¸ºæˆ‘æ‹…å¿ƒè‡ªå·±å†™çš„ä»£ç æœ‰ BUGï¼Œå¯¹è‡ªå·±ç¼–å†™çš„ä»£ç ä¸å¤Ÿè‡ªä¿¡ï¼Œè¿™æ˜¯ä¸€ç§å¿ƒæ€ä¸Šçš„å˜åŒ–ã€‚æ­¤æ—¶æµ‹è¯•æ˜¯å¼€å‘äººå‘˜çš„è¯•é‡‘çŸ³ï¼Œå¯ä»¥å°†å¯¹å‹åŠ›çš„ææƒ§å˜ä¸ºå¹³æ—¥çš„çäº‹ï¼Œé‡‡ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå°±æœ‰æœºä¼šé€‰æ‹©ææƒ§çš„ç¨‹åº¦ã€‚</p>\n<p>æŠŠæ§ç¼–ç¨‹è¿‡ç¨‹ä¸­çš„åé¦ˆä¸å†³ç­–ä¹‹é—´çš„å·®è·ã€‚</p>\n<p>å¦‚æœæˆ‘åšäº†ä¸€å‘¨çš„è§„åˆ’ï¼Œå¹¶ä¸”é‡åŒ–æˆä¸€ä¸ªä¸ªå¯æ“ä½œçš„ä»»åŠ¡å†™åˆ° to-do listï¼Œç„¶åä½¿ç”¨æµ‹è¯•é©±åŠ¨ç¼–ç ï¼ŒæŠŠå®Œæˆçš„ä»»åŠ¡åƒè¿™æ ·åˆ’æ‰ï¼Œé‚£ä¹ˆæˆ‘çš„å·¥ä½œç›®æ ‡å°†å˜å¾—éå¸¸æ¸…æ™°ï¼Œå› ä¸ºæˆ‘æ˜ç¡®å·¥æœŸï¼Œæ˜ç¡®å¾…åŠäº‹é¡¹ï¼Œæ˜ç¡®éš¾ç‚¹ï¼Œå¯ä»¥åœ¨æŒç»­ç»†å¾®çš„åé¦ˆä¸­æœ‰æ„è¯†åœ°åšä¸€äº›é€‚å½“çš„è°ƒæ•´ï¼Œæ¯”å¦‚æ·»åŠ æ–°çš„ä»»åŠ¡ï¼Œåˆ é™¤å†—ä½™çš„æµ‹è¯•ï¼›è¿˜æœ‰ä¸€ç‚¹æ›´åŠ è®©äººæŒ¯å¥‹ï¼Œæˆ‘å¯ä»¥çŸ¥é“æˆ‘å¤§æ¦‚ä»€ä¹ˆæ—¶å€™å¯ä»¥å®Œå·¥ã€‚é¡¹ç›®ç»ç†å¯¹è½¯ä»¶å¼€å‘è¿›åº¦å¯ä»¥æ›´ç²¾ç¡®çš„æŠŠæ¡ã€‚</p>\n<p>æ ‡æ³¨ï¼šæœ¬æ–‡æ‘˜æŠ„è‡ªï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzNzgwOTcwOTIxOTkx\">https://juejin.cn/post/6844903780970921991</span><br />\n æ„Ÿå…´è¶£å¯è‡ªè¡Œè¿›è¡ŒæŸ¥çœ‹</p>\n",
            "tags": [
                "å¼€å‘æ¨¡å¼",
                "å¼€å‘æ¨¡å¼"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/03/29/%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87/",
            "url": "https://dmqweb.cn/2024/03/29/%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87/",
            "title": "æœ¬åœ°é¢„è§ˆå›¾ç‰‡",
            "date_published": "2024-03-29T13:20:56.000Z",
            "content_html": "<h1 id=\"å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ\"><a class=\"anchor\" href=\"#å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ\">#</a> å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ</h1>\n<p>ä¸šåŠ¡ä¸­ç»å¸¸æœ‰ä¸Šä¼ å›¾ç‰‡çš„éœ€æ±‚åœ¨ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦å»å°½å¿«é¢„è§ˆè¦ä¸Šä¼ çš„å›¾ç‰‡ï¼Œæ­¤æ—¶ä¼šæœ‰ä¸¤ç§å¸¸è§çš„æ–¹æ³•ï¼š</p>\n<h3 id=\"urlcreateobjecturl\"><a class=\"anchor\" href=\"#urlcreateobjecturl\">#</a> URL.createObjectURL</h3>\n<p>ç›´æ¥è¿”å›ï¼ŒåŒæ­¥æ‰§è¡Œï¼Œä¼šä¸ºå›¾ç‰‡æ–‡ä»¶åˆ›å»ºä¸€ä¸ªåœ°å€ï¼Œå­˜å‚¨åœ¨ document ä¸­ï¼Œå¹¶ä¸”ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶æ‰€å›æ”¶ã€‚æ¸…é™¤æ–¹å¼åªæœ‰ unload äº‹ä»¶æˆ– revokeObjectURL è¿›è¡Œæ‰‹åŠ¨æ¸…é™¤ã€‚</p>\n<h3 id=\"filereaderreadasdataurl\"><a class=\"anchor\" href=\"#filereaderreadasdataurl\">#</a> FileReader.readAsDataURL</h3>\n<p>é€šè¿‡å›è°ƒçš„å½¢å¼è¿”å›ï¼Œå¼‚æ­¥æ‰§è¡Œï¼Œå°†å›¾ç‰‡æ–‡ä»¶è½¬ä¸º base64 æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é“¾æ¥å½¢å¼ç›´æ¥å¼•ç”¨ï¼Œä¼šä¾æ®åƒåœ¾å›æ”¶æœºåˆ¶è¿›è¡Œå›æ”¶ï¼Œ<br />\n2</p>\n",
            "tags": [
                "ä¸šåŠ¡å¤„ç†",
                "ä¸šåŠ¡",
                "å›¾ç‰‡"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/03/29/new%E5%85%B3%E9%94%AE%E5%AD%97/",
            "url": "https://dmqweb.cn/2024/03/29/new%E5%85%B3%E9%94%AE%E5%AD%97/",
            "title": "",
            "date_published": "2024-03-29T05:29:43.248Z",
            "content_html": "<h1 id=\"newå…³é”®å­—å®ç°åˆ†ä¸ºä¸‰æ­¥\"><a class=\"anchor\" href=\"#newå…³é”®å­—å®ç°åˆ†ä¸ºä¸‰æ­¥\">#</a> new å…³é”®å­—å®ç°åˆ†ä¸ºä¸‰æ­¥ï¼š</h1>\n<p>1ã€æ ¹æ®æ„é€ å‡½æ•°çš„åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡<br />\n 2ã€æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œç»‘å®š this æŒ‡å‘ä¸ºæ–°å¯¹è±¡ï¼Œä¼ å…¥å‚æ•°<br />\n 3ã€è¿”å›æ‰§è¡Œåçš„ç»“æœ</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">myNew</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">constructor<span class=\"token punctuation\">,</span><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// åˆ›å»ºå¯¹è±¡ï¼ŒåŸå‹ä¸ºæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>constructor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œä¼ å…¥åˆ›å»ºçš„å¯¹è±¡å’Œå‚æ•°</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// æ³¨æ„ apply æ–¹æ³•æ˜¯å‡½æ•°å¯¹è±¡çš„æ–¹æ³•ï¼Œæ™®é€šå¯¹è±¡ä¸å¯ç”¨</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>res <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> res <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span>res<span class=\"token operator\">:</span>obj<span class=\"token punctuation\">;</span>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token constant\">A</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token operator\">=</span><span class=\"token string\">'sdjf'</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">const</span> ab <span class=\"token operator\">=</span> <span class=\"token function\">myNew</span><span class=\"token punctuation\">(</span><span class=\"token constant\">A</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "https://dmqweb.cn/2024/03/02/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/",
            "url": "https://dmqweb.cn/2024/03/02/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/",
            "title": "å‰ç«¯æ€§èƒ½ä¼˜åŒ–",
            "date_published": "2024-03-02T04:24:04.000Z",
            "content_html": "<h1 id=\"5-1-å‰ç«¯æ€§èƒ½ä¼˜åŒ–\"><a class=\"anchor\" href=\"#5-1-å‰ç«¯æ€§èƒ½ä¼˜åŒ–\">#</a> 5-1 å‰ç«¯æ€§èƒ½ä¼˜åŒ–</h1>\n<h2 id=\"è¯¾ç¨‹ä»‹ç»\"><a class=\"anchor\" href=\"#è¯¾ç¨‹ä»‹ç»\">#</a> è¯¾ç¨‹ä»‹ç»</h2>\n<p>ä»»ä½•å°å‹ä¼ä¸šï¼Œåšä¸»æˆ–æˆé•¿å‹å…¬å¸åœ¨ç½‘ä¸Šå‡ºç°æ—¶é¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜ä¹‹ä¸€å°±æ˜¯ â€œé¡µé¢åŠ è½½æ—¶é—´â€ é—®é¢˜ã€‚é™¤éæ‚¨èƒ½ç¡®ä¿å°½å¯èƒ½å¿«é€Ÿæ— ç¼åœ°åŠ è½½æ¯ä¸ªé¡µé¢ï¼Œæ‚¨æ‰å¯ä»¥æ‹¥æœ‰ä¸–ç•Œä¸Šæœ€å¥½æœ€å¼•äººæ³¨ç›®çš„ç½‘ç«™ï¼Œå¦åˆ™æ‚¨ä»ç„¶æ— æ³•èµ¢å¾—å…³æ³¨è€…çš„å°Šé‡å’Œå¿ è¯šåº¦ã€‚</p>\n<p>æ ¹æ®å½“ä»Šç½‘ç»œä¸Šçš„æ‰€æœ‰ä¸»è¦æµè§ˆå™¨å…¬å¸çš„è¯´æ³•ï¼Œå¦‚æœæ¯ä¸ªç½‘ç«™éƒ½æƒ³è¦æ’åé å‰ï¼Œè¡¨ç°è‰¯å¥½å¹¶ç¡®ä¿å®¢æˆ·æ»¡æ„ï¼Œé‚£ä¹ˆæ¯ä¸ªç½‘ç«™éƒ½éœ€è¦å¿«ã€‚æ¯•ç«Ÿï¼Œå¦‚æœæ‚¨çš„ç½‘é¡µåŠ è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œé‚£ä¹ˆæ‚¨ä¼šç«‹å³å¢åŠ å®¢æˆ·å¼€å§‹åœ¨å…¶ä»–åœ°æ–¹æœç´¢ä¿¡æ¯ï¼Œè€Œä¸æ˜¯åšæŒä¸‹å»çš„é£é™©ã€‚</p>\n<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸å»æ‰¾ä¸“é—¨çš„æŠ€æœ¯äººå‘˜æ¥åš SEOï¼ˆ<strong>Search Engine Optimization</strong>ï¼‰ï¼Œå³æœç´¢å¼•æ“ä¼˜åŒ–ã€‚ å› ä¸ºï¼Œé¡µé¢çš„åŠ è½½ä¼šå½±å“åˆ°çˆ¬è™«çš„çˆ¬å–ï¼Œé¡µé¢åŠ è½½é€Ÿåº¦æ˜¯ä¸€é¡¹éå¸¸é‡è¦çš„æŒ‡æ ‡ã€‚å†µä¸”ï¼Œé¡µé¢ä¼˜åŒ–ç›´æ¥å½±å“åˆ°äº†ç”¨æˆ·ä½“éªŒã€‚æ‰€ä»¥å­¦ä¹ å‰ç«¯æ€§èƒ½ä¼˜åŒ–åŠ¿åœ¨å¿…è¡Œã€‚</p>\n<p><strong>ç»å¸¸æœ‰é¢è¯•å®˜ä¼šé—®ï¼šä»ç”¨æˆ·è¾“å…¥æµè§ˆå™¨è¾“å…¥ url åˆ°é¡µé¢æœ€åå‘ˆç° æœ‰å“ªäº›è¿‡ç¨‹ï¼Ÿæœ‰ä»€ä¹ˆåŠæ³•èƒ½ä¼˜åŒ–é¡µé¢æ€§èƒ½ï¼Ÿ</strong></p>\n<p>ç­”æ¡ˆå¤§è‡´å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>ç”¨æˆ·è¾“å…¥ URL åœ°å€</li>\n<li>æµè§ˆå™¨è§£æ URL è§£æå‡ºä¸»æœºå</li>\n<li>æµè§ˆå™¨å°†ä¸»æœºåè½¬æ¢æˆæœåŠ¡å™¨ ip åœ°å€ï¼ˆæµè§ˆå™¨å…ˆæŸ¥æ‰¾æœ¬åœ° DNS ç¼“å­˜åˆ—è¡¨ æ²¡æœ‰çš„è¯ å†å‘æµè§ˆå™¨é»˜è®¤çš„ DNS æœåŠ¡å™¨å‘é€æŸ¥è¯¢è¯·æ±‚ åŒæ—¶ç¼“å­˜ï¼‰</li>\n<li>æµè§ˆå™¨å°†ç«¯å£å·ä» URL ä¸­è§£æå‡ºæ¥</li>\n<li>æµè§ˆå™¨å»ºç«‹ä¸€æ¡ä¸ç›®æ ‡ Web æœåŠ¡å™¨çš„ TCP è¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰</li>\n<li>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€ä¸€æ¡ HTTP è¯·æ±‚æŠ¥æ–‡</li>\n<li>æœåŠ¡å™¨å‘æµè§ˆå™¨è¿”å›ä¸€æ¡ HTTP å“åº”æŠ¥æ–‡</li>\n<li>å…³é—­è¿æ¥ æµè§ˆå™¨è§£ææ–‡æ¡£</li>\n<li>å¦‚æœæ–‡æ¡£ä¸­æœ‰èµ„æº é‡å¤ 6 7 8 åŠ¨ä½œ ç›´è‡³èµ„æºå…¨éƒ¨åŠ è½½å®Œæ¯•</li>\n</ol>\n<p><img data-src=\"./assets/image-20190619100048897.png\" alt=\"/images/image-20190619100048897\" /></p>\n<p>å†æ·±ä¸€ç‚¹å±‚æ¬¡ï¼šä¼šé—®åˆ°<strong>æ¸²æŸ“æœºåˆ¶</strong>ï¼Œé‡æ’ã€é‡ç»˜</p>\n<p>é‡æ’ï¼š</p>\n<ol>\n<li>\n<p>å®šä¹‰ï¼šDOM ç»“æ„ä¸­çš„å„ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„ç›’å­ (æ¨¡å‹)ï¼Œè¿™äº›éƒ½éœ€è¦æµè§ˆå™¨æ ¹æ®å„ç§æ ·å¼æ¥è®¡ç®—å¹¶æ ¹æ®è®¡ç®—ç»“æœå°†å…ƒç´ æ”¾åˆ°å®ƒè¯¥å‡ºç°çš„ä½ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸º reflowã€‚</p>\n</li>\n<li>\n<p>è§¦å‘ Reflowï¼š</p>\n<ul>\n<li>å½“ä½ å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ DOM ç»“ç‚¹æ—¶ï¼Œä¼šå¯¼è‡´ Reflow æˆ– Repaint</li>\n<li>å½“ä½ ç§»åŠ¨ DOM çš„ä½ç½®ï¼Œæˆ–æ˜¯æä¸ªåŠ¨ç”»çš„æ—¶å€™</li>\n<li>å½“ä½ ä¿®æ”¹ CSS æ ·å¼çš„æ—¶å€™</li>\n<li>å½“ä½  Resize çª—å£çš„æ—¶å€™ (ç§»åŠ¨ç«¯æ²¡æœ‰è¿™ä¸ªé—®é¢˜)ï¼Œæˆ–è€…æ˜¯æ»šåŠ¨çš„æ—¶å€™</li>\n<li>å½“ä½ ä¿®æ”¹ç½‘é¡µçš„</li>\n</ul>\n<blockquote>\n<p>æœ€å¸¸é—®ï¼šå¦‚ä½•å‡å°‘ Reflow? æˆ–è€…é¿å… Reflowï¼Ÿ</p>\n</blockquote>\n</li>\n</ol>\n<p>é‡ç»˜ï¼š</p>\n<ol>\n<li>\n<p>å®šä¹‰ï¼šå½“å„ç§ç›’å­çš„ä½ç½®ã€å¤§å°ä»¥åŠå…¶ä»–å±æ€§ï¼Œä¾‹å¦‚é¢œè‰²ã€å­—ä½“å¤§å°ç­‰éƒ½ç¡®å®šä¸‹æ¥åï¼Œæµè§ˆå™¨äºæ˜¯ä¾¿æŠŠè¿™äº›å…ƒç´ éƒ½æŒ‰ç…§å„è‡ªçš„ç‰¹æ€§ç»˜åˆ¶äº†ä¸€éï¼Œäºæ˜¯é¡µé¢çš„å†…å®¹å‡ºç°äº†ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸º repaintã€‚</p>\n<blockquote>\n<p>é¡µé¢è¦å‘ˆç°çš„å†…å®¹ï¼Œé€šé€šéƒ½ç»˜åˆ¶åˆ°é¡µé¢ä¸Šã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>è§¦å‘ Repaint</p>\n<ul>\n<li>DOM æ”¹åŠ¨</li>\n<li>CSS æ”¹åŠ¨</li>\n</ul>\n<blockquote>\n<p>æœ€å¸¸é—®ï¼šå¦‚ä½•é¿å…æœ€å°ç¨‹åºçš„ Repaintï¼Ÿ</p>\n</blockquote>\n</li>\n</ol>\n<p>æ—¢ç„¶é¡µé¢çš„æ€§èƒ½ä¼˜åŒ–è¿™ä¹ˆé‡è¦ï¼Œ** ä½ çŸ¥é“æœ‰å“ªäº›åŸå› æ˜¯å½±å“é¡µé¢æ€§èƒ½çš„ï¼Ÿ** æ¯”å¦‚...</p>\n<ul>\n<li>HTTP è¯·æ±‚</li>\n<li>å¤æ‚çš„é¡µé¢é€»è¾‘ (JS è®¾è®¡)</li>\n<li>é‡åº¦çš„ DOM æ“ä½œ</li>\n<li>æœåŠ¡ç«¯å“åº”</li>\n<li>å¤§é‡çš„æ•°æ®</li>\n</ul>\n<p>...</p>\n<p><strong>æœ‰å“ªäº›åŠæ³•å¯ä»¥åŠ é€Ÿæˆ‘ä»¬çš„é¡µé¢æ€§èƒ½ï¼Ÿæ¯”å¦‚...</strong></p>\n<ul>\n<li>èµ„æºå‹ç¼©ä¸åˆå¹¶ï¼ˆä»£ç æ‰“åŒ…ï¼‰</li>\n<li>å¼‚æ­¥åŠ è½½</li>\n<li>CDN</li>\n<li>DNS é¢„è§£æ</li>\n<li>ç¼“å­˜</li>\n</ul>\n<p>...</p>\n<p><strong>æœ¬è¯¾ç¨‹çš„ä¸»è¦å†…å®¹ï¼š</strong></p>\n<ul>\n<li>é¡µé¢åŠ è½½ç¼“æ…¢åŸå› åˆ†æ</li>\n<li>æ€§èƒ½ä¼˜åŒ–åŸåˆ™</li>\n<li>ä¼˜åŒ–å·¥å…·ä»‹ç»</li>\n<li>æµè§ˆå™¨çš„å·¥ä½œæœºåˆ¶ï¼Œäº†è§£ä¸€äº›åŸºæœ¬å¸¸è¯†çš„åŸç†ï¼š\n<ol>\n<li>ä¸ºä»€ä¹ˆè¦å°† js æ”¾åˆ°é¡µè„šéƒ¨åˆ†</li>\n<li>å¼•å…¥æ ·å¼çš„å‡ ç§æ–¹å¼çš„æƒé‡</li>\n<li>css å±æ€§ä¹¦å†™é¡ºåºå»ºè®®</li>\n<li>ä½•ç§ç±»å‹çš„ DOM æ“ä½œæ˜¯è€—è´¹æ€§èƒ½çš„</li>\n</ol>\n</li>\n</ul>\n<p><strong>å­¦ä¹ æœ¬é—¨è¯¾ä½ èƒ½æ”¶è·ä»€ä¹ˆï¼Ÿ</strong></p>\n<ul>\n<li>å‰ç«¯é¡µé¢ä¼˜åŒ–ï¼Œä¸ºæˆä¸º SEO è·¯æ·»ç –åŠ ç“¦</li>\n<li>å†™å‡ºä¼˜è´¨ä»£ç ï¼Œé¡µé¢æ€§èƒ½è¹­è¹­è¹­çš„å¾€ä¸Šèµ°</li>\n<li>é¢è¯•å¦‚æœæåˆ°é¡µé¢ä¼˜åŒ–ï¼Œå¯ä»¥å¨“å¨“é“æ¥ï¼Œç‰›çš®å¹çš„é£èµ·...</li>\n<li>å‡ ç§å¸¸è§çš„é¡µé¢ä¼˜åŒ–å·¥å…·çš„ä½¿ç”¨ PageSpeedï¼ŒJSPerf</li>\n</ul>\n<p><strong>è¯¾ç¨‹å‡†å¤‡ï¼š</strong></p>\n<ul>\n<li>æ³¨å†Œ github è´¦å·</li>\n</ul>\n<h2 id=\"é¡µé¢æ€§èƒ½ä¼˜åŒ–\"><a class=\"anchor\" href=\"#é¡µé¢æ€§èƒ½ä¼˜åŒ–\">#</a> é¡µé¢æ€§èƒ½ä¼˜åŒ–</h2>\n<p>å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¯ä»¥åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼šæµè§ˆå™¨éƒ¨åˆ†ã€ä»£ç éƒ¨åˆ†ã€‚</p>\n<p>æµè§ˆå™¨éƒ¨åˆ†åˆå¯ä»¥åˆ†ä¸ºï¼š</p>\n<ul>\n<li>ç½‘ç»œå±‚é¢</li>\n<li>æµè§ˆå™¨æ¸²æŸ“å±‚é¢</li>\n<li>æœåŠ¡ç«¯å±‚é¢</li>\n</ul>\n<p>ä»£ç éƒ¨åˆ†åˆå¯ä»¥åˆ†ä¸ºï¼š</p>\n<ul>\n<li>æ„å»ºå±‚é¢</li>\n<li>ç¼–ç å±‚é¢</li>\n<li>æœºåˆ¶ (SSRï¼Œè‹±æ–‡ Server Side Renderï¼šæœåŠ¡å™¨ç«¯æ¸²æŸ“)</li>\n<li>è§„èŒƒ</li>\n</ul>\n<p>é¦–å…ˆæ¥çœ‹çœ‹æµè§ˆå™¨éƒ¨åˆ†ï¼šå‰ç«¯çš„é¡µé¢ä¸»è¦åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œç€ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿½æ ¹æº¯æºï¼Œä»æµè§ˆå™¨çš„åŸç†å¼€å§‹ï¼Œç ”ç©¶å¦‚ä½•è¿›è¡Œé¡µé¢æ€§èƒ½ä¼˜åŒ–ã€‚</p>\n<h3 id=\"æµè§ˆå™¨\"><a class=\"anchor\" href=\"#æµè§ˆå™¨\">#</a> æµè§ˆå™¨</h3>\n<p>ç›®å‰ä½¿ç”¨çš„ä¸»æµæµè§ˆå™¨æœ‰äº”ä¸ªï¼šInternet Explorerã€Firefoxã€Safariã€Chrome æµè§ˆå™¨å’Œ Operaã€‚æœ¬æ–‡ä¸­ä»¥å¼€æ”¾æºä»£ç æµè§ˆå™¨ä¸ºä¾‹ï¼Œå³ Firefoxã€Chrome æµè§ˆå™¨å’Œ Safariï¼ˆéƒ¨åˆ†å¼€æºï¼‰ã€‚æ ¹æ® <span class=\"exturl\" data-url=\"aHR0cDovL2dzLnN0YXRjb3VudGVyLmNvbS8=\">StatCounter æµè§ˆå™¨ç»Ÿè®¡æ•°æ®</span>ï¼Œç›®å‰ï¼ˆ2019 å¹´ 6 æœˆï¼‰Firefoxã€Safari å’Œ Chrome æµè§ˆå™¨çš„æ€»å¸‚åœºå æœ‰ç‡ 62.7%ã€‚ç”±æ­¤å¯è§ï¼Œå¦‚ä»Šå¼€æ”¾æºä»£ç æµè§ˆå™¨åœ¨æµè§ˆå™¨å¸‚åœºä¸­å æ®äº†éå¸¸åšå®çš„éƒ¨åˆ†ã€‚</p>\n<p><img data-src=\"./assets/image-20190618165435861.png\" alt=\"/images/image-20190618165435861\" /></p>\n<h4 id=\"æµè§ˆå™¨çš„ä¸»è¦ä½œç”¨\"><a class=\"anchor\" href=\"#æµè§ˆå™¨çš„ä¸»è¦ä½œç”¨\">#</a> æµè§ˆå™¨çš„ä¸»è¦ä½œç”¨</h4>\n<p>æµè§ˆå™¨çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œåœ¨æµè§ˆå™¨çª—å£ä¸­å±•ç¤ºæ‚¨é€‰æ‹©çš„ç½‘ç»œèµ„æºã€‚è¿™äº›ç½‘ç»œèµ„æºåŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p>\n<ul>\n<li>HTML</li>\n<li>CSS</li>\n<li>JavaScript çš„</li>\n<li>åª’ä½“ï¼ˆå›¾ç‰‡ï¼Œè§†é¢‘ç­‰ï¼‰</li>\n</ul>\n<p>ä¹Ÿå¯ä»¥åˆ†ä¸º HTML æ–‡æ¡£ (HTML/CSS/JS)ã€PDFã€å›¾ç‰‡ã€è§†é¢‘å’Œå…¶ä»–ç±»å‹ã€‚</p>\n<p>æµè§ˆå™¨è§£é‡Šå¹¶æ˜¾ç¤º HTML æ–‡ä»¶çš„æ–¹å¼æ˜¯åœ¨ HTML å’Œ CSS è§„èŒƒä¸­æŒ‡å®šçš„ã€‚è¿™äº›è§„èŒƒç”±ç½‘ç»œæ ‡å‡†åŒ–ç»„ç»‡ W3Cï¼ˆä¸‡ç»´ç½‘è”ç›Ÿï¼‰è¿›è¡Œç»´æŠ¤ã€‚<br />\nå¤šå¹´ä»¥æ¥ï¼Œå„æµè§ˆå™¨éƒ½æ²¡æœ‰å®Œå…¨éµä»è¿™äº›è§„èŒƒï¼ŒåŒæ—¶è¿˜åœ¨å¼€å‘è‡ªå·±ç‹¬æœ‰çš„æ‰©å±•ç¨‹åºï¼Œè¿™ç»™ç½‘ç»œå¼€å‘äººå‘˜å¸¦æ¥äº†ä¸¥é‡çš„å…¼å®¹æ€§é—®é¢˜ã€‚å¦‚ä»Šï¼Œå¤§å¤šæ•°çš„æµè§ˆå™¨éƒ½æ˜¯æˆ–å¤šæˆ–å°‘åœ°éµä»è§„èŒƒã€‚</p>\n<p>æµè§ˆå™¨çš„ç”¨æˆ·ç•Œé¢æœ‰å¾ˆå¤šå½¼æ­¤ç›¸åŒçš„å…ƒç´ ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>ç”¨æ¥è¾“å…¥ URI çš„åœ°å€æ </li>\n<li>å‰è¿›å’Œåé€€æŒ‰é’®</li>\n<li>ä¹¦ç­¾è®¾ç½®é€‰é¡¹</li>\n<li>ç”¨äºåˆ·æ–°å’Œåœæ­¢åŠ è½½å½“å‰æ–‡æ¡£çš„åˆ·æ–°å’Œåœæ­¢æŒ‰é’®</li>\n<li>ç”¨äºè¿”å›ä¸»é¡µçš„ä¸»é¡µæŒ‰é’®</li>\n</ul>\n<p>å¥‡æ€ªçš„æ˜¯ï¼Œæµè§ˆå™¨çš„ç”¨æˆ·ç•Œé¢å¹¶æ²¡æœ‰ä»»ä½•æ­£å¼çš„è§„èŒƒï¼Œè¿™æ˜¯å¤šå¹´æ¥çš„æœ€ä½³å®è·µè‡ªç„¶å‘å±•ä»¥åŠå½¼æ­¤ä¹‹é—´ç›¸äº’æ¨¡ä»¿çš„ç»“æœã€‚HTML5 ä¹Ÿæ²¡æœ‰å®šä¹‰æµè§ˆå™¨å¿…é¡»å…·æœ‰çš„ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼Œä½†åˆ—å‡ºäº†ä¸€äº›é€šç”¨çš„å…ƒç´ ï¼Œä¾‹å¦‚åœ°å€æ ã€çŠ¶æ€æ å’Œå·¥å…·æ ç­‰ã€‚</p>\n<p><strong>æœ‰ä¸€äº›æ¯”è¾ƒæœ‰è¶£çš„äº‹æƒ…ï¼š</strong></p>\n<p>Safari æ˜¯ä¹”å¸ƒæ–¯åœ¨ 2003 å¹´çš„ Macworld å¤§ä¼šå‘å¸ƒçš„ï¼Œ9 å¹´è¿‡å»äº†ï¼Œ08 å¹´æ‰å‘å±•èµ·æ¥çš„ Chrome ç”¨äº†ä¸åˆ° Safari ä¸€åŠçš„æ—¶é—´è¿œè¿œæŠŠ Safari ç”©åœ¨äº†åé¢ï¼Œè¿™è®© Safari æƒ…ä½•ä»¥å ªã€‚</p>\n<p>ä¸¤å¤§æµè§ˆå™¨éƒ½æ˜¯åŸºäºè‹¹æœçš„å¸ƒå±€å¼•æ“ Webkitï¼ŒæŒ‰é“ç† Safari æ˜¯å ä¼˜åŠ¿çš„ï¼Œå› ä¸ºä¸¤è€…éƒ½åˆ†åˆ«æ˜¯è‡ªå·±æ“ä½œç³»ç»Ÿçš„é»˜è®¤æµè§ˆå™¨ï¼Œè®¸å¤šäººå°±é¡ºä¾¿ä½¿ç”¨äº†ï¼Œæ‡’å¾—å»ä¸‹è½½åˆ«çš„æµè§ˆå™¨ã€‚</p>\n<p>è®¸å¤šäººå¯èƒ½ä¼šæƒ³ï¼Œè¿™è¿˜ä¸ç®€å•ï¼ŒChrome è¿è¡Œäº Windows æ“ä½œç³»ç»Ÿï¼Œè€Œ Safari å¤§éƒ¨åˆ†æ—¶å€™éƒ½ç”¨äºè‹¹æœè‡ªå·±çš„ç³»ç»Ÿï¼ŒWindows .VS. OS Xï¼Œå“ªä¸ªä½¿ç”¨äººç¾¤å¹¿ï¼Ÿå¾ˆæ˜¾ç„¶æ˜¯å‰è€…ï¼Œæ‰€ä»¥ Chrome å½“ç„¶æ¯” Safari å‘çœŸå¿«ï¼Œ<strong>å¯æ˜¯ï¼Œå®é™…ä¸Š Safari è¦æ¯” Chrome æ›´æ—©ç™»é™† Windowsã€‚</strong></p>\n<p>åœ¨ 2007 å¹´å…­æœˆï¼ŒSafari for Windows Beta ç‰ˆå°±å·²ç»å‘å¸ƒï¼Œæ­£å¼ç‰ˆäº 2008 å¹´ä¸‰æœˆå‘å¸ƒï¼Œè€Œ Chrome ç›´åˆ° 2008 å¹´çš„ä¹æœˆæ‰å‘å¸ƒï¼ŒChrome åªç”¨äº†ä¸€å¹´çš„æ—¶é—´å°±è¶…è¿‡äº† Safariã€‚</p>\n<p>å¤§é‡ Benchmark æµ‹è¯•è¡¨æ˜ Chrome ä¸ç®¡åœ¨ç½‘é¡µæ‰“å¼€è¿˜æ˜¯ JavaScript è¡¨ç°æ–¹é¢ï¼Œé€Ÿåº¦éƒ½æœ€å¿«ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå½“ Safari å‘å¸ƒ Windows ç‰ˆçš„æ—¶å€™ï¼Œæµ‹è¯•ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸ç®¡åœ¨ Mac è¿˜æ˜¯ PC ä¸Šæµ‹è¯•ï¼Œé‚£æ—¶å€™éƒ½æ˜¯æœ€å¿«çš„ï¼Œå¦‚æœä»…ä»…æ˜¯å› ä¸ºé€Ÿåº¦ï¼Œé‚£ä¹ˆ Safari åœ¨ 2007 å¹´å…­æœˆçš„è¡¨ç°å°±åº”è¯¥å’Œ chrome åœ¨ 2008 å¹´ä¹æœˆçš„æ—¶å€™ä¸€æ ·ã€‚</p>\n<p>éš¾é“ Chrome èƒœåœ¨æ’ä»¶ï¼Ÿä¹Ÿè®¸ï¼Œä¸è¿‡ Safari åœ¨ 2010 å¹´å¹´ä¸­çš„æ—¶å€™ä¹Ÿæœ‰äº†è®¸å¤šæ’ä»¶ï¼Œå½“ç„¶ï¼ŒChrome çš„æ’ä»¶è´¨é‡æ›´å¥½æ›´ä¸°å¯Œï¼Œå¦‚æœè¿™ä¹Ÿè¶³å¤Ÿè®© Safari è½åäº Chromeï¼Œé‚£ä¹ˆå¼€å‘å•†ä»¬å¯èƒ½æ—©å°±å°†æ¸¸æˆæ¤å…¥ Chromeï¼Œè€Œä¸”ï¼ŒFirefox ä¹Ÿå…ˆäº Chrome å’Œ Safari æ¤å…¥æ’ä»¶ï¼Œç°åœ¨ä¸ä¹Ÿè´¥ç»™äº† Chrome å—ï¼Ÿ</p>\n<p>ä¸»è¦åŸå› ï¼š</p>\n<ol>\n<li>Safari ç”¨èµ·æ¥ä¸èˆ’æœï¼Œgoogle æ¨å¹¿ç»™åŠ›</li>\n<li>ç‹¬ç‰¹çš„ç”¨æˆ·ä½“éªŒ (UIã€äº¤äº’ã€äº‘ã€Google å…¨å®¶æ¡¶)</li>\n</ol>\n<p><strong>é‚£ä¹ˆ Safari å°±ä¸€æ–‡ä¸å€¼äº†ï¼Ÿ</strong></p>\n<p>ä½†æ˜¯ï¼ŒMac ä¸Šçš„ç”¨æˆ·ä½¿ç”¨ safari æ›´åŠ çš„çœç”µã€çœèµ„æºï¼Œç¨³å®šæ€§ä¼šæ›´å¥½ã€‚** æ’ä»¶ä¸éœ€è¦çˆ¬æ¢¯å­ï¼ï¼ï¼** æ›´ä½çš„å­¦ä¹ æˆæœ¬ã€‚</p>\n<p><strong>IE (Internet Explorer) çš„é»‘å†å²ï¼š</strong></p>\n<p>IE æµè§ˆå™¨çš„å¼€å‘åº”è¯¥æ˜¯åœ¨ 1994 å¹´ä¸­å¼€å§‹çš„ï¼Œé‚£æ˜¯æˆ‘è¿˜åœ¨è¯»å¤§å­¦ã€‚å¾®è½¯ä¸ºäº†å¯¹æŠ—å½“æ—¶çš„ä¸»æµæµè§ˆå™¨ NetScapeï¼Œå‡†å¤‡å¼€å‘è‡ªå·±çš„æµè§ˆå™¨å¹¶åœ¨ Windows ä¸­é»˜è®¤æ†ç»‘é”€å”®ã€‚ä½†æ˜¯ï¼Œç•™ç»™å¾®è½¯çš„æ—¶é—´å¹¶ä¸å……è£•ï¼Œä»–ä»¬æ²¡æ—¶é—´ä»é›¶å¼€å§‹ï¼Œäºæ˜¯å’Œ Spyglass åˆä½œå¼€å‘ï¼Œäºæ˜¯ï¼Œè®¡ç®—æœºå†å²ä¸Šæœ€è‘—åä¹Ÿæœ€è‡­åæ˜­è‘—çš„æµè§ˆå™¨ IE è¯ç”Ÿäº†ã€‚å› ä¸ºå¼ºå¤§çš„åŠŸèƒ½å’Œæ†ç»‘ç­–ç•¥ï¼ŒIE è¿…é€Ÿå‡»è´¥äº† NetScapeï¼Œæˆä¸ºæµè§ˆå™¨å¸‚åœºçš„ç»å¯¹éœ¸ä¸»ã€‚</p>\n<p>åœ¨ 2002 å¹´ï¼ŒIE å·²ç»æ‹¥æœ‰äº† 95% çš„å¸‚åœºä»½é¢ï¼Œå‡ ä¹æ‰“è´¥äº†æ‰€æœ‰çš„ç«äº‰å¯¹æ‰‹ã€‚å¤§ä¸ºåƒµï¼Œåˆä¸æ€è¿›å–ï¼Œäºæ˜¯é¢ è¦†è€…å‰ä»†åç»§ã€‚Firefox å¼€å§‹è¿…é€Ÿå´›èµ·ï¼ŒChrome åæ¥å±…ä¸Šï¼Œåè§‚ IEï¼Œå‡ºç°äº†å„ç§å®‰å…¨æ¼æ´å’Œå…¼å®¹æ€§é—®é¢˜ã€‚2006 å¹´ï¼ŒIE è¢«è¯„ä¸º â€œå²ä¸Šç¬¬å…«ç³Ÿç§‘æŠ€äº§å“â€ã€‚åœ¨ç›¸å½“é•¿çš„æ—¶é—´é‡Œï¼Œ<strong>IE æµè§ˆå™¨æ˜¯å‰ç«¯ç¨‹åºå‘˜å‘˜çš„å™©æ¢¦</strong>ã€‚</p>\n<p>å¸¦ç»™æˆ‘ä»¬çš„æ€è€ƒï¼š</p>\n<ul>\n<li>è½¯ä»¶è¿­ä»£æ›´æ–°çš„é‡è¦æ€§ (å±…å®‰æ€å±)</li>\n<li>ç”¨æˆ·ä½“éªŒã€ç”¨æˆ·æ„ŸçŸ¥çš„é‡è¦æ€§ (äººæ€§åŒ–äº§å“)</li>\n<li>äº’è”ç½‘æ—¶ä»£ï¼Œä»€ä¹ˆéƒ½æ˜¯å¯ä»¥æ›¿ä»£çš„</li>\n<li>åˆ†äº«ã€å…è´¹ã€å…±ç­‘å…±èµ¢æ‰æ˜¯äº’è”ç½‘çš„ç²¾ç¥</li>\n</ul>\n<h4 id=\"æµè§ˆå™¨çš„ç»„æˆç»“æ„\"><a class=\"anchor\" href=\"#æµè§ˆå™¨çš„ç»„æˆç»“æ„\">#</a> æµè§ˆå™¨çš„ç»„æˆç»“æ„</h4>\n<p><img data-src=\"./assets/layers.png\" alt=\"img\" /></p>\n<ol>\n<li>\n<p><strong>ç”¨æˆ·ç•Œé¢ï¼ˆUser Interfaceï¼‰</strong> - åŒ…æ‹¬åœ°å€æ ã€å‰è¿› / åé€€æŒ‰é’®ã€ä¹¦ç­¾èœå•ç­‰ã€‚é™¤äº†æµè§ˆå™¨ä¸»çª—å£æ˜¾ç¤ºçš„æ‚¨è¯·æ±‚çš„é¡µé¢å¤–ï¼Œå…¶ä»–æ˜¾ç¤ºçš„å„ä¸ªéƒ¨åˆ†éƒ½å±äºç”¨æˆ·ç•Œé¢ã€‚</p>\n</li>\n<li>\n<p><strong>æµè§ˆå™¨å¼•æ“ï¼ˆBrowser engineï¼‰</strong> - åœ¨ç”¨æˆ·ç•Œé¢å’Œæ¸²æŸ“å¼•æ“ä¹‹é—´ä¼ é€æŒ‡ä»¤ã€‚</p>\n</li>\n<li>\n<p><strong>æ¸²æŸ“å¼•æ“ï¼ˆRendering engineï¼‰</strong> - è´Ÿè´£æ˜¾ç¤ºè¯·æ±‚çš„å†…å®¹ã€‚å¦‚æœè¯·æ±‚çš„å†…å®¹æ˜¯ HTMLï¼Œå®ƒå°±è´Ÿè´£è§£æ HTML å’Œ CSS å†…å®¹ï¼Œå¹¶å°†è§£æåçš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</p>\n<blockquote>\n<p>ä¹Ÿå¯ä»¥å«å‘ˆç°å¼•æ“ï¼ˆRendering Engineï¼‰æˆ–è€…å¸ƒå±€å¼•æ“ï¼ˆLayout Engineï¼‰</p>\n</blockquote>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¸²æŸ“å¼•æ“å¯æ˜¾ç¤º HTML å’Œ XML æ–‡æ¡£ä¸å›¾ç‰‡ã€‚é€šè¿‡æ’ä»¶ï¼ˆæˆ–æµè§ˆå™¨æ‰©å±•ç¨‹åºï¼‰ï¼Œè¿˜å¯ä»¥æ˜¾ç¤ºå…¶ä»–ç±»å‹çš„å†…å®¹ï¼›ä¾‹å¦‚ï¼Œä½¿ç”¨ PDF æŸ¥çœ‹å™¨æ’ä»¶å°±èƒ½æ˜¾ç¤º PDF æ–‡æ¡£ã€‚ä½†æ˜¯åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é›†ä¸­ä»‹ç»å…¶ä¸»è¦ç”¨é€”ï¼šæ˜¾ç¤ºä½¿ç”¨ CSS æ ¼å¼åŒ–çš„ HTML å†…å®¹å’Œå›¾ç‰‡ã€‚</p>\n<p>æµè§ˆå™¨ï¼ˆFirefoxã€Chrome æµè§ˆå™¨å’Œ Safariï¼‰æ˜¯åŸºäºä¸¤ç§æ¸²æŸ“å¼•æ“æ„å»ºçš„ã€‚Firefox ä½¿ç”¨çš„æ˜¯ Geckoï¼Œè¿™æ˜¯ Mozilla å…¬å¸ â€œè‡ªåˆ¶â€ çš„æ¸²æŸ“å¼•æ“ã€‚è€Œ Safari å’Œ Chrome æµè§ˆå™¨ä½¿ç”¨çš„éƒ½æ˜¯ WebKitã€‚</p>\n<table>\n<thead>\n<tr>\n<th>æµè§ˆå™¨</th>\n<th>æ¸²æŸ“å¼•æ“ï¼ˆå¼€å‘è¯­è¨€ï¼‰</th>\n<th>è„šæœ¬å¼•æ“ï¼ˆå¼€å‘è¯­è¨€ï¼‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Chrome</td>\n<td>Blink (c++)</td>\n<td>V8 (c++)</td>\n</tr>\n<tr>\n<td>Opera</td>\n<td>Blink (c++)</td>\n<td>V8 (c++)</td>\n</tr>\n<tr>\n<td>Safari</td>\n<td>Webkit (c++)</td>\n<td>JavaScript Core (nitro)</td>\n</tr>\n<tr>\n<td>FireFox</td>\n<td>Gecko (c++)</td>\n<td>SpiderMonkey (c/c++)</td>\n</tr>\n<tr>\n<td>Edge</td>\n<td>EdgeHTML (c++)</td>\n<td>Chakra JavaScript Engine (c++)</td>\n</tr>\n<tr>\n<td>IE</td>\n<td>Trident (c++)</td>\n<td>Chakra JScript Engine (c++)</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>Firefox åœ¨ 2017 å¹´å¯ç”¨äº†æ–°çš„ web å¼•æ“ Quantumï¼ŒQuantum ä»¥ Gecko å¼•æ“ä¸ºåŸºç¡€ï¼ŒåŒæ—¶åˆ©ç”¨äº† <span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5pbS8/dGFyZ2V0PWh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRnJ1c3QtbGFuZyUyRnJ1c3Q=\">Rust</span> çš„è‰¯å¥½å¹¶å‘æ€§å’Œ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NlcnZvL3NlcnZv\">Servo</span> çš„é«˜æ€§èƒ½ç»„ä»¶ï¼Œä¸º Firefox å¸¦æ¥äº†æ›´å¤šçš„å¹¶è¡ŒåŒ–å’Œ GPU è¿ç®—ï¼Œè®© Firefox æ›´å¿«æ›´å¯é ã€‚</p>\n<p>2015 å¹´ 3 æœˆï¼Œå¾®è½¯å°†æ”¾å¼ƒè‡ªå®¶ Edgeï¼šè½¬è€Œå¼€å‘ Chromium å†…æ ¸æµè§ˆå™¨ã€‚</p>\n</blockquote>\n<p>å®ƒä»¬çš„å¼€å‘æ—¶é—´è½´ï¼š</p>\n<p><img data-src=\"./assets/image-20190618172835156.png\" alt=\"/images/image-20190618172835156\" /></p>\n<p>WebKit æ˜¯ä¸€ç§å¼€æ”¾æºä»£ç æ¸²æŸ“å¼•æ“ï¼Œèµ·åˆç”¨äº Linux å¹³å°ï¼Œéšåç”± Apple å…¬å¸è¿›è¡Œä¿®æ”¹ï¼Œä»è€Œæ”¯æŒè‹¹æœæœºå’Œ Windowsã€‚æœ‰å…³è¯¦æƒ…ï¼Œè¯·å‚é˜… <span class=\"exturl\" data-url=\"aHR0cDovL3dlYmtpdC5vcmcv\">webkit.org</span></p>\n</li>\n<li>\n<p><strong>ç½‘ç»œï¼ˆNetworkingï¼‰</strong> - ç”¨äºç½‘ç»œè°ƒç”¨ï¼Œæ¯”å¦‚ HTTP è¯·æ±‚ã€‚å…¶æ¥å£ä¸å¹³å°æ— å…³ï¼Œå¹¶ä¸ºæ‰€æœ‰å¹³å°æä¾›åº•å±‚å®ç°ã€‚</p>\n</li>\n<li>\n<p><strong>ç”¨æˆ·ç•Œé¢åç«¯ï¼ˆUI Backendï¼‰</strong> - ç”¨äºç»˜åˆ¶åŸºæœ¬çš„çª—å£å°éƒ¨ä»¶ï¼Œæ¯”å¦‚ç»„åˆæ¡†å’Œçª—å£ã€‚å…¶å…¬å¼€äº†ä¸å¹³å°æ— å…³çš„é€šç”¨æ¥å£ï¼Œè€Œåœ¨åº•å±‚ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢æ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p><strong>JavaScript è§£é‡Šå™¨ï¼ˆJavaScript Interpreterï¼‰</strong>ã€‚ç”¨äºè§£æå’Œæ‰§è¡Œ JavaScript ä»£ç ï¼Œå¦‚ V8 å¼•æ“ã€‚</p>\n<p>JS å¼•æ“çº¿ç¨‹è´Ÿè´£è§£æ Javascript è„šæœ¬ï¼Œè¿è¡Œä»£ç ã€‚</p>\n<p><strong>JS å¼•æ“ä¸€ç›´ç­‰å¾…ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ï¼Œä¸€ä¸ª Tab é¡µï¼ˆrenderer è¿›ç¨‹ï¼‰ä¸­åªæœ‰ä¸€ä¸ª JS çº¿ç¨‹åœ¨è¿è¡Œ</strong></p>\n</li>\n<li>\n<p><strong>æ•°æ®å­˜å‚¨ï¼ˆData Persistenceï¼‰</strong>ã€‚è¿™æ˜¯æŒä¹…å±‚ã€‚æµè§ˆå™¨éœ€è¦åœ¨ç¡¬ç›˜ä¸Šä¿å­˜å„ç§æ•°æ®ï¼Œä¾‹å¦‚ Cookieã€‚æ–°çš„ HTML è§„èŒƒ (HTML5) å®šä¹‰äº† â€œç½‘ç»œæ•°æ®åº“â€ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´ï¼ˆä½†æ˜¯è½»ä¾¿ï¼‰çš„æµè§ˆå™¨å†…æ•°æ®åº“ã€‚</p>\n</li>\n</ol>\n<h4 id=\"æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„\"><a class=\"anchor\" href=\"#æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„\">#</a> æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</h4>\n<blockquote>\n<p>è¿›ç¨‹çº¿ç¨‹ç®€å•çš„ç†è§£ï¼šè¿›ç¨‹é‡Œé¢å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œè¿›ç¨‹å°±æ˜¯ QQï¼Œçº¿ç¨‹å°±æ˜¯ä¼šè¯ã€‚</p>\n</blockquote>\n<ul>\n<li>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</li>\n<li>æµè§ˆå™¨ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¿è¡Œï¼Œæ˜¯å› ä¸ºç³»ç»Ÿç»™å®ƒçš„è¿›ç¨‹åˆ†é…äº†èµ„æºï¼ˆcpuã€å†…å­˜ï¼‰</li>\n<li>ç®€å•ç‚¹ç†è§£ï¼Œæ¯æ‰“å¼€ä¸€ä¸ª Tab é¡µï¼Œå°±ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„æµè§ˆå™¨è¿›ç¨‹ã€‚</li>\n</ul>\n<p>æµè§ˆå™¨é‡Œé¢çš„è¿›ç¨‹ï¼š</p>\n<ol>\n<li>\n<p>Browser è¿›ç¨‹ï¼šæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼ˆè´Ÿè´£åè°ƒã€ä¸»æ§ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªã€‚ä½œç”¨æœ‰</p>\n<ul>\n<li>è´Ÿè´£æµè§ˆå™¨ç•Œé¢æ˜¾ç¤ºï¼Œä¸ç”¨æˆ·äº¤äº’ã€‚å¦‚å‰è¿›ï¼Œåé€€ç­‰</li>\n<li>è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹</li>\n<li>å°† Renderer è¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„ Bitmapï¼Œç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Š</li>\n<li>ç½‘ç»œèµ„æºçš„ç®¡ç†ï¼Œä¸‹è½½ç­‰</li>\n</ul>\n</li>\n<li>\n<p>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šæ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶æ‰åˆ›å»º</p>\n</li>\n<li>\n<p>GPU è¿›ç¨‹ï¼šæœ€å¤šä¸€ä¸ªï¼Œç”¨äº 3D ç»˜åˆ¶ç­‰</p>\n</li>\n<li>\n<p>æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰ï¼ˆRenderer è¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰</p>\n<ul>\n<li>é»˜è®¤æ¯ä¸ª Tab é¡µé¢ä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å½±å“ã€‚</li>\n<li>ä¸»è¦ä½œç”¨ä¸ºé¡µé¢æ¸²æŸ“ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰</li>\n</ul>\n</li>\n</ol>\n<p>æ¸²æŸ“è¿›ç¨‹æ˜¯å¤šçº¿ç¨‹çš„ï¼š</p>\n<ol>\n<li>\n<p>GUI æ¸²æŸ“çº¿ç¨‹</p>\n<ul>\n<li>è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼Œè§£æ HTMLï¼ŒCSSï¼Œæ„å»º DOM æ ‘å’Œ RenderObject æ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ç­‰ã€‚</li>\n<li><strong>å½“ç•Œé¢éœ€è¦é‡ç»˜ï¼ˆRepaintï¼‰æˆ–ç”±äºæŸç§æ“ä½œå¼•å‘å›æµ (reflow) æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œ</strong></li>\n<li>æ³¨æ„ï¼ŒGUI æ¸²æŸ“çº¿ç¨‹ä¸ JS å¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå½“ JS å¼•æ“æ‰§è¡Œæ—¶ GUI çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ˆç›¸å½“äºè¢«å†»ç»“äº†ï¼‰ï¼ŒGUI æ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ° JS å¼•æ“ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚</li>\n</ul>\n</li>\n<li>\n<p>js å¼•æ“çº¿ç¨‹</p>\n<ul>\n<li>ä¹Ÿç§°ä¸º JS å†…æ ¸ï¼Œè´Ÿè´£å¤„ç† Javascript è„šæœ¬ç¨‹åºã€‚ï¼ˆä¾‹å¦‚ V8 å¼•æ“ï¼‰</li>\n<li>JS å¼•æ“çº¿ç¨‹è´Ÿè´£è§£æ Javascript è„šæœ¬ï¼Œè¿è¡Œä»£ç ã€‚</li>\n<li><strong>JS å¼•æ“ä¸€ç›´ç­‰å¾…ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ï¼Œä¸€ä¸ª Tab é¡µï¼ˆrenderer è¿›ç¨‹ï¼‰ä¸­åªæœ‰ä¸€ä¸ª JS çº¿ç¨‹åœ¨è¿è¡Œ</strong></li>\n<li><strong>åŒæ ·æ³¨æ„ï¼ŒGUI æ¸²æŸ“çº¿ç¨‹ä¸ JS å¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚æ‰€ä»¥å¦‚æœ JS æ‰§è¡Œçš„æ—¶é—´è¿‡é•¿ï¼Œè¦æ”¾åœ¨ body ä¸‹é¢ï¼Œå¦åˆ™å°±ä¼šå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡ã€‚</strong></li>\n</ul>\n</li>\n<li>\n<p>äº‹ä»¶è§¦å‘çº¿ç¨‹</p>\n<ul>\n<li>ç®¡ç†ç€äº‹ä»¶é˜Ÿåˆ—</li>\n<li>ç›‘å¬äº‹ä»¶ï¼Œç¬¦åˆæ¡ä»¶æ—¶æŠŠå›è°ƒå‡½æ•°æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­</li>\n</ul>\n</li>\n<li>\n<p>å®šæ—¶è§¦å‘å™¨çº¿ç¨‹</p>\n<ul>\n<li>setInterval ä¸ setTimeout åœ¨æ­¤çº¿ç¨‹ä¸­è®¡æ—¶å®Œæ¯•åï¼ŒæŠŠå›è°ƒå‡½æ•°æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­</li>\n<li><strong>æµè§ˆå™¨å®šæ—¶è®¡æ•°å™¨å¹¶ä¸æ˜¯ç”± JavaScript å¼•æ“è®¡æ•°çš„</strong>ï¼Œï¼ˆå› ä¸º JavaScript å¼•æ“æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœå¤„äºé˜»å¡çº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®°è®¡æ—¶çš„å‡†ç¡®ï¼‰ï¼Œå› æ­¤é€šè¿‡å•ç‹¬çº¿ç¨‹æ¥è®¡æ—¶å¹¶è§¦å‘å®šæ—¶ï¼ˆè®¡æ—¶å®Œæ¯•åï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾… JS å¼•æ“ç©ºé—²åæ‰§è¡Œï¼‰</li>\n<li>æ³¨æ„ï¼ŒW3C åœ¨ HTML æ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚<strong> setTimeout ä¸­ä½äº 4ms çš„æ—¶é—´é—´éš”ç®—ä¸º 4ms</strong>ã€‚</li>\n</ul>\n</li>\n<li>\n<p>å¼‚æ­¥ http è¯·æ±‚çº¿ç¨‹</p>\n<ul>\n<li>æ£€æµ‹åˆ° XHR å¯¹è±¡çŠ¶æ€å˜åŒ–æ—¶ï¼Œå°†å›è°ƒå‡½æ•°æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­</li>\n<li>å°†æ£€æµ‹åˆ°çŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æœè®¾ç½®æœ‰å›è°ƒå‡½æ•°ï¼Œå¼‚æ­¥çº¿ç¨‹å°±<strong>äº§ç”ŸçŠ¶æ€å˜æ›´äº‹ä»¶</strong>ï¼Œå°†è¿™ä¸ªå›è°ƒå†æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚å†ç”± JavaScript å¼•æ“æ‰§è¡Œã€‚</li>\n</ul>\n<p>äº†è§£ ä¸€ä¸‹ï¼Œæ‰§è¡Œçº¿ï¼š</p>\n<p><img data-src=\"./assets/image-20190619165952240.png\" alt=\"/images/image-20190619165952240\" /></p>\n</li>\n</ol>\n<p><strong>æ¸²æŸ“çº¿ç¨‹ä¸ JS å¼•æ“çº¿ç¨‹äº’æ–¥</strong></p>\n<p>ç”±äº JavaScript æ˜¯å¯æ“çºµ DOM çš„ï¼Œå¦‚æœåœ¨ä¿®æ”¹è¿™äº›å…ƒç´ å±æ€§åŒæ—¶æ¸²æŸ“ç•Œé¢ï¼ˆå³ JS çº¿ç¨‹å’Œ UI çº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å°±å¯èƒ½ä¸ä¸€è‡´äº†ã€‚</p>\n<p>å› æ­¤ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœï¼Œæµè§ˆå™¨è®¾ç½® GUI æ¸²æŸ“çº¿ç¨‹ä¸ JS å¼•æ“ä¸ºäº’æ–¥çš„å…³ç³»ï¼Œå½“ JS å¼•æ“æ‰§è¡Œæ—¶ GUI çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œ GUI æ›´æ–°åˆ™ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ° JS å¼•æ“çº¿ç¨‹ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚</p>\n<p>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>X-UA-Compatible<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ie=edge<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Document<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token comment\">// é¡µé¢ä¸Šçš„ hello world ä¸ä¼šå˜æˆçº¢è‰²</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"app\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      hello world!</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><strong>JS é˜»å¡é¡µé¢åŠ è½½</strong></p>\n<p>ä»ä¸Šè¿°çš„äº’æ–¥å…³ç³»ï¼Œå¯ä»¥æ¨å¯¼å‡ºï¼ŒJS å¦‚æœæ‰§è¡Œæ—¶é—´è¿‡é•¿å°±ä¼šé˜»å¡é¡µé¢ã€‚</p>\n<p>è­¬å¦‚ï¼Œå‡è®¾ JS å¼•æ“æ­£åœ¨è¿›è¡Œå·¨é‡çš„è®¡ç®—ï¼Œæ­¤æ—¶å°±ç®— GUI æœ‰æ›´æ–°ï¼Œä¹Ÿä¼šè¢«ä¿å­˜åˆ°é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾… JS å¼•æ“ç©ºé—²åæ‰§è¡Œã€‚ ç„¶åï¼Œç”±äºå·¨é‡è®¡ç®—ï¼Œæ‰€ä»¥ JS å¼•æ“å¾ˆå¯èƒ½å¾ˆä¹…å¾ˆä¹…åæ‰èƒ½ç©ºé—²ï¼Œè‡ªç„¶ä¼šæ„Ÿè§‰åˆ°å·¨å¡æ— æ¯”ã€‚</p>\n<p>æ‰€ä»¥ï¼Œè¦å°½é‡é¿å… JS æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡çš„æ„Ÿè§‰ã€‚</p>\n<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>\n<ul>\n<li>css åŠ è½½ä¸ä¼šé˜»å¡ DOM æ ‘è§£æï¼ˆå¼‚æ­¥åŠ è½½æ—¶ DOM ç…§å¸¸æ„å»ºï¼‰ï¼Œä½†ä¼šé˜»å¡ render æ ‘æ¸²æŸ“ï¼ˆæ¸²æŸ“æ—¶éœ€ç­‰ css åŠ è½½å®Œæ¯•ï¼Œå› ä¸º render æ ‘éœ€è¦ css ä¿¡æ¯ï¼‰</li>\n<li>Javascript é˜»å¡ DOM è§£æ</li>\n</ul>\n<h4 id=\"æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶\"><a class=\"anchor\" href=\"#æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶\">#</a> æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶</h4>\n<p>å¯¹äºæ¸²æŸ“ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸ªæ¦‚å¿µï¼šè®¾å¤‡åˆ·æ–°ç‡ã€‚</p>\n<p>è®¾å¤‡åˆ·æ–°ç‡æ˜¯è®¾å¤‡å±å¹•æ¸²æŸ“çš„é¢‘ç‡ï¼Œé€šä¿—ä¸€ç‚¹å°±æ˜¯ï¼ŒæŠŠå±å¹•å½“ä½œå¢™ï¼Œè®¾å¤‡åˆ·æ–°ç‡å°±æ˜¯å¤šä¹…é‡æ–°ç²‰åˆ·ä¸€æ¬¡å¢™é¢ã€‚åŸºæœ¬æˆ‘ä»¬å¹³å¸¸æ¥è§¦çš„è®¾å¤‡ï¼Œå¦‚æ‰‹æœºã€ç”µè„‘ï¼Œå®ƒä»¬çš„é»˜è®¤åˆ·æ–°é¢‘ç‡éƒ½æ˜¯ 60FPSï¼Œä¹Ÿå°±æ˜¯å±å¹•åœ¨ 1s å†…æ¸²æŸ“ 60 æ¬¡ï¼Œçº¦ 16.7ms æ¸²æŸ“ä¸€æ¬¡å±å¹•ã€‚</p>\n<p>è¿™å°±æ„å‘³ç€ï¼Œæˆ‘ä»¬çš„æµè§ˆå™¨æœ€ä½³çš„æ¸²æŸ“æ€§èƒ½å°±æ˜¯æ‰€æœ‰çš„æ“ä½œåœ¨ä¸€å¸§ 16.7ms å†…å®Œæˆï¼Œèƒ½å¦åšåˆ°ä¸€å¸§å†…å®Œæˆç›´æ¥å†³å®šç€æ¸²æŸ“æ€§ï¼Œå½±å“ç”¨æˆ·äº¤äº’ã€‚</p>\n<p>æ¸²æŸ“å¼•æ“ä¸€å¼€å§‹ä¼šä»ç½‘ç»œå±‚è·å–è¯·æ±‚æ–‡æ¡£çš„å†…å®¹ï¼Œå†…å®¹çš„å¤§å°ä¸€èˆ¬é™åˆ¶åœ¨ 8000 ä¸ªå—ä»¥å†…ã€‚</p>\n<p>ç„¶åè¿›è¡Œå¦‚ä¸‹æ‰€ç¤ºçš„<strong>åŸºæœ¬æµç¨‹</strong>ï¼š</p>\n<p><img data-src=\"./assets/flow.png\" alt=\"img\" /></p>\n<p>æ¸²æŸ“å¼•æ“å°†å¼€å§‹è§£æ HTML æ–‡æ¡£ï¼Œå¹¶å°†å„æ ‡è®°é€ä¸ªè½¬åŒ–æˆ â€œå†…å®¹æ ‘â€ ä¸Šçš„ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaHRtbDVyb2Nrcy5jb20vemgvdHV0b3JpYWxzL2ludGVybmFscy9ob3dicm93c2Vyc3dvcmsvI0RPTQ==\">DOM</span> èŠ‚ç‚¹ã€‚åŒæ—¶ä¹Ÿä¼šè§£æå¤–éƒ¨ CSS æ–‡ä»¶ä»¥åŠæ ·å¼å…ƒç´ ä¸­çš„æ ·å¼æ•°æ®ã€‚HTML ä¸­è¿™äº›å¸¦æœ‰è§†è§‰æŒ‡ä»¤çš„æ ·å¼ä¿¡æ¯å°†ç”¨äºåˆ›å»ºå¦ä¸€ä¸ªæ ‘ç»“æ„ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaHRtbDVyb2Nrcy5jb20vemgvdHV0b3JpYWxzL2ludGVybmFscy9ob3dicm93c2Vyc3dvcmsvI1JlbmRlcl90cmVlX2NvbnN0cnVjdGlvbg==\">å‘ˆç°æ ‘</span>ã€‚</p>\n<p>å‘ˆç°æ ‘åŒ…å«å¤šä¸ªå¸¦æœ‰è§†è§‰å±æ€§ï¼ˆå¦‚é¢œè‰²å’Œå°ºå¯¸ï¼‰çš„çŸ©å½¢ã€‚è¿™äº›çŸ©å½¢çš„æ’åˆ—é¡ºåºå°±æ˜¯å®ƒä»¬å°†åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„é¡ºåºã€‚</p>\n<p>å‘ˆç°æ ‘æ„å»ºå®Œæ¯•ä¹‹åï¼Œè¿›å…¥ â€œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaHRtbDVyb2Nrcy5jb20vemgvdHV0b3JpYWxzL2ludGVybmFscy9ob3dicm93c2Vyc3dvcmsvI2xheW91dA==\">å¸ƒå±€</span>â€ å¤„ç†é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ†é…ä¸€ä¸ªåº”å‡ºç°åœ¨å±å¹•ä¸Šçš„ç¡®åˆ‡åæ ‡ã€‚ä¸‹ä¸€ä¸ªé˜¶æ®µæ˜¯<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaHRtbDVyb2Nrcy5jb20vemgvdHV0b3JpYWxzL2ludGVybmFscy9ob3dicm93c2Vyc3dvcmsvI1BhaW50aW5n\">ç»˜åˆ¶</span> - æ¸²æŸ“å¼•æ“ä¼šéå†å‘ˆç°æ ‘ï¼Œç”±ç”¨æˆ·ç•Œé¢åç«¯å±‚å°†æ¯ä¸ªèŠ‚ç‚¹ç»˜åˆ¶å‡ºæ¥ã€‚</p>\n<p>éœ€è¦ç€é‡æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ã€‚ä¸ºè¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæ¸²æŸ“å¼•æ“ä¼šåŠ›æ±‚å°½å¿«å°†å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚å®ƒä¸å¿…ç­‰åˆ°æ•´ä¸ª HTML æ–‡æ¡£è§£æå®Œæ¯•ä¹‹åï¼Œå°±ä¼šå¼€å§‹æ„å»ºå‘ˆç°æ ‘å’Œè®¾ç½®å¸ƒå±€ã€‚åœ¨ä¸æ–­æ¥æ”¶å’Œå¤„ç†æ¥è‡ªç½‘ç»œçš„å…¶ä½™å†…å®¹çš„åŒæ—¶ï¼Œæ¸²æŸ“å¼•æ“ä¼šå°†éƒ¨åˆ†å†…å®¹è§£æå¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚</p>\n<blockquote>\n<p>é‚£ä¹ˆæˆ‘ä»¬çŸ¥é“äº†ï¼ŒCSSOM æ ‘å’Œ DOM æ ‘åˆå¹¶æˆæ¸²æŸ“æ ‘ï¼Œç„¶åç”¨äºè®¡ç®—æ¯ä¸ªå¯è§å…ƒç´ çš„å¸ƒå±€ï¼Œå¹¶è¾“å‡ºç»™ç»˜åˆ¶æµç¨‹ï¼Œå°†åƒç´ æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚ä¼˜åŒ–ä¸Šè¿°æ¯ä¸€ä¸ªæ­¥éª¤å¯¹å®ç°æœ€ä½³æ¸²æŸ“æ€§èƒ½è‡³å…³é‡è¦ã€‚</p>\n</blockquote>\n<p>å…·ä½“çš„æµç¨‹ï¼š</p>\n<ul>\n<li>DOM æ ‘ä¸ CSSOM æ ‘åˆå¹¶åå½¢æˆæ¸²æŸ“æ ‘ã€‚</li>\n<li>æ¸²æŸ“æ ‘åªåŒ…å«æ¸²æŸ“ç½‘é¡µæ‰€éœ€çš„èŠ‚ç‚¹ã€‚</li>\n<li>å¸ƒå±€è®¡ç®—æ¯ä¸ªå¯¹è±¡çš„ç²¾ç¡®ä½ç½®å’Œå¤§å°ã€‚</li>\n<li>æœ€åä¸€æ­¥æ˜¯ç»˜åˆ¶ï¼Œä½¿ç”¨æœ€ç»ˆæ¸²æŸ“æ ‘å°†åƒç´ æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚</li>\n</ul>\n<p><img data-src=\"./assets/render-tree-construction.png\" alt=\"DOM CSSOM RenderTree\" /></p>\n<blockquote>\n<p>è¯·æ³¨æ„  <code>visibility: hidden</code>  ä¸  <code>display: none</code>  æ˜¯ä¸ä¸€æ ·çš„ã€‚å‰è€…éšè—å…ƒç´ ï¼Œä½†å…ƒç´ ä»å æ®ç€å¸ƒå±€ç©ºé—´ï¼ˆå³å°†å…¶æ¸²æŸ“æˆä¸€ä¸ªç©ºæ¡†ï¼‰ï¼Œè€Œåè€… ( <code>display: none</code> ) å°†å…ƒç´ ä»æ¸²æŸ“æ ‘ä¸­å®Œå…¨ç§»é™¤ï¼Œå…ƒç´ æ—¢ä¸å¯è§ï¼Œä¹Ÿä¸æ˜¯å¸ƒå±€çš„ç»„æˆéƒ¨åˆ†ã€‚</p>\n</blockquote>\n<p>æˆ‘ä»¬ä»¥ webkit çš„æ¸²æŸ“ä½œä¸ºç¤ºä¾‹ï¼š</p>\n<p><img data-src=\"./assets/webkitflow.png\" alt=\"img\" /></p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è°ƒè¯•å·¥å…·æ¥çœ‹ä¸€ä¸ªçœŸå®çš„ä¾‹å­ï¼š</p>\n<p><img data-src=\"./assets/image-20190618182337662.png\" alt=\"/images/image-20190618182337662\" /></p>\n<p><code>script</code>  æ ‡ç­¾çš„å¤„ç†</p>\n<p>JS å¯ä»¥æ“ä½œ DOM æ¥ä¿®æ”¹ DOM ç»“æ„ï¼Œå¯ä»¥æ“ä½œ CSSOM æ¥ä¿®æ”¹èŠ‚ç‚¹æ ·å¼ï¼Œè¿™å°±å¯¼è‡´äº†æµè§ˆå™¨åœ¨è§£æ HTML æ—¶ï¼Œä¸€æ—¦ç¢°åˆ° <code>script</code> ï¼Œå°±ä¼šç«‹å³åœæ­¢ HTML çš„è§£æï¼ˆè€Œ CSS ä¸ä¼šï¼‰ï¼Œæ‰§è¡Œ JSï¼Œå†è¿”è¿˜æ§åˆ¶æƒã€‚</p>\n<p>äº‹å®ä¸Šï¼ŒJS æ‰§è¡Œå‰ä¸ä»…ä»…æ˜¯åœæ­¢äº† HTML çš„è§£æï¼Œå®ƒè¿˜å¿…é¡»ç­‰å¾… CSS çš„è§£æå®Œæˆã€‚å½“æµè§ˆå™¨ç¢°åˆ° <code>script</code>  å…ƒç´ æ—¶ï¼Œå‘ç°è¯¥å…ƒç´ å‰é¢çš„ CSS è¿˜æœªè§£æå®Œï¼Œå°±ä¼šç­‰å¾… CSS è§£æå®Œæˆï¼Œå†å»æ‰§è¡Œ JSã€‚</p>\n<p>JS é˜»å¡äº† HTML çš„è§£æï¼Œä¹Ÿé˜»å¡äº†å…¶åçš„ CSS è§£æï¼Œæ•´ä¸ªè§£æè¿›ç¨‹å¿…é¡»ç­‰å¾… JS çš„æ‰§è¡Œå®Œæˆæ‰èƒ½å¤Ÿç»§ç»­ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ JS é˜»å¡é¡µé¢ã€‚ä¸€ä¸ª script æ ‡ç­¾ï¼Œæ¨è¿Ÿäº† DOM çš„ç”Ÿæˆã€CSSOM çš„ç”Ÿæˆä»¥åŠä¹‹åçš„æ‰€æœ‰æ¸²æŸ“è¿‡ç¨‹ï¼Œä»æ€§èƒ½è§’åº¦ä¸Šè®²ï¼Œå°† <code>script</code>  æ”¾åœ¨é¡µé¢åº•éƒ¨ï¼Œä¹Ÿå°±åˆæƒ…åˆç†äº†ã€‚</p>\n<p>ç®€å•æ¥è¯´ï¼šæ¸²æŸ“çº¿ç¨‹ä¸ JS å¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå½“ JS å¼•æ“æ‰§è¡Œæ—¶æ¸²æŸ“çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ˆç›¸å½“äºè¢«å†»ç»“äº†ï¼‰ï¼Œæ¸²æŸ“æ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ° JS å¼•æ“ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚</p>\n<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>\n<p>æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹åˆ†ä¸ºï¼š</p>\n<ul>\n<li>DOM æ ‘æ„å»º</li>\n<li>CSSOM æ ‘æ„å»º</li>\n<li>RenderObject æ ‘æ„å»º</li>\n<li>å¸ƒå±€</li>\n<li>ç»˜åˆ¶</li>\n</ul>\n<h4 id=\"é‡æ’reflowä¸é‡ç»˜repaint\"><a class=\"anchor\" href=\"#é‡æ’reflowä¸é‡ç»˜repaint\">#</a> é‡æ’ reflow ä¸é‡ç»˜ repaint</h4>\n<p><strong>é‡æ’ reflow</strong></p>\n<p>reflow æŒ‡çš„æ˜¯é‡æ–°è®¡ç®—é¡µé¢å¸ƒå±€ã€‚</p>\n<p>æŸä¸ªèŠ‚ç‚¹ reflow æ—¶ä¼šé‡æ–°è®¡ç®—èŠ‚ç‚¹çš„å°ºå¯¸å’Œä½ç½®ï¼Œè€Œä¸”è¿˜æœ‰å¯èƒ½è§¦å‘å…¶å­èŠ‚ç‚¹ã€ç¥–å…ˆèŠ‚ç‚¹å’Œé¡µé¢ä¸Šçš„å…¶ä»–èŠ‚ç‚¹ reflowã€‚åœ¨è¿™ä¹‹åå†è§¦å‘ä¸€æ¬¡ repaintã€‚</p>\n<p>å½“ render tree ä¸­çš„ä¸€éƒ¨åˆ† (æˆ–å…¨éƒ¨) å› ä¸ºå…ƒç´ çš„è§„æ¨¡å°ºå¯¸ï¼Œå¸ƒå±€ï¼Œéšè—ç­‰æ”¹å˜è€Œéœ€è¦é‡æ–°æ„å»ºã€‚è¿™å°±ç§°ä¸ºå›æµï¼Œæ¯ä¸ªé¡µé¢è‡³å°‘éœ€è¦ä¸€æ¬¡å›æµï¼Œå°±æ˜¯åœ¨é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™ã€‚</p>\n<p>å¯¼è‡´ reflow çš„æ“ä½œ</p>\n<ul>\n<li>è°ƒæ•´çª—å£å¤§å°</li>\n<li>æ”¹å˜å­—ä½“</li>\n<li>å¢åŠ æˆ–è€…ç§»é™¤æ ·å¼è¡¨</li>\n<li>å†…å®¹å˜åŒ–ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨ input æ¡†ä¸­è¾“å…¥æ–‡å­—</li>\n<li>æ¿€æ´» CSS ä¼ªç±»ï¼Œæ¯”å¦‚ :hover (IE ä¸­ä¸ºå…„å¼Ÿç»“ç‚¹ä¼ªç±»çš„æ¿€æ´»)</li>\n<li>æ“ä½œ class å±æ€§</li>\n<li>è„šæœ¬æ“ä½œ DOM</li>\n<li>è®¡ç®— offsetWidth å’Œ offsetHeight å±æ€§</li>\n<li>è®¾ç½® style å±æ€§çš„å€¼</li>\n</ul>\n<p>è§¦å‘é¡µé¢é‡å¸ƒå±€çš„ä¸€äº› css å±æ€§</p>\n<ul>\n<li>ç›’å­æ¨¡å‹ç›¸å…³å±æ€§ä¼šè§¦å‘é‡å¸ƒå±€\n<ul>\n<li><code>width</code></li>\n<li><code>height</code></li>\n<li><code>padding</code></li>\n<li><code>margin</code></li>\n<li><code>display</code></li>\n<li><code>border-width</code></li>\n<li><code>border</code></li>\n<li><code>min-height</code></li>\n</ul>\n</li>\n<li>å®šä½å±æ€§åŠæµ®åŠ¨ä¹Ÿä¼šè§¦å‘é‡å¸ƒå±€\n<ul>\n<li><code>top</code></li>\n<li><code>bottom</code></li>\n<li><code>left</code></li>\n<li><code>right</code></li>\n<li><code>position</code></li>\n<li><code>float</code></li>\n<li><code>clear</code></li>\n</ul>\n</li>\n<li>æ”¹å˜èŠ‚ç‚¹å†…éƒ¨æ–‡å­—ç»“æ„ä¹Ÿä¼šè§¦å‘é‡å¸ƒå±€\n<ul>\n<li><code>text-align</code></li>\n<li><code>overflow-y</code></li>\n<li><code>font-weight</code></li>\n<li><code>overflow</code></li>\n<li><code>font-family</code></li>\n<li><code>line-height</code></li>\n<li><code>vertical-align</code></li>\n<li><code>white-space</code></li>\n<li><code>font-size</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>é‡ç»˜ repaint</strong></p>\n<p>repiant æˆ–è€… redraw éå†æ‰€æœ‰çš„èŠ‚ç‚¹æ£€æµ‹å„èŠ‚ç‚¹çš„å¯è§æ€§ã€é¢œè‰²ã€è½®å»“ç­‰å¯è§çš„æ ·å¼å±æ€§ï¼Œç„¶åæ ¹æ®æ£€æµ‹çš„ç»“æœæ›´æ–°é¡µé¢çš„å“åº”éƒ¨åˆ†ã€‚</p>\n<p>å½“ render tree ä¸­çš„ä¸€äº›å…ƒç´ éœ€è¦æ›´æ–°å±æ€§ï¼Œè€Œè¿™äº›å±æ€§åªæ˜¯å½±å“å…ƒç´ çš„å¤–è§‚ï¼Œé£æ ¼ï¼Œè€Œä¸ä¼šå½±å“å¸ƒå±€çš„ï¼Œæ¯”å¦‚ background-colorã€‚åˆ™å°±å«ç§°ä¸ºé‡ç»˜</p>\n<p>åªè§¦å‘é‡ç»˜ä¸è§¦å‘é‡æ’çš„ä¸€äº› CSS å±æ€§ï¼š</p>\n<ul>\n<li><code>color</code></li>\n<li><code>border-style</code> ã€ <code>border-radius</code></li>\n<li><code>visibility</code></li>\n<li><code>text-decoration</code></li>\n<li><code>background</code> ã€ <code>background-image</code> ã€ <code>background-position</code> ã€ <code>background-repeat</code> ã€ <code>background-size</code></li>\n<li><code>outline</code> ã€ <code>outline-color</code> ã€ <code>outline-style</code> ã€ <code>outline-width</code></li>\n<li><code>box-shadow</code></li>\n</ul>\n<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> bstyle <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">;</span> <span class=\"token comment\">// cache</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>bstyle<span class=\"token punctuation\">.</span>padding <span class=\"token operator\">=</span> <span class=\"token string\">\"20px\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// reflow, repaint</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>bstyle<span class=\"token punctuation\">.</span>border <span class=\"token operator\">=</span> <span class=\"token string\">\"10px solid red\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//  å†ä¸€æ¬¡çš„ reflow å’Œ repaint</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>bstyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// repaint</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>bstyle<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token string\">\"#fad\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// repaint</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>bstyle<span class=\"token punctuation\">.</span>fontSize <span class=\"token operator\">=</span> <span class=\"token string\">\"2em\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// reflow, repaint</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// new DOM element - reflow, repaint</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dude!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæˆ‘ä»¬çš„æµè§ˆå™¨æ˜¯èªæ˜çš„ï¼Œå®ƒä¸ä¼šåƒä¸Šé¢é‚£æ ·ï¼Œä½ æ¯æ”¹ä¸€æ¬¡æ ·å¼ï¼Œå®ƒå°± reflow æˆ– repaint ä¸€æ¬¡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šæŠŠè¿™æ ·çš„æ“ä½œç§¯æ”’ä¸€æ‰¹ï¼Œç„¶ååšä¸€æ¬¡ reflowï¼Œè¿™åˆå«å¼‚æ­¥ reflow æˆ–å¢é‡å¼‚æ­¥ reflowã€‚ä½†æ˜¯æœ‰äº›æƒ…å†µæµè§ˆå™¨æ˜¯ä¸ä¼šè¿™ä¹ˆåšçš„ï¼Œæ¯”å¦‚ï¼šresize çª—å£ï¼Œæ”¹å˜äº†é¡µé¢é»˜è®¤çš„å­—ä½“ï¼Œç­‰ã€‚å¯¹äºè¿™äº›æ“ä½œï¼Œæµè§ˆå™¨ä¼šé©¬ä¸Šè¿›è¡Œ reflowã€‚</p>\n<p>ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬çš„è„šæœ¬ä¼šé˜»æ­¢æµè§ˆå™¨è¿™ä¹ˆå¹²ï¼Œæ¯”å¦‚ï¼šå¦‚æœæˆ‘ä»¬è¯·æ±‚ä¸‹é¢çš„ä¸€äº› DOM å€¼ï¼š</p>\n<p><strong>å‡å°‘é‡ç»˜ä¸é‡æ’ï¼š</strong></p>\n<p>é‡ç»˜å’Œå›æµåœ¨å®é™…å¼€å‘ä¸­æ˜¯å¾ˆéš¾é¿å…çš„ï¼Œæˆ‘ä»¬èƒ½åšçš„å°±æ˜¯å°½é‡å‡å°‘è¿™ç§è¡Œä¸ºçš„å‘ç”Ÿã€‚</p>\n<ul>\n<li>\n<p>js å°½é‡å°‘è®¿é—® dom èŠ‚ç‚¹å’Œ css å±æ€§ï¼Œå°½é‡ä¸è¦è¿‡å¤šçš„é¢‘ç¹çš„å»å¢åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤å…ƒç´ ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šé¢‘ç¹çš„å¯¼è‡´é¡µé¢ reflowï¼Œå¯ä»¥å…ˆæŠŠè¯¥ dom èŠ‚ç‚¹æŠ½ç¦»åˆ°å†…å­˜ä¸­è¿›è¡Œå¤æ‚çš„æ“ä½œç„¶åå† display åˆ°é¡µé¢ä¸Šã€‚(è™šæ‹Ÿ DOM)</p>\n</li>\n<li>\n<p>å‡å°‘ä¸å¿…è¦çš„ DOM å±‚çº§ï¼ˆDOM depthï¼‰ã€‚æ”¹å˜ DOM æ ‘ä¸­çš„ä¸€çº§ä¼šå¯¼è‡´æ‰€æœ‰å±‚çº§çš„æ”¹å˜ï¼Œä¸Šè‡³æ ¹éƒ¨ï¼Œä¸‹è‡³è¢«æ”¹å˜èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚è¿™å¯¼è‡´å¤§é‡æ—¶é—´è€—è´¹åœ¨æ‰§è¡Œ reflow ä¸Šé¢ã€‚</p>\n</li>\n<li>\n<p>ä¸è¦é€šè¿‡çˆ¶çº§æ¥æ”¹å˜å­å…ƒç´ æ ·å¼ï¼Œæœ€å¥½ç›´æ¥æ”¹å˜å­å…ƒç´ æ ·å¼ï¼Œæ”¹å˜å­å…ƒç´ æ ·å¼å°½å¯èƒ½ä¸è¦å½±å“çˆ¶å…ƒç´ å’Œå…„å¼Ÿå…ƒç´ çš„å¤§å°å’Œå°ºå¯¸</p>\n</li>\n<li>\n<p>å°½é‡é€šè¿‡ class æ¥è®¾è®¡å…ƒç´ æ ·å¼ï¼Œåˆ‡å¿Œç”¨ style å¤šæ¬¡æ“ä½œå•ä¸ªå±æ€§</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// bad</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">var</span> left <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>top <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>left <span class=\"token operator\">=</span> left <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>top  <span class=\"token operator\">=</span> top  <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// Good</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>el<span class=\"token punctuation\">.</span>className <span class=\"token operator\">+=</span> <span class=\"token string\">\" theclassname\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// Good</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>cssText <span class=\"token operator\">+=</span> <span class=\"token string\">\"; left: \"</span> <span class=\"token operator\">+</span> left <span class=\"token operator\">+</span> <span class=\"token string\">\"px; top: \"</span> <span class=\"token operator\">+</span> top <span class=\"token operator\">+</span> <span class=\"token string\">\"px;\"</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å°½å¯èƒ½çš„ä¸ºäº§ç”ŸåŠ¨ç”»çš„ HTML å…ƒç´ ä½¿ç”¨  <code>fixed</code>  æˆ–  <code>absolute</code>  çš„  <code>position</code>  ï¼Œé‚£ä¹ˆä¿®æ”¹ä»–ä»¬çš„ CSS æ˜¯ä¸ä¼š Reflow çš„ã€‚</p>\n</li>\n<li>\n<p>img æ ‡ç­¾è¦è®¾ç½®é«˜å®½ï¼Œä»¥å‡å°‘é‡ç»˜é‡æ’</p>\n</li>\n<li>\n<p>æŠŠ DOM ç¦»çº¿åä¿®æ”¹ï¼Œå¦‚å°†ä¸€ä¸ª dom è„±ç¦»æ–‡æ¡£æµï¼Œæ¯”å¦‚ <code>displayï¼šnone</code>  ï¼Œå†ä¿®æ”¹å±æ€§ï¼Œè¿™é‡Œåªå‘ç”Ÿä¸€æ¬¡å›æµã€‚</p>\n</li>\n<li>\n<p>å°½é‡ç”¨  <code>transform</code>  æ¥åšå½¢å˜å’Œä½ç§»ï¼Œä¸ä¼šé€ æˆå›æµ</p>\n</li>\n<li>\n<p>æƒè¡¡é€Ÿåº¦çš„å¹³æ»‘ã€‚æ¯”å¦‚å®ç°ä¸€ä¸ªåŠ¨ç”»ï¼Œä»¥ 1 ä¸ªåƒç´ ä¸ºå•ä½ç§»åŠ¨è¿™æ ·æœ€å¹³æ»‘ï¼Œä½† reflow å°±ä¼šè¿‡äºé¢‘ç¹ï¼ŒCPU å¾ˆå¿«å°±ä¼šè¢«å®Œå…¨å ç”¨ã€‚å¦‚æœä»¥ 3 ä¸ªåƒç´ ä¸ºå•ä½ç§»åŠ¨å°±ä¼šå¥½å¾ˆå¤šã€‚</p>\n</li>\n<li>\n<p>ä¸è¦ç”¨ tables å¸ƒå±€çš„å¦ä¸€ä¸ªåŸå› å°±æ˜¯ tables ä¸­æŸä¸ªå…ƒç´ ä¸€æ—¦è§¦å‘ reflow å°±ä¼šå¯¼è‡´ table é‡Œæ‰€æœ‰çš„å…¶å®ƒå…ƒç´  reflowã€‚åœ¨é€‚åˆç”¨ table çš„åœºåˆï¼Œå¯ä»¥è®¾ç½® table-layout ä¸º auto æˆ– fixedï¼Œ</p>\n</li>\n<li>\n<p>é¿å…ä¸å¿…è¦çš„å¤æ‚çš„ CSS é€‰æ‹©å™¨ï¼Œå°¤å…¶æ˜¯åä»£é€‰æ‹©å™¨ï¼ˆdescendant selectorsï¼‰ï¼Œå› ä¸ºä¸ºäº†åŒ¹é…é€‰æ‹©å™¨å°†è€—è´¹æ›´å¤šçš„ CPUã€‚</p>\n</li>\n</ul>\n<blockquote>\n<p>PS:  display:none ä¼šè§¦å‘ reflowï¼Œè€Œ visibility:hidden åªä¼šè§¦å‘ repaintï¼Œå› ä¸ºæ²¡æœ‰å‘ç°ä½ç½®å˜åŒ–ã€‚</p>\n</blockquote>\n<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>\n<p>é‡æ’ï¼šå…ƒç´ çš„å°ºå¯¸å˜äº†ã€ä½ç½®å˜äº†</p>\n<p>é‡ç»˜ï¼šå…ƒç´ çš„é¢œè‰²ã€èƒŒæ™¯ã€è¾¹æ¡†ã€è½®å»“å˜äº†ï¼Œä½†æ˜¯ï¼Œå…ƒç´ çš„å‡ ä½•å°ºå¯¸æ²¡æœ‰å˜ã€‚</p>\n<p>Reflow çš„æˆæœ¬æ¯” Repaint çš„æˆæœ¬é«˜å¾—å¤šçš„å¤šã€‚DOM Tree é‡Œçš„æ¯ä¸ªç»“ç‚¹éƒ½ä¼šæœ‰ reflow æ–¹æ³•ï¼Œä¸€ä¸ªç»“ç‚¹çš„ reflow å¾ˆæœ‰å¯èƒ½å¯¼è‡´å­ç»“ç‚¹ï¼Œç”šè‡³çˆ¶ç‚¹ä»¥åŠåŒçº§ç»“ç‚¹çš„ reflowã€‚åœ¨ä¸€äº›é«˜æ€§èƒ½çš„ç”µè„‘ä¸Šä¹Ÿè®¸è¿˜æ²¡ä»€ä¹ˆï¼Œä½†æ˜¯å¦‚æœ reflow å‘ç”Ÿåœ¨æ‰‹æœºä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯éå¸¸ç—›è‹¦å’Œè€—ç”µçš„ã€‚</p>\n<h3 id=\"é¡µé¢åŠ è½½ç¼“æ…¢çš„åŸå› \"><a class=\"anchor\" href=\"#é¡µé¢åŠ è½½ç¼“æ…¢çš„åŸå› \">#</a> é¡µé¢åŠ è½½ç¼“æ…¢çš„åŸå› </h3>\n<p><img data-src=\"./assets/browser-rendering.gif\" alt=\"browser-rendering\" /></p>\n<p><img data-src=\"./assets/backend-generation.gif\" alt=\"backend-generation\" /></p>\n<p><img data-src=\"./assets/wpo-front-backend.png\" alt=\"wpo-front-backend\" /></p>\n<h4 id=\"æµè§ˆå™¨éƒ¨åˆ†\"><a class=\"anchor\" href=\"#æµè§ˆå™¨éƒ¨åˆ†\">#</a> æµè§ˆå™¨éƒ¨åˆ†</h4>\n<ul>\n<li>\n<p>ç½‘ç»œå±‚é¢</p>\n<ol>\n<li>\n<p>è¿‡å¤šçš„ HTTP è¯·æ±‚</p>\n<p>æ‰“å¼€ä¸€ä¸ªç½‘é¡µçš„æ—¶å€™ï¼Œåå°ç¨‹åºçš„å“åº”å¹¶ä¸æ‰€éœ€å¤ªå¤šæ—¶é—´ï¼Œç­‰å¾…çš„æ—¶é—´ä¸»è¦èŠ±è´¹åœ¨ä¸‹è½½ç½‘é¡µå…ƒç´ ä¸Šäº†ï¼Œå³ HTMLã€CSSã€JavaScriptã€Flashã€å›¾ç‰‡ç­‰ã€‚æ®ç»Ÿè®¡ï¼Œæ¯å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œç½‘é¡µè½½å…¥çš„æ—¶é—´å°±ä¼šå¢åŠ  25-40 æ¯«ç§’ï¼ˆå…·ä½“å–å†³äºç”¨æˆ·çš„å¸¦å®½æƒ…å†µï¼‰ã€‚</p>\n</li>\n<li>\n<p>èµ„æºè®¿é—®å¸¦å®½å°</p>\n<p>ä¸¤æ–¹é¢ï¼Œä¸€æ–¹é¢æ˜¯å®¢æˆ·ç«¯çš„å¸¦å®½ï¼Œä¸€æ–¹é¢æ˜¯æœåŠ¡å™¨ç«¯çš„å¸¦å®½ã€‚</p>\n</li>\n<li>\n<p>ç½‘é¡µå…ƒç´  (å›¾ç‰‡ã€è§†é¢‘ã€æ ·å¼) å¤ªå¤§</p>\n</li>\n</ol>\n</li>\n<li>\n<p>æµè§ˆå™¨æ¸²æŸ“å±‚é¢</p>\n<ol>\n<li>\n<p>æ¸²æŸ“é˜»å¡ï¼š</p>\n<p>æµè§ˆå™¨æƒ³è¦æ¸²æŸ“ä¸€ä¸ªé¡µé¢å°±å¿…é¡»å…ˆæ„å»ºå‡º <code>DOM</code>  æ ‘ä¸ <code>CSSOM</code>  æ ‘ï¼Œå¦‚æœ <code>HTML</code>  ä¸ <code>CSS</code>  æ–‡ä»¶ç»“æ„éå¸¸åºå¤§ä¸å¤æ‚ï¼Œè¿™æ˜¾ç„¶ä¼šç»™é¡µé¢åŠ è½½é€Ÿåº¦å¸¦æ¥ä¸¥é‡å½±å“ã€‚</p>\n<p>æ‰€è°“æ¸²æŸ“é˜»å¡èµ„æºï¼Œå³æ˜¯å¯¹è¯¥èµ„æºå‘é€è¯·æ±‚åè¿˜éœ€è¦å…ˆæ„å»ºå¯¹åº”çš„ <code>DOM</code>  æ ‘æˆ– <code>CSSOM</code>  æ ‘ï¼Œè¿™ç§è¡Œä¸ºæ˜¾ç„¶ä¼šå»¶è¿Ÿæ¸²æŸ“æ“ä½œçš„å¼€å§‹æ—¶é—´ã€‚</p>\n<p>JS é˜»å¡ä¸ CSS é˜»å¡ï¼š</p>\n<p><strong>HTMLã€CSSã€JavaScript éƒ½æ˜¯ä¼šå¯¹æ¸²æŸ“äº§ç”Ÿé˜»å¡çš„èµ„æºï¼ŒHTML æ˜¯å¿…éœ€çš„ï¼ˆæ²¡æœ‰ DOM è¿˜è°ˆä½•æ¸²æŸ“ï¼‰ï¼Œä½†è¿˜å¯ä»¥ä» CSS ä¸ JavaScript ç€æ‰‹ä¼˜åŒ–ï¼Œå°½å¯èƒ½åœ°å‡å°‘é˜»å¡çš„äº§ç”Ÿã€‚</strong></p>\n</li>\n<li>\n<p>é‡å¤æ¸²æŸ“</p>\n</li>\n<li>\n<p>DNS è§£æ</p>\n</li>\n</ol>\n</li>\n<li>\n<p>æœåŠ¡ç«¯å±‚é¢</p>\n<ol>\n<li>ç¡¬ä»¶é…ç½®ä½ï¼šè¿™ä¸ªæ˜¯åŒå‘çš„</li>\n<li>æœåŠ¡å™¨è½¯ä»¶ï¼Œæ¯”å¦‚é˜²ç«å¢™ã€å†…ç½‘ç­–ç•¥ç­‰</li>\n<li>æœªå¯¹ Nginx è¿™ç±» web æœåŠ¡å™¨è¿›è¡Œé…ç½®ä¼˜åŒ–</li>\n<li>CPU å æ»¡ã€æ•°æ®åº“æœªä¼˜åŒ–</li>\n<li>ä»£ç é—®é¢˜ï¼Œä»£ç æ•ˆç‡ï¼Œä»£ç æ€§èƒ½</li>\n<li>åŒ…å«äº†è¿‡å¤šçš„åˆ†æç±»å·¥å…·</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"ä»£ç éƒ¨åˆ†\"><a class=\"anchor\" href=\"#ä»£ç éƒ¨åˆ†\">#</a> ä»£ç éƒ¨åˆ†</h4>\n<ul>\n<li>\n<p>æ„å»ºå±‚é¢</p>\n<p>æœªå¯¹ä»£ç è¿›è¡Œæ‰“åŒ…ã€å‹ç¼©ã€å…¼å®¹æ€§ä¼˜åŒ–ã€‚</p>\n<p>æœªåˆå¹¶é‡å¤çš„è¯·æ±‚ã€ä»£ç ã€‚</p>\n</li>\n<li>\n<p>ç¼–ç å±‚é¢</p>\n<p>æ²¡æœ‰è‰¯å¥½çš„ç¼–ç ä¹ æƒ¯ï¼Œé”™è¯¯çš„ç¼–æ’ JS ä¸ CSS</p>\n<p>for å¾ªç¯ã€è¿­ä»£ã€åŒæ­¥ã€é‡å®šå‘ã€é˜»å¡è¯·æ±‚</p>\n<p>æœªåˆ é™¤é‡å¤ã€æ— ç”¨çš„ä»£ç </p>\n<p>æœªå¯¹é€»è¾‘ä¸šåŠ¡å¤æ‚çš„ä»£ç è¿›è¡Œé‡æ„ï¼Œäº†è§£è®¾è®¡æ¨¡å¼ï¼Œå¯¹ä¸šåŠ¡è¿›è¡Œç–ç†</p>\n</li>\n<li>\n<p>æœºåˆ¶ (SSRï¼Œè‹±æ–‡ Server Side Renderï¼šæœåŠ¡å™¨ç«¯æ¸²æŸ“)</p>\n<p>æœªåŠ å…¥ Async å¼‚æ­¥æœºåˆ¶</p>\n<p>æœªæ€è€ƒé¡µé¢åŠ è½½ã€ç”¨æˆ·ä½“éªŒ</p>\n</li>\n<li>\n<p>è§„èŒƒ</p>\n<p>CSS è§„èŒƒ</p>\n<p>HTML è§„èŒƒ / HTML5 è§„èŒƒ</p>\n<p>Airbnb ä»£ç è§„èŒƒç­‰ã€‚</p>\n</li>\n</ul>\n<h3 id=\"ä¼˜åŒ–åŸåˆ™\"><a class=\"anchor\" href=\"#ä¼˜åŒ–åŸåˆ™\">#</a> ä¼˜åŒ–åŸåˆ™</h3>\n<h4 id=\"å°½é‡å‡å°‘httpè¯·æ±‚\"><a class=\"anchor\" href=\"#å°½é‡å‡å°‘httpè¯·æ±‚\">#</a> å°½é‡å‡å°‘ HTTP è¯·æ±‚</h4>\n<p>åœ¨æµè§ˆå™¨ (å®¢æˆ·ç«¯) å’ŒæœåŠ¡å™¨å‘ç”Ÿé€šä¿¡æ—¶ï¼Œå°±å·²ç»æ¶ˆè€—äº†å¤§é‡çš„æ—¶é—´ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œæƒ…å†µæ¯”è¾ƒç³Ÿç³•çš„æ—¶å€™ï¼Œè¿™ä¸ªé—®é¢˜å°¤å…¶çš„çªå‡ºã€‚</p>\n<p>ä¸€ä¸ªæ­£å¸¸ HTTP è¯·æ±‚çš„æµç¨‹ç®€è¿°ï¼šå¦‚åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ &quot;<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy54eHh4eHguY29t\">www.xxxxxx.com</span>&quot; å¹¶æŒ‰ä¸‹å›è½¦ï¼Œæµè§ˆå™¨å†ä¸è¿™ä¸ª URL æŒ‡å‘çš„æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œç„¶åæµè§ˆå™¨æ‰èƒ½å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä¿¡æ¯ï¼ŒæœåŠ¡å™¨åœ¨æ¥å—åˆ°è¯·æ±‚çš„ä¿¡æ¯åå†è¿”å›ç›¸åº”çš„ä¿¡æ¯ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„åº”ç­”ä¿¡æ¯åï¼Œå¯¹è¿™äº›æ•°æ®è§£é‡Šæ‰§è¡Œã€‚</p>\n<p>è€Œå½“æˆ‘ä»¬è¯·æ±‚çš„ç½‘é¡µæ–‡ä»¶ä¸­æœ‰å¾ˆå¤šå›¾ç‰‡ã€CSSã€JS ç”šè‡³éŸ³ä¹ç­‰ä¿¡æ¯æ—¶ï¼Œå°†ä¼šé¢‘ç¹çš„ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œä¸é‡Šæ”¾è¿æ¥ï¼Œè¿™å¿…å®šä¼šé€ æˆèµ„æºçš„æµªè´¹ï¼Œä¸”æ¯ä¸ª HTTP è¯·æ±‚éƒ½ä¼šå¯¹æœåŠ¡å™¨å’Œæµè§ˆå™¨äº§ç”Ÿæ€§èƒ½è´Ÿæ‹…ã€‚</p>\n<p>ç½‘é€Ÿç›¸åŒçš„æ¡ä»¶ä¸‹ï¼Œä¸‹è½½ä¸€ä¸ª 100KB çš„å›¾ç‰‡æ¯”ä¸‹è½½ä¸¤ä¸ª 50KB çš„å›¾ç‰‡è¦è€—è´¹çš„ç½‘ç»œèµ„æºæ›´å¤šã€‚æ‰€ä»¥ï¼Œè¯·å‡å°‘ HTTP è¯·æ±‚ã€‚</p>\n<p><strong>å…·ä½“çš„æ–¹æ³•ï¼š</strong></p>\n<ol>\n<li>\n<p>ç»„åˆæ–‡ä»¶ï¼Œä¼˜åŒ–å›¾ç‰‡ï¼Œä½¿ç”¨ sprites è®¾è®¡é£æ ¼ï¼šå°†èƒŒæ™¯å›¾ç‰‡åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡ <code>background-image</code>  å’Œ  <code>background-position</code>  æ§åˆ¶æ˜¾ç¤ºï¼›</p>\n<p>ç¡®ä¿æ‚¨çš„å›¾åƒä¸å¤§äºå®ƒä»¬æ‰€éœ€çš„å›¾åƒï¼Œå®ƒä»¬é‡‡ç”¨æ­£ç¡®çš„æ–‡ä»¶æ ¼å¼ï¼ˆPNG é€šå¸¸æ›´é€‚ç”¨äºå°‘äº 16 ç§é¢œè‰²çš„å›¾å½¢ï¼Œè€Œ JPEG é€šå¸¸æ›´é€‚åˆç…§ç‰‡ï¼‰å¹¶ä¸”å®ƒä»¬æ˜¯é’ˆå¯¹ Web å‹ç¼©çš„ã€‚</p>\n<p>ä½¿ç”¨ CSS sprites åœ¨ç½‘ç«™ä¸Šç»å¸¸ä½¿ç”¨çš„å›¾åƒåˆ›å»ºæ¨¡æ¿ï¼Œå¦‚æŒ‰é’®å’Œå›¾æ ‡ã€‚CSS sprites å°†æ‚¨çš„å›¾åƒç»„åˆæˆä¸€ä¸ªå¤§å›¾åƒï¼Œä¸€æ¬¡åŠ è½½æ‰€æœ‰ï¼ˆè¿™æ„å‘³ç€æ›´å°‘çš„ HTTP è¯·æ±‚ï¼‰ï¼Œç„¶ååªæ˜¾ç¤ºæ‚¨æƒ³è¦æ˜¾ç¤ºçš„éƒ¨åˆ†ã€‚è¿™æ„å‘³ç€æ‚¨é€šè¿‡ä¸è®©ç”¨æˆ·ç­‰å¾…åŠ è½½å¤šä¸ªå›¾åƒæ¥èŠ‚çœåŠ è½½æ—¶é—´ã€‚</p>\n<p>æœ‰ä¸€äº›åœ¨çº¿å·¥å…·ï¼š</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcHJpdGVjb3cuY29tLw==\">Sprite Cow</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc3ByaXRlYm94Lm5ldC8=\">Spritebox</span></li>\n</ul>\n</li>\n<li>\n<p>è‚‰è”å›¾ç‰‡ï¼Œä½¿ç”¨ <code>data:URL</code>  æ–¹æ¡ˆå°†å›¾åƒæ•°æ®åµŒå…¥å®é™…é¡µé¢ä¸­ã€‚è¿™å¯ä»¥å¢åŠ  HTML æ–‡æ¡£çš„å¤§å°ã€‚å°†å†…åµŒå›¾åƒç»„åˆåˆ°ï¼ˆç¼“å­˜çš„ï¼‰æ ·å¼è¡¨ä¸­æ˜¯ä¸€ç§å‡å°‘ HTTP è¯·æ±‚å¹¶é¿å…å¢åŠ é¡µé¢å¤§å°çš„æ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>ç®€åŒ–é¡µé¢çš„è®¾è®¡</p>\n</li>\n</ol>\n<h4 id=\"ä½¿ç”¨å†…å®¹ä¼ é€ç½‘ç»œcdn\"><a class=\"anchor\" href=\"#ä½¿ç”¨å†…å®¹ä¼ é€ç½‘ç»œcdn\">#</a> ä½¿ç”¨å†…å®¹ä¼ é€ç½‘ç»œ CDN</h4>\n<p>å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆCDNï¼‰ï¼Œä¹Ÿç§°ä¸ºå†…å®¹ä¼ é€ç½‘ç»œï¼Œæ˜¯ç”¨äºåˆ†å‘ä¼ é€å†…å®¹çš„è´Ÿè½½çš„æœåŠ¡å™¨ç½‘ç»œã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œæ‚¨ç½‘ç«™çš„å‰¯æœ¬å­˜å‚¨åœ¨å¤šä¸ªåœ°ç†ä½ç½®ä¸åŒçš„æ•°æ®ä¸­å¿ƒï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥æ›´å¿«ï¼Œæ›´å¯é åœ°è®¿é—®æ‚¨çš„ç½‘ç«™ã€‚</p>\n<p>å¯¹äºåˆåˆ›å…¬å¸å’Œç§äººç½‘ç«™æ¥è¯´ï¼ŒCDN æœåŠ¡çš„æˆæœ¬å¯èƒ½è¿‡é«˜ï¼Œä½†éšç€æ‚¨çš„ç›®æ ‡å—ä¼—å˜å¾—è¶Šæ¥è¶Šå¤§å¹¶å˜å¾—æ›´åŠ å…¨çƒåŒ–ï¼ŒCDN å¯¹äºå®ç°å¿«é€Ÿå“åº”æ—¶é—´æ˜¯å¿…è¦çš„ã€‚</p>\n<p>è¯·è®°ä½ï¼Œæœ€ç»ˆç”¨æˆ·å“åº”æ—¶é—´çš„ 80-90ï¼…ç”¨äºä¸‹è½½é¡µé¢ä¸­çš„æ‰€æœ‰ç»„ä»¶ï¼šå›¾åƒï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ï¼ŒFlash ç­‰ã€‚è¿™æ˜¯<em> Performance Golden Rule</em>ã€‚è€Œä¸æ˜¯ä»é‡æ–°è®¾è®¡åº”ç”¨ç¨‹åºæ¶æ„çš„è‰°å·¨ä»»åŠ¡å¼€å§‹ï¼Œæœ€å¥½é¦–å…ˆåˆ†æ•£æ‚¨çš„é™æ€å†…å®¹ã€‚è¿™ä¸ä»…å¯ä»¥å¤§å¤§ç¼©çŸ­å“åº”æ—¶é—´ï¼Œè€Œä¸”ç”±äºå†…å®¹äº¤ä»˜ç½‘ç»œï¼Œå®ƒæ›´å®¹æ˜“å®ç°ã€‚</p>\n<p>å†…å®¹ä¼ é€ç½‘ç»œï¼ˆCDNï¼‰æ˜¯åˆ†å¸ƒåœ¨å¤šä¸ªä½ç½®çš„ Web æœåŠ¡å™¨çš„é›†åˆï¼Œä»¥æ›´æœ‰æ•ˆåœ°å‘ç”¨æˆ·ä¼ é€å†…å®¹ã€‚é€‰æ‹©ç”¨äºå‘ç‰¹å®šç”¨æˆ·ä¼ é€å†…å®¹çš„æœåŠ¡å™¨é€šå¸¸åŸºäºç½‘ç»œæ¥è¿‘åº¦çš„åº¦é‡ã€‚ä¾‹å¦‚ï¼Œé€‰æ‹©å…·æœ‰æœ€å°‘ç½‘ç»œè·³æ•°çš„æœåŠ¡å™¨æˆ–å…·æœ‰æœ€å¿«å“åº”æ—¶é—´çš„æœåŠ¡å™¨ã€‚</p>\n<blockquote>\n<p>CDN æœåŠ¡å•†æœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸å†å¤šè¯´ï¼šä¸“é—¨åš CDN æœåŠ¡å™¨çš„è“è®¯ã€ç½‘å®¿ã€å¸è”ã€å¿«ç½‘ï¼Œè¿˜æœ‰é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ç­‰ã€‚å›½å¤–å¦‚<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5ha2FtYWkuY29tLw==\"> Akamai Technologies</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5lZGdlY2FzdC5jb20v\">EdgeCast</span> æˆ–<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5sZXZlbDMuY29tL2luZGV4LmNmbT9wYWdlSUQ9MzY=\"> level3</span></p>\n</blockquote>\n<p>é™¤äº†å»è´­ä¹°ä¸€äº› CDN æœåŠ¡å•†çš„æœåŠ¡ä»¥å¤–ï¼Œå¯¹äºå¤§å¤šæ•°å¼€å‘è€…ï¼Œå¯ä»¥ä½¿ç”¨å…¬å…± CDN ç½‘ç»œä¸Šçš„èµ„æºï¼Œå¦‚ä»¥ä¸‹çš„æ–¹å¼å»ä½¿ç”¨ CDN åŠ é€Ÿï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- google --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">&lt;!-- cdnjs --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">&lt;!-- qiniu cloud --></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">&lt;!-- other cdn --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token attr-name\">crossorigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://lib.baomitu.com/jquery/3.4.1/jquery.min.js<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é¿å…ç©ºsrcæˆ–è€…æ˜¯hrefå€¼\"><a class=\"anchor\" href=\"#é¿å…ç©ºsrcæˆ–è€…æ˜¯hrefå€¼\">#</a> é¿å…ç©º src æˆ–è€…æ˜¯ href å€¼</h4>\n<p>ç©ºçš„ src å’Œ href éƒ½ä¼šå¯¼è‡´å¤šä½™çš„ HTTP è¯·æ±‚ï¼Œè™½ç„¶ä¸å½±å“åŠ è½½æ—¶é—´ï¼Œä½†æ˜¯ä¼šå¯¹æœåŠ¡å™¨äº§ç”Ÿä¸å¿…è¦çš„æµé‡å’Œå‹åŠ›ã€‚æµè§ˆå™¨ä»ç„¶ä¼šå‘æœåŠ¡å™¨å‘èµ·ä¸€ä¸ª HTTP è¯·æ±‚ï¼š</p>\n<ul>\n<li>IE å‘é¡µé¢æ‰€åœ¨çš„ç›®å½•å‘é€è¯·æ±‚</li>\n<li>Safariã€Chromeã€Firefox å‘é¡µé¢æœ¬èº«å‘é€è¯·æ±‚</li>\n<li>Opera ä¸æ‰§è¡Œä»»ä½•æ“ä½œ</li>\n</ul>\n<p>ç©ºçš„ src çš„ image ä¸¥é‡çš„ä»¥è‡³äºå½±å“æ•´ä¸ªç½‘ç«™çš„ç”¨æˆ·ä½“éªŒï¼Œç©º  <code>src</code>  äº§ç”Ÿè¯·æ±‚çš„åæœä¸å®¹å°æ†©ï¼š</p>\n<ul>\n<li>ç»™æœåŠ¡å™¨é€ æˆæ„å¤–çš„æµé‡è´Ÿæ‹…ï¼Œå°¤å…¶æ—¶æ—¥ PV è¾ƒå¤§æ—¶ï¼›</li>\n<li>æµªè´¹æœåŠ¡å™¨è®¡ç®—èµ„æºï¼›</li>\n<li>å¯èƒ½äº§ç”ŸæŠ¥é”™ã€‚</li>\n</ul>\n<p>æœ‰ä¸¤ç§å½¢å¼ï¼š</p>\n<ol>\n<li>\n<p>HTML å½¢å¼</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>JavaScript å½¢å¼</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<p>è§£å†³åŠæ³•ï¼š</p>\n<ol>\n<li>åˆ é™¤ç©ºçš„ <code>src</code>  å’Œ <code>href</code>  æ ‡ç­¾</li>\n<li>ç»™ <code>a</code>  æ ‡ç­¾çš„ <code>href</code>  å±æ€§ï¼Œè¿æ¥åˆ°å®é™…çš„é¡µé¢ï¼š</li>\n</ol>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#nogo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>##<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>###<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>void(0);<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>void(0)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"3\">\n<li>ç¦æ­¢è·³è½¬ï¼Œæ·»åŠ  <code>cursor:pointer</code>  æ ·å¼</li>\n</ol>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token selector\">a</span><span class=\"token punctuation\">&#123;</span><span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span> pointer<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span><span class=\"token punctuation\">></span></span>ç‚¹å‡»ä¸€<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>ç‚¹å‡»äºŒ<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"4\">\n<li>ç»™ <code>a</code>  æ ‡ç­¾åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æè¿°ä¿¡æ¯çš„ <code>href</code>  å±æ€§ï¼Œå¹¶ç›‘æ§ <code>click</code>  äº‹ä»¶è°ƒç”¨ <code>preventDefault()</code>  å‡½æ•°ã€‚</li>\n</ol>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#Something_De scriptive<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>my_id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Trigger<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#my_id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å–æ¶ˆå•å‡»äº‹ä»¶çš„é»˜è®¤åŠ¨ä½œä»¥é˜»æ­¢é“¾æ¥çš„è·³è½¬ã€‚</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">//  å…¶ä»–çš„ä»£ç </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>è®© <code>&lt;a&gt;</code>  å¤Ÿå“åº”é”®ç›˜äº‹ä»¶å¹¶è·å¾—ç„¦ç‚¹ï¼ˆä»è€Œå±å¹•é˜…è¯»å™¨èƒ½å¤Ÿè¯»å‡ºèƒŒåçš„å†…å®¹ï¼Œå¢å¼ºå¯è®¿é—®æ€§ï¼‰</li>\n<li>ä¼˜é›…é™çº§ï¼Œåœ¨ç½‘ç»œè¿æ¥å¾ˆå·®ï¼Œè¿˜æ²¡æœ‰åŠ è½½åˆ° CSS çš„æ—¶å€™ï¼Œ <code>&lt;a&gt;</code>  ä¾ç„¶æœ‰æ‰‹å‹ä¸æ­£å¸¸çš„ link æ ·å¼ã€‚</li>\n</ul>\n<h4 id=\"gzipçš„ç»„ä»¶\"><a class=\"anchor\" href=\"#gzipçš„ç»„ä»¶\">#</a> gzip çš„ç»„ä»¶</h4>\n<p>æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ  <code>gzip</code>  å‹ç¼©å¹¶ä¼šä¸ºæ‰€æœ‰ HTTP è¯·æ±‚è‡ªåŠ¨åå•†æ­¤ç±»å‹ç¼©ã€‚å¯ç”¨  <code>gzip</code>  å‹ç¼©å¯å¤§å¹…ç¼©å‡æ‰€ä¼ è¾“çš„å“åº”çš„å¤§å°ï¼ˆæœ€å¤šå¯ç¼©å‡ 90%ï¼‰ï¼Œä»è€Œæ˜¾è‘—ç¼©çŸ­ä¸‹è½½ç›¸åº”èµ„æºæ‰€éœ€çš„æ—¶é—´ã€å‡å°‘å®¢æˆ·ç«¯çš„æµé‡æ¶ˆè€—å¹¶åŠ å¿«ç½‘é¡µçš„é¦–æ¬¡å‘ˆç°é€Ÿåº¦ã€‚</p>\n<p>ä» HTTP / 1.1 å¼€å§‹ï¼ŒWeb å®¢æˆ·ç«¯è¡¨ç¤ºæ”¯æŒä½¿ç”¨ HTTP è¯·æ±‚ä¸­çš„ Accept-Encoding æ ‡å¤´è¿›è¡Œå‹ç¼©ã€‚</p>\n<pre><code>Accept-Encodingï¼šgzipï¼Œdeflate\n</code></pre>\n<p>å‹ç¼©åŒ…æ‹¬ XML å’Œ JSON åœ¨å†…çš„ä»»ä½•æ–‡æœ¬å“åº”éƒ½æ˜¯å€¼å¾—çš„ã€‚ä¸åº”å¯¹å›¾åƒå’Œ PDF æ–‡ä»¶è¿›è¡Œ gzip å‹ç¼©ï¼Œå› ä¸ºå®ƒä»¬å·²ç»è¿‡å‹ç¼©ã€‚è¯•å›¾å¯¹å®ƒä»¬è¿›è¡Œ gzip ä¸ä»…ä¼šæµªè´¹ CPUï¼Œè¿˜å¯èƒ½ä¼šå¢åŠ æ–‡ä»¶å¤§å°ã€‚</p>\n<p>æ¯”å¦‚ï¼Œåœ¨ nginx ä¸­å¼€å¯ gzip å‹ç¼©ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¼€å¯ gzip</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">gzip</span> on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å¯ç”¨ gzip å‹ç¼©çš„æœ€å°æ–‡ä»¶ï¼Œå°äºè®¾ç½®å€¼çš„æ–‡ä»¶å°†ä¸ä¼šå‹ç¼©</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>gzip_min_length 1k<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># gzip å‹ç¼©çº§åˆ«ï¼Œ1-10ï¼Œæ•°å­—è¶Šå¤§å‹ç¼©çš„è¶Šå¥½ï¼Œä¹Ÿè¶Šå ç”¨ CPU æ—¶é—´ï¼Œåé¢ä¼šæœ‰è¯¦ç»†è¯´æ˜</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>gzip_comp_level <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># è¿›è¡Œå‹ç¼©çš„æ–‡ä»¶ç±»å‹ã€‚javascript æœ‰å¤šç§å½¢å¼ã€‚å…¶ä¸­çš„å€¼å¯ä»¥åœ¨ mime.types æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png font/ttf font/otf image/svg+xml<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># æ˜¯å¦åœ¨ http header ä¸­æ·»åŠ  Vary: Accept-Encodingï¼Œå»ºè®®å¼€å¯</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>gzip_vary on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># ç¦ç”¨ IE 6 gzip</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>gzip_disable <span class=\"token string\">\"MSIE [1-6]\\.\"</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å…¶ä»– web å®¹å™¨å¯åŠ¨ gzip çš„æ–¹æ³•ï¼š</p>\n<ul>\n<li>Apacheï¼šä½¿ç”¨ <span class=\"exturl\" data-url=\"aHR0cDovL2h0dHBkLmFwYWNoZS5vcmcvZG9jcy9jdXJyZW50L21vZC9tb2RfZGVmbGF0ZS5odG1s\">mod_deflate</span></li>\n<li>Nginxï¼šä½¿ç”¨ <span class=\"exturl\" data-url=\"aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfZ3ppcF9tb2R1bGUuaHRtbA==\">ngx_http_gzip_module</span></li>\n<li>IISï¼š<span class=\"exturl\" data-url=\"aHR0cDovL3RlY2huZXQubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2NjNzcxMDAzKHY9V1MuMTApLmFzcHg=\">é…ç½® HTTP å‹ç¼©åŠŸèƒ½</span></li>\n</ul>\n<h4 id=\"cssæ”¾åœ¨é¡¶éƒ¨jsæ”¾åœ¨åº•éƒ¨\"><a class=\"anchor\" href=\"#cssæ”¾åœ¨é¡¶éƒ¨jsæ”¾åœ¨åº•éƒ¨\">#</a> CSS æ”¾åœ¨é¡¶éƒ¨ï¼ŒJS æ”¾åœ¨åº•éƒ¨</h4>\n<p>æŠŠ Javascript è„šæœ¬åœ¨åº•éƒ¨ï¼Œåˆ é™¤é˜»æ­¢æ¸²æŸ“çš„ JavaScript<br />\n åœ¨ HTML æ–‡ä»¶ <code>&lt;body&gt;</code>  ä¸­æŒ‡å®šå¤–éƒ¨æ ·å¼è¡¨å’Œå†…è”æ ·å¼å—å¯èƒ½å¯¹æµè§ˆå™¨çš„æ¸²æŸ“æ€§èƒ½äº§ç”Ÿä¸åˆ©å½±å“ã€‚</p>\n<ol>\n<li>æµè§ˆå™¨é˜»å¡æ¸²æŸ“ç½‘é¡µç›´åˆ°æ‰€æœ‰å¤–éƒ¨çš„æ ·å¼è¡¨éƒ½å·²è¢«ä¸‹è½½ã€‚</li>\n<li>ï¼ˆç”¨ <code>&lt;style&gt;</code>  æ ‡è®°æŒ‡å®šçš„ï¼‰å†…è”æ ·å¼å—å¯èƒ½ä¼šå¯¼è‡´ reflows å’Œé¡µé¢è·³åŠ¨ã€‚<br />\nå› æ­¤ï¼ŒæŠŠå¤–éƒ¨æ ·å¼è¡¨å’Œå†…è”æ ·å¼å—æ”¾åœ¨é¡µé¢çš„ <code>&lt;head&gt;</code>  ä¸­æ˜¯å¾ˆé‡è¦çš„ã€‚é€šè¿‡ç¡®ä¿æ ·å¼è¡¨é¦–å…ˆè¢«ä¸‹è½½å’Œè§£æï¼Œå¯ä»¥è®©æµè§ˆå™¨é€æ­¥æ¸²æŸ“é¡µé¢ã€‚</li>\n</ol>\n<p>å…·ä½“åšæ³•ï¼š</p>\n<ul>\n<li>\n<p>å°†å†…è”æ ·å¼å—å’Œ <code>&lt;link&gt;</code>  å…ƒç´ ä»é¡µé¢ <code>&lt;body&gt;</code>  ç§»åŠ¨åˆ°é¡µé¢ <code>&lt;head&gt;</code>  ä¸­ã€‚</p>\n<p>HTML 4.01 è§„èŒƒï¼ˆç¬¬ 12.3 èŠ‚ï¼‰è§„å®šï¼Œå§‹ç»ˆæŠŠä½¿ç”¨ <code>&lt;link&gt;</code>  æ ‡ç­¾çš„å¤–éƒ¨æ ·å¼è¡¨æ”¾åœ¨ <code>&lt;head&gt;</code>  éƒ¨åˆ†é‡Œï¼Œè¿˜è¦ç¡®ä¿æ‚¨æŒ‡å®šçš„æ ·å¼æœ‰æ­£ç¡®çš„é¡ºåºã€‚</p>\n</li>\n<li>\n<p>æŠŠ <code>&lt;style&gt;</code>  åŒºå—æ”¾åœ¨ <code>&lt;head&gt;</code>  éƒ¨åˆ†é‡Œã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ css åª’ä½“ç±»å‹</p>\n</li>\n</ul>\n<p>å¦‚æœå¯ä»¥è®© <code>CSS</code>  èµ„æºåªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ä½¿ç”¨ï¼Œè¿™æ ·è¿™äº›èµ„æºå°±å¯ä»¥åœ¨é¦–æ¬¡åŠ è½½æ—¶å…ˆä¸è¿›è¡Œæ„å»º <code>CSSOM</code>  æ ‘ï¼Œåªæœ‰åœ¨ç¬¦åˆç‰¹å®šæ¡ä»¶æ—¶ï¼Œæ‰ä¼šè®©æµè§ˆå™¨è¿›è¡Œé˜»å¡æ¸²æŸ“ç„¶åæ„å»º <code>CSSOM</code>  æ ‘ã€‚</p>\n<p><code>CSS</code>  çš„åª’ä½“æŸ¥è¯¢æ­£æ˜¯ç”¨æ¥å®ç°è¿™ä¸ªåŠŸèƒ½çš„ï¼Œå®ƒç”±åª’ä½“ç±»å‹ä»¥åŠé›¶ä¸ªæˆ–å¤šä¸ªæ£€æŸ¥ç‰¹å®šåª’ä½“ç‰¹å¾çŠ¶å†µçš„è¡¨è¾¾å¼ç»„æˆã€‚</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- æ²¡æœ‰ä½¿ç”¨åª’ä½“æŸ¥è¯¢ï¼Œè¿™ä¸ª css èµ„æºä¼šé˜»å¡æ¸²æŸ“  --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>style.css<span class=\"token punctuation\">\"</span></span>    <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">&lt;!-- all æ˜¯é»˜è®¤ç±»å‹ï¼Œå®ƒå’Œä¸è®¾ç½®åª’ä½“æŸ¥è¯¢çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>style.css<span class=\"token punctuation\">\"</span></span>    <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>all<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">&lt;!-- åŠ¨æ€åª’ä½“æŸ¥è¯¢ï¼Œ å°†åœ¨ç½‘é¡µåŠ è½½æ—¶è®¡ç®—ã€‚</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>æ ¹æ®ç½‘é¡µåŠ è½½æ—¶è®¾å¤‡çš„æ–¹å‘ï¼Œportrait.css å¯èƒ½é˜»å¡æ¸²æŸ“ï¼Œä¹Ÿå¯èƒ½ä¸é˜»å¡æ¸²æŸ“ã€‚--></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>portrait.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>orientation:portrait<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">&lt;!-- åªåœ¨æ‰“å°ç½‘é¡µæ—¶åº”ç”¨ï¼Œå› æ­¤ç½‘é¡µé¦–æ¬¡åœ¨æµè§ˆå™¨ä¸­åŠ è½½æ—¶ï¼Œå®ƒä¸ä¼šé˜»å¡æ¸²æŸ“ã€‚ --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>print.css<span class=\"token punctuation\">\"</span></span>    <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>print<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä½¿ç”¨åª’ä½“æŸ¥è¯¢å¯ä»¥è®© CSS èµ„æºä¸åœ¨é¦–æ¬¡åŠ è½½ä¸­é˜»å¡æ¸²æŸ“ï¼Œä½†ä¸ç®¡æ˜¯å“ªç§ CSS èµ„æºå®ƒä»¬çš„ä¸‹è½½è¯·æ±‚éƒ½ä¸ä¼šè¢«å¿½ç•¥ï¼Œæµè§ˆå™¨ä»ç„¶ä¼šå…ˆä¸‹è½½ CSS æ–‡ä»¶ã€‚</p>\n<p><strong>æŠŠ Javascript è„šæœ¬åœ¨åº•éƒ¨ï¼Œåˆ é™¤é˜»æ­¢æ¸²æŸ“çš„ JavaScript</strong></p>\n<p>æµè§ˆå™¨å¿…é¡»é€šè¿‡åœ¨å‘ˆç°é¡µé¢ä¹‹å‰è§£æ HTML æ¥æ„å»º DOM æ ‘ã€‚å¦‚æœæ‚¨çš„æµè§ˆå™¨åœ¨æ­¤è¿‡ç¨‹ä¸­é‡åˆ°è„šæœ¬ï¼Œåˆ™å¿…é¡»å…ˆåœæ­¢å¹¶æ‰§è¡Œå®ƒï¼Œç„¶åæ‰èƒ½ç»§ç»­ã€‚</p>\n<p>å…·ä½“åšæ³•ï¼š</p>\n<p>å°†è„šæœ¬å®šä¹‰æˆ–å¼•ç”¨æ”¾ç½®åˆ° <code>&lt;body&gt;</code>  åº•éƒ¨ã€‚<br />\n <code>&lt;script defer=&quot;defer&quot;&gt;</code>  defer å±æ€§è§„å®šæ˜¯å¦å¯¹è„šæœ¬æ‰§è¡Œè¿›è¡Œå»¶è¿Ÿï¼Œ è„šæœ¬å°†åœ¨é¡µé¢å®Œæˆè§£ææ—¶æ‰§è¡Œã€‚</p>\n<p><img data-src=\"./assets/bVcQV0.jpeg\" alt=\"è¯·è¾“å…¥å›¾ç‰‡æè¿°\" /></p>\n<p>è“è‰²çº¿ä»£è¡¨ç½‘ç»œè¯»å–ï¼Œçº¢è‰²çº¿ä»£è¡¨æ‰§è¡Œæ—¶é—´ï¼Œè¿™ä¿©éƒ½æ˜¯é’ˆå¯¹è„šæœ¬çš„ï¼›ç»¿è‰²çº¿ä»£è¡¨ HTML è§£æã€‚</p>\n<p>æ­¤å›¾å‘Šè¯‰æˆ‘ä»¬ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š</p>\n<ol>\n<li><code>defer</code>  å’Œ  <code>async</code>  åœ¨ç½‘ç»œè¯»å–ï¼ˆä¸‹è½½ï¼‰è¿™å—å„¿æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼ˆç›¸è¾ƒäº HTML è§£æï¼‰</li>\n<li>å®ƒä¿©çš„å·®åˆ«åœ¨äºè„šæœ¬ä¸‹è½½å®Œä¹‹åä½•æ—¶æ‰§è¡Œï¼Œæ˜¾ç„¶  <code>defer</code>  * æ˜¯æœ€æ¥è¿‘æˆ‘ä»¬å¯¹äºåº”ç”¨è„šæœ¬åŠ è½½å’Œæ‰§è¡Œçš„è¦æ±‚çš„</li>\n<li>å…³äº  <code>defer</code> ï¼Œæ­¤å›¾æœªå°½ä¹‹å¤„åœ¨äºå®ƒæ˜¯æŒ‰ç…§åŠ è½½é¡ºåºæ‰§è¡Œè„šæœ¬çš„ï¼Œè¿™ä¸€ç‚¹è¦å–„åŠ åˆ©ç”¨</li>\n<li><code>async</code>  åˆ™æ˜¯ä¸€ä¸ªä¹±åºæ‰§è¡Œçš„ä¸»ï¼Œåæ­£å¯¹å®ƒæ¥è¯´è„šæœ¬çš„åŠ è½½å’Œæ‰§è¡Œæ˜¯ç´§ç´§æŒ¨ç€çš„ï¼Œæ‰€ä»¥ä¸ç®¡ä½ å£°æ˜çš„é¡ºåºå¦‚ä½•ï¼Œåªè¦å®ƒåŠ è½½å®Œäº†å°±ä¼šç«‹åˆ»æ‰§è¡Œ</li>\n<li>ä»”ç»†æƒ³æƒ³ï¼Œ <code>async</code>  å¯¹äºåº”ç”¨è„šæœ¬çš„ç”¨å¤„ä¸å¤§ï¼Œå› ä¸ºå®ƒå®Œå…¨ä¸è€ƒè™‘ä¾èµ–ï¼ˆå“ªæ€•æ˜¯æœ€ä½çº§çš„é¡ºåºæ‰§è¡Œï¼‰ï¼Œä¸è¿‡å®ƒå¯¹äºé‚£äº›å¯ä»¥ä¸ä¾èµ–ä»»ä½•è„šæœ¬æˆ–ä¸è¢«ä»»ä½•è„šæœ¬ä¾èµ–çš„è„šæœ¬æ¥è¯´å´æ˜¯éå¸¸åˆé€‚çš„ï¼Œæœ€å…¸å‹çš„ä¾‹å­ï¼šGoogle Analytics</li>\n</ol>\n<h4 id=\"å‡å°‘dnsæŸ¥æ‰¾\"><a class=\"anchor\" href=\"#å‡å°‘dnsæŸ¥æ‰¾\">#</a> å‡å°‘ DNS æŸ¥æ‰¾</h4>\n<p>ç”¨æˆ·è®¿é—®ç½‘ç«™çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>\n<p>åœ¨åœ°å€æ è¾“å…¥ç½‘ç«™åœ°å€ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL3huLS13d3ctZW84ZS5leGFtcGxlLmNvbQ==\">å¦‚ www.example.com</span>;</p>\n</li>\n<li>\n<p>æœ¬åœ° DNS å¾—åˆ°è¿™ä¸ªè¯·æ±‚ï¼ŒæŸ¥è¯¢æœ¬åœ° DNS ç¼“å­˜ï¼Œå¦‚æœæœ‰è¿™æ¡è®°å½•ï¼Œåˆ™ç›´æ¥è¿”å›å¯¹åº”çš„ IPï¼›å¦åˆ™ï¼Œè¯·æ±‚ç½‘ç»œä¸Šçš„ DNS æœåŠ¡å™¨ï¼Œå¾—åˆ°ç›¸åº”çš„ IPï¼Œè¿”å›ç»™å®¢æˆ·æœºï¼Œå¹¶ç¼“å­˜è¿™æ¡è®°å½•ï¼›</p>\n</li>\n<li>\n<p>æµè§ˆå™¨å‘å¾—åˆ°çš„ IP å‘èµ·å»ºç«‹è¿æ¥è¯·æ±‚ï¼Œå¾—åˆ°å“åº”åå»ºç«‹è¿æ¥ï¼Œè¯·æ±‚æ•°æ®ï¼›</p>\n</li>\n<li>\n<p>Server ç«¯è®¡ç®—æ‰€éœ€æ•°æ®ï¼Œå¹¶è¿”å›ç»™ client ç«¯ï¼›</p>\n</li>\n<li>\n<p>client ç«¯ï¼Œå³æµè§ˆå™¨ï¼Œè§£ææ•°æ®å¹¶æ˜¾ç¤ºåœ¨æµè§ˆå™¨çª—å£ä¸­ï¼Œè‡³æ­¤ï¼Œè¯·æ±‚å®Œæˆã€‚</p>\n</li>\n</ol>\n<p>åœ¨ ä¸€æ¬¡è¯·æ±‚ä¸­ï¼ŒDNS è§£æå¯ä»¥å åˆ°è¯·æ±‚æ—¶é—´çš„ä¸‰åˆ†ä¹‹ä¸€å·¦å³ï¼ˆè¿™ç‚¹æœ‰å¾…éªŒè¯ï¼‰ï¼Œæ‰€ä»¥å¦‚æœå¯ä»¥ç¼©çŸ­ DNS è§£ææ—¶é—´ï¼Œå°±å¯ä»¥åŠ å¿«é¡µé¢çš„æ‰“å¼€é€Ÿåº¦ã€‚</p>\n<p>ç¼©çŸ­ DNS è§£æçš„ æ–¹æ³•å¯ä»¥<strong>é€šè¿‡å»¶é•¿ DNS ç¼“å­˜çš„æ—¶é—´</strong>ï¼Œ<strong>é€‰ç”¨æ›´å¿«çš„ DNS Server</strong>ï¼Œ<strong>å‡å°‘åŸŸåæ€»æ•°</strong>ï¼ˆä¾‹å¦‚åŸæ¥æœ‰ 5 ä¸ª img serverï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL3huLS1pbWcxLXVoNWY1NHJvaC54eHgueG4tLWNvbWltZzUtem8wdC54eHguY29t\">åˆ†åˆ«ä¸º img1.xxx.com è‡³ img5.xxx.com</span>ï¼Œåˆ™ç°åœ¨å¯ä»¥å‡å°‘åˆ° 3 ä¸ªï¼‰ç­‰ç­‰ï¼Œä½†æ˜¯å‡å°‘åŸŸåä¸ªæ•°åˆä¼šé™ä½èµ„æºå¹¶è¡Œä¸‹è½½çš„æ•°é‡ï¼Œ å› ä¸ºåŒä¸€åŸŸåæœ€å¤šå¯ä»¥å¹¶è¡Œä¸‹è½½ä¸¤ä¸ªèµ„æºï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ä¸€ä¸ªæŠ˜è¡·æ–¹æ¡ˆï¼Œä½œè€…çš„å»ºè®®å°±æ˜¯å°†èµ„æºåˆ†å¸ƒåœ¨å¤§äºç­‰äº 2 ä½†å°äºç­‰äº 4 ä¸ªåŸŸåä¸Šï¼ˆè¿™ä¸ªä¹Ÿæœ‰å¾…éªŒè¯ï¼Œä¾‹å¦‚é’ˆ å¯¹å¤šå¤§çš„ç³»ç»Ÿé€‰ç”¨å¤šå°‘ä¸ªåŸŸåæ˜¯æœ€åˆç†çš„ç­‰ï¼‰ã€‚</p>\n<p><strong>ä½¿ç”¨ DNS é¢„è§£æ</strong></p>\n<p>è¿™é‡Œä¼šæœ‰ä¸€äº›å…¼å®¹æ€§é—®é¢˜ï¼Œå¯ä»¥å‚è§ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PWxpbmstcmVsLWRucy1wcmVmZXRjaA==\">http://caniuse.com/#feat=link-rel-dns-prefetch</span></p>\n<p><img data-src=\"./assets/sdfdsf.png\" alt=\"sdfdsf\" /></p>\n<p>åœ¨ç½‘é¡µä½“éªŒä¸­æˆ‘ä»¬å¸¸ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼Œå³åœ¨è°ƒç”¨ç™¾åº¦è”ç›Ÿã€è°·æ­Œè”ç›Ÿä»¥åŠå½“å‰ç½‘é¡µæ‰€åœ¨åŸŸåå¤–çš„åŸŸåæ–‡ä»¶æ—¶ä¼šé‡åˆ°è¯·æ±‚å»¶æ—¶éå¸¸ä¸¥é‡çš„æƒ…å†µã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰æ–¹æ³•å»è§£å†³è¿™ç§è¯·æ±‚ä¸¥é‡å»¶æ—¶çš„ç°è±¡å‘¢ï¼Ÿ</p>\n<p>ä¸€èˆ¬æ¥è¯´è¿™ç§å»¶æ—¶çš„åŸå› ä¸ä¼šæ˜¯å¯¹æ–¹ç½‘ç«™å¸¦å®½æˆ–è€…è´Ÿè½½çš„åŸå› ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯ä»€ä¹ˆå¯¼è‡´äº†è¿™ç§æƒ…å†µå‘¢ã€‚æ¹›è“è¯•ç€è¿›è¡Œæ¨æµ‹ï¼Œå‡è®¾æ˜¯ DNS çš„é—®é¢˜ï¼Œå› ä¸º DNS è§£æé€Ÿåº¦å¾ˆå¯èƒ½æ˜¯é€ æˆèµ„æºå»¶æ—¶çš„æœ€å¤§åŸå› ã€‚åœ¨é¡µé¢ header ä¸­æ·»åŠ äº†ä»¥ä¸‹ä»£ç ï¼ˆç”¨ä»¥ DNS é¢„è§£æï¼‰ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>x-dns-prefetch-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>on<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dns-prefetch<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://bdimg.share.baidu.com<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dns-prefetch<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://nsclick.baidu.com<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dns-prefetch<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://hm.baidu.com<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dns-prefetch<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://eiv.baidu.com<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><p>dns-prefetch éœ€æ…ç”¨ï¼Œå¤šé¡µé¢é‡å¤ DNS é¢„è§£æä¼šå¢åŠ é‡å¤ DNS æŸ¥è¯¢æ¬¡æ•°ã€‚</p>\n<p>ä½¿ç”¨åœºæ™¯ï¼š</p>\n<ol>\n<li>æ–°ç”¨æˆ·è®¿é—®ï¼Œåç«¯å¯ä»¥é€šè¿‡ Cookie åˆ¤æ–­æ˜¯å¦ä¸ºé¦–æ¬¡è¿›å…¥ç«™ç‚¹ï¼Œå¯¹äºè¿™ç±»ç”¨æˆ·ï¼ŒDNS Prefetch å¯ä»¥æ¯”è¾ƒæ˜æ˜¾åœ°æå‡è®¿é—®é€Ÿåº¦</li>\n<li>ç™»å½•é¡µï¼Œæå‰åœ¨é¡µé¢ä¸Šè¿›è¡Œä¸‹ä¸€è·³é¡µç”¨åˆ°èµ„æºçš„ DNS Prefetch</li>\n<li>é¡µé¢ä¸­çš„é™æ€èµ„æºåœ¨ä¸åŒçš„ domain ä¸‹ï¼Œå¦‚ CSSã€JSã€å›¾ç‰‡ç­‰æ–‡ä»¶</li>\n<li>ç”µå•†ç½‘ç«™çš„å•†å“é¡µå¤§é‡è½½å…¥ä¸åŒ domain ä¸‹çš„å•†å“å›¾ï¼Œå¦‚æ·˜å®</li>\n<li>æ‰‹æœºç½‘é¡µ</li>\n<li>å¤§å‹ç½‘ç«™</li>\n<li>js æˆ–æœåŠ¡ç«¯é‡å®šå‘</li>\n</ol>\n<blockquote>\n<p>Chrome ä¸­çš„ä¸€äº›æŒ‡ä»¤ï¼š</p>\n<ul>\n<li><code>chrome://histograms/DNS.PrefetchQueue</code> ï¼šæŸ¥çœ‹é˜Ÿåˆ—çŠ¶æ€</li>\n<li><code>chrome://histograms/DNS</code> ï¼šæŸ¥çœ‹ä»æµè§ˆå™¨å¯åŠ¨åˆ°ä¸Šä¸€é¡µçš„ DNS è®°å½•</li>\n<li><code>chrome://dns</code> ï¼šæŸ¥çœ‹ä¸ªåŸŸå DNS ç»Ÿè®¡</li>\n<li><code>chrome://net-internals/#dns</code> ï¼šæ¸…é™¤ host ç¼“å­˜</li>\n</ul>\n</blockquote>\n<h4 id=\"å‹ç¼©èµ„æº\"><a class=\"anchor\" href=\"#å‹ç¼©èµ„æº\">#</a> å‹ç¼©èµ„æº</h4>\n<ul>\n<li>\n<p>å‹ç¼© jsï¼Œcssï¼Œimage</p>\n<p><strong>é€šè¿‡å¯¹å¤–éƒ¨èµ„æºè¿›è¡Œå‹ç¼©å¯ä»¥å¤§å¹…åº¦åœ°å‡å°‘æµè§ˆå™¨éœ€è¦ä¸‹è½½çš„èµ„æºé‡ï¼Œå®ƒä¼šå‡å°‘å…³é”®è·¯å¾„é•¿åº¦ä¸å…³é”®å­—èŠ‚ï¼Œä½¿é¡µé¢çš„åŠ è½½é€Ÿåº¦å˜å¾—æ›´å¿«ã€‚</strong></p>\n<p><strong>å¯¹æ•°æ®è¿›è¡Œå‹ç¼©å…¶å®å°±æ˜¯ä½¿ç”¨æ›´å°‘çš„ä½æ•°æ¥å¯¹æ•°æ®è¿›è¡Œé‡ç¼–ç </strong>ã€‚å¦‚ä»Šæœ‰éå¸¸å¤šçš„å‹ç¼©ç®—æ³•ï¼Œä¸”æ¯ä¸€ä¸ªçš„ä½œç”¨é¢†åŸŸä¹Ÿå„ä¸ç›¸åŒï¼Œå®ƒä»¬çš„å¤æ‚åº¦ä¹Ÿä¸ç›¸åŒï¼Œä¸è¿‡åœ¨è¿™é‡Œæˆ‘ä¸ä¼šè®²å‹ç¼©ç®—æ³•çš„ç»†èŠ‚ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªå·± Googleã€‚</p>\n<p>åœ¨å¯¹ <code>HTML</code> ã€ <code>CSS</code>  å’Œ <code>JavaScript</code>  è¿™äº›æ–‡ä»¶è¿›è¡Œå‹ç¼©ä¹‹å‰ï¼Œè¿˜éœ€è¦å…ˆè¿›è¡Œä¸€æ¬¡å†—ä½™å‹ç¼©ã€‚<strong>æ‰€è°“å†—ä½™å‹ç¼©ï¼Œå°±æ˜¯å»é™¤å¤šä½™çš„å­—ç¬¦ï¼Œä¾‹å¦‚æ³¨é‡Šã€ç©ºæ ¼ç¬¦å’Œæ¢è¡Œç¬¦</strong>ã€‚è¿™äº›å­—ç¬¦å¯¹äºç¨‹åºå‘˜æ˜¯æœ‰ç”¨çš„ï¼Œæ¯•ç«Ÿæ²¡æœ‰æ ¼å¼åŒ–çš„ä»£ç å¯è¯»æ€§æ˜¯éå¸¸ææ€–çš„ï¼Œä½†å®ƒä»¬å¯¹äºæµè§ˆå™¨æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„ï¼Œå»é™¤è¿™äº›å†—ä½™å¯ä»¥å‡å°‘æ–‡ä»¶çš„æ•°æ®é‡ã€‚</p>\n<p>å°å›¾ç‰‡é‡‡ç”¨ base64 çš„æ ¼å¼ï¼Œç›´æ¥åµŒå…¥ä»£ç ä¸­ï¼Œå¯ä»¥å¸®æˆ‘ä»¬å‡å°‘ http è¯·æ±‚ï¼Œä½†æ˜¯åŒæ ·ï¼Œè¿™ä¸ªä¼šé€ æˆæˆ‘ä»¬ä»£ç çš„æåŠå˜å¤§ã€‚è¯·æ±‚çš„é€Ÿåº¦ä¼šå‡æ…¢ï¼Œè¿™ä¸ªéœ€è¦å¹³è¡¡ã€‚</p>\n<p>å¸¸ç”¨å·¥å…·ï¼šwebpackï¼Œgulp</p>\n<blockquote>\n<p>æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ HTMLã€CSS å’Œ JavaScript å­—èŠ‚æ•°æ®å¹¶å¯¹å…¶è¿›è¡Œè§£æå’Œè½¬å˜æˆåƒç´ çš„æ¸²æŸ“è¿‡ç¨‹è¢«ç§°ä¸º <code>å…³é”®æ¸²æŸ“è·¯å¾„</code> ã€‚é€šè¿‡ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„å³å¯ä»¥ç¼©çŸ­æµè§ˆå™¨æ¸²æŸ“é¡µé¢çš„æ—¶é—´ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>åˆ é™¤é‡å¤çš„è„šæœ¬ï¼Œç±»ä¼¼ <code>tree-shaking</code></p>\n<p>åœ¨ä¸€ä¸ªé¡µé¢ä¸­é‡å¤å¼•ç”¨ä¸€ä¸ªè„šæœ¬å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼šæµè§ˆå™¨ä¼šé‡å¤ä¸‹è½½å¹¶æ‰§è¡Œè„šæœ¬æ–‡ä»¶ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨åˆé€‚å¤§å°çš„å›¾ç‰‡</p>\n<p>å¦‚æœä½ åªéœ€è¦ä¸€ä¸ªå°å›¾ï¼Œå°±ä¸è¦ä¼ ä¸€ä¸ªå¤§å›¾ã€‚ä¾‹å¦‚ä½ å®é™…éœ€è¦æ˜¾ç¤ºçš„æ˜¯ä¸€ä¸ª 60x60 çš„å¤´åƒï¼Œå°±ä¸è¦ä¼ ä¸€ä¸ª 100x100 çš„ç„¶åå†é€šè¿‡è®¾ç½®å®½é«˜å°†å®ƒç¼©å°ä¸º 60x60 çš„ã€‚åŸå› å¾ˆç®€å•ï¼Œè¿™æ ·ä¼šæ¶ˆè€—ä¸å¿…è¦çš„å¸¦å®½å’Œç³»ç»Ÿèµ„æºã€‚</p>\n</li>\n<li>\n<p>å‡å°‘ DOM å…ƒç´ çš„æ•°é‡</p>\n<p>å¤æ‚é¡µé¢æ„å‘³ç€è¦ä¸‹è½½æ›´å¤šå­—èŠ‚ï¼Œè¿™ä¹Ÿæ„å‘³ç€ JavaScript ä¸­çš„ DOM è®¿é—®é€Ÿåº¦æ›´æ…¢ã€‚å¦‚æœæ‚¨æƒ³è¦æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¾‹å¦‚ï¼Œåœ¨é¡µé¢ä¸Šå¾ªç¯ 500 æˆ– 5000 ä¸ª DOM å…ƒç´ ï¼Œåˆ™ä¼šæœ‰æ‰€ä¸åŒã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œasyncã€defer</p>\n<blockquote>\n<p>æœåŠ¡ç«¯æ¸²æŸ“ä¹Ÿæ˜¯ä¸€ç§å‡å°‘æµè§ˆå™¨èµ„æºæ¶ˆè€—ï¼Œå‡å°‘é¡µé¢é‡æ’é‡ç»˜ï¼Œä¹Ÿæ˜¯ä¸€ç§ç°è¡Œ MVVM æ¡†æ¶å•é¡µåº”ç”¨æœ€ä¸»è¦çš„ SEO ä¼˜åŒ–æ‰‹æ®µã€‚</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"é¿å…3xx4xx\"><a class=\"anchor\" href=\"#é¿å…3xx4xx\">#</a> é¿å… 3xx/4xx</h4>\n<p><strong>é¿å…é‡å®šå‘</strong></p>\n<p>3xx æ˜¯é‡å®šå‘ç›¸å…³çš„ HTTP å“åº”ä»£ç </p>\n<p>é‡å®šå‘çš„æ„æ€æ˜¯ï¼Œç”¨æˆ·çš„åŸå§‹è¯·æ±‚ï¼ˆä¾‹å¦‚è¯·æ±‚ Aï¼‰è¢«é‡å®šå‘åˆ°å…¶ä»–çš„è¯·æ±‚ï¼ˆä¾‹å¦‚è¯·æ±‚ Bï¼‰ã€‚</p>\n<p>æ¯æ¬¡é¡µé¢é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢æ—¶ï¼Œæ‚¨çš„è®¿é—®è€…éƒ½ä¼šé¢ä¸´ç­‰å¾… HTTP è¯·æ±‚ - å“åº”å‘¨æœŸå®Œæˆçš„é¢å¤–æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç§»åŠ¨é‡å®šå‘æ¨¡å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><code>example.com</code>  - &gt;  <code>www.example.com</code>  - &gt;  <code>m.example.com</code>  - &gt;  <code>m.example.com/home</code> ï¼Œè¿™ä¸¤ä¸ªé¢å¤–é‡å®šå‘ä¸­çš„æ¯ä¸€ä¸ªéƒ½ä¼šä½¿æ‚¨çš„é¡µé¢æˆä¸ºå¯èƒ½åŠ è½½é€Ÿåº¦æ…¢ã€‚</p>\n<p>HTTP é‡å®šå‘é€šè¿‡  <code>301</code> / <code>302</code>  çŠ¶æ€ç å®ç°ã€‚</p>\n<pre><code>HTTP/1.1 301 Moved Permanently  \nLocation: http://example.com/newuri  \nContent-Type: text/html  \n</code></pre>\n<p><code>301 Moved Permanently</code> ï¼Œè¿™ä¸ªçŠ¶æ€ç æ ‡è¯†ç”¨æˆ·æ‰€è¯·æ±‚çš„èµ„æºè¢«ç§»åŠ¨åˆ°äº†å¦å¤–çš„ä½ç½®ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°æ­¤å“åº”åï¼Œéœ€è¦å‘èµ·å¦å¤–ä¸€ä¸ªè¯·æ±‚å»ä¸‹è½½æ‰€éœ€çš„èµ„æºã€‚</p>\n<p><code>302 Found</code> ï¼Œè¿™ä¸ªçŠ¶æ€ç æ ‡è¯†ç”¨æˆ·æ‰€è¯·æ±‚çš„èµ„æºè¢«æ‰¾åˆ°äº†ï¼Œä½†ä¸åœ¨åŸå§‹ä½ç½®ï¼ŒæœåŠ¡å™¨ä¼šå›å¤å…¶ä»–çš„ä¸€ä¸ªä½ç½®ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æ­¤å“åº”åï¼Œä¹Ÿéœ€è¦å‘èµ·å¦å¤–ä¸€ä¸ªè¯·æ±‚å»ä¸‹è½½æ‰€éœ€çš„èµ„æºã€‚</p>\n<p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„é‡å®šå‘å“åº”åï¼Œä¼šæ ¹æ®å“åº”å¤´ä¸­  <code>Location</code>  çš„åœ°å€å†æ¬¡å‘é€è¯·æ±‚ã€‚é‡å®šå‘ä¼šå½±å“ç”¨æˆ·ä½“éªŒï¼Œå°¤å…¶æ˜¯å¤šæ¬¡é‡å®šå‘æ—¶ï¼Œç”¨æˆ·åœ¨ä¸€æ®µæ—¶é—´å†…çœ‹ä¸åˆ°ä»»ä½•å†…å®¹ï¼Œåªçœ‹åˆ°æµè§ˆå™¨è¿›åº¦æ¡ä¸€ç›´åœ¨åˆ·æ–°ã€‚</p>\n<p>æœ‰æ—¶é‡å®šå‘æ— æ³•é¿å…ï¼Œåœ¨ç³Ÿç³•ä¹Ÿæ¯”æŠ›å‡º  <code>404</code>  å¥½ã€‚è™½ç„¶é€šè¿‡ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5pbS8/dGFyZ2V0PWh0dHBzJTNBJTJGJTJGZW4ud2lraXBlZGlhLm9yZyUyRndpa2klMkZNZXRhX3JlZnJlc2g=\">HTML meta refresh</span> å’Œ JavaScript ä¹Ÿèƒ½å®ç°ï¼Œä½†é¦–é€‰ HTTP  <code>3xx</code>  è·³è½¬ï¼Œä»¥ä¿è¯æµè§ˆå™¨ã€Œåé€€ã€åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼ˆä¹Ÿåˆ©äº SEOï¼‰ã€‚</p>\n<p><strong>å¸¸è§çš„ä¼˜åŒ–åŠæ³•ï¼š</strong></p>\n<ul>\n<li>\n<p>æœ€æµªè´¹çš„é‡å®šå‘ç»å¸¸å‘ç”Ÿã€è€Œä¸”å¾ˆå®¹æ˜“è¢«å¿½ç•¥ï¼šURL æœ«å°¾åº”è¯¥æ·»åŠ   <code>/</code>  ä½†æœªæ·»åŠ ã€‚æ¯”å¦‚ï¼Œè®¿é—®  <code>http://astrology.yahoo.com/astrology</code>  å°†è¢« 301 é‡å®šå‘åˆ°  <code>http://astrology.yahoo.com/astrology/</code> ï¼ˆæ³¨æ„æœ«å°¾çš„  <code>/</code> ï¼‰ã€‚å¦‚æœä½¿ç”¨ Apacheï¼Œå¯ä»¥é€šè¿‡  <code>Alias</code>  æˆ–  <code>mod_rewrite</code>  æˆ–  <code>DirectorySlash</code>  è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>ç½‘ç«™åŸŸåå˜æ›´ï¼šCNAME ç»“åˆ  <code>Alias</code>  æˆ–  <code>mod_rewrite</code>  æˆ–è€…å…¶ä»–æœåŠ¡å™¨ç±»ä¼¼åŠŸèƒ½å®ç°è·³è½¬ã€‚</p>\n</li>\n<li>\n<p>åœ¨å®šä¹‰é“¾æ¥åœ°å€çš„ href å±æ€§çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨æœ€å®Œæ•´çš„ã€ç›´æ¥çš„åœ°å€ã€‚ä¾‹å¦‚ï¼š<br />\nä½¿ç”¨  <code>www.cnblogs.com</code>  è€Œä¸æ˜¯ <code>cnblogs.com</code> <br />\n ä½¿ç”¨ <code>cn.bing.com</code>  è€Œä¸æ˜¯ <code>bing.com</code> <br />\n ä½¿ç”¨ <code>www.google.com.hk</code>  è€Œä¸æ˜¯ <code>google.com</code> <br />\n ä½¿ç”¨ <code>www.mysite.com/products/</code>  è€Œä¸æ˜¯ <code>www.mysite.com/products</code></p>\n</li>\n</ul>\n<p><strong>é¿å… 404 æµè§ˆå™¨æ‰¾ä¸åˆ°èµ„æºçš„æƒ…å†µå‘ç”Ÿ</strong></p>\n<p>å‘å‡º HTTP è¯·æ±‚å¹¶è·å¾—æ— ç”¨çš„å“åº”ï¼ˆå³ 404 Not Foundï¼‰æ˜¯å®Œå…¨æ²¡å¿…è¦çš„ã€‚ç‰¹åˆ«ç³Ÿç³•çš„æ˜¯å½“å¤–éƒ¨ JavaScript çš„é“¾æ¥é”™è¯¯å¹¶ä¸”ç»“æœæ˜¯ 404 æ—¶ã€‚é¦–å…ˆï¼Œæ­¤ä¸‹è½½å°†é˜»æ­¢å¹¶è¡Œä¸‹è½½ã€‚æ¥ä¸‹æ¥ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šå°è¯•è§£æ 404 å“åº”ä¸»ä½“ï¼Œå°±åƒå®ƒæ˜¯ JavaScript ä»£ç ä¸€æ ·ï¼Œè¿™æ ·å°±å¸¦æ¥çš„æ€§èƒ½çš„æµªè´¹ã€‚</p>\n<p><strong>404 çš„å½±å“ï¼š</strong></p>\n<p>æœ‰æ—¶å€™ï¼Œ404 é”™è¯¯å‘ç”Ÿäº†ï¼Œç”¨æˆ·å¯èƒ½æ ¹æœ¬æ²¡æœ‰æ„Ÿè§‰åˆ°ã€‚ä¾‹å¦‚</p>\n<ul>\n<li>ä¾‹å¦‚è¯·æ±‚ favicon.ico æ–‡ä»¶ï¼Œæˆ–è€…è¯·æ±‚äº†æŸä¸ªä¸å­˜åœ¨çš„è„šæœ¬æ–‡ä»¶ã€æ ·å¼è¡¨ã€å›¾ç‰‡æ–‡ä»¶ï¼Œé¡µé¢è¿˜æ˜¯ä¼šæŒ‰ç…§æ­£å¸¸çš„æ–¹å¼è¿›è¡Œå‘ˆç°ã€‚</li>\n<li>ä¸¢å¤±çš„è„šæœ¬æ–‡ä»¶ã€æ ·å¼è¡¨ã€å›¾ç‰‡æ–‡ä»¶ï¼Œä¼šå¯¼è‡´é¡µé¢çš„æŸäº›è¡Œä¸ºã€ç•Œé¢æ•ˆæœå‡ºç°å¼‚å¸¸ï¼ˆä¹Ÿå¯èƒ½ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼‰</li>\n<li>æœ€å¤§çš„é—®é¢˜å¯èƒ½æ˜¯æ€§èƒ½æ–¹é¢çš„å½±å“ã€‚å°¤å…¶æ˜¯å¦‚æœè¯·æ±‚ä¸€ä¸ªä¸å­˜åœ¨çš„è„šæœ¬æ–‡ä»¶ï¼Œå› ä¸ºæµè§ˆå™¨åœ¨è¯·æ±‚è„šæœ¬æ–‡ä»¶çš„æ—¶å€™ï¼Œå³ä¾¿æ˜¯è¿”å› 404ï¼Œå®ƒä¹Ÿä¼šå°è¯•å»æŒ‰ç…§ Javascript çš„æ–¹å¼è§£æå“åº”ä¸­çš„å†…å®¹ã€‚è¿™æ— ç–‘ä¼šå¢åŠ å¾ˆå¤šå¤„ç†çš„æ—¶é—´ï¼Œè€Œå› ä¸ºè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰€ä»¥è¿™äº›éƒ½æ˜¯æ— ç”¨åŠŸã€‚</li>\n</ul>\n<p>çœ‹å¾—åˆ°çš„å½±å“ï¼š</p>\n<ul>\n<li>å¦‚æœç”¨æˆ·è¯·æ±‚çš„æŸä¸ªé¡µé¢ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä»–å°†æ”¶åˆ°æ˜ç¡®çš„å›åº”</li>\n<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä»–å°†æ”¶åˆ°ä¸€ä¸ªæ ‡å‡†çš„é”™è¯¯é¡µé¢ï¼ˆè¯·æ³¨æ„ï¼šä¸å°‘ç”¨æˆ·ä¼šè¢«è¿™ä¸ªé¡µé¢å“åˆ°ï¼‰</li>\n</ul>\n<p><strong>å¸¸è§çš„ä¼˜åŒ–åŠæ³•ï¼š</strong></p>\n<p>404 æ„å‘³ç€ Not Foundï¼Œæ„æ€æ˜¯è¯´æœªæ‰¾åˆ°èµ„æºã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£ä¹ˆè‡³å°‘ä¼šæœ‰ä¸¤ç§åŸå› å¯¼è‡´ 404 é”™è¯¯ï¼š</p>\n<ul>\n<li>è¯¥èµ„æºæŒ‰ç†è¯´æ˜¯è¦æœ‰ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰æä¾›ã€‚ç”¨æˆ·æŒ‰ç…§æ­£å¸¸çš„æ–¹å¼æ¥è¯·æ±‚ï¼Œæ‰€ä»¥èµ„æºæ‰¾ä¸åˆ°ã€‚\n<ul>\n<li>ä¸ºç½‘ç«™æä¾› favicon.ico è¿™ç§ç»å¸¸å¯èƒ½ä¼šè¢«å¿½ç•¥çš„èµ„æº</li>\n<li>ä½¿ç”¨ä¸€äº›æ£€æŸ¥å·¥å…·ï¼šæ¯”å¦‚ Link checker</li>\n</ul>\n</li>\n<li>è¯¥èµ„æºæœ¬æ¥å°±ä¸å­˜åœ¨ï¼Œç”¨æˆ·æŒ‰ç…§ä¸æ­£å¸¸çš„æ–¹å¼æ¥è¯·æ±‚ï¼Œå½“ç„¶è¿˜æ˜¯æ‰¾ä¸åˆ°ã€‚\n<ul>\n<li>é¿å…ç”¨æˆ·æ”¶è—ç»å¯¹åœ°å€ï¼Œç»™åæœŸæ›´æ–°å¸¦æ¥éšæ‚£ã€‚å¯ä»¥ä½¿ç”¨åœ°å€ Rewrite æ¥é‡å†™ï¼Œæˆ–è€…åœ¨è®¾è®¡é˜¶æ®µå®šä¹‰ä¸€äº›çµæ´»å‹å¥½çš„åœ°å€</li>\n<li>ä½¿ç”¨ Routing æŠ€æœ¯ï¼Œé…ç½®è·¯ç”±è§„åˆ™ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ajaxä¼˜åŒ–\"><a class=\"anchor\" href=\"#ajaxä¼˜åŒ–\">#</a> AJAX ä¼˜åŒ–</h4>\n<p><strong>ä½¿ Ajax å¯ç¼“å­˜</strong></p>\n<p>AJAX=Asynchronous JavaScript And XMLï¼ŒAJAX ä¸æ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ä½¿ç”¨ç°æœ‰æ ‡å‡†çš„æ–°æ–¹æ³•ã€‚<br />\nAJAX æ˜¯ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„è‰ºæœ¯ï¼Œåœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ã€‚</p>\n<p>ç”±äº AJAX å…¶å®ä¹Ÿæ˜¯éœ€è¦å‘èµ·è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨æ‰§è¡Œï¼Œå¹¶å°†ç»“æœï¼ˆé€šå¸¸æ˜¯ JSON æ ¼å¼çš„ï¼‰å‘é€ç»™æµè§ˆå™¨è¿›è¡Œæœ€åçš„å‘ˆç°æˆ–è€…å¤„ç†ï¼Œæ‰€ä»¥å¯¹äºç½‘ç«™è®¾è®¡ä¼˜åŒ–çš„è§’åº¦è€Œè¨€ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦è€ƒè™‘å¯¹è¿™äº›è¯·æ±‚ï¼Œæ˜¯å¦å¯ä»¥å°½å¯èƒ½çš„åˆ©ç”¨åˆ°ç¼“å­˜çš„åŠŸèƒ½æ¥æé«˜æ€§èƒ½ã€‚</p>\n<p>å¯¹äº AJAX è€Œè¨€ï¼Œæœ‰ä¸€äº›ç‰¹æ®Šæ€§ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ AJAX è¯·æ±‚éƒ½æ˜¯å¯ä»¥ç¼“å­˜çš„ã€‚</p>\n<ol>\n<li><code>POST</code>  çš„è¯·æ±‚ï¼Œæ˜¯ä¸å¯ä»¥åœ¨å®¢æˆ·ç«¯ç¼“å­˜çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å‘é€ç»™æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œæ¯æ¬¡éƒ½ä¼šè¿”å›çŠ¶æ€ç  200ã€‚ï¼ˆè¿™é‡Œå¯ä»¥ä¼˜åŒ–çš„æ˜¯ï¼ŒæœåŠ¡å™¨ç«¯å¯¹æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œä»¥ä¾¿æé«˜å¤„ç†é€Ÿåº¦ï¼‰</li>\n<li><code>GET</code>  çš„è¯·æ±‚ï¼Œæ˜¯å¯ä»¥ï¼ˆå¹¶ä¸”é»˜è®¤ï¼‰åœ¨å®¢æˆ·ç«¯è¿›è¡Œç¼“å­˜çš„ï¼Œé™¤éæŒ‡å®šäº†ä¸åŒçš„åœ°å€ï¼Œå¦åˆ™åŒä¸€åœ°å€çš„ AJAX è¯·æ±‚ï¼Œä¸ä¼šé‡å¤å†æœåŠ¡å™¨æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å› 304ã€‚</li>\n</ol>\n<p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ› <code>GET</code>  è¯·æ±‚ä¸è¢«ç¼“å­˜ï¼Œæœ‰å‡ ç§åšæ³•æ¥è¾¾åˆ°è¿™æ ·çš„ç›®çš„ã€‚</p>\n<ol>\n<li>æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œè¯·æ±‚ä¸åŒçš„åœ°å€ï¼ˆå¯ä»¥åœ¨åŸå§‹åœ°å€åé¢æ·»åŠ ä¸€ä¸ªéšæœºçš„å·ç ï¼‰ã€‚</li>\n<li>å¦‚æœä½ æ‰€ä½¿ç”¨çš„æ˜¯ jquery çš„è¯ï¼Œåˆ™å¯ä»¥è€ƒè™‘ç¦ç”¨ AJAX çš„ç¼“å­˜ã€‚</li>\n</ol>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$<span class=\"token punctuation\">.</span><span class=\"token function\">ajaxSetup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">cache</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>axios ä¸­</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\t<span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span><span class=\"token string-property property\">'Cache-Control'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'no-cache'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/post'</span><span class=\"token punctuation\">,</span>config<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ GET çš„ Ajax è¯·æ±‚</strong></p>\n<p>åœ¨ä½¿ç”¨ XMLHttpRequestï¼ˆç›®å‰çš„ AJAX éƒ½æ˜¯åŸºäºå®ƒå®ç°çš„ï¼‰çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¸­çš„ POST å®ç°ä¸ºä¸¤æ­¥èµ°çš„è¿‡ç¨‹ï¼Œé¦–å…ˆå‘é€å¤´éƒ¨ä¿¡æ¯ï¼Œç„¶åå†å‘é€æ•°æ®ã€‚ä½†å¦‚æœæ˜¯ä½¿ç”¨ GET çš„è¯ï¼Œå°±åªæœ‰ä¸€ä¸ª TCP çš„åŒ…å‘é€å‡ºå»ï¼ˆé™¤éæœ‰å¤§é‡çš„ Cookieï¼‰ï¼Œè¿™æ ·æ— ç–‘å¯ä»¥æé«˜æ€§èƒ½ã€‚</p>\n<p>ä½†æ˜¯ get æœ‰å®¹é‡é™åˆ¶ï¼Œå¤§äº 2K (å¯¹ get çš„é™åˆ¶ IE æ˜¯ 2Kï¼Œfirefoxã€chrome æ˜¯ 4K) çš„å†…å®¹åªèƒ½ç”¨ postã€‚</p>\n<h4 id=\"cookieä¼˜åŒ–\"><a class=\"anchor\" href=\"#cookieä¼˜åŒ–\">#</a> Cookie ä¼˜åŒ–</h4>\n<ul>\n<li>\n<p>å‡å° cookie å¤§å°</p>\n<p>å‡å° cookie çš„å¤§å°ï¼Œå› ä¸ºåœ¨å‘è¯·æ±‚æ—¶æµè§ˆå™¨ä¼šå°† cookie ä¿¡æ¯å‘é€åˆ° server ç«¯ï¼Œæ‰€ä»¥åº”è¯¥åªåœ¨ cookie ä¸­å­˜å¿…è¦çš„ä¿¡æ¯ä¸”è¶Šé•¿åº¦è¶Šå°è¶Šå¥½ã€‚åœ¨ å†™ cookie çš„æ—¶å€™è¦è®°å¾—ç»™ cookie è®¾ç½®ä¸€ä¸ªåˆç†çš„è¿‡æœŸæ—¶é—´åŠåŸŸ</p>\n</li>\n<li>\n<p>å¯¹ä¸€äº›é™æ€èµ„æºä¸éœ€è¦ä½¿ç”¨ cookie çš„å•ç‹¬è®¾ç½®åŸŸ</p>\n<p>å½“æµè§ˆå™¨å‘å‡ºé™æ€å›¾åƒè¯·æ±‚å¹¶å°† cookie ä¸è¯·æ±‚ä¸€èµ·å‘é€æ—¶ï¼ŒæœåŠ¡å™¨å¯¹è¿™äº› cookie æ²¡æœ‰ä»»ä½•ç”¨å¤„ã€‚å› æ­¤ï¼Œä»–ä»¬åªä¼šæ¯«æ— ç†ç”±åœ°åˆ›å»ºç½‘ç»œæµé‡ã€‚æ‚¨åº”è¯¥ç¡®ä¿ä½¿ç”¨æ—  cookie è¯·æ±‚è¯·æ±‚é™æ€ç»„ä»¶ã€‚åˆ›å»ºä¸€ä¸ªå­åŸŸå¹¶åœ¨é‚£é‡Œæ‰˜ç®¡æ‰€æœ‰é™æ€ç»„ä»¶ã€‚</p>\n<p>å¦‚æœæ‚¨çš„åŸŸåæ˜¯ <code>www.example.org</code> ï¼Œæ‚¨å¯ä»¥æ‰˜ç®¡æ‚¨çš„é™æ€ç»„ä»¶ <code>static.example.org</code> ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å·²ç»åœ¨é¡¶çº§åŸŸä¸Šè®¾ç½®äº† cookie  <code>example.org</code>  è€Œä¸æ˜¯ <code>www.example.org</code> ï¼Œåˆ™æ‰€æœ‰è¯·æ±‚éƒ½  <code>static.example.org</code>  å°†åŒ…å«è¿™äº› cookieã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥è´­ä¹°ä¸€ä¸ªå…¨æ–°çš„åŸŸï¼Œåœ¨é‚£é‡Œæ‰˜ç®¡æ‚¨çš„é™æ€ç»„ä»¶ï¼Œå¹¶ä¿æŒæ­¤åŸŸæ—  cookieã€‚é›…è™ ç”¨é€” <code>yimg.com</code> ï¼ŒYouTube ä½¿ç”¨ <code>ytimg.com</code> ï¼Œäºšé©¬é€Šä½¿ç”¨ <code>images-amazon.com</code>  ç­‰ã€‚</p>\n<p>åœ¨æ—  cookie åŸŸä¸Šæ‰˜ç®¡é™æ€ç»„ä»¶çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼ŒæŸäº›ä»£ç†å¯èƒ½æ‹’ç»ç¼“å­˜ä½¿ç”¨ cookie è¯·æ±‚çš„ç»„ä»¶ã€‚åœ¨ç›¸å…³è¯´æ˜ä¸­ï¼Œå¦‚æœæ‚¨æƒ³çŸ¥é“æ˜¯å¦åº”è¯¥ä½¿ç”¨ <code>example.org</code>  æˆ– <code>www.example.org</code>  ä½œä¸ºä¸»é¡µï¼Œè¯·è€ƒè™‘ cookie çš„å½±å“ã€‚</p>\n<blockquote>\n<p>çœç•¥ www ä¼šè®©æ‚¨åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½å†™å…¥ cookie  <code>*.example.org</code> ï¼Œå› æ­¤å‡ºäºæ€§èƒ½åŸå› ï¼Œæœ€å¥½ä½¿ç”¨ www å­åŸŸå¹¶å°† cookie å†™å…¥è¯¥å­åŸŸã€‚</p>\n</blockquote>\n</li>\n</ul>\n<p>å½’ç±»ä¸€ä¸‹ï¼š</p>\n<ul>\n<li>å»é™¤ä¸å¿…è¦çš„ Cookieï¼›</li>\n<li>å°½é‡å‹ç¼© Cookie å¤§å°ï¼›</li>\n<li>æ³¨æ„è®¾ç½® Cookie çš„ domain çº§åˆ«ï¼Œå¦‚æ— å¿…è¦ï¼Œä¸è¦å½±å“åˆ° sub-domainï¼›</li>\n<li>è®¾ç½®åˆé€‚çš„è¿‡æœŸæ—¶é—´ã€‚</li>\n</ul>\n<h4 id=\"åˆ©ç”¨ç¼“å­˜\"><a class=\"anchor\" href=\"#åˆ©ç”¨ç¼“å­˜\">#</a> åˆ©ç”¨ç¼“å­˜</h4>\n<p>æµè§ˆå™¨ä¼šç¼“å­˜å¤§é‡ä¿¡æ¯ï¼ˆæ ·å¼è¡¨ï¼Œå›¾åƒï¼ŒJavaScript æ–‡ä»¶ç­‰ï¼‰ï¼Œä»¥ä¾¿å½“è®¿é—®è€…è¿”å›æ‚¨çš„ç«™ç‚¹æ—¶ï¼Œæµè§ˆå™¨ä¸å¿…é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚ç„¶åè®¾ç½® â€œexpiresâ€ æ ‡é¢˜ï¼Œä»¥è¡¨ç¤ºå¸Œæœ›ç¼“å­˜è¯¥ä¿¡æ¯çš„æ—¶é—´ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œé™¤éæ‚¨çš„ç½‘ç«™è®¾è®¡ç»å¸¸æ›´æ”¹ï¼Œå¦åˆ™ä¸€å¹´æ˜¯åˆç†çš„æ—¶é—´æ®µã€‚</p>\n<p><strong>åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ ï¼Œä¸ºé“¾æ¥æˆ–è€…èµ„æºï¼Œæ·»åŠ  Expires æˆ– Cache-Control å¤´</strong></p>\n<ul>\n<li>å¯¹äºé™æ€ç»„ä»¶ï¼šé€šè¿‡è®¾ç½®è¿œæœŸæœªæ¥ <code>Expires</code>  æ ‡å¤´å®ç° â€œæ°¸ä¸è¿‡æœŸâ€ ç­–ç•¥</li>\n<li>å¯¹äºåŠ¨æ€ç»„ä»¶ï¼šä½¿ç”¨é€‚å½“çš„ <code>Cache-Control</code>  æ ‡å¤´æ¥å¸®åŠ©æµè§ˆå™¨å¤„ç†æ¡ä»¶è¯·æ±‚</li>\n</ul>\n<p>æ ¼å¼ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Expires <span class=\"token operator\">=</span> <span class=\"token string\">\"Expires\"</span> <span class=\"token string\">\":\"</span> HTTP-date</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># e.g.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Expires: Thu, 01 Dec <span class=\"token number\">1994</span> <span class=\"token number\">16</span>:00:00 GMT </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#ï¼ˆå¿…é¡»æ˜¯ GMT æ ¼å¼ï¼‰</span></pre></td></tr></table></figure><p>é€šè¿‡ HTTP çš„ META è®¾ç½® expires å’Œ cache-control</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Cache-Control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>max-age=7200<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Expires<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Mon, 01 Aug 2019 00:00:00 GMT<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><p>ä¸Šè¿°è®¾ç½®ä»…ä¸ºä¸¾ä¾‹ï¼Œå®é™…ä½¿ç”¨å…¶ä¸€å³å¯ã€‚è¿™æ ·å†™çš„è¯ä»…å¯¹è¯¥ç½‘é¡µæœ‰æ•ˆï¼Œå¯¹ç½‘é¡µä¸­çš„å›¾ç‰‡æˆ–å…¶ä»–è¯·æ±‚æ— æ•ˆï¼Œå¹¶ä¸ä¼šåšä»»ä½• <code>cache</code> ã€‚<br />\nè¿™æ ·å®¢æˆ·ç«¯çš„è¯·æ±‚å°±å¤šäº†ï¼Œå°½ç®¡åªæ˜¯æ£€æŸ¥ <code>Last-modified</code>  çŠ¶æ€çš„ä¸œè¥¿ï¼Œä½†æ˜¯è¯·æ±‚ä¸€å¤šå¯¹æµè§ˆé€Ÿåº¦å¿…å®šæœ‰å½±å“ã€‚</p>\n<p><code>Cache-Control</code>  çš„å‚æ•°åŒ…æ‹¬:</p>\n<ul>\n<li><strong>max-age=</strong>[å•ä½ï¼šç§’ seconds] â€” è®¾ç½®ç¼“å­˜æœ€å¤§çš„æœ‰æ•ˆæ—¶é—´ã€‚ç±»ä¼¼äº  <code>Expires</code> , ä½†æ˜¯è¿™ä¸ªå‚æ•°å®šä¹‰çš„æ˜¯æ—¶é—´å¤§å°ï¼ˆæ¯”å¦‚ï¼š60ï¼‰è€Œä¸æ˜¯ç¡®å®šçš„æ—¶é—´ç‚¹ã€‚å•ä½æ˜¯ [ç§’ seconds].</li>\n<li><strong>s-maxage=</strong>[å•ä½ï¼šç§’ seconds] â€” ç±»ä¼¼äº  <code>max-age</code> , ä½†æ˜¯å®ƒåªç”¨äºå…¬äº«ç¼“å­˜ (e.g., proxy) .</li>\n<li><strong>public</strong> â€” å“åº”ä¼šè¢«ç¼“å­˜ï¼Œå¹¶ä¸”åœ¨å¤šç”¨æˆ·é—´å…±äº«ã€‚æ­£å¸¸æƒ…å†µï¼Œå¦‚æœè¦æ±‚ <span class=\"exturl\" data-url=\"aHR0cDovL2JhaWtlLmJhaWR1LmNvbS92aWV3LzIwNzY0MDguaHRt\">HTTP è®¤è¯</span>ï¼Œå“åº”ä¼šè‡ªåŠ¨è®¾ç½®ä¸º private.</li>\n<li><strong>private</strong> â€” å“åº”åªèƒ½å¤Ÿä½œä¸ºç§æœ‰çš„ç¼“å­˜ (e.g., åœ¨ä¸€ä¸ªæµè§ˆå™¨ä¸­)ï¼Œä¸èƒ½å†ç”¨æˆ·é—´å…±äº«ã€‚</li>\n<li><strong>no-cache</strong> â€” å“åº”ä¸ä¼šè¢«ç¼“å­˜ï¼Œè€Œæ˜¯å®æ—¶å‘æœåŠ¡å™¨ç«¯è¯·æ±‚èµ„æºã€‚è¿™ä¸€ç‚¹å¾ˆæœ‰ç”¨ï¼Œè¿™å¯¹ä¿è¯<span class=\"exturl\" data-url=\"aHR0cDovL2JhaWtlLmJhaWR1LmNvbS92aWV3LzIwNzY0MDguaHRt\"> HTTP è®¤è¯</span>èƒ½å¤Ÿä¸¥æ ¼åœ°ç¦æ­¢ç¼“å­˜ä»¥ä¿è¯å®‰å…¨æ€§å¾ˆæœ‰ç”¨ï¼ˆè¿™æ˜¯æŒ‡é¡µé¢ä¸ public ç»“åˆä½¿ç”¨çš„æƒ…å†µä¸‹ï¼‰. æ—¢æ²¡æœ‰ç‰ºç‰²ç¼“å­˜çš„æ•ˆç‡ï¼Œåˆèƒ½ä¿è¯å®‰å…¨ã€‚</li>\n<li><strong>no-store</strong> â€” åœ¨ä»»ä½•æ¡ä»¶ä¸‹ï¼Œå“åº”éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå¹¶ä¸”ä¸ä¼šè¢«å†™å…¥åˆ°å®¢æˆ·ç«¯çš„ç£ç›˜é‡Œï¼Œè¿™ä¹Ÿæ˜¯åŸºäºå®‰å…¨è€ƒè™‘çš„æŸäº›æ•æ„Ÿçš„å“åº”æ‰ä¼šä½¿ç”¨è¿™ä¸ªã€‚</li>\n<li><strong>must-revalidate</strong> â€” å“åº”åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ä¼šè¢«é‡ç”¨ï¼Œä»¥æ»¡è¶³æ¥ä¸‹æ¥çš„è¯·æ±‚ï¼Œä½†æ˜¯å®ƒå¿…é¡»åˆ°æœåŠ¡å™¨ç«¯å»éªŒè¯å®ƒæ˜¯ä¸æ˜¯ä»ç„¶æ˜¯æœ€æ–°çš„ã€‚</li>\n<li><strong>proxy-revalidate</strong> â€” ç±»ä¼¼äº  <code>must-revalidate</code> , ä½†ä¸é€‚ç”¨äºä»£ç†ç¼“å­˜.</li>\n</ul>\n<p><strong>æŠŠ css ä¸ js ä½¿ç”¨å¤–è”çš„æ–¹å¼è¿›è¡Œä½¿ç”¨</strong></p>\n<p>å»ºè®®å°† css å’Œ js ä»¥å¤–è”æ–¹å¼å¼•ç”¨ä»¥å……åˆ†åˆ©ç”¨ <code>cache</code> ï¼Œåªæœ‰ä¸€ä¸ªä¾‹å¤–å°±æ˜¯é’ˆå¯¹é¦–é¡µï¼Œé¦–é¡µå¯ä»¥é‡‡ç”¨å†…è”æ¥å‡å°‘ http è¯·æ±‚æ•°ï¼ŒåŠ å¿«é¡µé¢æ˜¾ç¤ºé€Ÿåº¦ï¼Œæ–‡ä¸­è¯´é¦– é¡µå†…è”çš„åŸå› æ˜¯é¦–é¡µè¢«äººä»¬è®¿é—®çš„æ¬¡æ•°ä¸ä¼šå¤ªå¤šï¼Œè€Œä¸”æ ·å¼ä¸€èˆ¬æ¯”è¾ƒç‰¹æ®Šï¼Œä¸åƒå…¶å®ƒé¡µé¢ä¸€æ ·æœ‰ç›¸åŒçš„é¡µé¢æ¨¡æ¿ï¼ˆå› ä¸ºå°±æœ‰ç›¸åŒçš„æ ·å¼éƒ¨åˆ†ï¼‰ï¼Œæ‰€ä»¥é¦–é¡µçš„æ ·å¼å¯ä»¥ å†…è”ã€‚å¹¶ä¸”åº”è¯¥åœ¨é¦–é¡µåŠ è½½å®Œæˆä¹‹åï¼Œå†åœ¨åå°åŠ¨æ€åŠ è½½åç»­é¡µé¢çš„ css å’Œ jsï¼Œä»¥æé«˜åç»­é¡µé¢çš„è®¿é—®é€Ÿåº¦ã€‚</p>\n<p>å¦‚æœç«™ç‚¹ä¸Šçš„ç”¨æˆ·æ¯ä¸ªä¼šè¯æœ‰å¤šä¸ªé¡µé¢æŸ¥çœ‹ï¼Œå¹¶ä¸”æ‚¨çš„è®¸å¤šé¡µé¢é‡å¤ä½¿ç”¨ç›¸åŒçš„è„šæœ¬å’Œæ ·å¼è¡¨ï¼Œåˆ™ç¼“å­˜çš„å¤–éƒ¨æ–‡ä»¶å¯èƒ½ä¼šå¸¦æ¥æ›´å¤§çš„æ½œåœ¨å¥½å¤„ã€‚</p>\n<blockquote>\n<p>å¯¹äºç°åœ¨çš„å•é¡µé¢çš„åº”ç”¨ï¼Œæ›´é€‚åˆäºåŠ¨æ€åŠ è½½çš„æ–¹æ¡ˆ</p>\n</blockquote>\n<p><strong>ç¼“å­˜ favicon.icoï¼Œå¹¶è®¾ç½®æœ€å¥½å°äº 1k</strong></p>\n<p>favicon.ico æ˜¯ä¸€ä¸ªä¿ç•™åœ¨æœåŠ¡å™¨æ ¹ç›®å½•ä¸­çš„å›¾ç‰‡ï¼Œä¸ºäº†å‡è½»æ‹¥æœ‰ favicon.ico çš„å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼Œè¯·ç¡®ä¿ï¼š</p>\n<ul>\n<li>ä¼˜åŒ–å®ƒçš„å¤§å°ï¼Œæœ€å¥½ä¸åˆ° 1Kã€‚</li>\n<li>è®¾ç½® Expires æ ‡å¤´ï¼Œä½¿å…¶ç¼“å­˜ã€‚</li>\n</ul>\n<p><strong>é…ç½®çš„ ETag</strong></p>\n<p>ETagï¼Œå…¨ç¨‹ä¸ºï¼š <code>Entity Tag</code> ï¼Œæ„æ€æ˜¯å®ä½“æ ‡ç­¾ï¼Œå®ƒå±äº HTTP åè®®çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„ Web æœåŠ¡å™¨éƒ½åº”è¯¥æ”¯æŒè¿™ä¸ªç‰¹æ€§ã€‚å®ƒçš„ä½œç”¨æ˜¯ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ä¸²æ¥æ ‡è¯†æŸä¸ªèµ„æºçš„ â€œç‰ˆæœ¬â€ï¼Œå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰è¯·æ±‚çš„æ—¶å€™ï¼Œæ¯”è¾ƒ ETag å¦‚æœä¸€è‡´ï¼Œåˆ™è¡¨ç¤ºè¯¥èµ„æºå¹¶æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å¯ä»¥ä½¿ç”¨è‡ªå·±ç¼“å­˜çš„ç‰ˆæœ¬ï¼Œé¿å…é‡å¤ä¸‹è½½ã€‚<br />\nå®ƒæ¯” last-modified date æ›´å…·æœ‰å¼¹æ€§ï¼Œä¾‹å¦‚æŸä¸ªæ–‡ä»¶åœ¨ 1 ç§’å†…ä¿®æ”¹äº† 10 æ¬¡ï¼ŒEtag å¯ä»¥ç»¼åˆ Inode (æ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹ (inode) æ•°)ï¼ŒMTime (ä¿®æ”¹æ—¶é—´) å’Œ Size æ¥ç²¾å‡†çš„è¿›è¡Œåˆ¤æ–­ï¼Œé¿å¼€ UNIX è®°å½• MTime åªèƒ½ç²¾ç¡®åˆ°ç§’çš„é—®é¢˜ã€‚ æœåŠ¡å™¨é›†ç¾¤ä½¿ç”¨ï¼Œå¯å–åä¸¤ä¸ªå‚æ•°ã€‚ä½¿ç”¨ ETags å‡å°‘ Web åº”ç”¨å¸¦å®½å’Œè´Ÿè½½ã€‚</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">å“åº”æ ‡</th>\n<th style=\"text-align:left\">ä¼˜åŠ¿ å’Œç‰¹ç‚¹</th>\n<th style=\"text-align:left\">åŠ£åŠ¿ å’Œå¯èƒ½çš„é—®é¢˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Expires</td>\n<td style=\"text-align:left\">- HTTP 1.0 å°±æœ‰ï¼Œç®€å•æ˜“ç”¨ã€‚ - æœåŠ¡å™¨é€šè¿‡è¿™ä¸ª Header å‘Šè¯‰æµè§ˆå™¨ï¼ŒæŸèµ„æºç›´åˆ°æŸä¸ªæ—¶é—´æ‰ä¼šè¿‡æœŸï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰è¿‡æœŸä¹‹å‰ï¼Œæµè§ˆå™¨å°±ç›´æ¥ä½¿ç”¨æœ¬åœ°çš„ç¼“å­˜äº†ã€‚</td>\n<td style=\"text-align:left\">- å› ä¸ºè¿™æ˜¯æ—¶é—´æ˜¯ç”±æœåŠ¡å™¨å‘é€çš„ï¼ˆUTCï¼‰ï¼Œä½†å¦‚æœæœåŠ¡å™¨æ—¶é—´å’Œå®¢æˆ·ç«¯äº‹ä»¶å­˜åœ¨ä¸ä¸€è‡´ï¼Œå¯èƒ½ä¼šæœ‰äº›é—®é¢˜ã€‚ - å¯èƒ½å­˜åœ¨ç‰ˆæœ¬çš„é—®é¢˜ï¼Œå› ä¸ºå¦‚æœåœ¨åˆ°æœŸä¹‹å‰ä¿®æ”¹è¿‡äº†ï¼Œå®¢æˆ·ç«¯æ˜¯ä¸ä¼šçŸ¥é“çš„ã€‚ - Cache-Control ä¸­çš„ max-age å¯ä»¥å®ç°ç±»ä¼¼çš„æ•ˆæœï¼Œä½†æ›´åŠ å¥½ï¼Œå› ä¸º max-age æ˜¯ä¸€ä¸ªä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´æ•°ï¼Œè€Œä¸æ˜¯å…·ä½“çš„æ—¶é—´ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ä¸Šé¢æåˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Cache-Contro</td>\n<td style=\"text-align:left\">- æœåŠ¡å™¨é€šè¿‡ä¸€ä¸ª Headerï¼ˆLast-Modifiedï¼‰å‘Šè¯‰æµè§ˆå™¨ï¼ŒæŸèµ„æºæœ€åä¿®æ”¹çš„æ—¶é—´ã€‚ - æµè§ˆå™¨åœ¨è¯·æ±‚çš„æ—¶å€™ï¼ŒåŒ…å«ä¸€ä¸ª Headerï¼ˆIf-Modified-Sinceï¼‰, ç„¶åæœåŠ¡å™¨å¯ä»¥è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœåœ¨è¯¥æ—¶é—´åæ²¡æœ‰ä¿®æ”¹è¿‡ï¼Œåˆ™è¿”å› 304ã€‚ - å®ƒæ¯” Expires å¤šå¾ˆå¤šé€‰é¡¹è®¾ç½®</td>\n<td style=\"text-align:left\">- Last-Modified ä¹Ÿæ˜¯ä¸€ä¸ªæ—¶é—´ï¼Œä½†è¯¥æ—¶é—´åªèƒ½ç²¾ç¡®åˆ°ç§’ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªç§’ä¸­æœ‰å¤šæ¬¡ä¿®æ”¹ï¼ˆè¿™ä¸ªåœ¨ç°åœ¨çš„ç¯å¢ƒä¸‹åº”è¯¥ç¡®å®æ˜¯å¯èƒ½çš„ï¼‰ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿé—®é¢˜ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ETag</td>\n<td style=\"text-align:left\">- å¯ä»¥æ›´åŠ ç²¾ç¡®åœ°åˆ¤æ–­èµ„æºæ˜¯å¦è¢«ä¿®æ”¹ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªæ—¶é—´å€¼ï¼Œè€Œæ˜¯å¯¹æ—¶é—´ç»è¿‡å¤„ç†çš„ä¸€ä¸ªé•¿æ•´å‹æ•°å€¼ï¼ˆå½“ç„¶å…·ä½“ç®—æ³•æˆ‘ä»¬ç›®å‰è¿˜ä¸å¾—è€ŒçŸ¥ï¼‰ã€‚ - æµè§ˆå™¨å‘èµ·æ–°è¯·æ±‚æ—¶éœ€è¦åŒ…å« If-None-Matchã€‚</td>\n<td style=\"text-align:left\">- å¦‚æœéƒ¨ç½²åœ¨æœåŠ¡å™¨åœºç¯å¢ƒä¸­ï¼Œé…ç½®ä¸å½“çš„è¯ï¼Œå¯èƒ½æ¯ä¸ªæœåŠ¡å™¨ä¼šå¯¹ç›¸åŒçš„èµ„æºç”Ÿæˆä¸ä¸€æ ·çš„ ETagï¼Œè¿™æ ·å°±å¢åŠ äº†é‡å¤ä¸‹è½½çš„å¯èƒ½æ€§ã€‚</td>\n</tr>\n</tbody>\n</table>\n<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªçœŸå®çš„ä¾‹å­ï¼š</p>\n<p><img data-src=\"./assets/image-20190619145105413.png\" alt=\"/images/image-20190619145105413\" /></p>\n<p>å…¶ä»–çš„ä¸€äº›ç¼“å­˜ä½¿ç”¨ï¼š</p>\n<ul>\n<li>ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œç¼“å­˜éƒ¨åˆ†å¸¸ç”¨ç”¨æˆ·æ•°æ®ã€å…¬å¼€æ•°æ®</li>\n<li>ç¼“å­˜æœºåˆ¶è®¾è®¡ï¼šç¼“å­˜ + è¿‡æœŸæ—¶é—´</li>\n</ul>\n<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>\n<ul>\n<li>æ·»åŠ  Expires æˆ– Cache-Control</li>\n<li>Etag</li>\n<li>ç¼“å­˜ favicon.ico</li>\n<li>å¤–è” js/css</li>\n</ul>\n<h4 id=\"ç¼©çŸ­æœåŠ¡å™¨å“åº”æ—¶é—´\"><a class=\"anchor\" href=\"#ç¼©çŸ­æœåŠ¡å™¨å“åº”æ—¶é—´\">#</a> ç¼©çŸ­æœåŠ¡å™¨å“åº”æ—¶é—´</h4>\n<p>æœåŠ¡å™¨å“åº”æ—¶é—´å—åˆ°è®¿é—®æµé‡ï¼Œæ¯ä¸ªé¡µé¢ä½¿ç”¨çš„èµ„æºï¼ŒæœåŠ¡å™¨ä½¿ç”¨çš„è½¯ä»¶ä»¥åŠç¡¬ä»¶æœ¬èº«çš„å½±å“ã€‚è¦æ”¹å–„æœåŠ¡å™¨å“åº”æ—¶é—´ï¼Œè¯·æŸ¥æ‰¾æ€§èƒ½ç“¶é¢ˆï¼Œå¦‚æ…¢é€Ÿæ•°æ®åº“æŸ¥è¯¢ï¼Œæ…¢é€Ÿè·¯ç”±æˆ–ç¼ºå°‘è¶³å¤Ÿçš„å†…å­˜å¹¶ä¿®å¤å®ƒä»¬ã€‚æœ€ä½³æœåŠ¡å™¨å“åº”æ—¶é—´ä½äº 200 æ¯«ç§’ã€‚</p>\n<p>å¾ˆå¤šæ½œåœ¨å› ç´ éƒ½å¯èƒ½ä¼šå»¶ç¼“æœåŠ¡å™¨å“åº”ï¼Œä¾‹å¦‚ç¼“æ…¢çš„åº”ç”¨é€»è¾‘ã€ç¼“æ…¢çš„æ•°æ®åº“æŸ¥è¯¢ã€ç¼“æ…¢çš„è·¯ç”±ã€æ¡†æ¶ã€åº“ã€èµ„æº CPU ä¸è¶³æˆ–å†…å­˜ä¸è¶³ã€‚æ‚¨éœ€è¦å……åˆ†è€ƒè™‘æ‰€æœ‰è¿™äº›å› ç´ ï¼Œæ‰èƒ½æ”¹å–„æœåŠ¡å™¨çš„å“åº”ç”¨æ—¶ã€‚ è‹¥æƒ³æ‰¾å‡ºæœåŠ¡å™¨å“åº”ç”¨æ—¶è¿‡é•¿çš„åŸå› ï¼Œé¦–å…ˆè¦è¿›è¡Œè¡¡é‡ã€‚ç„¶åï¼Œå‡†å¤‡å¥½ç›¸å…³æ•°æ®ï¼Œå¹¶å‚é˜…æœ‰å…³å¦‚ä½•è§£å†³è¯¥é—®é¢˜çš„ç›¸åº”æŒ‡å¯¼ã€‚å½“è§£å†³é—®é¢˜åï¼Œæ‚¨å¿…é¡»ç»§ç»­è¡¡é‡æœåŠ¡å™¨å“åº”ç”¨æ—¶ï¼Œå¹¶è®¾æ³•åº”å¯¹ä»»ä½•ä¼šåœ¨å°†æ¥å‡ºç°çš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜ã€‚</p>\n<ol>\n<li><strong>æ”¶é›†å¹¶æ£€æŸ¥</strong>ç°æœ‰æ€§èƒ½å’Œæ•°æ®ã€‚è‹¥æ— å¯ç”¨å†…å®¹ï¼Œè¯·ä½¿ç”¨è‡ªåŠ¨åŒ–çš„ç½‘ç»œåº”ç”¨ç›‘æµ‹è§£å†³æ–¹æ¡ˆï¼ˆå¸‚é¢ä¸Šæœ‰æ‰˜ç®¡çš„å¼€æºç‰ˆæœ¬ï¼Œé€‚ç”¨äºå¤§å¤šæ•°å¹³å°ï¼‰è¿›è¡Œè¯„ä¼°ï¼Œæˆ–æ·»åŠ è‡ªå®šä¹‰çš„æ–¹æ³•ã€‚</li>\n<li><strong>æ‰¾å‡ºå¹¶ä¿®å¤</strong>é¦–è¦çš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜ã€‚å¦‚æœ z æ‚¨ä½¿ç”¨çš„æ˜¯çƒ­é—¨ç½‘é¡µæ¡†æ¶æˆ–å†…å®¹ç®¡ç†å¹³å°ï¼Œè¯·å‚é˜…ä¸æ€§èƒ½ä¼˜åŒ–æœ€ä½³åšæ³•ç›¸å…³çš„æ–‡æ¡£ã€‚</li>\n<li><strong>ç›‘æµ‹å¹¶æé†’</strong>ä»»ä½•ä¼šåœ¨å°†æ¥å‡ºç°çš„æ€§èƒ½è¡°é€€é—®é¢˜ï¼</li>\n</ol>\n<blockquote>\n<p>é€šå¸¸æ¥è¯´ï¼ŒæœåŠ¡å™¨çš„å“åº”æ—¶é—´ç”±æ•°æ®åº“çš„é—®é¢˜å±…å¤šï¼Œè¿˜æœ‰é”™è¯¯çš„ç¨‹åºè®¾è®¡ (æ¯”å¦‚ï¼šçƒ‚ç”¨ for å¾ªç¯å»æŸ¥æ•°æ®åº“)ã€‚</p>\n</blockquote>\n<h3 id=\"ä¼˜åŒ–å·¥å…·\"><a class=\"anchor\" href=\"#ä¼˜åŒ–å·¥å…·\">#</a> ä¼˜åŒ–å·¥å…·</h3>\n<h4 id=\"google-page-speed\"><a class=\"anchor\" href=\"#google-page-speed\">#</a> Google Page Speed</h4>\n<p>Google Page Speed ä»¥å¸®åŠ©å¼€å‘äººå‘˜å’Œç½‘ç«™æ‰€æœ‰è€…ç¡®ä¿ä»–ä»¬çš„ç½‘é¡µå°½å¯èƒ½é¡ºç•…ï¼Œå¿«é€Ÿåœ°è¿è¡Œã€‚</p>\n<p><strong>Google Page Speed ç‰¹ç‚¹ï¼š</strong></p>\n<ul>\n<li>åœ¨ CSS æ–¹é¢æ›´åŠ æ³¨é‡ç»†èŠ‚ï¼Œå¯¹äº CSS é€‰æ‹©å™¨ï¼ŒGoogle Page Speed æä¾›äº†å¤§é‡æœ‰ç”¨çš„å»ºè®®</li>\n<li>é¡µé¢é€Ÿåº¦æ´»åŠ¨åŠŸèƒ½ç±»ä¼¼äºåŠ è½½è®¡æ—¶å™¨è¯„ä¼°ï¼Œä½†å®ƒå®æ—¶æä¾›å›¾è¡¨ï¼Œå› æ­¤å¯ä»¥åœ¨ä»»ä½•ç»™å®šæ—¶é—´å‡†ç¡®æŸ¥çœ‹ç½‘ç«™ä¸Šå‘ç”Ÿçš„æƒ…å†µã€‚</li>\n<li>è‡ªåŠ¨ä¼˜åŒ–ï¼šä½¿ç”¨ PageSpeed æ¨¡å—ï¼Œå¯ä»¥å°† Google ä¸æ‚¨çš„ Nginx æˆ– Apache ç½‘ç«™æœåŠ¡å™¨é›†æˆï¼Œä»¥è‡ªåŠ¨ä¼˜åŒ–æ‚¨çš„ç½‘ç«™ã€‚</li>\n<li>ä¼˜åŒ–åº“é›†æˆï¼šå¯ä»¥æ‰¾åˆ° PageSpeed æ¨¡å—èƒŒåä¼˜åŒ–å»ºè®®ï¼Œå…è®¸è®¾è®¡å’Œæ„å»ºè‡ªå·±çš„å·¥å…·ã€‚</li>\n</ul>\n<p>å¯¹äºæŸäº›äººæ¥è¯´ï¼ŒGoogle Page Speed å°†æ˜¯æ˜¾è€Œæ˜“è§çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¸å…¶ä»–å¯¹ç»´æŠ¤ç½‘ç«™æ€§èƒ½è‡³å…³é‡è¦çš„ Google å·¥å…·ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚ Google Analyticsã€‚</p>\n<h4 id=\"jsperf-benchmarkjs\"><a class=\"anchor\" href=\"#jsperf-benchmarkjs\">#</a> JsPerf &amp; Benchmark.js</h4>\n<p>ç»å¸¸çœ‹åˆ°é¡¹ç›®ä¸­æœ‰ä¸€ä¸ª benchmark çš„æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆè¿™ä¸ª benchmark æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿ</p>\n<p>JsPerf åœ¨çº¿ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BlcmYuY29tLw==\">https://jsperf.com/</span></p>\n<p>JsPerf Github åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2pzcGVyZi9qc3BlcmYuY29t\">https://github.com/jsperf/jsperf.com</span></p>\n<p>Benchmark.js ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2Jlc3RpZWpzL2JlbmNobWFyay5qcw==\">https://github.com/bestiejs/benchmark.js</span></p>\n<p>BenchMark.js å¯ä»¥æœ¬åœ°å®‰è£…ï¼Œè€Œ JsPerf.js æ˜¯çº¿ä¸Šä½¿ç”¨çš„ã€‚</p>\n<p>HTML ä¸­å¼•å…¥ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lodash.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>platform.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>benchmark.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ <code>npm</code> :</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token punctuation\">&#123;</span>sudo -H<span class=\"token punctuation\">&#125;</span> <span class=\"token function\">npm</span> i <span class=\"token parameter variable\">-g</span> <span class=\"token function\">npm</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">npm</span> i <span class=\"token parameter variable\">--save</span> benchmark</pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„ç”¨ä¾‹ï¼š</p>\n<p>Reg vs IndexOf</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> suite <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Benchmark<span class=\"token punctuation\">.</span>Suite</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// add tests</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>suite<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'RegExp#test'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">o</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'String#indexOf'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token string\">'Hello World!'</span><span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// add listeners</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cycle'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'complete'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fastest is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fastest'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// run async</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string-property property\">'async'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">// logs:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">// => RegExp#test x 4,161,532 +-0.99% (59 cycles)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">// => String#indexOf x 6,139,623 +-1.00% (131 cycles)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// => Fastest is String#indexOf</span></pre></td></tr></table></figure><p>å†æ¥çœ‹ä¸€ä¸ª call ä¸ apply çš„å¯¹æ¯”ï¼š</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> Benchmark <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'benchmark'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">var</span> suite <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Benchmark<span class=\"token punctuation\">.</span>Suite</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">arr1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">str2</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// æ·»åŠ æµ‹è¯•</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>suite<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arr1'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">arr1</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'str2'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token function\">str2</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">// add listeners</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cycle'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'complete'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fastest is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fastest'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pluck</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// run async</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string-property property\">'async'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>benckmark æ˜¯å¯¹ js è¿è¡Œèƒ½æ•ˆçš„ä¸€ä¸ªå¯¹æ¯”æµ‹è¯•ï¼Œè®©ä½ èƒ½å¤ŸçŸ¥é“è‡ªå·±çš„ JS ä»£ç ä¸­ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”çš„æ—¶å€™ï¼Œæ˜¯å¦æœ‰ä¼˜åŒ–çš„ç©ºé—´ã€‚å½“ç„¶ï¼Œè¿™äº›æ–°çš„æ–¹æ¡ˆï¼Œéœ€è¦è‡ªå·±å»ç¼–å†™å»æµ‹è¯•ã€‚åŒæ ·ï¼Œä¹Ÿå¯ä»¥åœ¨ JsPerf çš„å®˜ç½‘ä¸Šå»çœ‹å…¶ä»–çš„æµ‹è¯•ç»“æœã€‚</p>\n<p>æ‰§è¡ŒåŠæ³• ï¼š</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>npm init <span class=\"token operator\">-</span>y</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>npm install <span class=\"token operator\">-</span><span class=\"token constant\">S</span> benchmark</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>touch test<span class=\"token punctuation\">.</span>js <span class=\"token comment\">//Linux</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>node test<span class=\"token punctuation\">.</span>js</pre></td></tr></table></figure><h2 id=\"ä»£ç ä¼˜åŒ–å†™å‡ºä¼˜è´¨çš„ä»£ç \"><a class=\"anchor\" href=\"#ä»£ç ä¼˜åŒ–å†™å‡ºä¼˜è´¨çš„ä»£ç \">#</a> ä»£ç ä¼˜åŒ– â€”â€” å†™å‡ºä¼˜è´¨çš„ä»£ç </h2>\n<p>å‘½é¢˜å¾ˆå¤§ï¼Œä½†æ˜¯æˆ‘ä»¬è¦ç®€åŒ–æ¥è°ˆä¸€ä¸‹ã€‚</p>\n<p>ä»£ç ä¼˜åŒ–ï¼Œå…ˆè¦å†™å‡ºä¼˜è´¨çš„ä»£ç ï¼Œæœ‰å‡ ç‚¹åŸåˆ™ï¼š</p>\n<ul>\n<li>ä½¿ç”¨è¾…åŠ©åº”ç”¨å¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼ŒEslint ç­‰</li>\n<li>ä½¿ç”¨é¢„ç¼–è¯‘å·¥å…·ï¼Œå¦‚ lessï¼Œsassï¼Œstylusã€‚</li>\n<li>ä½¿ç”¨å®˜æ–¹çš„å¼€å‘è§„èŒƒï¼šå‘½åè§„èŒƒã€æ³¨é‡Šã€ä½¿ç”¨è§„èŒƒã€æ–‡æ¡£è§„èŒƒ</li>\n<li>å†™å‡ºé€»è¾‘ä¸Šæ˜“äºé˜…è¯»çš„ä»£ç ï¼šè®¾è®¡æ¨¡å¼ã€ä»£ç ç»“æ„ã€æ–‡æ¡£ç¼–æ’ (ç›®å½•ç»“æ„)</li>\n<li>ä»£ç å®¡æŸ¥</li>\n<li>å•å…ƒæµ‹è¯•</li>\n<li>å¼‚å¸¸ä¸é”™è¯¯æœºåˆ¶</li>\n</ul>\n<p>ä¹‹åå°±æ˜¯ç»ƒä¹ ä¸é˜…è¯»ï¼Œé˜…è¯»åˆ«äººçš„ä»£ç ï¼Œå­¦ä¹ åˆ«äººçš„ç²¾åï¼Œäº†è§£åˆ«äººä»£ç ä¸­çš„ç¼ºç‚¹ã€‚ä½¿ç”¨ JsPerf æˆ–è€… benchemark å»å¯¹æ¯”ä¼˜åŒ–æ€§èƒ½ã€‚</p>\n<p>å‰ç«¯ä»£ç è§„èŒƒï¼šAirbnbï¼Œgithubï¼ŒGoogleï¼Œè…¾è®¯ï¼Œé˜¿é‡Œç­‰ã€‚</p>\n<h2 id=\"jsperf\"><a class=\"anchor\" href=\"#jsperf\">#</a> JsPerf</h2>\n<h3 id=\"jsperfä½¿ç”¨ç®€ä»‹\"><a class=\"anchor\" href=\"#jsperfä½¿ç”¨ç®€ä»‹\">#</a> JsPerf ä½¿ç”¨ç®€ä»‹</h3>\n<h4 id=\"çº¿ä¸Šä½¿ç”¨æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#çº¿ä¸Šä½¿ç”¨æ–¹æ¡ˆ\">#</a> çº¿ä¸Šä½¿ç”¨æ–¹æ¡ˆ</h4>\n<p>éœ€è¦ä½¿ç”¨ Github è¿›è¡Œç™»å½•ï¼š</p>\n<p><img data-src=\"./assets/image-20190618210408261.png\" alt=\"/images/image-20190618210408261\" /></p>\n<p>ç‚¹å‡» <code>Login with Github to Create Test Cases</code> :</p>\n<p><img data-src=\"./assets/image-20190619103010414.png\" alt=\"/images/image-20190619103010414\" /></p>\n<p>ç™»å½•ä¹‹åï¼Œè¿›å…¥æˆæƒé¡µé¢ï¼š</p>\n<p><img data-src=\"./assets/image-20190619103140822.png\" alt=\"/images/image-20190619103140822\" /></p>\n<p>ç™»å½•è¿‡åï¼Œå°±å¯ä»¥åˆ›å»ºè‡ªå·±çš„æµ‹è¯•ç”¨ä¾‹å•¦ï¼š</p>\n<p>\u0001<img data-src=\"./assets/image-20190619143549467.png\" alt=\"/images/image-20190619143549467\" /></p>\n<h4 id=\"çº¿ä¸‹ä½¿ç”¨æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#çº¿ä¸‹ä½¿ç”¨æ–¹æ¡ˆ\">#</a> çº¿ä¸‹ä½¿ç”¨æ–¹æ¡ˆï¼š</h4>\n<p>ç¯å¢ƒå‡†å¤‡ï¼š</p>\n<ul>\n<li>Mysql</li>\n<li>Nodejs</li>\n</ul>\n<p>åˆ›å»ºè¿‡ç¨‹ï¼š</p>\n<ol>\n<li>\n<p>å®‰è£… Mysql</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mysql <span class=\"token parameter variable\">-uroot</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"CREATE DATABASE jsperf; GRANT ALL ON jsperf.* TO 'jsuser'@'localhost' IDENTIFIED BY 'jspass'; FLUSH PRIVILEGES;\"</span></pre></td></tr></table></figure></li>\n<li>\n<p>åœ¨ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYnJvd3NlcnNjb3BlLm9yZy8=\">Browserscope.org</span> æ³¨å†Œä¸€ä¸ª API key ï¼Œåœ¨ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYnJvd3NlcnNjb3BlLm9yZy91c2VyL3NldHRpbmdz\">the settings page</span> é¡µé¢ä¸­.</p>\n</li>\n<li>\n<p>æ³¨å†Œä¸€ä¸ª <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NldHRpbmdzL2FwcGxpY2F0aW9ucy9uZXc=\">new OAuth GitHub application</span>. ä½¿ç”¨ callback URL ç•™ç©ºã€‚å¤åˆ¶ &quot;Client ID&quot; å’Œ &quot;Client Secret&quot; åˆ° github çš„é¡µé¢ä¸Šã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ <code>npm install</code>  å®‰è£…</p>\n</li>\n<li>\n<p>é…ç½® <code>.env</code>  çš„æ–‡ä»¶</p>\n</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">NODE_ENV</span><span class=\"token operator\">=</span>development</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># from Prerequisites step 1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">MYSQL_USER</span><span class=\"token operator\">=</span>jsuser</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">MYSQL_PASSWORD</span><span class=\"token operator\">=</span>jspass</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">MYSQL_DATABASE</span><span class=\"token operator\">=</span>jsperf</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># from Prerequisites step 2</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">BROWSERSCOPE</span><span class=\"token operator\">=</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># from Prerequisites step 3</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">GITHUB_CLIENT_ID</span><span class=\"token operator\">=</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">GITHUB_CLIENT_SECRET</span><span class=\"token operator\">=</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">GITHUB_CALLBACK</span><span class=\"token operator\">=</span>http://localhost:3000</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">BELL_COOKIE_PASS</span><span class=\"token operator\">=</span>password-should-be-32-characters</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token assign-left variable\">COOKIE_PASS</span><span class=\"token operator\">=</span>password-should-be-32-characters</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># customizable but not recommended for local development</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># SCHEME=http</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># DOMAIN=localhost</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># PORT=3000</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># MYSQL_HOST=localhost</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># MYSQL_PORT=3306</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># LOGGLY_TOKEN=</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># LOGGLY_SUBDOMAIN=</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># REDIS_HOST=</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># REDIS_PORT=</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># REDIS_PASSWORD=</span></pre></td></tr></table></figure><ol start=\"6\">\n<li>è¿è¡Œ <code>npm start</code></li>\n</ol>\n<h3 id=\"ä»£ç ç¤ºä¾‹for-vs-foreach\"><a class=\"anchor\" href=\"#ä»£ç ç¤ºä¾‹for-vs-foreach\">#</a> ä»£ç ç¤ºä¾‹ for vs foreach</h3>\n<p>æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ for ä¸ foreach</p>\n<p><img data-src=\"./assets/screencapture-jsperf-2019-06-18-21_15_29.png\" alt=\"screencapture-jsperf-2019-06-18-21_15_29\" /></p>\n<p>æµ‹è¯•è¿‡ç¨‹ï¼š</p>\n<p><img data-src=\"./assets/image-20190618211820471.png\" alt=\"/images/image-20190618211820471\" /></p>\n<p>æµ‹è¯•ç»“æœï¼š</p>\n<p><img data-src=\"./assets/image-20190618211915799.png\" alt=\"/images/image-20190618211915799\" /></p>\n<p>è¿™é‡Œæœ‰ä¸€ä¸ªæ›´å…¨é¢çš„å¯¹æ¯”ç»“æœï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BlcmYuY29tL2Zvci12cy1mb3JlYWNoLzc1\">https://jsperf.com/for-vs-foreach/75</span></p>\n<p><img data-src=\"./assets/image-20190618213130251.png\" alt=\"/images/image-20190618213130251\" /></p>\n<p><img data-src=\"./assets/image-20190618213201840.png\" alt=\"/images/image-20190618213201840\" /></p>\n<p>è¿˜æœ‰ä¸€äº›æ¯”è¾ƒæœ‰æ„æ€çš„æµ‹è¯•ï¼š</p>\n<p>å¯ä»¥é€šè¿‡æµè§ˆï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BlcmYuY29tL3BvcHVsYXI=\">https://jsperf.com/popular</span> è¿›è¡ŒæŸ¥çœ‹</p>\n<p><img data-src=\"./assets/image-20190619143653346.png\" alt=\"/images/image-20190619143653346\" /></p>\n<h3 id=\"å‰ç«¯é¡¹ç›®ä¼˜åŒ–å®è·µ\"><a class=\"anchor\" href=\"#å‰ç«¯é¡¹ç›®ä¼˜åŒ–å®è·µ\">#</a> å‰ç«¯é¡¹ç›®ä¼˜åŒ–å®è·µ</h3>\n<p>æˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹ Date () ä¸ Moment () ä¸­çš„ format</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> Benchmark <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'benchmark'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> moment <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'moment'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">Date</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">Format</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fmt</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">var</span> o <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string-property property\">\"M+\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// æœˆä»½</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string-property property\">\"d+\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// æ—¥</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string-property property\">\"h+\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// å°æ—¶</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string-property property\">\"m+\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMinutes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// åˆ†</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string-property property\">\"s+\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSeconds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ç§’</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token string-property property\">\"q+\"</span><span class=\"token operator\">:</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// å­£åº¦</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token string-property property\">\"S\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMilliseconds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// æ¯«ç§’</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(y+)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> fmt <span class=\"token operator\">=</span> fmt<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>RegExp<span class=\"token punctuation\">.</span>$1<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token operator\">-</span> RegExp<span class=\"token punctuation\">.</span>$1<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> k <span class=\"token keyword\">in</span> o<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"(\"</span> <span class=\"token operator\">+</span> k <span class=\"token operator\">+</span> <span class=\"token string\">\")\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> fmt <span class=\"token operator\">=</span> fmt<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>RegExp<span class=\"token punctuation\">.</span>$1<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>RegExp<span class=\"token punctuation\">.</span>$1<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"00\"</span> <span class=\"token operator\">+</span> o<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span> <span class=\"token operator\">+</span> o<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token keyword\">return</span> fmt<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">var</span> suite <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Benchmark<span class=\"token punctuation\">.</span>Suite</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// add tests</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>suite<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Date format'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'yyyy-MM-dd hh:mm:ss'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Moment format'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'YYYY-MM-DD HH:mm:ss'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token comment\">// add listeners</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cycle'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'complete'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fastest is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fastest'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token comment\">// run async</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string-property property\">'async'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Moment <span class=\"token function\">format</span> x <span class=\"token number\">73,570</span> ops/sec Â±4.93% <span class=\"token punctuation\">(</span><span class=\"token number\">82</span> runs sampled<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Fastest is Moment <span class=\"token function\">format</span></pre></td></tr></table></figure><h2 id=\"pagespeed\"><a class=\"anchor\" href=\"#pagespeed\">#</a> PageSpeed</h2>\n<h3 id=\"pagespeedç®€ä»‹\"><a class=\"anchor\" href=\"#pagespeedç®€ä»‹\">#</a> PageSpeed ç®€ä»‹</h3>\n<p>PageSpeed Insights çš„ Chrome æ‰©å±•æ˜¯ç”±è°·æ­Œå®˜æ–¹å¼€å‘çš„ä¸€æ¬¾å¯ä»¥åˆ†æé¡µé¢è½½å…¥çš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬èµ„æºã€ç½‘ç»œã€DOM ä»¥åŠæ—¶é—´çº¿ç­‰ç­‰ä¿¡æ¯çš„æ’ä»¶ï¼Œä¹Ÿæä¾›åœ¨çº¿è®¿é—®æ–¹å¼ã€‚</p>\n<h4 id=\"ä½¿ç”¨google-pagespeed-insights\"><a class=\"anchor\" href=\"#ä½¿ç”¨google-pagespeed-insights\">#</a> ä½¿ç”¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vc3BlZWQvcGFnZXNwZWVkL2luc2lnaHRzLw==\"> Google PageSpeed Insights</span></h4>\n<p>æ‰“å¼€ https://developers.google.com/speed/pagespeed/insights/</p>\n<p>è¾“å…¥éœ€è¦åˆ†æçš„ç½‘å€å³å¯ï¼Œè¿™é‡Œé¢éœ€è¦æ³¨æ„å¿…é¡»åœ¨å…¬ç½‘å¯ä»¥è®¿é—®åˆ°ç½‘å€ã€‚</p>\n<p><img data-src=\"./assets/image-20190619212956061.png\" alt=\"/images/image-20190619212956061\" /></p>\n<h4 id=\"ä½¿ç”¨chromeæ’ä»¶mozilaæ’ä»¶\"><a class=\"anchor\" href=\"#ä½¿ç”¨chromeæ’ä»¶mozilaæ’ä»¶\">#</a> ä½¿ç”¨ Chrome æ’ä»¶ / Mozila æ’ä»¶</h4>\n<p><img data-src=\"./assets/image-20190619203556941.png\" alt=\"/images/image-20190619203556941\" /></p>\n<p>ä¸‹è½½å®‰è£…åŠæ³•ï¼š</p>\n<ol>\n<li>\n<p>ä½¿ç”¨æ’ä»¶ ID: <code>djfpadpbeemogokhllpiakdeadpoclan</code>  åˆ° https://chrome-extension-downloader.com/ æ¥ä¸‹è½½</p>\n<p>æ‰“å¼€ï¼š<span class=\"exturl\" data-url=\"Y2hyb21lOi8vZXh0ZW5zaW9ucy8=\">chrome://extensions/</span></p>\n<p>æŠŠ <code>ctx</code>  æ–‡ä»¶æ‹–è¿›å»</p>\n</li>\n<li>\n<p>å¦‚æœæœ‰æ¢¯å­ï¼Œé‚£ä¹ˆç›´æ¥åœ¨å•†åº—é‡Œé¢æœç´¢</p>\n</li>\n</ol>\n<p>æ’ä»¶ä½¿ç”¨ï¼š</p>\n<p><img data-src=\"./assets/image-20190619212836235.png\" alt=\"/images/image-20190619212836235\" /></p>\n<h3 id=\"å‰ç«¯é¡¹ç›®ä¼˜åŒ–å®è·µ-2\"><a class=\"anchor\" href=\"#å‰ç«¯é¡¹ç›®ä¼˜åŒ–å®è·µ-2\">#</a> å‰ç«¯é¡¹ç›®ä¼˜åŒ–å®è·µ</h3>\n<h2 id=\"è¡¥å……å­¦ä¹ \"><a class=\"anchor\" href=\"#è¡¥å……å­¦ä¹ \">#</a> è¡¥å……å­¦ä¹ </h2>\n<h3 id=\"ç¼–ç -è§£ç å½¢æˆdomæ ‘çš„è¿‡ç¨‹\"><a class=\"anchor\" href=\"#ç¼–ç -è§£ç å½¢æˆdomæ ‘çš„è¿‡ç¨‹\">#</a> ç¼–ç ã€è§£ç å½¢æˆ DOM æ ‘çš„è¿‡ç¨‹</h3>\n<p>æµè§ˆå™¨ä»ç½‘ç»œæˆ–ç¡¬ç›˜ä¸­è·å¾— <code>HTML</code>  å­—èŠ‚æ•°æ®åä¼šç»è¿‡ä¸€ä¸ªæµç¨‹å°†å­—èŠ‚è§£æä¸º <code>DOM</code>  æ ‘ï¼š</p>\n<ul>\n<li>ç¼–ç ï¼š <strong>å…ˆå°† HTML çš„åŸå§‹å­—èŠ‚æ•°æ®è½¬æ¢ä¸ºæ–‡ä»¶æŒ‡å®šç¼–ç çš„å­—ç¬¦ã€‚</strong></li>\n<li>ä»¤ç‰ŒåŒ–ï¼š ç„¶å<strong>æµè§ˆå™¨ä¼šæ ¹æ® HTML è§„èŒƒæ¥å°†å­—ç¬¦ä¸²è½¬æ¢æˆå„ç§ä»¤ç‰Œ</strong>ï¼ˆå¦‚ <code>&lt;html&gt;</code> ã€ <code>&lt;body&gt;</code>  è¿™æ ·çš„æ ‡ç­¾ä»¥åŠæ ‡ç­¾ä¸­çš„å­—ç¬¦ä¸²å’Œå±æ€§ç­‰éƒ½ä¼šè¢«è½¬åŒ–ä¸ºä»¤ç‰Œï¼Œæ¯ä¸ªä»¤ç‰Œå…·æœ‰ç‰¹æ®Šå«ä¹‰å’Œä¸€ç»„è§„åˆ™ï¼‰ã€‚ä»¤ç‰Œè®°å½•äº†æ ‡ç­¾çš„å¼€å§‹ä¸ç»“æŸï¼Œé€šè¿‡è¿™ä¸ªç‰¹æ€§å¯ä»¥è½»æ¾åˆ¤æ–­ä¸€ä¸ªæ ‡ç­¾æ˜¯å¦ä¸ºå­æ ‡ç­¾ï¼ˆå‡è®¾æœ‰ <code>&lt;html&gt;</code>  ä¸ <code>&lt;body&gt;</code>  ä¸¤ä¸ªæ ‡ç­¾ï¼Œå½“ <code>&lt;html&gt;</code>  æ ‡ç­¾çš„ä»¤ç‰Œè¿˜æœªé‡åˆ°å®ƒçš„ç»“æŸä»¤ç‰Œ <code>&lt;/html&gt;</code>  å°±é‡è§äº† <code>&lt;body&gt;</code>  æ ‡ç­¾ä»¤ç‰Œï¼Œé‚£ä¹ˆ <code>&lt;body&gt;</code>  å°±æ˜¯ <code>&lt;html&gt;</code>  çš„å­æ ‡ç­¾ï¼‰ã€‚</li>\n<li>ç”Ÿæˆå¯¹è±¡ï¼š <strong>æ¥ä¸‹æ¥æ¯ä¸ªä»¤ç‰Œéƒ½ä¼šè¢«è½¬æ¢æˆå®šä¹‰å…¶å±æ€§å’Œè§„åˆ™çš„å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯èŠ‚ç‚¹å¯¹è±¡ï¼‰ã€‚</strong></li>\n<li>æ„å»ºå®Œæ¯•ï¼š <strong>DOM æ ‘æ„å»ºå®Œæˆï¼Œæ•´ä¸ªå¯¹è±¡é›†åˆå°±åƒæ˜¯ä¸€æ£µæ ‘å½¢ç»“æ„</strong>ã€‚å¯èƒ½æœ‰äººä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆ <code>DOM</code>  æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œè¿™æ˜¯å› ä¸ºæ ‡ç­¾ä¹‹é—´å«æœ‰å¤æ‚çš„çˆ¶å­å…³ç³»ï¼Œæ ‘å½¢ç»“æ„æ­£å¥½å¯ä»¥è¯ é‡Šè¿™ä¸ªå…³ç³»ï¼ˆ <code>CSSOS</code>  åŒç†ï¼Œå±‚å æ ·å¼ä¹Ÿå«æœ‰çˆ¶å­å…³ç³»ã€‚ä¾‹å¦‚ï¼š  <code>div p &#123;font-size: 18px&#125;</code> ï¼Œä¼šå…ˆå¯»æ‰¾æ‰€æœ‰ <code>p</code>  æ ‡ç­¾å¹¶åˆ¤æ–­å®ƒçš„çˆ¶æ ‡ç­¾æ˜¯å¦ä¸º <code>div</code>  ä¹‹åæ‰ä¼šå†³å®šè¦ä¸è¦é‡‡ç”¨è¿™ä¸ªæ ·å¼è¿›è¡Œæ¸²æŸ“ï¼‰ã€‚</li>\n</ul>\n<p>æ•´ä¸ª <code>DOM</code>  æ ‘çš„æ„å»ºè¿‡ç¨‹å…¶å®å°±æ˜¯ï¼š <strong>å­—èŠ‚ -&gt; å­—ç¬¦ -&gt; ä»¤ç‰Œ -&gt; èŠ‚ç‚¹å¯¹è±¡ -&gt; å¯¹è±¡æ¨¡å‹</strong>ï¼Œä¸‹é¢å°†é€šè¿‡ä¸€ä¸ªç¤ºä¾‹ <code>HTML</code>  ä»£ç ä¸é…å›¾æ›´å½¢è±¡åœ°è§£é‡Šè¿™ä¸ªè¿‡ç¨‹ã€‚</p>\n<p>å¦‚ä¸‹é¢çš„è¿™æ®µ HTML</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width,initial-scale=1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>style.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Critical Path<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Hello <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>web performance<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> students!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>awesome-photo.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><img data-src=\"./assets/63503acbly1fk2te7tuh0j20nv0dbjtl.jpg\" alt=\"DOM Rendering\" /></p>\n<h3 id=\"ä¼˜åŒ–å·¥ä½œæ¸…å•\"><a class=\"anchor\" href=\"#ä¼˜åŒ–å·¥ä½œæ¸…å•\">#</a> ä¼˜åŒ–å·¥ä½œæ¸…å•</h3>\n<p>å½“å°ä¼™ä¼´ä»¬å‡ºç°äº†é¡µé¢æ€§èƒ½é—®é¢˜æ—¶ï¼Œæˆ–è€…åœ¨è®¾è®¡æˆ‘ä»¬çš„åº”ç”¨ä¹‹å‰ï¼Œå°±å¯ä»¥å‚è€ƒå¦‚ä¸‹çš„æ¡ç›®è¿›è¡Œå¿«é€Ÿæ£€æŸ¥ã€‚</p>\n<ul>\n<li>é¡µé¢å†…å®¹\n<ul>\n<li>å‡å°‘ HTTP è¯·æ±‚æ•°</li>\n<li>å‡å°‘ DNS æŸ¥è¯¢</li>\n<li>é¿å…é‡å®šå‘</li>\n<li>ç¼“å­˜ Ajax è¯·æ±‚</li>\n<li>å»¶è¿ŸåŠ è½½</li>\n<li>é¢„å…ˆåŠ è½½</li>\n<li>å‡å°‘ DOM å…ƒç´ æ•°é‡</li>\n<li>åˆ’åˆ†å†…å®¹åˆ°ä¸åŒåŸŸå</li>\n<li>å°½é‡å‡å°‘ iframe ä½¿ç”¨</li>\n<li>é¿å… 404 é”™è¯¯</li>\n</ul>\n</li>\n<li>æœåŠ¡å™¨\n<ul>\n<li>ä½¿ç”¨ CDN</li>\n<li>æ·»åŠ  Expires æˆ– Cache-Control å“åº”å¤´</li>\n<li>å¯ç”¨ Gzip</li>\n<li>é…ç½® Etag</li>\n<li>å°½æ—©è¾“å‡ºç¼“å†²</li>\n<li>Ajax è¯·æ±‚ä½¿ç”¨ GET æ–¹æ³•</li>\n<li>é¿å…å›¾ç‰‡ src ä¸ºç©º</li>\n</ul>\n</li>\n<li>Cookie\n<ul>\n<li>å‡å°‘ Cookie å¤§å°</li>\n<li>é™æ€èµ„æºä½¿ç”¨æ—  Cookie åŸŸå</li>\n</ul>\n</li>\n<li>CSS\n<ul>\n<li>æŠŠæ ·å¼è¡¨æ”¾åœ¨  <code>&lt;head&gt;</code>  ä¸­</li>\n<li>ä¸è¦ä½¿ç”¨ CSS è¡¨è¾¾å¼</li>\n<li>ä½¿ç”¨  <code>link</code>  æ›¿ä»£  <code>@import</code></li>\n<li>ä¸è¦ä½¿ç”¨ filter</li>\n</ul>\n</li>\n<li>JavaScript\n<ul>\n<li>æŠŠè„šæœ¬æ”¾åœ¨é¡µé¢åº•éƒ¨</li>\n<li>ä½¿ç”¨å¤–éƒ¨ JavaScript å’Œ CSS</li>\n<li>å‹ç¼© JavaScript å’Œ CSS</li>\n<li>ç§»é™¤é‡å¤è„šæœ¬</li>\n<li>å‡å°‘ DOM æ“ä½œ</li>\n<li>ä½¿ç”¨é«˜æ•ˆçš„äº‹ä»¶å¤„ç†</li>\n</ul>\n</li>\n<li>å›¾ç‰‡\n<ul>\n<li>ä¼˜åŒ–å›¾ç‰‡</li>\n<li>ä¼˜åŒ– CSS Sprite</li>\n<li>ä¸è¦åœ¨ HTML ä¸­ç¼©æ”¾å›¾ç‰‡</li>\n<li>ä½¿ç”¨ä½“ç§¯å°ã€å¯ç¼“å­˜çš„ favicon.ico</li>\n</ul>\n</li>\n<li>ç§»åŠ¨ç«¯\n<ul>\n<li>ä¿æŒå•ä¸ªæ–‡ä»¶å°äº 25 KB</li>\n<li>æ‰“åŒ…å†…å®¹ä¸ºåˆ†æ®µï¼ˆmultipartï¼‰æ–‡æ¡£</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„\"><a class=\"anchor\" href=\"#ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„\">#</a> ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„</h3>\n<p>å‡è®¾æœ‰ä¸€ä¸ª <code>HTML</code>  é¡µé¢ï¼Œå®ƒåªå¼•å…¥äº†ä¸€ä¸ª <code>CSS</code>  å¤–éƒ¨æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width,initial-scale=1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>style.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Hello <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>web performance<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> students!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>awesome-photo.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>å®ƒçš„å…³é”®æ¸²æŸ“è·¯å¾„å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"./assets/63503acbly1fk56dzdbn9j20nr068dga.jpg\" alt=\"img\" /></p>\n<p>é¦–å…ˆæµè§ˆå™¨è¦å…ˆå¯¹æœåŠ¡å™¨å‘é€è¯·æ±‚è·å¾— <code>HTML</code>  æ–‡ä»¶ï¼Œå¾—åˆ° <code>HTML</code>  æ–‡ä»¶åå¼€å§‹æ„å»º <code>DOM</code>  æ ‘ï¼Œåœ¨é‡è§ <code>&lt;link&gt;</code>  æ ‡ç­¾æ—¶æµè§ˆå™¨éœ€è¦å‘æœåŠ¡å™¨å†æ¬¡å‘å‡ºè¯·æ±‚æ¥è·å¾— <code>CSS</code>  æ–‡ä»¶ï¼Œç„¶ååˆ™æ˜¯ç»§ç»­æ„å»º <code>DOM</code>  æ ‘å’Œ <code>CSSOM</code>  æ ‘ï¼Œæµè§ˆå™¨åˆå¹¶å‡ºæ¸²æŸ“æ ‘ï¼Œæ ¹æ®æ¸²æŸ“æ ‘è¿›è¡Œå¸ƒå±€è®¡ç®—ï¼Œæ‰§è¡Œç»˜åˆ¶æ“ä½œï¼Œé¡µé¢æ¸²æŸ“å®Œæˆã€‚</p>\n<p>æœ‰ä»¥ä¸‹å‡ ä¸ªç”¨äºæè¿°å…³é”®æ¸²æŸ“è·¯å¾„æ€§èƒ½çš„è¯æ±‡ï¼š</p>\n<ul>\n<li>å…³é”®èµ„æºï¼šå¯èƒ½é˜»å¡ç½‘é¡µé¦–æ¬¡æ¸²æŸ“çš„èµ„æºï¼ˆä¸Šå›¾ä¸­ä¸º 2 ä¸ªï¼Œ <code>HTML</code>  æ–‡ä»¶ä¸å¤–éƒ¨ <code>CSS</code>  æ–‡ä»¶ <code>style.css</code> ï¼‰ã€‚</li>\n<li>å…³é”®è·¯å¾„é•¿åº¦ï¼š è·å–å…³é”®èµ„æºæ‰€éœ€çš„å¾€è¿”æ¬¡æ•°æˆ–æ€»æ—¶é—´ï¼ˆä¸Šå›¾ä¸º 2 æ¬¡æˆ–ä»¥ä¸Šï¼Œä¸€æ¬¡è·å– <code>HTML</code>  æ–‡ä»¶ï¼Œä¸€æ¬¡è·å– <code>CSS</code>  æ–‡ä»¶ï¼Œè¿™ä¸ªæ¬¡æ•°åŸºäº <code>TCP</code>  åè®®çš„æœ€å¤§æ‹¥å¡çª—å£ï¼Œä¸€ä¸ªæ–‡ä»¶ä¸ä¸€å®šèƒ½åœ¨ä¸€æ¬¡è¿æ¥å†…ä¼ è¾“å®Œæ¯•ï¼‰ã€‚</li>\n<li>å…³é”®å­—èŠ‚ï¼šæ‰€æœ‰å…³é”®èµ„æºæ–‡ä»¶å¤§å°çš„æ€»å’Œï¼ˆä¸Šå›¾ä¸º <code>9KB</code> ï¼‰ã€‚</li>\n</ul>\n<p>æ¥ä¸‹æ¥ï¼Œæ¡ˆä¾‹ä»£ç çš„éœ€æ±‚å‘ç”Ÿäº†å˜åŒ–ï¼Œå®ƒæ–°å¢äº†ä¸€ä¸ª <code>JavaScript</code>  æ–‡ä»¶ã€‚</p>\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;\n    &lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot;&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p&gt;Hello &lt;span&gt;web performance&lt;/span&gt; students!&lt;/p&gt;\n    &lt;div&gt;&lt;img src=&quot;awesome-photo.jpg&quot;&gt;&lt;/div&gt;\n    &lt;script src=&quot;app.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><a href=\"http://wx1.sinaimg.cn/large/63503acbly1fk56e0i20xj20or06ygmi.jpg\"><img data-src=\"http://wx1.sinaimg.cn/large/63503acbly1fk56e0i20xj20or06ygmi.jpg\" alt=\"img\" /></a></p>\n<p><code>JavaScript</code>  æ–‡ä»¶é˜»å¡äº† <code>DOM</code>  æ ‘çš„æ„å»ºï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ <code>JavaScript</code>  è„šæœ¬æ—¶è¿˜éœ€è¦å…ˆç­‰å¾…æ„å»º <code>CSSOM</code>  æ ‘ï¼Œä¸Šå›¾çš„å…³é”®æ¸²æŸ“è·¯å¾„ç‰¹æ€§å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å…³é”®èµ„æºï¼š 3ï¼ˆ <code>HTML</code> ã€ <code>style.css</code> ã€ <code>app.js</code> ï¼‰</li>\n<li>å…³é”®è·¯å¾„é•¿åº¦ï¼š 2 æˆ–ä»¥ä¸Šï¼ˆæµè§ˆå™¨ä¼šåœ¨ä¸€æ¬¡è¿æ¥ä¸­ä¸€èµ·ä¸‹è½½ <code>style.css</code>  å’Œ <code>app.js</code> ï¼‰</li>\n<li>å…³é”®å­—èŠ‚ï¼š11KB</li>\n</ul>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬è¦ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„ï¼Œé¦–å…ˆå°† <code>&lt;script&gt;</code>  æ ‡ç­¾æ·»åŠ å¼‚æ­¥å±æ€§ <code>async</code> ï¼Œè¿™æ ·æµè§ˆå™¨çš„ <code>HTML</code>  è§£æå™¨å°±ä¸ä¼šé˜»å¡è¿™ä¸ª <code>JavaScript</code>  æ–‡ä»¶äº†ã€‚</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width,initial-scale=1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>style.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Hello <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>web performance<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> students!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>awesome-photo.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">async</span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><img data-src=\"./assets/63503acbly1fk56e0sokqj20oj074ab1.jpg\" alt=\"img\" /></p>\n<ul>\n<li>å…³é”®èµ„æºï¼š2ï¼ˆ <code>app.js</code>  ä¸ºå¼‚æ­¥åŠ è½½ï¼Œä¸ä¼šæˆä¸ºé˜»å¡æ¸²æŸ“çš„èµ„æºï¼‰</li>\n<li>å…³é”®è·¯å¾„é•¿åº¦ï¼š 2 æˆ–ä»¥ä¸Š</li>\n<li>å…³é”®å­—èŠ‚ï¼š 9KBï¼ˆ <code>app.js</code>  ä¸å†æ˜¯å…³é”®èµ„æºï¼Œæ‰€ä»¥æ²¡æœ‰ç®—ä¸Šå®ƒçš„å¤§å°ï¼‰</li>\n</ul>\n<p>æ¥ä¸‹æ¥å¯¹ <code>CSS</code>  è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚æ·»åŠ ä¸Šåª’ä½“æŸ¥è¯¢ã€‚</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width,initial-scale=1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>style.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>print<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Hello <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>web performance<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> students!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>awesome-photo.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">async</span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><img data-src=\"./assets/63503acbly1fk56e15x4jj20ny082mxu.jpg\" alt=\"img\" /></p>\n<ul>\n<li>å…³é”®èµ„æºï¼š1ï¼ˆ <code>app.js</code>  ä¸ºå¼‚æ­¥åŠ è½½ï¼Œ <code>style.css</code>  åªæœ‰åœ¨æ‰“å°æ—¶æ‰ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥åªå‰©ä¸‹ <code>HTML</code>  ä¸€ä¸ªå…³é”®èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´å½“ <code>DOM</code>  æ ‘æ„å»ºå®Œæ¯•ï¼Œæµè§ˆå™¨å°±ä¼šå¼€å§‹è¿›è¡Œæ¸²æŸ“ï¼‰</li>\n<li>å…³é”®è·¯å¾„é•¿åº¦ï¼š1 æˆ–ä»¥ä¸Š</li>\n<li>å…³é”®å­—èŠ‚ï¼š5KB</li>\n</ul>\n<p><strong>ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„å°±æ˜¯åœ¨å¯¹å…³é”®èµ„æºã€å…³é”®è·¯å¾„é•¿åº¦å’Œå…³é”®å­—èŠ‚è¿›è¡Œä¼˜åŒ–</strong>ã€‚å…³é”®èµ„æºè¶Šå°‘ï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“å‰çš„å‡†å¤‡å·¥ä½œå°±è¶Šå°‘ï¼›åŒæ ·ï¼Œå…³é”®è·¯å¾„é•¿åº¦å’Œå…³é”®å­—èŠ‚å…³ç³»åˆ°æµè§ˆå™¨ä¸‹è½½èµ„æºçš„æ•ˆç‡ï¼Œå®ƒä»¬è¶Šå°‘ï¼Œæµè§ˆå™¨ä¸‹è½½èµ„æºçš„é€Ÿåº¦å°±è¶Šå¿«ã€‚</p>\n<h3 id=\"å…¶ä»–jsåœ¨çº¿æµ‹è¯•ç½‘ç«™\"><a class=\"anchor\" href=\"#å…¶ä»–jsåœ¨çº¿æµ‹è¯•ç½‘ç«™\">#</a> å…¶ä»– JS åœ¨çº¿æµ‹è¯•ç½‘ç«™\u0010</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc2JlbmNoLm1lLw==\">jsbench.me</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2pzYmVuLmNoLw==\">jsben.ch</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9tZWFzdXJldGhhdC5uZXQv\">measurethat.net</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93ZWJwYWdldGVzdC5vcmcv\">webpagetest.org</span></li>\n</ul>\n<h3 id=\"å‚è€ƒèµ„æ–™\"><a class=\"anchor\" href=\"#å‚è€ƒèµ„æ–™\">#</a> å‚è€ƒèµ„æ–™</h3>\n<ol>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaHRtbDVyb2Nrcy5jb20vemgvdHV0b3JpYWxzL2ludGVybmFscy9ob3dicm93c2Vyc3dvcmsv\">æµè§ˆå™¨çš„å·¥ä½œåŸç†ï¼šæ–°å¼ç½‘ç»œæµè§ˆå™¨å¹•åæ­ç§˜</span> <strong>å¼ºçƒˆæ¨è</strong></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL2Z1bmRhbWVudGFscy9wZXJmb3JtYW5jZS9jcml0aWNhbC1yZW5kZXJpbmctcGF0aC9yZW5kZXItdHJlZS1jb25zdHJ1Y3Rpb24=\">æ¸²æŸ“æ ‘æ„å»ºã€å¸ƒå±€åŠç»˜åˆ¶</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9tb3ouY29tL2Jsb2cvaW1wcm92aW5nLXNlYXJjaC1yYW5rLWJ5LW9wdGltaXppbmcteW91ci10aW1lLXRvLWZpcnN0LWJ5dGU=\">ä¼˜åŒ–ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3F6Y3N1L2FydGljbGUvZGV0YWlscy83Mjg2MTg5MQ==\">TCP çš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ï¼ˆè¯¦è§£ + åŠ¨å›¾ï¼‰</span>æ¨è</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly90ZWNoLm1laXR1YW4uY29tLzIwMTYvMTIvMDIvcGVyZm9ybWFuY2UtdHVubmluZy5odG1s\">å¸¸è§æ€§èƒ½ä¼˜åŒ–ç­–ç•¥çš„æ€»ç»“</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9tb3ouY29tL2xlYXJuL3Nlby9wYWdlLXNwZWVk\">Page Speed</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzAxMWUwYzUxODgyNTJlYTY2YWZkZmEjaGVhZGluZy02OA==\">web æ€§èƒ½ä¼˜åŒ–ç¯‡</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTk2NmJkMTZmYjlhMDYzNTE3MmE1MGE=\">2018 å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å•</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzQ2Y2JhZWU1MWQ0NTNmNDU2MTJhMmM=\">ï¼ˆè¯‘ï¼‰2019 å¹´å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å• â€” ä¸Šç¯‡</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzQ3MWVhZmYyNjVkYTYxNmQ1NDdjOGM=\">ï¼ˆè¯‘ï¼‰2019 å¹´å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å• â€” ä¸­ç¯‡</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzQ3M2NkYWU1MWQ0NTUxOGQ0NzAxZmY=\">ï¼ˆè¯‘ï¼‰2019 å¹´å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å• â€” ä¸‹ç¯‡</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vc3BlZWQvZG9jcy9pbnNpZ2h0cy9ydWxlcw==\">PageSpeed Insights è§„åˆ™</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zeWx2YW5hc3N1bi5naXRodWIuaW8vMjAxNy8xMC8wMy8yMDE3LTEwLTAzLUJyb3dzZXJDcml0aWNhbFJlbmRlcmluZ1BhdGgv\">æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ä¸æ€§èƒ½ä¼˜åŒ–</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8yNjhjN2YzZGQ3YTY=\">å¦‚ä½•æå‡ CSS é€‰æ‹©å™¨æ€§èƒ½</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaHRtbC5jbi9hcmNoaXZlcy85NTE3\">å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼š2018 å¹´ JavaScript å¼€é”€åŠä¼˜åŒ–å·¥å…·å’Œæ–¹æ³•</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTY1NDdkMGYyNjVkYTNlMjgzYTFkZjc=\">ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ° JS å•çº¿ç¨‹ï¼ŒJS è¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†</span>æ¨è</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWFkODZjMTZmMjY1ZGE1MDVhNzdkY2E0\">å½»åº•ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶</span> æ¨è 2</li>\n</ol>\n",
            "tags": [
                "å‰ç«¯æ€§èƒ½ä¼˜åŒ–",
                "æ€§èƒ½ä¼˜åŒ–"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/03/02/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/",
            "url": "https://dmqweb.cn/2024/03/02/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/",
            "title": "è‡ªåŠ¨åŒ–æµ‹è¯•",
            "date_published": "2024-03-02T02:04:04.000Z",
            "content_html": "<h1 id=\"5-3-è‡ªåŠ¨åŒ–æµ‹è¯•\"><a class=\"anchor\" href=\"#5-3-è‡ªåŠ¨åŒ–æµ‹è¯•\">#</a> 5-3 è‡ªåŠ¨åŒ–æµ‹è¯•</h1>\n<h2 id=\"ä»‹ç»\"><a class=\"anchor\" href=\"#ä»‹ç»\">#</a> ä»‹ç»</h2>\n<p>åœ¨å‰ç«¯ç•Œï¼Œæµè§ˆå™¨å…¼å®¹æ€§æ˜¯è®©å·¥ç¨‹å¸ˆä»¬å¤´ç–¼çš„é—®é¢˜ï¼Œå¯¹äºç»éªŒä¸°å¯Œçš„äººæ¥è¯´ï¼Œå¾ˆæ¸…æ¥šæµè§ˆå™¨æœ‰å“ªäº›å‘ï¼Œä½†æ˜¯å¯¹äºå¤§éƒ¨åˆ†ç¨‹åºå‘˜ï¼Œæœ€å¯æ€•çš„æ˜¯ä»£ç æ˜æ˜åœ¨è¿™ä¸ªæµè§ˆå™¨è¿è¡Œå¾—å¾ˆå¥½ï¼Œä½†æ˜¯åˆ°äº†å¦ä¸€ä¸ªæµè§ˆå™¨ä¸­å°±ä¸èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚å¯¹äºè¿™éƒ¨åˆ†çš„ç¨‹åºå‘˜ï¼Œä¿éšœä»£ç èƒ½æ­£å¸¸è¿è¡Œçš„æ–¹æ³•ä¾¿æ˜¯èƒ½å°½æ—©å‘ç°é—®é¢˜ï¼Œç„¶åå°†å…¶è§£å†³ã€‚</p>\n<p><strong>å‰ç«¯é¡¹ç›®å¦‚ä½•åšæµ‹è¯•ï¼Ÿ</strong></p>\n<ul>\n<li>æµ‹è¯•åŒå­¦ï¼šåŠŸèƒ½æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•ï¼Œæµ‹è¯•ç”¨ä¾‹</li>\n<li>å‰ç«¯åŒå­¦ï¼šå•å…ƒæµ‹è¯•ï¼Œå¸¸ç”¨äºç»„ä»¶åº“ã€AP ç­‰ (Jestã€Mocha), ä¸Šçº¿é¡¹ç›®å¦‚ä½•åšæµ‹è¯•ï¼Ÿ</li>\n</ul>\n<p><strong>ä¸Šçº¿é¡¹ç›®å¦‚ä½•è¿›è¡Œæµ‹è¯•</strong></p>\n<ul>\n<li>åˆ©ç”¨å‰ç«¯ç›‘æ§ï¼Œè¿›è¡Œç›‘æ§é¡¹ç›®ç¨³å®šæ€§å’Œæ€§èƒ½ï¼Œå¹¶ä¸ŠæŠ¥å‰ç«¯æ—¥å¿—</li>\n<li>ç¨³å®šæ€§ï¼šå¦‚ ljserrorã€ç™½å±æ£€æµ‹ç­‰</li>\n<li>æ€§èƒ½ï¼šå¦‚ç§’å¼€ç‡ã€é¦–å±æ¸²æŸ“æ—¶é•¿ã€æ¥è¯·æ±‚æ—¶é•¿ç­‰</li>\n<li>å‰ç«¯æ—¥å¿—ï¼šå¦‚ console.logã€API è¯·æ±‚è®°å½•ç­‰</li>\n</ul>\n<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ</strong></p>\n<p>é¡¹ç›®ç»è¿‡ä¸æ–­çš„å¼€å‘ï¼Œæœ€ç»ˆè‚¯å®šä¼šè¶‹äºç¨³å®šï¼Œåœ¨<strong>é€‚å½“çš„æ—¶æœºä¸‹</strong>å¼•å…¥è‡ªåŠ¨åŒ–æµ‹è¯•èƒ½åŠæ—©å‘ç°é—®é¢˜ï¼Œ<strong>ä¿è¯äº§å“çš„è´¨é‡</strong>ã€‚</p>\n<p>æµ‹è¯•ä½œä¸ºå®Œæ•´çš„å¼€å‘æµç¨‹ä¸­æœ€åçš„ä¸€ç¯ï¼Œæ˜¯ä¿è¯äº§å“è´¨é‡é‡è¦çš„ä¸€ç¯ã€‚è€Œå‰ç«¯æµ‹è¯•ä¸€èˆ¬åœ¨äº§å“å¼€å‘æµç¨‹ä¸­å±äºååçš„ç¯èŠ‚ï¼Œåœ¨æ•´ä¸ªå¼€å‘æ¶æ„ä¸­å±äºè¾ƒé«˜å±‚æ¬¡ï¼Œå‰ç«¯æµ‹è¯•æ›´åŠ åå‘äº GUI çš„ç‰¹æ€§ï¼Œå› æ­¤å‰ç«¯çš„æµ‹è¯•éš¾åº¦å¾ˆå¤§ã€‚</p>\n<p>æµ‹è¯•çš„ç›®çš„ï¼š</p>\n<ul>\n<li>æœ‰åˆ©äºå†™å‡ºé«˜è´¨é‡çš„ä»£ç ï¼Œå°½æ—©å‘ç°é—®é¢˜</li>\n<li>æœ‰åˆ©äºä»£ç çš„æ‰©å±•</li>\n<li>æœ‰åˆ©äºä»£ç çš„ç»´æŠ¤</li>\n</ul>\n<p><strong>æœ¬è¯¾ç¨‹çš„å­¦ä¹ è·¯å¾„ï¼š</strong></p>\n<ul>\n<li>å­¦ä¹ åŸºç¡€çš„æ¦‚å¿µï¼Œæ¸…æ™°æµ‹è¯•ä¸åŒçš„åº”ç”¨åœºæ™¯</li>\n<li>å­¦ä¹ ä¸åŒçš„å‰ç«¯æµ‹è¯•å·¥å…·ï¼Œäº†è§£å¦‚ä½•è¿›è¡Œé€‰æ‹©</li>\n<li>åœ¨é¡¹ç›®ä¸­è¿›è¡Œå®è·µ</li>\n</ul>\n<p><strong>æœ¬è¯¾ç¨‹çš„ä¸»è¦å†…å®¹ï¼š</strong></p>\n<ul>\n<li>ä»‹ç»æµ‹è¯•æ¡†æ¶çš„åˆ†ç±»</li>\n<li>å•å…ƒæµ‹è¯•å·¥å…·ä»‹ç»ï¼šMochaï¼ŒJestï¼ŒAVAï¼ŒKarma</li>\n<li>E2E æµ‹è¯•å·¥å…·ä»‹ç»ï¼šNightmare</li>\n</ul>\n<p><strong>æœ¬è¯¾ç¨‹çš„å­¦ä¹ å‡†å¤‡ï¼š</strong></p>\n<ul>\n<li>IDE vscodeï¼Œnode  LTS</li>\n<li>åŒ…ç®¡ç†å·¥å…·ï¼šyarn, cnpm</li>\n</ul>\n<h2 id=\"å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•\"><a class=\"anchor\" href=\"#å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•\">#</a> å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•</h2>\n<p>æµ‹è¯•æ˜¯ä¸€ä¸ªåºå¤§çš„ä¸»é¢˜ï¼ŒåŒ…æ‹¬å„ç§åˆ†ç±»çš„æµ‹è¯•ï¼Œè¯¸å¦‚é»‘ç›’æµ‹è¯• / ç™½ç›’æµ‹è¯•ã€å•å…ƒæµ‹è¯• / é›†æˆæµ‹è¯• / ç«¯åˆ°ç«¯æµ‹è¯•ç­‰ã€‚é€šå¸¸ç¨‹åºå‘˜åœ¨æµ‹è¯•è‡ªå·±çš„ä»£ç çš„æ—¶å€™ç”¨å¾—æœ€å¤šçš„ä¾¿æ˜¯å•å…ƒæµ‹è¯•ï¼Œä½†æ˜¯å› ä¸ºæµ‹è¯•ä¹Ÿæ˜¯éœ€è¦ä»£ä»·ï¼Œå¾ˆå¤šäººæ˜¯ä¸å–œæ¬¢å†™æµ‹è¯•çš„ï¼Œç”šè‡³æ˜¯ä¸€ç‚¹éƒ½ä¸å†™ã€‚</p>\n<p>é‚£ä¹ˆæ˜¯ä»€ä¹ˆåŸå› è®©å¤§å®¶ä¸æ„¿æ„å†™å‘¢ï¼Ÿ</p>\n<ol>\n<li>ä¸ç†Ÿæ‚‰</li>\n<li>æµªè´¹æ—¶é—´</li>\n<li>çŸ¥è¯†ä¸æˆä½“ç³»</li>\n<li>å›¢é˜Ÿæ°›å›´</li>\n<li>ç¼ºå°‘å®è·µ</li>\n</ol>\n<p>æˆ‘ä»¬è¦ä»åŸºç¡€çš„ä¸œè¥¿å­¦èµ·ï¼Œæ‰“æ¶ˆå¯¹æµ‹è¯•çš„ææƒ§ã€‚</p>\n<h3 id=\"æµ‹è¯•çš„åˆ†ç±»\"><a class=\"anchor\" href=\"#æµ‹è¯•çš„åˆ†ç±»\">#</a> æµ‹è¯•çš„åˆ†ç±»</h3>\n<p>åœ¨å¤šæµè§ˆå™¨çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæˆ‘ä»¬å¤šåŠæ˜¯è¿›è¡Œç«¯åˆ°ç«¯çš„æµ‹è¯•å·¥ä½œï¼Œä¸€å°éƒ¨åˆ†æ˜¯å¤§ç²’åº¦çš„å•å…ƒæµ‹è¯•ã€‚ç«¯åˆ°ç«¯æµ‹è¯•æµ‹è¯•æ¨¡æ‹Ÿç”¨æˆ·çš„è¡Œä¸ºã€‚åœ¨ Web åº”ç”¨ç¨‹åºä¸­ï¼Œä»–ä»¬ä¼šå¯åŠ¨æœåŠ¡å™¨ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œæ¨¡æ‹Ÿç”¨æˆ·çš„è¡Œä¸ºè¿›è¡Œç‚¹å‡»ã€è¾“å…¥ã€æäº¤ç­‰åŠ¨ä½œï¼Œæ–­è¨€æµè§ˆå™¨ä¸­å‘ç”Ÿäº†ç‰¹å®šçš„äº‹æƒ…æˆ–è€…æ˜¯å¾—åˆ°äº†æœŸå¾…çš„ç»“æœï¼Œä»è€Œè®©æˆ‘ä»¬ç›¸ä¿¡åŠŸèƒ½å¯ä»¥æ­£å¸¸çš„è¿è¡Œã€‚</p>\n<p>è€Œå•å…ƒæµ‹è¯•æ ¹æ®ä»£ç å•å…ƒçš„å…¬å…± API è¿è¡Œå®ƒä»¬ã€‚è¿™äº›æµ‹è¯•éœ€è¦åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œä½¿ç”¨ç‰¹å®šçš„è¾“å…¥è°ƒç”¨å®ƒçš„æ–¹æ³•ï¼Œæ–­è¨€è¢«è°ƒç”¨çš„æ–¹æ³•è¾¾åˆ°äº†é¢„æœŸçš„æ•ˆæœã€‚åœ¨ä¸‹æ–‡ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°è¿™ä¸¤ç§æµ‹è¯•çš„å®è·µï¼Œå½“ç„¶æœ‰æ—¶å€™åŒºåˆ†åº¦å¹¶ä¸å¤§ï¼Œå¯èƒ½æ— æ³•æ˜æ˜¾åœ°åŒºåˆ†å“ªäº›æ˜¯ç«¯å¯¹ç«¯æµ‹è¯•å“ªäº›æ˜¯å•å…ƒæµ‹è¯•ï¼Œæœ‰æ—¶å€™ä»–ä»¬æ˜¯æ··åˆèµ·æ¥çš„ï¼Œä¸è¿‡åªè¦è®°ä½æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¿è¯åŠŸèƒ½å¯ä»¥æ­£å¸¸è¿è¡Œæ•‘è¶³å¤Ÿäº†ã€‚</p>\n<p>æŒ‰ç…§è½¯ä»¶å·¥ç¨‹è‡ªåº•è€Œä¸Šçš„æ¦‚å¿µï¼Œå‰ç«¯æµ‹è¯•ä¸€èˆ¬åˆ†ä¸ºå•å…ƒæµ‹è¯•ï¼ˆUnit Testing ï¼‰ã€é›†æˆæµ‹è¯•ï¼ˆIntegration Testingï¼‰å’Œç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2E Testingï¼‰ã€‚ä»ä¸‹é¢çš„å›¾å¯ä»¥çœ‹å‡ºï¼Œä»åº•å‘ä¸Šæµ‹è¯•çš„å¤æ‚åº¦å°†ä¸æ–­æé«˜ï¼Œå¦ä¸€æ–¹é¢æµ‹è¯•çš„æ”¶ç›Šåè€Œä¸æ–­é™ä½çš„ã€‚</p>\n<p><img data-src=\"assets/16415de723a8d411.png\" alt=\"img\" /></p>\n<blockquote>\n<p>å…³äºè½¯ä»¶æµ‹è¯•åˆ†ç±»ï¼Œå¯è§<a href=\"#%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%9A%84%E5%88%86%E7%B1%BB\">è½¯ä»¶æµ‹è¯•çš„åˆ†ç±»</a></p>\n</blockquote>\n<h3 id=\"æµ‹è¯•å·¥å…·å¯¹æ¯”\"><a class=\"anchor\" href=\"#æµ‹è¯•å·¥å…·å¯¹æ¯”\">#</a> æµ‹è¯•å·¥å…·å¯¹æ¯”</h3>\n<p>åœ¨è¿›è¡Œé¡¹ç›®å®è·µå‰ï¼Œå¾ˆé‡è¦çš„ä¸€é¡¹å·¥ä½œæ˜¯é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆã€‚å¥½æ¯”åœ¨å‰ç«¯å¼€å‘æ—¶åº”è¯¥é€‰æ‹© Reactï¼ŒVue è¿˜æ˜¯ Angular ä½œä¸ºæ¡†æ¶ä¸€æ ·ï¼Œå‰ç«¯çš„æµ‹è¯•å·¥ä½œä¹Ÿéœ€è¦é€‰æ‹©ä¸€å¥—æŠ€æœ¯æ ˆã€‚å¾ˆå¤šæ—¶å€™å¤§å®¶åœ¨åˆ¶å®šæŠ€æœ¯æ ˆæ—¶å®¹æ˜“èµ°åï¼Œåœ¨é€‰æ‹©æŠ€æœ¯æ¡†æ¶æ—¶ä¸æ˜¯é€‰æ‹©æœ€åˆé€‚çš„æ¡†æ¶ï¼Œè€Œæ˜¯é€‰æ‹©æœ€çƒ­é—¨çš„æ¡†æ¶ã€‚å½“ç„¶ä¸€å®šç¨‹åº¦ä¸Šçƒ­é—¨çš„æ¡†æ¶èƒ½ååº”å…¶å—æ¬¢è¿ç¨‹åº¦ï¼Œå¯èƒ½æ˜¯å› ä¸ºå…¶å‡ºä¼—çš„ä¼˜ç‚¹ï¼Œå¦‚è¾ƒé«˜çš„å¼€å‘æ•ˆç‡ã€é«˜æ•ˆçš„æ¸²æŸ“ç‰¹æ€§æˆ–è€…æ˜¯æ´»è·ƒçš„ç¤¾åŒºã€‚åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå¾ˆå®¹æ˜“æœ‰è¿™æ ·çš„æ„Ÿå—ï¼Œå°±æ˜¯åªè¦åŠä¸ªæœˆæ²¡æœ‰å…³æ³¨ä¸šç•Œçš„æœ€æ–°åŠ¨æ€ï¼Œå°±æ„Ÿè§‰æè‹¥éš”ä¸–ï¼Œæ–°çš„è§£å†³æ–¹æ¡ˆå±‚å‡ºä¸ç©·ï¼Œè®©äººå–˜ä¸è¿‡æ°”ã€‚</p>\n<p>ç»è¿‡å‡ å¹´çš„å‰ç«¯æ´—ç¤¼ä¹‹åï¼Œå°±å·²ç»è¿‡äº†æ…Œä¹±çš„å¹´çºªï¼Œå†ä¹Ÿä¸ä¼šç›²ç›®åœ°è¿½å¯»æ–°æŠ€æœ¯ï¼Œè€Œè½¬å‘å…³æ³¨æŠ€æœ¯èƒŒåè§£å†³çš„ç—›ç‚¹ï¼ŒåŸç†ç­‰ã€‚</p>\n<p><img data-src=\"assets/v2-af09ebe8167f63a49ea49287fe04526f_hd-20190706122102737.jpg\" alt=\"img\" /></p>\n<h4 id=\"å¦‚ä½•é€‰æ‹©æµ‹è¯•æ¡†æ¶\"><a class=\"anchor\" href=\"#å¦‚ä½•é€‰æ‹©æµ‹è¯•æ¡†æ¶\">#</a> å¦‚ä½•é€‰æ‹©æµ‹è¯•æ¡†æ¶</h4>\n<p>æµ‹è¯•æ¡†æ¶åŸºæœ¬ä¸Šéƒ½åšäº†ä¸€ä»¶äº‹å„¿ï¼š</p>\n<ul>\n<li>æè¿°ä½ è¦æµ‹è¯•çš„ä¸œè¥¿</li>\n<li>å¯¹å…¶è¿›è¡Œæµ‹è¯•</li>\n<li>åˆ¤æ–­æ˜¯å¦ç¬¦åˆé¢„æœŸ</li>\n</ul>\n<p>é€‰æ‹©æ¡†æ¶ä¼šè€ƒè™‘ä¸‹é¢çš„ç‚¹ï¼š</p>\n<ul>\n<li>\n<p>æµ‹è¯•æ¡†æ¶æ˜¯å¦æœ‰ç®€æ˜çš„è¯­æ³•ä¸æ–‡æ¡£ã€‚</p>\n<p>Mochaã€Jasmineã€Jestã€AVAã€Karmaã€Nightmare</p>\n</li>\n<li>\n<p>æ–­è¨€ (Assertions)ï¼šç”¨äºåˆ¤æ–­ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚æœ‰äº›æ¡†æ¶éœ€è¦å•ç‹¬çš„æ–­è¨€åº“ã€‚</p>\n<p>Should.jsã€chaiã€expect.js ç­‰ç­‰ï¼Œæ–­è¨€åº“æä¾›äº†å¾ˆå¤šè¯­ä¹‰åŒ–çš„æ–¹æ³•æ¥å¯¹å€¼åšå„ç§å„æ ·çš„åˆ¤æ–­ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä¸ç”¨æ–­è¨€åº“ï¼ŒNode.js ä¸­ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨åŸç”Ÿ assert åº“ã€‚</p>\n</li>\n<li>\n<p>é€‚åˆ TDD / BDDï¼šæ˜¯å¦é€‚åˆ æµ‹è¯•é©±åŠ¨å‹ / è¡Œä¸ºé©±åŠ¨å‹ çš„æµ‹è¯•é£æ ¼ã€‚</p>\n<blockquote>\n<p>BDD (Bebavior Driven Developementï¼Œè¡Œä¸ºé©±åŠ¨æµ‹è¯•) å’Œ TDD (Testing Driven Developementï¼Œæµ‹è¯•é©±åŠ¨å¼€å‘)</p>\n</blockquote>\n<p>BDD å’Œ TDD å‡æœ‰å„è‡ªçš„é€‚ç”¨åœºæ™¯ï¼ŒBDD ä¸€èˆ¬æ›´åå‘äºç³»ç»ŸåŠŸèƒ½å’Œä¸šåŠ¡é€»è¾‘çš„è‡ªåŠ¨åŒ–æµ‹è¯•è®¾è®¡ï¼Œè€Œ TDD åœ¨å¿«é€Ÿå¼€å‘å¹¶æµ‹è¯•åŠŸèƒ½æ¨¡å—çš„è¿‡ç¨‹ä¸­åˆ™æ›´åŠ é«˜æ•ˆï¼Œä»¥å¿«é€Ÿå®Œæˆå¼€å‘ä¸ºç›®çš„ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹ BDD å’Œ TDD å…·ä½“çš„ç‰¹ç‚¹ï¼š</p>\n<p>BDD çš„ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>ä»ä¸šåŠ¡é€»è¾‘çš„è§’åº¦å®šä¹‰å…·ä½“çš„è¾“å…¥ä¸é¢„æœŸè¾“å‡ºï¼Œä»¥åŠå¯è¡¡é‡çš„ç›®æ ‡ï¼›</li>\n<li>å°½å¯èƒ½è¦†ç›–æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹æƒ…å†µï¼›</li>\n<li>æè¿°ä¸€ç³»åˆ—å¯æ‰§è¡Œçš„è¡Œä¸ºï¼Œæ ¹æ®ä¸šåŠ¡çš„åˆ†ææ¥å®šä¹‰é¢„æœŸè¾“å‡ºã€‚ä¾‹å¦‚ï¼Œexpect, should, assertï¼›</li>\n<li>è®¾å®šå…³é”®çš„æµ‹è¯•é€šè¿‡èŠ‚ç‚¹è¾“å‡ºæç¤ºï¼Œä¾¿äºæµ‹è¯•äººå‘˜ç†è§£ï¼›</li>\n<li>æœ€å¤§ç¨‹åº¦çš„äº¤ä»˜å‡ºç¬¦åˆç”¨æˆ·æœŸæœ›çš„äº§å“ï¼Œé¿å…è¾“å‡ºä¸ä¸€è‡´å¸¦æ¥çš„é—®é¢˜ã€‚</li>\n</ul>\n<p>TDD çš„ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>éœ€æ±‚åˆ†æï¼Œå¿«é€Ÿç¼–å†™å¯¹åº”çš„è¾“å…¥è¾“å‡ºæµ‹è¯•è„šæœ¬ï¼›</li>\n<li><strong>ä»…åœ¨è‡ªåŠ¨æµ‹è¯•å¤±è´¥æ—¶æ‰ç¼–å†™æ–°ä»£ç </strong>ã€‚</li>\n<li>é‡æ„å»é™¤ä¸å¿…è¦çš„ä¾èµ–å…³ç³»ï¼Œç„¶åé‡å¤æµ‹è¯•ï¼Œæœ€ç»ˆè®©ç¨‹åºç¬¦åˆæ‰€æœ‰è¦æ±‚ã€‚</li>\n</ul>\n</li>\n<li>\n<p>å¼‚æ­¥æµ‹è¯•ï¼šæœ‰äº›æ¡†æ¶å¯¹å¼‚æ­¥æµ‹è¯•æ”¯æŒè‰¯å¥½ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨çš„è¯­è¨€ï¼šå¤§éƒ¨åˆ† js æµ‹è¯•æ¡†æ¶ä½¿ç”¨ jsã€‚</p>\n</li>\n<li>\n<p>ç”¨äºç‰¹å®šç›®çš„ï¼šæ¯ä¸ªæ¡†æ¶å¯èƒ½ä¼šæ“…é•¿å¤„ç†ä¸åŒçš„é—®é¢˜ã€‚</p>\n<p>æ˜¯è¦æµ‹è¯•å•ä¸ªåŠŸèƒ½ã€å•ä¸ªç»„ä»¶ã€è¿˜æ˜¯é›†æˆåŒ–æµ‹è¯•ï¼Ÿ</p>\n<p>æ˜¯è¦æµ‹è¯• GUI é€»è¾‘ã€äº¤äº’ï¼Ÿ</p>\n<p>æ˜¯è¦æµ‹è¯•éåŠŸèƒ½æ€§æŒ‡æ ‡ï¼Ÿå…¼å®¹æ€§ï¼Ÿ</p>\n</li>\n<li>\n<p>ç¤¾åŒºæ˜¯å¦æ´»è·ƒã€‚</p>\n</li>\n</ul>\n<h4 id=\"æµ‹è¯•å·¥å…·çš„ç±»å‹\"><a class=\"anchor\" href=\"#æµ‹è¯•å·¥å…·çš„ç±»å‹\">#</a> æµ‹è¯•å·¥å…·çš„ç±»å‹</h4>\n<p>æµ‹è¯•å·¥å…·å¯åˆ†ä¸ºä»¥ä¸‹åŠŸèƒ½ã€‚æœ‰äº›åªä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§åŠŸèƒ½ï¼Œæœ‰äº›åŠŸèƒ½ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§ç»„åˆã€‚</p>\n<p>ä¸ºäº†å®ç°æœ€çµæ´»çš„é›†åˆåŠŸèƒ½ï¼Œé€šå¸¸ä½¿ç”¨å¤šç§å·¥å…·çš„ç»„åˆã€‚</p>\n<ul>\n<li>\n<p>æä¾› UI ç•Œé¢æˆ–è€… CLI å·¥å…·ï¼šï¼ˆ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rYXJtYS1ydW5uZXIuZ2l0aHViLmlvLw==\">Karma</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL2phc21pbmUuZ2l0aHViLmlvLw==\">Jasmine</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vamVzdC8=\">Jest</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0RldkV4cHJlc3MvdGVzdGNhZmU=\">TestCafe</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY3lwcmVzcy5pby8=\">Cypress</span>ï¼‰</p>\n<p><strong>CLI å·¥å…·</strong>ä¼šç»™å‡ºä¸€ç³»åˆ—æµ‹è¯•ï¼Œä»¥åŠè¿è¡Œè¿™äº›æµ‹è¯•æ‰€éœ€çš„å„ç§é…ç½®å’Œè„šæ‰‹æ¶ï¼ˆè¿è¡Œä»€ä¹ˆæµè§ˆå™¨ï¼Œä½¿ç”¨ä»€ä¹ˆ babel æ’ä»¶ï¼Œå¦‚ä½•æ ¼å¼åŒ–è¾“å‡ºç­‰ï¼‰</p>\n</li>\n<li>\n<p>æä¾›æµ‹è¯•æ¡†æ¶ï¼ˆå½¢æˆæ–‡ä»¶ç›®å½•ï¼‰ï¼š(<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tb2NoYWpzLm9yZy8=\">Mocha</span>, <span class=\"exturl\" data-url=\"aHR0cDovL2phc21pbmUuZ2l0aHViLmlvLw==\">Jasmine</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vamVzdC8=\">Jest</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2N1Y3VtYmVyL2N1Y3VtYmVyLWpz\">Cucumber</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0RldkV4cHJlc3MvdGVzdGNhZmU=\">TestCafe</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY3lwcmVzcy5pby8=\">Cypress</span>)</p>\n</li>\n<li>\n<p>æä¾›æ–­è¨€ï¼šï¼ˆ<span class=\"exturl\" data-url=\"aHR0cDovL2NoYWlqcy5jb20v\">Chai</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL2phc21pbmUuZ2l0aHViLmlvLw==\">Jasmine</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vamVzdC8=\">Jest</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL3VuZXhwZWN0ZWQuanMub3JnLw==\">Unexpected</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0RldkV4cHJlc3MvdGVzdGNhZmU=\">TestCafe</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY3lwcmVzcy5pby8=\">Cypress</span>ï¼‰</p>\n<p><strong>æ–­è¨€å‡½æ•°</strong>æ£€æŸ¥æµ‹è¯•è¿”å›çš„ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ</p>\n</li>\n<li>\n<p>ç”Ÿæˆï¼Œå±•ç¤ºæµ‹è¯•ç»“æœï¼ˆ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tb2NoYWpzLm9yZy8=\">Mocha</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL2phc21pbmUuZ2l0aHViLmlvLw==\">Jasmine</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vamVzdC8=\">Jest</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rYXJtYS1ydW5uZXIuZ2l0aHViLmlvLw==\">Karma</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0RldkV4cHJlc3MvdGVzdGNhZmU=\">TestCafe</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY3lwcmVzcy5pby8=\">Cypress</span>ï¼‰</p>\n</li>\n<li>\n<p>å¿«ç…§æµ‹è¯•ï¼ˆ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vamVzdC8=\">Jest</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2F2YWpzL2F2YQ==\">Ava</span>ï¼‰</p>\n<p>å¿«ç…§æµ‹è¯• (snapshot testing)ï¼Œæµ‹è¯• UI æˆ–æ•°æ®ç»“æ„æ˜¯å¦å’Œä¹‹å‰å®Œå…¨ä¸€è‡´ï¼Œé€šå¸¸ UI æµ‹è¯•ä¸åœ¨å•å…ƒæµ‹è¯•ä¸­</p>\n</li>\n<li>\n<p>æä¾›ä»¿çœŸï¼ˆ<span class=\"exturl\" data-url=\"aHR0cDovL3Npbm9uanMub3JnLw==\">Sinon</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL2phc21pbmUuZ2l0aHViLmlvLw==\">Jasmine</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL2FpcmJuYi5pby9lbnp5bWUvZG9jcy9hcGkv\">enzyme</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vamVzdC8=\">Jest</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly90ZXN0ZG91YmxlLmNvbS8=\">testdouble</span>ï¼‰</p>\n<p>ä»¿çœŸ (mocks, spies, and stubs)ï¼šè·å–æ–¹æ³•çš„è°ƒç”¨ä¿¡æ¯ï¼Œæ¨¡æ‹Ÿæ–¹æ³•ï¼Œæ¨¡å—ï¼Œç”šè‡³æœåŠ¡å™¨</p>\n</li>\n<li>\n<p>ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š (<span class=\"exturl\" data-url=\"aHR0cHM6Ly9nb3R3YXJsb3N0LmdpdGh1Yi5pby9pc3RhbmJ1bC8=\">Istanbul</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vamVzdC8=\">Jest</span>, <span class=\"exturl\" data-url=\"aHR0cDovL2JsYW5rZXRqcy5vcmcv\">Blanket</span>)</p>\n</li>\n<li>\n<p>æä¾›ç±»æµè§ˆå™¨ç¯å¢ƒ (<span class=\"exturl\" data-url=\"aHR0cDovL25pZ2h0d2F0Y2hqcy5vcmcv\">Nightwatch</span>, <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5uaWdodG1hcmVqcy5vcmcv\">Nightmare</span>, <span class=\"exturl\" data-url=\"aHR0cDovL3BoYW50b21qcy5vcmcv\">Phantom</span><strong>,</strong> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS9wdXBwZXRlZXI=\">Puppeteer</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0RldkV4cHJlc3MvdGVzdGNhZmU=\">TestCafe</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY3lwcmVzcy5pby8=\">Cypress</span>)</p>\n</li>\n<li>\n<p>å¯è§†åŒ–å›å½’å·¥å…· (<span class=\"exturl\" data-url=\"aHR0cHM6Ly9hcHBsaXRvb2xzLmNvbS8=\">Applitools</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wZXJjeS5pby8=\">Percy</span>, <span class=\"exturl\" data-url=\"aHR0cDovL2JiYy1uZXdzLmdpdGh1Yi5pby93cmFpdGgv\">Wraith</span>, <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3dlYmRyaXZlcmlvLWJvbmV5YXJkL3dlYmRyaXZlcmNzcw==\">WebdriverCSS</span>)</p>\n</li>\n</ul>\n<h4 id=\"å•å…ƒæµ‹è¯•ç±»å·¥å…·\"><a class=\"anchor\" href=\"#å•å…ƒæµ‹è¯•ç±»å·¥å…·\">#</a> å•å…ƒæµ‹è¯•ç±»å·¥å…·</h4>\n<p>npm trends: <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtdHJlbmRzLmNvbS9tb2NoYS12cy1qZXN0LXZzLWF2YS12cy1qYXNtaW5lLWNvcmU=\">ç‚¹å‡»é“¾æ¥</span></p>\n<p><img data-src=\"assets/image-20190706101634263.png\" alt=\"/images/image-20190706101634263\" /></p>\n<p><strong>Karma</strong></p>\n<p>Karma æ˜¯ä¸€ä¸ª Runnerï¼ˆå³è¿è¡Œç¯å¢ƒï¼‰ï¼Œå…·ä½“è¯¦ç»†çš„ä»‹ç»è§ <a href=\"#%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83&amp;%E5%B8%AE%E6%89%8BKarma\">åé¢çš„ç« èŠ‚ Karma</a></p>\n<blockquote>\n<p>A test runner is the library or tool that picks up an assembly (or a source code directory) that contains unit tests, and a bunch of settings, and then executes them and writes the test results to the console or log files.<br />\nthere are many runners for different languages. See Nunit and MSTest for C#, or Junit for Java.</p>\n</blockquote>\n<p>karma è®¾è®¡ç›®æ ‡ä¸»è¦æœ‰ä¸‹é¢å››ç‚¹ï¼š</p>\n<blockquote>\n<p>é«˜æ•ˆ<br />\næ‰©å±•æ€§<br />\nè¿è¡Œåœ¨çœŸå®è®¾å¤‡<br />\næ— ç¼çš„ä½¿ç”¨æµç¨‹</p>\n</blockquote>\n<p>karma æ˜¯ä¸€ä¸ªå…¸å‹çš„ C/S ç¨‹åºï¼ŒåŒ…å« client å’Œ server ï¼Œé€šè®¯æ–¹å¼åŸºäº Http ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŸºæœ¬éƒ½è¿è¡Œåœ¨å¼€å‘è€…æœ¬åœ°æœºå™¨ä¸Šã€‚</p>\n<p>ä¸€ä¸ªæœåŠ¡ç«¯å®ä¾‹å¯¹åº”ä¸€ä¸ªé¡¹ç›®ï¼Œå‡å¦‚æƒ³åŒæ—¶è¿è¡Œå¤šä¸ªé¡¹ç›®ï¼Œå¾—åŒæ—¶å¼€å¯å¤šä¸ªæœåŠ¡ç«¯å®ä¾‹ã€‚</p>\n<p>Karma çš„<strong>ä¼˜ç‚¹</strong>æ˜¯èƒ½é€šè¿‡æ’ä»¶å’Œé…ç½®çš„æ–¹å¼é›†æˆå¤§éƒ¨åˆ†çš„ä¸»æµçš„æµ‹è¯•æ¡†æ¶å’Œå‰ç«¯åº“ï¼Œèƒ½æ–¹ä¾¿çš„ä¸€æ¬¡åœ¨å¤šæµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶é›†æˆäº†æµ‹è¯•è¦†ç›–ç‡ç”ŸæˆåŠŸèƒ½ï¼Œç”Ÿæˆé¡µé¢å½¢å¼è¦†ç›–ç‡æŠ¥å‘Šå¹¶èƒ½å¯¼å‡ºä¸åŒå½¢å¼çš„è¦†ç›–ç‡æŠ¥å‘Šæ•°æ®ã€‚</p>\n<p>å®ƒçš„<strong>ç¼ºç‚¹</strong>æ˜¯ï¼Œå¯¹æµ‹è¯•é¡µé¢ç¯å¢ƒçš„æ­å»ºå’Œèµ„æºæ–‡ä»¶çš„åŠ è½½ä¸æ˜¯å¸¸è§çš„å½¢å¼ï¼Œæœ€å¼€å§‹æ­å»ºç¯å¢ƒæ—¶ä¼šæœ‰å¾ˆå¤šè·Ÿé¢„æœŸä¸ä¸€è‡´çš„æƒ…å†µï¼Œé…ç½®ä¸ç›´è§‚ã€‚</p>\n<p><strong>Jasmine</strong></p>\n<p>Jasmine å¸¦æœ‰ assertions (æ–­è¨€)ï¼Œspies (ç”¨æ¥æ¨¡æ‹Ÿå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒ) å’Œ mocks (mock å·¥å…·)ï¼ŒJasmine åˆå§‹åŒ–è®¾ç½®ç®€å•ï¼ŒåŒæ—¶ï¼Œå¦‚æœä½ éœ€è¦ä¸€äº›å•å…ƒåŠŸèƒ½çš„æ—¶å€™ä½ ä»ç„¶å¯ä»¥åŠ ä¸€äº›åº“è¿›æ¥ã€‚</p>\n<p><strong>Mocha</strong></p>\n<p>Mocha æ˜¯ä¸€ä¸ªçµæ´»çš„åº“ï¼Œæä¾›ç»™å¼€å‘è€…çš„åªæœ‰ä¸€ä¸ªåŸºç¡€æµ‹è¯•ç»“æ„ã€‚ç„¶åï¼Œå…¶å®ƒåŠŸèƒ½æ€§çš„åŠŸèƒ½å¦‚ assertionsï¼Œ spies å’Œ mocksï¼Œè¿™äº›åŠŸèƒ½<strong>éœ€è¦å¼•ç”¨æ·»åŠ å…¶å®ƒåº“</strong> / æ’ä»¶æ¥å®Œæˆã€‚</p>\n<p><strong>Jest</strong></p>\n<p>è¢« Facebook å’Œå„ç§ React åº”ç”¨æ¨èå’Œä½¿ç”¨ï¼ŒJest å¾—åˆ°äº†å¾ˆå¥½çš„æ”¯æŒã€‚Jest ä¹Ÿè¢«å‘ç°æ˜¯ä¸€ä¸ªéå¸¸å¿«é€Ÿçš„æµ‹è¯•åº“åœ¨å¹³è¡Œæµ‹è¯•æŠ¥å‘Šä¸­ã€‚</p>\n<p>å¯¹äºå°å‹é¡¹ç›®æ¥è¯´ä½ å¯èƒ½åœ¨å¼€å§‹çš„æ—¶å€™ä¸ç”¨è¿‡å¤šæ‹…å¿ƒï¼Œè€Œæ€§èƒ½çš„æé«˜ï¼Œå¯¹äºå¸Œæœ›å…¨å¤©æŒç»­éƒ¨ç½²çš„å¤§å‹åº”ç”¨ app æ¥è¯´æ˜¯éå¸¸ä¹‹å¥½çš„ã€‚</p>\n<p>è€Œå¼€å‘äººå‘˜ä¸»è¦æ˜¯ç”¨ Jest å»æµ‹è¯• React åº”ç”¨ï¼ŒJest å¯ä»¥å¾ˆå®¹æ˜“åœ°é›†æˆåˆ°å…¶å®ƒåº”ç”¨ç¨‹åºä¸­å……è®¸ä½ ä½¿ç”¨æ›´ç‹¬ç‰¹çš„ç‰¹æ€§åœ¨å…¶å®ƒåœ°æ–¹</p>\n<p>å¿«ç…§æµ‹è¯•æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œå»ç¡®ä¿ä½ çš„åº”ç”¨ UI ä¸ä¼šæœ‰è¶…å‡ºé¢„æœŸçš„é”™è¯¯ï¼Œåœ¨äº§å“å‘å¸ƒæ›¿æ¢çš„æœŸé—´å‘ç”Ÿã€‚è™½ç„¶å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œä¸“é—¨è®¾è®¡éƒ½æ˜¯ä½¿ç”¨åœ¨ React ä¸Šã€‚</p>\n<p>Jest æœ‰ç€å¾ˆå¹¿é˜”çš„ API ã€‚</p>\n<p><strong>AVA</strong></p>\n<p>AVA å®ƒçš„ä¼˜åŠ¿æ˜¯ JavaScript çš„å¼‚æ­¥ç‰¹æ€§å’Œå¹¶å‘è¿è¡Œæµ‹è¯•.</p>\n<p>åˆ©ç”¨äº† JavaScript çš„å¼‚æ­¥ç‰¹æ€§ä¼˜åŠ¿ï¼Œä¼˜åŒ–äº†åœ¨éƒ¨ç½²çš„æ—¶é—´ç­‰å¾…</p>\n<p>ä¿ç•™äº†ç®€å•çš„ API ä¸ºä½ æä¾›ä½ æ‰€éœ€è¦çš„åŠŸèƒ½ã€‚</p>\n<p>å¦‚æœæ­é… mocking æ¥ä½¿ç”¨å®ƒä¼šæ˜¾å¾—æ›´åŠ å‹å¥½ï¼Œä½†æ˜¯å¿…é¡»å®‰è£…ä¸€ä¸ªå•ç‹¬çš„åº“ã€‚</p>\n<h4 id=\"e2eæµ‹è¯•ç±»å·¥å…·\"><a class=\"anchor\" href=\"#e2eæµ‹è¯•ç±»å·¥å…·\">#</a> E2E æµ‹è¯•ç±»å·¥å…·</h4>\n<p>npm trends: <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtdHJlbmRzLmNvbS9jeXByZXNzLXZzLW5pZ2h0bWFyZS12cy1uaWdodHdhdGNoLXZzLXRlc3RjYWZlLXZzLXdlYmRyaXZlcmlv\">ç‚¹å‡»é“¾æ¥</span></p>\n<p><img data-src=\"assets/image-20190706100636750.png\" alt=\"/images/image-20190706100636750\" /></p>\n<h3 id=\"æœ€ä½³å®è·µ\"><a class=\"anchor\" href=\"#æœ€ä½³å®è·µ\">#</a> æœ€ä½³å®è·µ</h3>\n<p>æµ‹è¯•æœ‰å¾ˆå¤šå¥½å¤„ï¼Œä½†ä¸ä»£è¡¨ä¸€ä¸Šæ¥å°±è¦å†™å‡º 100% åœºæ™¯è¦†ç›–çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>\n<p><strong>æœ€ä½³çš„å®è·µï¼šåŸºäºæŠ•å…¥äº§å‡ºæ¯”æ¥åšæµ‹è¯•</strong></p>\n<p>ç”±äºç»´æŠ¤æµ‹è¯•ç”¨ä¾‹ä¹Ÿæ˜¯ä¸€å¤§ç¬”å¼€é”€ï¼ˆæ¯•ç«Ÿæ²¡æœ‰å¤šå°‘æµ‹è¯•ä¼šä¸“é—¨å¸®å‰ç«¯å†™ä¸šåŠ¡æµ‹è¯•ç”¨ä¾‹ï¼Œè€Œå‰ç«¯ä½¿ç”¨çš„æµç¨‹è‡ªåŠ¨åŒ–å·¥å…·æ›´æ˜¯æ²¡æœ‰æµ‹è¯•å‚ä¸äº†ï¼‰ã€‚</p>\n<p>å¯¹äºåƒåŸºç¡€ç»„ä»¶ã€åŸºç¡€æ¨¡å‹ä¹‹ç±»çš„ä¸å¸¸å˜æ›´ä¸”å¤ç”¨è¾ƒå¤šçš„éƒ¨åˆ†ï¼Œå¯ä»¥è€ƒè™‘å»å†™æµ‹è¯•ç”¨ä¾‹æ¥ä¿è¯è´¨é‡ã€‚ä¸ª</p>\n<p>å…ˆå†™å°‘é‡çš„æµ‹è¯•ç”¨ä¾‹è¦†ç›–åˆ° 80%+ çš„åœºæ™¯ï¼Œä¿è¯è¦†ç›–ä¸»è¦ä½¿ç”¨æµç¨‹ã€‚</p>\n<p>ä¸€äº›æç«¯åœºæ™¯å‡ºç°çš„ bug å¯ä»¥åœ¨è¿­ä»£ä¸­å½¢æˆæµ‹è¯•ç”¨ä¾‹æ²‰æ·€ï¼Œåœºæ™¯è¦†ç›–ä¹Ÿå°†é€æ¸è¶‹è¿‘ 100%ã€‚</p>\n<p>ä½†å¯¹äºè¿­ä»£è¾ƒå¿«çš„ä¸šåŠ¡é€»è¾‘ä»¥åŠç”Ÿå­˜æ—¶é—´ä¸é•¿çš„æ´»åŠ¨é¡µé¢ä¹‹ç±»çš„å°±åˆ«èŠ±æ—¶é—´å†™æµ‹è¯•ç”¨ä¾‹äº†ï¼Œç»´æŠ¤æµ‹è¯•ç”¨ä¾‹çš„æ—¶é—´å¤§äº†å»äº†ï¼Œæˆæœ¬å¤ªé«˜ã€‚</p>\n<p>å¤§å‹é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ Jest å¿«é€Ÿå½¢æˆé…ç½®å¹¶ä¸”å¼€å§‹å•å…ƒæµ‹è¯•ã€‚</p>\n<p>éœ€è¦æµ‹è¯•å¿«ç…§ï¼Œåˆ™å¯ä»¥é€‰æ‹© Jest æˆ–è€… Avaã€‚</p>\n<p>å¯¹äºé…ç½®æ€§è¦æ±‚é«˜ï¼Œå¯¹æµ‹è¯•æ¡†æ¶æ€§èƒ½æœ‰è¦æ±‚çš„å¯ä»¥é€‰æ‹© mochaã€‚</p>\n<p>å¯¹æ¨¡æ‹Ÿè¿˜åŸæµè§ˆå™¨ä¸šåŠ¡æ“ä½œæœ‰å¾ˆå¤§çš„éœ€æ±‚çš„ï¼Œå¯ä»¥é€‰æ‹© nightmare</p>\n<p>é…åˆ CI å·¥å…·å®Œæˆè‡ªåŠ¨åŒ–æµ‹è¯•ã€æµ‹è¯•è¦†ç›–ç‡ã€æµ‹è¯•ç»“æœæ¨é€ã€‚</p>\n<h2 id=\"å–œæ¬¢ç®€å•é€‰æ‹©mocha\"><a class=\"anchor\" href=\"#å–œæ¬¢ç®€å•é€‰æ‹©mocha\">#</a> å–œæ¬¢ç®€å•ï¼Œé€‰æ‹© Mocha</h2>\n<p><a href=\"https://mochajs.org/\"> <code>Mocha</code> </a>ï¼ˆå‘éŸ³ &quot;æ‘©å¡&quot;ï¼‰è¯ç”Ÿäº 2011 å¹´ï¼Œæ˜¯ç°åœ¨æœ€æµè¡Œçš„ JavaScript æµ‹è¯•æ¡†æ¶ä¹‹ä¸€ï¼Œåœ¨æµè§ˆå™¨å’Œ Node ç¯å¢ƒéƒ½å¯ä»¥ä½¿ç”¨ã€‚æ‰€è°“ &quot;æµ‹è¯•æ¡†æ¶&quot;ï¼Œå°±æ˜¯è¿è¡Œæµ‹è¯•çš„å·¥å…·ã€‚é€šè¿‡å®ƒï¼Œå¯ä»¥ä¸º JavaScript åº”ç”¨æ·»åŠ æµ‹è¯•ï¼Œä»è€Œä¿è¯ä»£ç çš„è´¨é‡ã€‚</p>\n<h3 id=\"å®‰è£…\"><a class=\"anchor\" href=\"#å®‰è£…\">#</a> å®‰è£…</h3>\n<p>å…¨å±€å®‰è£… Mocha</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> mocha</pre></td></tr></table></figure><p>é¡¹ç›®ä¸­ä¹Ÿå®‰è£… Mocha</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev mocha</pre></td></tr></table></figure><p>åœ¨ package.json ä¸­åŠ å…¥ä¸‹é¢è„šæœ¬ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token string\">\"scripts\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">\"test\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"mocha\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>Chai æ˜¯ä¸€ä¸ªé’ˆå¯¹ Node.js å’Œæµè§ˆå™¨çš„è¡Œä¸ºé©±åŠ¨æµ‹è¯•å’Œæµ‹è¯•é©±åŠ¨æµ‹è¯•çš„<strong>æ–­è¨€åº“</strong>ï¼Œå¯ä¸ä»»ä½• JavaScript æµ‹è¯•æ¡†æ¶é›†æˆã€‚å®ƒæ˜¯ Mocha çš„å¥½å¸®æ‰‹ï½ï½</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev chai</pre></td></tr></table></figure><p>åœ¨ package.json ä¸­åŠ å…¥ä¸‹é¢è„šæœ¬ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mocha\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å…³äºæ–­è¨€\"><a class=\"anchor\" href=\"#å…³äºæ–­è¨€\">#</a> å…³äºæ–­è¨€</h3>\n<p><code>expect</code>  æ–­è¨€çš„ä¼˜ç‚¹æ˜¯å¾ˆæ¥è¿‘è‡ªç„¶è¯­è¨€ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// ç›¸ç­‰æˆ–ä¸ç›¸ç­‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>deep<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">bar</span><span class=\"token operator\">:</span> <span class=\"token string\">'baz'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// å¸ƒå°”å€¼ä¸º true</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'everthing'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// typeof</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">foo</span><span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">an</span><span class=\"token punctuation\">(</span><span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>an<span class=\"token punctuation\">.</span><span class=\"token function\">instanceof</span><span class=\"token punctuation\">(</span>Foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// include</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">include</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foobar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">contain</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">foo</span><span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hello</span><span class=\"token operator\">:</span> <span class=\"token string\">'universe'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>include<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">// empty</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>empty<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>empty<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>empty<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">// match</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foobar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^foo</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// commonjs</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> expect <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'chai'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>expect</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// es6</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> expect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'chai'</span></pre></td></tr></table></figure><h3 id=\"æµ‹è¯•æ¡ˆä¾‹\"><a class=\"anchor\" href=\"#æµ‹è¯•æ¡ˆä¾‹\">#</a> æµ‹è¯•æ¡ˆä¾‹</h3>\n<p>å…¶ä¸­ index.js ä¸ºæˆ‘ä»¬çš„è¢«æµ‹è¯•ä»£ç ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * åŠ æ³•å‡½æ•°</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * @param &#123;ç¬¬ä¸€ä¸ªæ•°&#125; a </pre></td></tr><tr><td data-num=\"4\"></td><td><pre> * @param &#123;ç¬¬äºŒä¸ªæ•°&#125; b </pre></td></tr><tr><td data-num=\"5\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">addNum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> a<span class=\"token operator\">+</span>b<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports<span class=\"token operator\">=</span>addNum<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æ–°å»ºæµ‹è¯•è„šæœ¬ <code>test/demo.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> expect <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'chai'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>expect<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> addNum <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../src/index'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•index.js'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•addNumå‡½æ•°'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸¤æ•°ç›¸åŠ ç»“æœä¸ºä¸¤ä¸ªæ•°å­—çš„å’Œ'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">addNum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token comment\">// ä»¥ä¸Šè¯­æ³•ä¸º chai çš„ expect è¯­æ³•ï¼Œå®ƒè¿˜æœ‰ should è¯­æ³•å’Œ asset è¯­æ³•ã€‚</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// ç­‰ä»·çš„æ„æ€</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">var</span> addNum<span class=\"token operator\">=</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../src/index'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•index.js'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•addNumå‡½æ•°'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸¤æ•°ç›¸åŠ ç»“æœä¸ºä¸¤ä¸ªæ•°å­—çš„å’Œ'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>       <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">addNum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!==</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>         <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸¤æ•°ç›¸åŠ ç»“æœä¸ä¸ºä¸¤ä¸ªæ•°å­—çš„å’Œ\"</span><span class=\"token punctuation\">)</span>ï¼›</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>       <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"mochaæµ‹è¯•å‘½ä»¤\"><a class=\"anchor\" href=\"#mochaæµ‹è¯•å‘½ä»¤\">#</a> Mocha æµ‹è¯•å‘½ä»¤</h3>\n<p>å¦‚æœæƒ³æµ‹è¯•å•ä¸€çš„æµ‹è¯• jsï¼Œå¯ä»¥ç”¨ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mocha test/index.test.js</pre></td></tr></table></figure><p>æˆ–è€…å¤šä¸ª js</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mocha test/index.test.js test/add.test.js</pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨é€šé…ç¬¦æµ‹è¯•æŸä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„ js å’Œ jsxï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># node é€šé…ç¬¦</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mocha <span class=\"token string\">'test/some/*.@(js|jsx)'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># shell é€šé…ç¬¦</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>mocha test/unit/*.js</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>mocha spec/<span class=\"token punctuation\">&#123;</span>my,awesome<span class=\"token punctuation\">&#125;</span>.js</pre></td></tr></table></figure><h3 id=\"es6è¯­æ³•æ”¯æŒ\"><a class=\"anchor\" href=\"#es6è¯­æ³•æ”¯æŒ\">#</a> ES6 è¯­æ³•æ”¯æŒ</h3>\n<p>åœ¨ä¸Šé¢æˆ‘ä»¬ç”¨çš„å¹¶éæ˜¯ ES6 çš„è¯­æ³•ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬æŠŠå…¶ä¸­çš„ä»£ç éƒ½æ”¹ä¸º ES6 çš„è¯­æ³•ã€‚<br />\nå…¶ä¸­ index.js ä¸ºï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * åŠ æ³•å‡½æ•°</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * @param &#123;ç¬¬ä¸€ä¸ªæ•°&#125; a </pre></td></tr><tr><td data-num=\"4\"></td><td><pre> * @param &#123;ç¬¬äºŒä¸ªæ•°&#125; b </pre></td></tr><tr><td data-num=\"5\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">addNum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  addNum</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è€Œ index.test.js ä¸ºï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> expect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'chai'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> addNum <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../src/index'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•index.js'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•addNumå‡½æ•°'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸¤ä¸ªå‚æ•°ç›¸åŠ ç»“æœä¸ºä¸¤ä¸ªæ•°å­—çš„å’Œ'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">addNum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸¤ä¸ªå‚æ•°ç›¸åŠ ç»“æœä¸ä¸ºå’Œä»¥å¤–çš„æ•°'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">addNum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æ­¤æ—¶ç›´æ¥è¿è¡Œ mocha è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬ç°éœ€è¦å®‰è£…ä¸€ä¸‹ babelï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev @babel/cli @babel/core @babel/node @babel/register @babel/preset-env chai mocha nodemon</pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹é¢ï¼Œæ–°å»ºä¸€ä¸ª.babelrc æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ¥ç€è®² package.json ä¸­çš„è„šæœ¬æ”¹ä¸ºï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mocha --require @babel/register\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><p>å‘½ä»¤å˜å¾—æ›´åŠ ç®€å•äº†</p>\n<h3 id=\"æ›´å¤šç”¨æ³•\"><a class=\"anchor\" href=\"#æ›´å¤šç”¨æ³•\">#</a> æ›´å¤šç”¨æ³•</h3>\n<h4 id=\"è¶…æ—¶\"><a class=\"anchor\" href=\"#è¶…æ—¶\">#</a> è¶…æ—¶</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>--timeout, -t, <span class=\"token parameter variable\">--timeouts</span>  Specify <span class=\"token builtin class-name\">test</span> <span class=\"token function\">timeout</span> threshold <span class=\"token punctuation\">(</span>in milliseconds<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                                                        <span class=\"token punctuation\">[</span>number<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>default: <span class=\"token number\">2000</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>å®˜æ–¹é»˜è®¤çš„è¶…æ—¶æ˜¯ 2000 æ¯«ç§’ï¼Œå³ 2sã€‚</p>\n<p>æœ‰ä¸‰ç§æ–¹å¼æ¥ä¿®æ”¹è¶…æ—¶ï¼š</p>\n<p><code>--no-timeout</code>  å‚æ•°æˆ–è€… <code>debug</code>  æ¨¡å¼ä¸­ï¼Œå…¨å±€ç¦ç”¨äº†è¶…æ—¶ï¼›</p>\n<p><code>--timeout</code>  åé¢æ¥æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œå…¨å±€ä¿®æ”¹äº†æœ¬æ¬¡æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„è¶…æ—¶æ—¶é—´ï¼›</p>\n<p>åœ¨æµ‹è¯•ç”¨ä¾‹é‡Œé¢ï¼Œä½¿ç”¨ <code>this.timeout</code>  æ–¹æ³•ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should take less than 500ms'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>done<span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>åœ¨<a href=\"#%E9%92%A9%E5%AD%90%E6%96%B9%E6%B3%95%EF%BC%88%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%EF%BC%89\">é’©å­æ–¹æ³•</a>é‡Œé¢ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a suite of tests'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// A very long environment setup.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>done<span class=\"token punctuation\">,</span> <span class=\"token number\">2500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>åŒæ ·ï¼Œå¯ä»¥ä½¿ç”¨ ``this.timeout (0) <code> </code> å»ç¦ç”¨è¶…æ—¶ã€‚</p>\n</blockquote>\n<h4 id=\"é’©å­æ–¹æ³•ç”Ÿå‘½å‘¨æœŸå‡½æ•°\"><a class=\"anchor\" href=\"#é’©å­æ–¹æ³•ç”Ÿå‘½å‘¨æœŸå‡½æ•°\">#</a> é’©å­æ–¹æ³•ï¼ˆç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼‰</h4>\n<p>Mocha åœ¨ describe å—ä¹‹ä¸­ï¼Œæä¾›æµ‹è¯•ç”¨ä¾‹çš„å››ä¸ªé’©å­ï¼šbefore ()ã€after ()ã€beforeEach () å’Œ afterEach ()ã€‚å®ƒä»¬ä¼šåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•index.js'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token function\">before</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åœ¨æœ¬åŒºå—çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åœ¨æœ¬åŒºå—çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰§è¡Œ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åœ¨æœ¬åŒºå—çš„æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åœ¨æœ¬åŒºå—çš„æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰§è¡Œ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•addNumå‡½æ•°'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸¤æ•°ç›¸åŠ ç»“æœä¸ºä¸¤ä¸ªæ•°å­—çš„å’Œ'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      assert<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token function\">addNum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"å¼‚æ­¥æµ‹è¯•\"><a class=\"anchor\" href=\"#å¼‚æ­¥æµ‹è¯•\">#</a> å¼‚æ­¥æµ‹è¯•</h4>\n<p>Mocha æœ¬èº«æ˜¯æ”¯æŒå¼‚æ­¥æµ‹è¯•çš„ã€‚åªéœ€è¦ä¸º <code>describe</code>  å›è°ƒå‡½æ•°æ·»åŠ ä¸€ä¸ª <code>done</code>  å‚æ•°ï¼Œ æˆåŠŸæ—¶è°ƒç”¨ <code>done()</code> ï¼Œå¤±è´¥æ—¶è°ƒç”¨ <code>done(err)</code> ã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> expect <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'chai'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>expect<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'db'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#get'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        db<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> foo</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>å¦‚æœæœªè°ƒç”¨ <code>done</code>  å‡½æ•°ï¼ŒMocha ä¼šä¸€ç›´ç­‰å¾…ç›´åˆ°è¶…æ—¶ã€‚</li>\n<li>å¦‚æœæœªæ·»åŠ  <code>done</code>  å‚æ•°ï¼ŒMocha ä¼šç›´æ¥è¿”å›æˆåŠŸï¼Œä¸ä¼šæ•è·åˆ°å¼‚æ­¥çš„æ–­è¨€å¤±è´¥ã€‚ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#get'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>è¿è¡Œä¸Šè¿°æµ‹è¯•<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tb2NoYWpzLm9yZy8=\"> Mocha</span> æ€»ä¼šæç¤º Passingã€‚</p>\n<blockquote>\n<p>Mocha æ€ä¹ˆçŸ¥é“æ˜¯å¦è¦ç­‰å¾…å¼‚æ­¥æ–­è¨€å‘¢ï¼Ÿå› ä¸º JavaScript ä¸­çš„<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRnVuY3Rpb24=\"> Function</span> æœ‰ä¸€ä¸ª <code>length</code>  å±æ€§ï¼Œ é€šè¿‡å®ƒå¯ä»¥è·å¾—è¯¥å‡½æ•°çš„å½¢å‚ä¸ªæ•°ã€‚Mocha é€šè¿‡ä¼ å…¥å›è°ƒçš„ <code>length</code>  æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ç­‰å¾…ã€‚</p>\n</blockquote>\n<p>æˆ–è€…ï¼Œ <code>done()</code>  æ‚¨å¯ä»¥è¿”å›<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZQ==\"> Promise</span>ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å›è°ƒã€‚å¦‚æœæ‚¨æ­£åœ¨æµ‹è¯•çš„ API è¿”å› promises è€Œä¸æ˜¯å›è°ƒï¼Œå¯ä»¥è¿™æ ·è¿›è¡Œä½¿ç”¨ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>tobi<span class=\"token punctuation\">,</span> loki<span class=\"token punctuation\">,</span> jane<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#find()'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'respond with matching records'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'User'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>should<span class=\"token punctuation\">.</span>eventually<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>åŒæ ·ï¼Œå¯ä»¥ä½¿ç”¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvU3RhdGVtZW50cy9hc3luY19mdW5jdGlvbg==\"> async /await</span>ï¼Œæ‚¨è¿˜å¯ä»¥ç¼–å†™å¦‚ä¸‹çš„å¼‚æ­¥æµ‹è¯•ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>tobi<span class=\"token punctuation\">,</span> loki<span class=\"token punctuation\">,</span> jane<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#find()'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'responds with matching records'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'User'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    users<span class=\"token punctuation\">.</span>should<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>éœ€è¦ Babel æ”¯æŒï½ï½ï½</p>\n</blockquote>\n<h3 id=\"ç¤ºä¾‹é¡¹ç›®\"><a class=\"anchor\" href=\"#ç¤ºä¾‹é¡¹ç›®\">#</a> ç¤ºä¾‹é¡¹ç›®</h3>\n<h4 id=\"åˆ›å»ºé¡¹ç›®å®‰è£…ä¾èµ–\"><a class=\"anchor\" href=\"#åˆ›å»ºé¡¹ç›®å®‰è£…ä¾èµ–\">#</a> åˆ›å»ºé¡¹ç›® &amp; å®‰è£…ä¾èµ–</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>// åˆå§‹åŒ–ä¸€ä¸ªnodejsé¡¹ç›®</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">npm</span> init <span class=\"token parameter variable\">-y</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>// å®‰è£…ä¾èµ–</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev @babel/cli @babel/core @babel/node @babel/register @babel/preset-env chai mocha nodemon</pre></td></tr></table></figure><p>å½¢æˆ package.json</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"projects\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token property\">\"@babel/cli\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.5.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token property\">\"@babel/core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.5.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token property\">\"@babel/node\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.5.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token property\">\"@babel/preset-env\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.5.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token property\">\"@babel/register\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.4.4\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token property\">\"chai\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.2.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token property\">\"mocha\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.1.4\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token property\">\"nodemon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.19.1\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"æµ‹è¯•è¿‡ç¨‹\"><a class=\"anchor\" href=\"#æµ‹è¯•è¿‡ç¨‹\">#</a> æµ‹è¯•è¿‡ç¨‹</h4>\n<p>æ–°å»ºä¸€ä¸ªå¾…æµ‹è¯•çš„æ–¹æ³• <code>./src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sayHello</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"Hello world!!!\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// ES6 è¯­æ³•</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> sayHello</pre></td></tr></table></figure><p>æµ‹è¯•è„šæœ¬ <code>./test/index.spec.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> expect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"chai\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> sayHello <span class=\"token keyword\">from</span> <span class=\"token string\">\"../src/index\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"index test\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sayHello function\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should say Hello guys!\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello guys!\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>package.json</code>  ä¸­çš„è„šæœ¬ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// \"start\": \"nodemon ./src/index.js\",  // é’ˆå¯¹ ES5 è¯­æ³•</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"start:babel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nodemon --exec babel-node ./src/index.js\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"test:watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mocha --require @babel/register --watch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mocha --require @babel/register\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel src --out-dir ./dist --source-maps\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token property\">\"serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node ./dist/index.js\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token property\">\"debug\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node --inspect-brk ./dist/index.js\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><p>å¼€å§‹æµ‹è¯•ï¼š <code>npm run test</code></p>\n<p>æŠ¥é”™äº†ï¼Œå› ä¸ºæœŸæœ›çš„å€¼ä¸å®é™…å€¼ä¸ä¸€è‡´ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Hello world<span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  index <span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    sayHello <span class=\"token keyword\">function</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> should say Hello guys<span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token number\">0</span> passing <span class=\"token punctuation\">(</span>9ms<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token number\">1</span> failing</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> index <span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>       sayHello <span class=\"token keyword\">function</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>         should say Hello guys<span class=\"token operator\">!</span>:</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      AssertionError: expected <span class=\"token string\">'Hello world!!!'</span> to equal <span class=\"token string\">'Hello guys!'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      + expected - actual</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token parameter variable\">-Hello</span> world<span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      +Hello guys<span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      </pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      at Context.equal <span class=\"token punctuation\">(</span>test/index.spec.js:9:22<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä¿®æ”¹æµ‹è¯•è„šæœ¬ï¼Œæˆ–è€…ä¿®æ”¹ index.js æ–‡ä»¶ï¼š</p>\n<p>ä¿®æ”¹ <code>./test/index.spec.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> expect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"chai\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> sayHello <span class=\"token keyword\">from</span> <span class=\"token string\">\"../src/index\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"index test\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sayHello function\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should say Hello world!!!\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello world!!!\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å†æ¬¡æµ‹è¯•ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">></span> mocha <span class=\"token parameter variable\">--require</span> @babel/register</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Hello world<span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  index <span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    sayHello <span class=\"token keyword\">function</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      âœ“ should say Hello world<span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token number\">1</span> passing <span class=\"token punctuation\">(</span>6ms<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>mochawesome</code>  å±•ç¤ºä½ çš„æµ‹è¯•ç»“æœï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev mochawesome</pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>package.json</code>  çš„ <code>scripts</code>  ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œ</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token property\">\"report\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mocha --require @babel/register --reporter mochawesome\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> run report</pre></td></tr></table></figure><p>å½¢æˆå‡ºæ¥çš„æŠ¥å‘Šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š</p>\n<p><img data-src=\"assets/image-20190707212821248.png\" alt=\"/images/image-20190707212821248\" /></p>\n<p>åœ¨ Vscode ä¸­å¯ä»¥å®‰è£… Live Server è¿™ä¸ªæ’ä»¶å¿«é€Ÿæ‰“å¼€ï¼š</p>\n<p><img data-src=\"assets/image-20190707212923919.png\" alt=\"/images/image-20190707212923919\" /></p>\n<h2 id=\"å¼€ç®±å³ç”¨jest\"><a class=\"anchor\" href=\"#å¼€ç®±å³ç”¨jest\">#</a> å¼€ç®±å³ç”¨ Jest</h2>\n<p>Jest æ˜¯ç”± Facebook å‘å¸ƒçš„å¼€æºçš„ã€åŸºäº<span class=\"exturl\" data-url=\"aHR0cDovL2phc21pbmUuZ2l0aHViLmlvLw==\"> Jasmine</span> çš„ JavaScript å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚Jest æºäº Facebook çš„æ„æƒ³ï¼Œç”¨äºå¿«é€Ÿã€å¯é åœ°æµ‹è¯• Web èŠå¤©åº”ç”¨ã€‚å®ƒå¸å¼•äº†å…¬å¸å†…éƒ¨çš„å…´è¶£ï¼ŒFacebook çš„ä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆ Jeff Morrison åŠå¹´å‰åˆé‡æ‹¾è¿™ä¸ªé¡¹ç›®ï¼Œæ”¹å–„å®ƒçš„æ€§èƒ½ï¼Œå¹¶å°†å…¶å¼€æºã€‚Jest çš„ç›®æ ‡æ˜¯å‡å°‘å¼€å§‹æµ‹è¯•ä¸€ä¸ªé¡¹ç›®æ‰€è¦èŠ±è´¹çš„æ—¶é—´å’Œè®¤çŸ¥è´Ÿè·ï¼Œå› æ­¤å®ƒæä¾›äº†å¤§éƒ¨åˆ†ä½ éœ€è¦çš„ç°æˆå·¥å…·ï¼šå¿«é€Ÿçš„å‘½ä»¤è¡Œæ¥å£ã€Mock å·¥å…·é›†ä»¥åŠå®ƒçš„è‡ªåŠ¨æ¨¡å— Mock ç³»ç»Ÿã€‚æ­¤å¤–ï¼Œå¦‚æœä½ åœ¨å¯»æ‰¾éš”ç¦»å·¥å…·ä¾‹å¦‚ Mock åº“ï¼Œå¤§éƒ¨åˆ†å…¶å®ƒå·¥å…·å°†è®©ä½ åœ¨æµ‹è¯•ä¸­ï¼ˆç”šè‡³ç»å¸¸åœ¨ä½ çš„ä¸»ä»£ç ä¸­ï¼‰å†™ä¸€äº›ä¸å°½å¦‚äººæ„çš„æ ·æ¿ä»£ç ï¼Œä»¥ä½¿å…¶ç”Ÿæ•ˆã€‚Jest ä¸ Jasmine æ¡†æ¶çš„åŒºåˆ«æ˜¯åœ¨åè€…ä¹‹ä¸Šå¢åŠ äº†ä¸€äº›å±‚ã€‚æœ€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿è¡Œæµ‹è¯•æ—¶ï¼ŒJest ä¼šè‡ªåŠ¨æ¨¡æ‹Ÿä¾èµ–ã€‚Jest è‡ªåŠ¨ä¸ºæ¯ä¸ªä¾èµ–çš„æ¨¡å—ç”Ÿæˆ Mockï¼Œå¹¶é»˜è®¤æä¾›è¿™äº› Mockï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°éš”ç¦»æ¨¡å—çš„ä¾èµ–ã€‚</p>\n<p>Jest æ”¯æŒ Babelï¼Œæˆ‘ä»¬å°†å¾ˆè½»æ¾çš„ä½¿ç”¨ ES6 çš„é«˜çº§è¯­æ³•</p>\n<p>Jest æ”¯æŒ webpackï¼Œéå¸¸æ–¹ä¾¿çš„ä½¿ç”¨å®ƒæ¥ç®¡ç†æˆ‘ä»¬çš„é¡¹ç›®</p>\n<p>Jest æ”¯æŒ TypeScriptï¼Œä¹¦å†™æµ‹è¯•ç”¨ä¾‹æ›´åŠ ä¸¥è°¨</p>\n<ol>\n<li>\n<p>ç®€åŒ– API</p>\n<p>Jest æ—¢ç®€å•åˆå¼ºå¤§ï¼Œå†…ç½®æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š</p>\n<ul>\n<li>çµæ´»çš„é…ç½®ï¼šæ¯”å¦‚ï¼Œå¯ä»¥ç”¨æ–‡ä»¶åé€šé…ç¬¦æ¥æ£€æµ‹æµ‹è¯•æ–‡ä»¶ã€‚</li>\n<li>æµ‹è¯•çš„äº‹å‰æ­¥éª¤ (Setup) å’Œäº‹åæ­¥éª¤ (Teardown)ï¼ŒåŒæ—¶ä¹ŸåŒ…æ‹¬æµ‹è¯•èŒƒå›´ã€‚</li>\n<li>åŒ¹é…è¡¨è¾¾å¼ (Matchers)ï¼šèƒ½ä½¿ç”¨æœŸæœ› <code>expect</code>  å¥æ³•æ¥éªŒè¯ä¸åŒçš„å†…å®¹ã€‚</li>\n<li>æµ‹è¯•å¼‚æ­¥ä»£ç ï¼šæ”¯æŒæ‰¿è¯º (promise) æ•°æ®ç±»å‹å’Œå¼‚æ­¥ç­‰å¾… <code>async</code>  /  <code>await</code>  åŠŸèƒ½ã€‚</li>\n<li>æ¨¡æ‹Ÿå‡½æ•°ï¼šå¯ä»¥ä¿®æ”¹æˆ–ç›‘æŸ¥æŸä¸ªå‡½æ•°çš„è¡Œä¸ºã€‚</li>\n<li>æ‰‹åŠ¨æ¨¡æ‹Ÿï¼šæµ‹è¯•ä»£ç æ—¶å¯ä»¥å¿½ç•¥æ¨¡å—çš„ä¾å­˜å…³ç³»ã€‚</li>\n<li>è™šæ‹Ÿè®¡æ—¶ï¼šå¸®åŠ©æ§åˆ¶æ—¶é—´æ¨ç§»ã€‚</li>\n</ul>\n</li>\n<li>\n<p>æ€§èƒ½ä¸éš”ç¦»</p>\n<p>Jest æ–‡æ¡£é‡Œå†™é“ï¼š</p>\n<p>Jest èƒ½è¿ç”¨æ‰€æœ‰çš„å·¥ä½œéƒ¨åˆ†ï¼Œå¹¶åˆ—è¿è¡Œæµ‹è¯•ï¼Œä½¿æ€§èƒ½æœ€å¤§åŒ–ã€‚ç»ˆç«¯ä¸Šçš„ä¿¡æ¯ç»è¿‡ç¼“å†²ï¼Œæœ€åä¸æµ‹è¯•ç»“æœä¸€èµ·æ‰“å°å‡ºæ¥ã€‚æ²™ç›’ä¸­ç”Ÿæˆçš„æµ‹è¯•æ–‡ä»¶ï¼Œä»¥åŠè‡ªåŠ¨å…¨å±€çŠ¶æ€åœ¨æ¯ä¸ªæµ‹è¯•é‡Œéƒ½ä¼šå¾—åˆ°é‡ç½®ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ä¸¤ä¸ªæµ‹è¯•å†²çªçš„æƒ…å†µã€‚</p>\n<p>Mocha ç”¨ä¸€ä¸ªè¿›ç¨‹è¿è¡Œæ‰€æœ‰çš„æµ‹è¯•ï¼Œå’Œå®ƒæ¯”è¾ƒèµ·æ¥ï¼ŒJest åˆ™å®Œå…¨ä¸åŒã€‚è¦åœ¨æµ‹è¯•ä¹‹é—´æ¨¡æ‹Ÿå‡ºéš”ç¦»æ•ˆæœï¼Œæˆ‘ä»¬å¿…é¡»è¦å¼•å…¥å‡ ä¸ªæµ‹è¯•è¾…åŠ©å‡½æ•°æ¥å¦¥å–„ç®¡ç†æ¸…é™¤å·¥ä½œã€‚è¿™ç§åšæ³•è™½ç„¶ä¸æ€ä¹ˆç†æƒ³ï¼Œä½† 99% çš„æƒ…å†µéƒ½å¯ä»¥ç”¨ï¼Œå› ä¸ºæµ‹è¯•æ˜¯æŒ‰é¡ºåºè¿›è¡Œçš„ã€‚</p>\n</li>\n<li>\n<p>æ²‰æµ¸å¼ç›‘æ§æ¨¡å¼</p>\n<p>å¿«é€Ÿäº’åŠ¨å¼ç›‘æ§æ¨¡å¼å¯ä»¥ç›‘æ§åˆ°å“ªäº›æµ‹è¯•æ–‡ä»¶æœ‰è¿‡æ”¹åŠ¨ï¼Œåªè¿è¡Œä¸æ”¹åŠ¨è¿‡çš„æ–‡ä»¶ç›¸å…³çš„æµ‹è¯•ï¼Œå¹¶ä¸”ç”±äºä¼˜åŒ–ä½œç”¨ï¼Œèƒ½è¿…é€Ÿæ”¾å‡ºç›‘æ§ä¿¡å·ã€‚è®¾ç½®èµ·æ¥éå¸¸ç®€å•ï¼Œè€Œä¸”è¿˜æœ‰ä¸€äº›åˆ«çš„é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ–‡ä»¶åæˆ–æµ‹è¯•åæ¥è¿‡æ»¤æµ‹è¯•ã€‚æˆ‘ä»¬ç”¨ Mocha æ—¶ä¹Ÿæœ‰ç›‘æ§æ¨¡å¼ï¼Œä¸è¿‡æ²¡æœ‰é‚£ä¹ˆå¼ºå¤§ï¼Œè¦è¿è¡ŒæŸä¸ªç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ï¼Œå°±ä¸å¾—ä¸è‡ªå·±åˆ›é€ è§£å†³æ–¹æ³•ï¼Œè€Œè¿™äº›åŠŸèƒ½ Jest æœ¬èº«å°±å·²ç»æä¾›äº†ï¼Œä¸ç”¨èŠ±åŠ›æ°”ã€‚</p>\n</li>\n<li>\n<p>ä»£ç è¦†ç›–ç‡ &amp; æµ‹è¯•æŠ¥å‘Š</p>\n<p>Jest å†…ç½®æœ‰ä»£ç è¦†ç›–ç‡æŠ¥å‘ŠåŠŸèƒ½ï¼Œè®¾ç½®èµ·æ¥æ˜“å¦‚åæŒã€‚å¯ä»¥åœ¨æ•´ä¸ªé¡¹ç›®èŒƒå›´é‡Œæ”¶é›†ä»£ç è¦†ç›–ç‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœªç»å—æµ‹è¯•çš„æ–‡ä»¶ã€‚</p>\n<p>è¦ä½¿å®Œå–„ Circle CI æ•´åˆï¼Œåªéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰æŠ¥å‘ŠåŠŸèƒ½ã€‚æœ‰äº† Jestï¼Œç”¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL21pY2hhZWxsZWVhbGxlbi9qZXN0LWp1bml0LXJlcG9ydGVy\"> jest-junit-reporter</span> å°±å¯ä»¥åšåˆ°ï¼Œå…¶ç”¨æ³•å’Œ Mocha å‡ ä¹ç›¸åŒã€‚</p>\n</li>\n<li>\n<p>å¿«ç…§åŠŸèƒ½</p>\n<p>å¿«ç…§æµ‹è¯•çš„ç›®çš„ä¸æ˜¯è¦æ›¿æ¢ç°æœ‰çš„å•å…ƒæµ‹è¯•ï¼Œè€Œæ˜¯è¦ä½¿ä¹‹æ›´æœ‰ä»·å€¼ï¼Œè®©æµ‹è¯•æ›´è½»æ¾ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒæŸäº›åŠŸèƒ½æ¯”å¦‚ React ç»„ä»¶åŠŸèƒ½ï¼Œæœ‰äº†å¿«ç…§æµ‹è¯•æ„å‘³ç€æ— éœ€å†åšå•å…ƒæµ‹è¯•ï¼Œä½†åŒæ ·è¿™ä¸¤è€…ä¸æ˜¯éæ­¤å³å½¼ã€‚</p>\n</li>\n</ol>\n<h3 id=\"å®‰è£…-2\"><a class=\"anchor\" href=\"#å®‰è£…-2\">#</a> å®‰è£…</h3>\n<p>æ–°å»ºæ–‡ä»¶å¤¹ç„¶åé€šè¿‡ npm å‘½ä»¤å®‰è£…ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev jest</pre></td></tr></table></figure><p>æˆ–è€…é€šè¿‡ yarn æ¥å®‰è£…ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">--dev</span> jest</pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†</p>\n<p>ä¹Ÿå¯ç”¨ <code>npm install -g jest</code>  è¿›è¡Œå…¨å±€å®‰è£…ï¼›å¹¶åœ¨ package.json ä¸­æŒ‡å®š test è„šæœ¬ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>Jest çš„æµ‹è¯•è„šæœ¬åå½¢å¦‚ <code>.test.js</code> ï¼Œä¸è®º Jest æ˜¯å…¨å±€è¿è¡Œè¿˜æ˜¯é€šè¿‡ <code>npm test</code>  è¿è¡Œï¼Œå®ƒéƒ½ä¼šæ‰§è¡Œå½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„ <code>*.test.js</code>  æˆ–  <code>*.spec.js</code>  æ–‡ä»¶ã€å®Œæˆæµ‹è¯•ã€‚</p>\n<p>ES6 è¯­æ³•æ”¯æŒï¼š</p>\n<ol>\n<li>å®‰è£…ä¾èµ–</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">--dev</span> babel-jest @babel/core @babel/preset-env</pre></td></tr></table></figure><ol start=\"2\">\n<li>é…ç½® <code>.babelrc</code></li>\n</ol>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token property\">\"targets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>          <span class=\"token property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"current\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨ ES6 çš„è¯­æ³•äº†ï½ï½ï½</p>\n<p>æ›´å¤šé«˜é˜¶çš„ ES6/7/8â€¦ è¯­æ³•ï¼Œå¯ä»¥å‚è§ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWJlbGpzLmlvLw==\">babel å®˜ç½‘</span></p>\n<p>å…³äº Typescript çš„æ”¯æŒï¼Œå¯ä»¥å‚è§ ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qZXN0anMuaW8vZG9jcy9lbi9nZXR0aW5nLXN0YXJ0ZWQjdXNpbmctdHlwZXNjcmlwdA==\">Using Typescript</span></p>\n<h3 id=\"ä¸¾ä¸ªä¾‹å­\"><a class=\"anchor\" href=\"#ä¸¾ä¸ªä¾‹å­\">#</a> ä¸¾ä¸ªä¾‹å­</h3>\n<p>å…³äº test suite ä¸ test caseï¼š</p>\n<p><img data-src=\"assets/w80140jb42.jpg\" alt=\"img\" /></p>\n<p>describe å±äº test suite çš„æè¿°ï¼Œè€Œæ¯ä¸ª test æˆ–è€… it åˆ™æè¿°äº†æ¯ä¸ª test caseã€‚</p>\n<p>ä¾‹å¦‚ï¼š <code>math.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">multiple</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">*</span> b<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æµ‹è¯•è„šæœ¬ï¼š <code>math.test.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> math <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/math'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"math\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">let</span> a</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">let</span> b</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    a <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    b <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#should return result as a+b\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// test code</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> math<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#should return result as a*b\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\">//test code</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> math<span class=\"token punctuation\">.</span><span class=\"token function\">multiple</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>test suite å¯ä»¥è¿›è¡ŒåµŒå¥—ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo bar\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token comment\">//test code</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>test case ä¹Ÿå¯ä»¥è„±ç¦» test suite ç‹¬ç«‹è¿è¡Œï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// hello.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'Hello world'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// hello.test.js</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">let</span> hello <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello.js'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should get \"Hello world\"'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello world'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// æµ‹è¯•æˆåŠŸ</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">//expect (hello ()).toBe ('Hello') // æµ‹è¯•å¤±è´¥</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"mockä¸spy\"><a class=\"anchor\" href=\"#mockä¸spy\">#</a> Mock ä¸ Spy</h3>\n<p><strong>mock</strong> æµ‹è¯•å°±æ˜¯åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæŸäº›ä¸å®¹æ˜“æ„é€ æˆ–è€…ä¸å®¹æ˜“è·å–çš„å¯¹è±¡ï¼Œç”¨ä¸€ä¸ªè™šæ‹Ÿçš„å¯¹è±¡æ¥åˆ›å»ºä»¥ä¾¿æµ‹è¯•çš„æµ‹è¯•æ–¹æ³•ã€‚</p>\n<p>Mock æ˜¯å•å…ƒæµ‹è¯•ä¸­ç»å¸¸ä½¿ç”¨çš„ä¸€ç§æŠ€æœ¯ã€‚å•å…ƒæµ‹è¯•ï¼Œé¡¾åæ€ä¹‰æµ‹è¯•çš„é‡ç‚¹æ˜¯æŸä¸ªå…·ä½“å•å…ƒã€‚ä½†æ˜¯åœ¨å®é™…ä»£ç ä¸­ï¼Œä»£ç ä¸ä»£ç ä¹‹é—´ï¼Œæ¨¡å—ä¸æ¨¡å—ä¹‹é—´æ€»æ˜¯ä¼šå­˜åœ¨ç€ç›¸äº’å¼•ç”¨ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå‰¥ç¦»å‡ºè¿™ç§å•å…ƒçš„ä¾èµ–ï¼Œè®©æµ‹è¯•æ›´åŠ ç‹¬ç«‹ï¼Œä½¿ç”¨åˆ°çš„æŠ€æœ¯å°±æ˜¯ Mockã€‚</p>\n<p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Mock å‡½æ•°ï¼Ÿ</strong></p>\n<p>åœ¨é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªæ¨¡å—çš„æ–¹æ³•å†…å¸¸å¸¸ä¼šå»è°ƒç”¨å¦å¤–ä¸€ä¸ªæ¨¡å—çš„æ–¹æ³•ã€‚åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å¹¶ä¸éœ€è¦å…³å¿ƒå†…éƒ¨è°ƒç”¨çš„æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹å’Œç»“æœï¼Œåªæƒ³çŸ¥é“å®ƒæ˜¯å¦è¢«æ­£ç¡®è°ƒç”¨å³å¯ï¼Œç”šè‡³ä¼šæŒ‡å®šè¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚æ­¤æ—¶ï¼Œä½¿ç”¨ Mock å‡½æ•°æ˜¯ååˆ†æœ‰å¿…è¦ã€‚</p>\n<p>Mock å‡½æ•°æä¾›çš„ä»¥ä¸‹ä¸‰ç§ç‰¹æ€§ï¼Œåœ¨æˆ‘ä»¬å†™æµ‹è¯•ä»£ç æ—¶ååˆ†æœ‰ç”¨ï¼š</p>\n<ul>\n<li>æ•è·å‡½æ•°è°ƒç”¨æƒ…å†µ</li>\n<li>è®¾ç½®å‡½æ•°è¿”å›å€¼</li>\n<li>æ”¹å˜å‡½æ•°çš„å†…éƒ¨å®ç°</li>\n</ul>\n<p><img data-src=\"assets/8u3cp5kz2s.png\" alt=\"img\" /></p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// math.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFooResult</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\">// foo logic here</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getBarResult</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">// bar logic here</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// caculate.js</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getFooResult<span class=\"token punctuation\">,</span> getBarResult <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./math\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFooBarResult</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getFooResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">getBarResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼ŒgetFooResult () å’Œ getBarResult () å°±æ˜¯ getFooBarResult è¿™ä¸ªå‡½æ•°çš„ä¾èµ–ã€‚å¦‚æœæˆ‘ä»¬å…³æ³¨çš„ç‚¹æ˜¯ getFooBarResult è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°±åº”è¯¥æŠŠ getFooResult å’Œ getBarResult Mock æ‰ï¼Œå‰¥ç¦»è¿™ç§ä¾èµ–ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ Jest è¿›è¡Œ Mock çš„ä¾‹å­ã€‚</p>\n<p><code>jest.fn()</code>  æ˜¯\båˆ›å»º Mock å‡½æ•°æœ€ç®€å•çš„æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰å‡½æ•°å†…éƒ¨çš„å®ç°ï¼Œ <code>jest.fn()</code>  ä¼šè¿”å› <code>undefined</code>  ä½œä¸ºè¿”å›å€¼ã€‚</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æµ‹è¯•jest.fn()è°ƒç”¨'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">let</span> mockFn <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token function\">mockFn</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">// æ–­è¨€ mockFn çš„æ‰§è¡Œåè¿”å› undefined</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeUndefined</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token comment\">// æ–­è¨€ mockFn è¢«è°ƒç”¨</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">// æ–­è¨€ mockFn è¢«è°ƒç”¨äº†ä¸€æ¬¡</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token comment\">// æ–­è¨€ mockFn ä¼ å…¥çš„å‚æ•°ä¸º 1, 2, 3</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>æƒ…æ™¯ä¸€ï¼šè®¾ç½®å‡½æ•° çš„è¿”å›å€¼</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// calculate.test.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getFooBarResult <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./calculate\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> fooBar <span class=\"token keyword\">from</span> <span class=\"token string\">'./math'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'getResult should return result getFooResult() + getBarResult()'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">//mock add æ–¹æ³•å’Œ multiple æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  fooBar<span class=\"token punctuation\">.</span>getFooBarResult <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  fooBar<span class=\"token punctuation\">.</span>getBarResult <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">getFooBarResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>Mock å…¶å®å°±æ˜¯ä¸€ç§ Spiesï¼Œåœ¨ Jest ä¸­ä½¿ç”¨ spies æ¥ â€œspyâ€(çª¥æ¢) ä¸€ä¸ªå‡½æ•°çš„è¡Œä¸ºã€‚</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qZXN0anMuaW8vZG9jcy9lbi9tb2NrLWZ1bmN0aW9uLWFwaS5odG1sI2NvbnRlbnQ=\">Jest æ–‡æ¡£</span>å¯¹äº spies çš„è§£é‡Š:</p>\n<blockquote>\n<p>Mock å‡½æ•°ä¹Ÿç§°ä¸º â€œspiesâ€ï¼Œå› ä¸ºå®ƒä»¬è®©ä½ çª¥æ¢ä¸€äº›ç”±å…¶ä»–ä»£ç é—´æ¥è°ƒç”¨çš„å‡½æ•°çš„è¡Œä¸ºï¼Œè€Œä¸ä»…ä»…æ˜¯æµ‹è¯•è¾“å‡ºã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨  <code>jest.fn()</code>  åˆ›å»ºä¸€ä¸ª mock å‡½æ•°ã€‚</p>\n</blockquote>\n<p>ç®€å•æ¥è¯´ï¼Œä¸€ä¸ª spy æ˜¯å¦ä¸€ä¸ªå†…ç½®çš„èƒ½å¤Ÿè®°å½•å¯¹å…¶è°ƒç”¨ç»†èŠ‚çš„å‡½æ•°ï¼šè°ƒç”¨å®ƒçš„æ¬¡æ•°ï¼Œä½¿ç”¨ä»€ä¹ˆå‚æ•°ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// calculate.test.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getFooBarResult <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./calculate\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> fooBar <span class=\"token keyword\">from</span> <span class=\"token string\">'./math'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'getResult should return result getFooResult() + getBarResult()'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">//mock add æ–¹æ³•å’Œ multiple æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  fooBar<span class=\"token punctuation\">.</span>getFooResult <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  fooBar<span class=\"token punctuation\">.</span>getBarResult <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">getFooBarResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token comment\">// ç›‘æ§ getFooResult å’Œ getBarResult çš„è°ƒç”¨æƒ…å†µ.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>fooBar<span class=\"token punctuation\">.</span>getFooResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>fooBar<span class=\"token punctuation\">.</span>getBarResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong>æƒ…æ™¯äºŒï¼šæ•è·å‡½æ•°è°ƒç”¨æƒ…å†µ</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// bot method</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> bot <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token function-variable function\">sayHello</span><span class=\"token operator\">:</span> <span class=\"token parameter\">name</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>name<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// test.js</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bot\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should say hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">const</span> spy <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>bot<span class=\"token punctuation\">,</span> <span class=\"token string\">\"sayHello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    bot<span class=\"token punctuation\">.</span><span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Michael\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>spy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Michael\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    spy<span class=\"token punctuation\">.</span><span class=\"token function\">mockRestore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡  <code>jest.spyOn</code>  åˆ›å»ºäº†ä¸€ä¸ªç›‘å¬  <code>bot</code>  å¯¹è±¡çš„  <code>sayHello</code>  æ–¹æ³•çš„ spyã€‚å®ƒå°±åƒé—´è°ä¸€æ ·ç›‘å¬äº†æ‰€æœ‰å¯¹  <code>bot#sayHello</code>  æ–¹æ³•çš„è°ƒç”¨ã€‚ç”±äºåˆ›å»º spy æ—¶ï¼ŒJest å®é™…ä¸Šä¿®æ”¹äº†  <code>bot</code>  å¯¹è±¡çš„  <code>sayHello</code>  å±æ€§ï¼Œæ‰€ä»¥åœ¨æ–­è¨€å®Œæˆåï¼Œæˆ‘ä»¬è¿˜è¦é€šè¿‡  <code>mockRestore</code>  æ¥æ¢å¤  <code>bot</code>  å¯¹è±¡åŸæœ¬çš„  <code>sayHello</code>  æ–¹æ³•ã€‚</p>\n<p>Jest çš„<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qZXN0anMuaW8vZG9jcy9lbi9qZXN0LW9iamVjdCNqZXN0c3B5b25vYmplY3QtbWV0aG9kbmFtZQ==\"> spyOn ä»‹ç»</span></p>\n<p><strong>æƒ…æ™¯ä¸‰ï¼šä¿®æ”¹å‡½æ•°çš„å†…å®¹å®ç°</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> bot <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token function-variable function\">sayHello</span><span class=\"token operator\">:</span> <span class=\"token parameter\">name</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>name<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bot\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should say hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">const</span> spy <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>bot<span class=\"token punctuation\">,</span> <span class=\"token string\">\"sayHello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello mix </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>name<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    bot<span class=\"token punctuation\">.</span><span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Michael\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>spy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Michael\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    spy<span class=\"token punctuation\">.</span><span class=\"token function\">mockRestore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ä½¿ç”¨ spyOn æ–¹æ³•ï¼Œè¿˜å¯ä»¥å»ä¿®æ”¹ Math.random è¿™æ ·çš„å‡½æ•°</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">,</span> <span class=\"token string\">\"random\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// getNum.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getNum</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">[</span>index <span class=\"token operator\">%</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">[</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// num.test.js</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getNum <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../src/getNum'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"getNum\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should select numbber based on index if provided\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getNum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should select a random number based on Math.random if skuId not available\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">const</span> spy <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">,</span> <span class=\"token string\">\"random\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>spy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    spy<span class=\"token punctuation\">.</span><span class=\"token function\">mockRestore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"cliå‘½ä»¤\"><a class=\"anchor\" href=\"#cliå‘½ä»¤\">#</a> CLI å‘½ä»¤</h3>\n<pre><code>âœ npx jest --help\nUsage: jest [--config=&lt;pathToConfigFile&gt;] [TestPathPattern]\n\né€‰é¡¹ï¼š\n  --help, -h                    æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯                              [å¸ƒå°”]\n  --version, -v                 Print the version and exit                [å¸ƒå°”]\n  --config, -c                  The path to a jest config file specifying how to\n                                find and execute tests. If no rootDir is set in\n                                the config, the directory containing the config\n                                file is assumed to be the rootDir for the\n                                project.This can also be a JSON encoded value\n                                which Jest will use as configuration.   [å­—ç¬¦ä¸²]\n  --coverage                    Indicates that test coverage information should\n                                be collected and reported in the output.  [å¸ƒå°”] \n  --timers                      Setting this value to fake allows the use of\n                                fake timers for functions such as setTimeout.\n                                                                        [å­—ç¬¦ä¸²]\n  --verbose                     Display individual test results with the test\n                                suite hierarchy.                          [å¸ƒå°”]\n  --watch                       Watch files for changes and rerun tests related\n                                to changed files. If you want to re-run all\n                                tests when a file has changed, use the\n                                `--watchAll` option.                      [å¸ƒå°”]\n  --watchAll                    Watch files for changes and rerun all tests. If\n                                you want to re-run only the tests related to the\n                                changed files, use the `--watch` option.  [å¸ƒå°”]\n...\n</code></pre>\n<p>å¸¸è§ä½¿ç”¨ï¼š</p>\n<p><code>--verbose</code>  æ˜¾ç¤ºè¯¦ç»†çš„æµ‹è¯•ä¿¡æ¯ï¼ŒåŒ…æ‹¬æµ‹è¯• suite å’Œ caseï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>âœ npx jest <span class=\"token parameter variable\">--verbose</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> PASS  test/mock.test.js</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  bot</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    âœ“ should say hello <span class=\"token punctuation\">(</span>7ms<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  console.log test/mock.test.js:10</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    Hello mix Michael</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre> PASS  test/domain.test.js</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  getImageDomain</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    âœ“ should <span class=\"token keyword\">select</span> domain based on skuId <span class=\"token keyword\">if</span> provided <span class=\"token punctuation\">(</span>1ms<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    âœ“ should <span class=\"token keyword\">select</span> a random domain based on Math.random <span class=\"token keyword\">if</span> skuId not available <span class=\"token punctuation\">(</span>1ms<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  console.log test/sayhello.test.js:3</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    Hello Michael<span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre> PASS  test/sayhello.test.js</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  bot</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    âœ“ should say hello <span class=\"token punctuation\">(</span>6ms<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre> PASS  test/num.test.js</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  getNum</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    âœ“ should <span class=\"token keyword\">select</span> numbber based on index <span class=\"token keyword\">if</span> provided <span class=\"token punctuation\">(</span>1ms<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    âœ“ should <span class=\"token keyword\">select</span> a random number based on Math.random <span class=\"token keyword\">if</span> skuId not available</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre> PASS  test/math.test.js</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  math</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    âœ“ <span class=\"token comment\">#should return result as a+b (1ms)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    âœ“ <span class=\"token comment\">#should return result as a*b (4ms)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>Test Suites: <span class=\"token number\">5</span> passed, <span class=\"token number\">5</span> total</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>Tests:       <span class=\"token number\">8</span> passed, <span class=\"token number\">8</span> total</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>Snapshots:   <span class=\"token number\">0</span> total</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>Time:        <span class=\"token number\">1</span>.075s</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>Ran all <span class=\"token builtin class-name\">test</span> suites.</pre></td></tr></table></figure><p><code>--watch</code>  å’Œ <code>--watchAll</code>  ç”¨æ¥ç›‘å¬æµ‹è¯•æ–‡ä»¶çš„å˜åŒ–</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Ran all <span class=\"token builtin class-name\">test</span> suites.</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Watch Usage</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> â€º Press f to run only failed tests.</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> â€º Press o to only run tests related to changed files.</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> â€º Press p to filter by a filename regex pattern.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> â€º Press t to filter by a <span class=\"token builtin class-name\">test</span> name regex pattern.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> â€º Press q to quit <span class=\"token function\">watch</span> mode.</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> â€º Press Enter to trigger a <span class=\"token builtin class-name\">test</span> run.</pre></td></tr></table></figure><p><code>--coverage</code>  ç”¨æ¥å½¢æˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>-----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>-------------------<span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>File       <span class=\"token operator\">|</span>  % Stmts <span class=\"token operator\">|</span> % Branch <span class=\"token operator\">|</span>  % Funcs <span class=\"token operator\">|</span>  % Lines <span class=\"token operator\">|</span> Uncovered Line <span class=\"token comment\">#s |</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>-----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>-------------------<span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>All files  <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>                   <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> getNum.js <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>                   <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre> math.js   <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>      <span class=\"token number\">100</span> <span class=\"token operator\">|</span>                   <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>-----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>----------<span class=\"token operator\">|</span>-------------------<span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Test Suites: <span class=\"token number\">5</span> passed, <span class=\"token number\">5</span> total</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>Tests:       <span class=\"token number\">8</span> passed, <span class=\"token number\">8</span> total</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>Snapshots:   <span class=\"token number\">0</span> total</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>Time:        <span class=\"token number\">1</span>.497s</pre></td></tr></table></figure><h3 id=\"jeståœ¨react-vueé¡¹ç›®ä¸­çš„åº”ç”¨\"><a class=\"anchor\" href=\"#jeståœ¨react-vueé¡¹ç›®ä¸­çš„åº”ç”¨\">#</a> Jest åœ¨ Reactã€Vue é¡¹ç›®ä¸­çš„åº”ç”¨</h3>\n<p>åœ¨ <code>create-react-app</code>  ä¸­çš„åº”ç”¨ï¼š</p>\n<p>å®‰è£…å¯¹åº”çš„ä¾èµ–ï¼š</p>\n<pre><code>npm install react-test-renderer enzyme enzyme-adapter-react-16 \n</code></pre>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FpcmJuYi9lbnp5bWU=\">Enzyme</span> æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„ React ç»„ä»¶æµ‹è¯•æµ‹è¯•åº“ã€‚</p>\n<blockquote>\n<p>Enzyme is a JavaScript Testing utility for React that makes it easier to test your React Components' output. You can also manipulate, traverse, and in some ways simulate runtime given the output.</p>\n<p>Enzyme's API is meant to be intuitive and flexible by mimicking jQuery's API for DOM manipulation and traversal</p>\n</blockquote>\n<p>éœ€è¦æ³¨æ„çš„ä¸¤ç‚¹æ˜¯ï¼š</p>\n<ul>\n<li>éœ€è¦é…ç½® Adapterï¼Œä¸åŒçš„ React çš„ Adapter ä¸åŒ</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Enzyme Adapter Package</th>\n<th>React semver compatibility</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>enzyme-adapter-react-16</code></td>\n<td><code>^16.4.0-0</code></td>\n</tr>\n<tr>\n<td><code>enzyme-adapter-react-16.3</code></td>\n<td><code>~16.3.0-0</code></td>\n</tr>\n<tr>\n<td><code>enzyme-adapter-react-16.2</code></td>\n<td><code>~16.2</code></td>\n</tr>\n<tr>\n<td><code>enzyme-adapter-react-16.1</code></td>\n<td><code>~16.0.0-0 || ~16.1</code></td>\n</tr>\n<tr>\n<td><code>enzyme-adapter-react-15</code></td>\n<td><code>^15.5.0</code></td>\n</tr>\n<tr>\n<td><code>enzyme-adapter-react-15.4</code></td>\n<td><code>15.0.0-0 - 15.4.x</code></td>\n</tr>\n<tr>\n<td><code>enzyme-adapter-react-14</code></td>\n<td><code>^0.14.0</code></td>\n</tr>\n<tr>\n<td><code>enzyme-adapter-react-13</code></td>\n<td><code>^0.13.0</code></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p>éœ€è¦åˆå§‹åŒ–é…ç½® <code>setUpTests.js</code></p>\n<p>å®˜æ–¹æ–‡æ¡£åœ¨ Package.json ä¸­è®¾ç½® jest é…ç½®ï¼Œå·²ç»è¿‡æ—¶ï¼ŒJest æ¡†æ¶æœ€æ–°ä¼šé»˜è®¤åŠ è½½æ–‡ä»¶ <code>src/setUpTests.js</code></p>\n</li>\n<li>\n<pre><code class=\"language-react\">import &#123; configure &#125; from 'enzyme';\nimport Adapter from 'enzyme-adapter-react-16'\n\nconfigure(&#123; adapter: new Adapter() &#125;)\n</code></pre>\n</li>\n</ul>\n<p>åœ¨ vue å·¥ç¨‹åŒ–é¡¹ç›®ä¸­ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"@vue/cli-plugin-unit-jest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.9.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">\"@vue/test-utils\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0-beta.29\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token property\">\"babel-core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"7.0.0-bridge.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token property\">\"babel-eslint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^10.0.1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token property\">\"babel-jest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^23.6.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token property\">\"babel-preset-env\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.7.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><p>æ·»åŠ å¦‚ä¸Šä¾èµ–ï¼Œ</p>\n<p>é…ç½® scripts:</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token string-property property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vue-cli-service test:unit\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><p>é…ç½® <code>jest.config.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token comment\">// å¤„ç† vue ç»“å°¾çš„æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token literal-property property\">moduleFileExtensions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">'js'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">'jsx'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">'json'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">//es6 è½¬ä¹‰</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token string-property property\">'^.+\\\\.vue$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'vue-jest'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token string-property property\">'.+\\\\.(css|styl|less|sass|scss|svg|png|jpg|ttf|woff|woff2)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'jest-transform-stub'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token string-property property\">'^.+\\\\.jsx?$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'babel-jest'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token literal-property property\">transformIgnorePatterns</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token string\">'/node_modules/'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token comment\">//cli é…ç½®äº† webpack åˆ«å</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token literal-property property\">moduleNameMapper</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token string-property property\">'^@/(.*)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;rootDir>/src/$1'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token literal-property property\">snapshotSerializers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token string\">'jest-serializer-vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token literal-property property\">testMatch</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token string\">'**/tests/unit/**/*.spec.(js|jsx|ts|tsx)|**/__tests__/*.(js|jsx|ts|tsx)'</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token literal-property property\">testURL</span><span class=\"token operator\">:</span> <span class=\"token string\">'http://localhost/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token literal-property property\">watchPlugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token string\">'jest-watch-typeahead/filename'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token string\">'jest-watch-typeahead/testname'</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š</p>\n<pre><code>\n</code></pre>\n<h2 id=\"ç®€çº¦ä¹‹ç¾ava\"><a class=\"anchor\" href=\"#ç®€çº¦ä¹‹ç¾ava\">#</a> ç®€çº¦ä¹‹ç¾ AVA</h2>\n<p>ç®€å•çš„è¯´ ava æ˜¯ mocha çš„æ›¿ä»£å“ï¼š</p>\n<ul>\n<li>es6 è¯­æ³•æ”¯æŒæ›´å¥½ï¼Œå¯¹ aysnc/await æœ‰æ”¯æŒ</li>\n<li>æ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼Œä½¿ç”¨ io å¹¶å‘ï¼Œå°±å¿…é¡»ä¿è¯æµ‹è¯•çš„åŸå­æ€§</li>\n<li>è¯­ä¹‰ä¸Šæ›´ç®€å•ï¼Œé›†ä¼—å®¶ä¹‹é•¿</li>\n</ul>\n<p>è™½ç„¶ JavaScript æ˜¯å•çº¿ç¨‹ï¼Œä½†åœ¨ Node.js é‡Œç”±äºå…¶å¼‚æ­¥çš„ç‰¹æ€§ä½¿å¾— IO å¯ä»¥å¹¶è¡Œã€‚AVA åˆ©ç”¨è¿™ä¸ªä¼˜ç‚¹è®©ä½ çš„æµ‹è¯•å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œè¿™å¯¹äº IO ç¹é‡çš„æµ‹è¯•ç‰¹åˆ«æœ‰ç”¨ã€‚å¦å¤–ï¼Œæµ‹è¯•æ–‡ä»¶å¯ä»¥åœ¨ä¸åŒçš„è¿›ç¨‹é‡Œå¹¶è¡Œè¿è¡Œï¼Œè®©æ¯ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶å¯ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½å’Œç‹¬ç«‹çš„ç¯å¢ƒã€‚</p>\n<h3 id=\"avaç‰¹ç‚¹\"><a class=\"anchor\" href=\"#avaç‰¹ç‚¹\">#</a> AVA ç‰¹ç‚¹</h3>\n<ul>\n<li>\n<p>è½»é‡å’Œé«˜æ•ˆ</p>\n</li>\n<li>\n<p>ç®€å•çš„æµ‹è¯•è¯­æ³•</p>\n</li>\n<li>\n<p>å¹¶å‘è¿è¡Œæµ‹è¯•</p>\n</li>\n<li>\n<p>å¼ºåˆ¶ç¼–å†™<strong>åŸå­æµ‹è¯•</strong></p>\n<p>ä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°ç»“æŸï¼Œä¸­é—´ä¸ä¼šåˆ‡æ¢åˆ°å¦ä¸€ä¸ªæµ‹è¯•</p>\n</li>\n<li>\n<p>æ²¡æœ‰éšè—çš„å…¨å±€å˜é‡</p>\n</li>\n<li>\n<p>ä¸ºæ¯ä¸ªæµ‹è¯•æ–‡ä»¶éš”ç¦»ç¯å¢ƒ</p>\n</li>\n<li>\n<p><strong>ç”¨ ES2015 ç¼–å†™æµ‹è¯•</strong></p>\n</li>\n<li>\n<p>æ”¯æŒ Promise</p>\n</li>\n<li>\n<p>æ”¯æŒ Generator</p>\n</li>\n<li>\n<p>æ”¯æŒ Async</p>\n</li>\n<li>\n<p>æ”¯æŒ Observable</p>\n</li>\n<li>\n<p>å¼ºåŒ–æ–­è¨€ä¿¡æ¯</p>\n</li>\n<li>\n<p>å¯é€‰çš„ TAP è¾“å‡ºæ˜¾ç¤º</p>\n<p><img data-src=\"assets/tap-reporter.png\" alt=\"img\" /></p>\n</li>\n<li>\n<p>ç®€æ˜çš„å †æ ˆè·Ÿè¸ª</p>\n</li>\n</ul>\n<h3 id=\"å®‰è£…å¼€å§‹\"><a class=\"anchor\" href=\"#å®‰è£…å¼€å§‹\">#</a> å®‰è£… &amp; å¼€å§‹</h3>\n<p>æƒ…æ™¯ä¸€ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>// åˆ›å»ºä¸€ä¸ªavaé¡¹ç›®</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">npm</span> init ava</pre></td></tr></table></figure><p>å½¢æˆ package.json</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"awesome-package\"</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ava\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t<span class=\"token property\">\"ava\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.0.0\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æƒ…æ™¯äºŒï¼šï¼ˆæ¨èï¼‰</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> init <span class=\"token parameter variable\">-y</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>// <span class=\"token function\">npm</span> <span class=\"token operator\">&amp;</span> cnpm</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-D</span> ava</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>// <span class=\"token function\">yarn</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> ava <span class=\"token parameter variable\">-D</span></pre></td></tr></table></figure><p>æµ‹è¯• ava æ­£å¸¸å®‰è£…ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>âœ npx ava <span class=\"token parameter variable\">--version</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">2.2</span>.0</pre></td></tr></table></figure><h3 id=\"ç¬¬ä¸€ä¸ªavaæµ‹è¯•ä¾‹å­\"><a class=\"anchor\" href=\"#ç¬¬ä¸€ä¸ªavaæµ‹è¯•ä¾‹å­\">#</a> ç¬¬ä¸€ä¸ª ava æµ‹è¯•ä¾‹å­</h3>\n<p>æµç¨‹ï¼š</p>\n<ol>\n<li>å¼•ç”¨ ava çš„æµ‹è¯• API</li>\n<li>æ‰§è¡Œæµ‹è¯•</li>\n<li>ä½¿ç”¨æ–­è¨€</li>\n</ol>\n<p>åˆ›å»º <code>test.js</code>  æ–‡ä»¶</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> test <span class=\"token keyword\">from</span> <span class=\"token string\">'ava'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">testfn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello ava'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  t<span class=\"token punctuation\">.</span><span class=\"token function\">pass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my first test'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token string\">'hello ava!!!!'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  t<span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> <span class=\"token string\">'hello ava!!!!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'add method'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">testfn</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  t<span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ava è‡ªåŠ¨æœç´¢å¦‚ä¸‹æ–‡ä»¶ç»“å°¾çš„æ–‡ä»¶ï¼š</p>\n<ul>\n<li><code>**/test.js</code></li>\n<li><code>**/test-*.js</code></li>\n<li><code>**/*.spec.js</code></li>\n<li><code>**/*.test.js</code></li>\n<li><code>**/test/**/*.js</code></li>\n<li><code>**/tests/**/*.js</code></li>\n<li><code>**/__tests__/**/*.js</code></li>\n</ul>\n<p>ava ä¸­çš„æ–­è¨€ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>.pass(<span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>.fail(<span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>.assert(value<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>.truthy(value<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>.falsy(value<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>.<span class=\"token boolean\">true</span>(value<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>.<span class=\"token boolean\">false</span>(value<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>.is(value<span class=\"token punctuation\">,</span> expected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>.not(value<span class=\"token punctuation\">,</span> expected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>.deepEqual(value<span class=\"token punctuation\">,</span> expected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>.notDeepEqual(value<span class=\"token punctuation\">,</span> expected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>.deepEqual()ã€‚</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>.throws(fn<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>expected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>.throwsAsync(thrower<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>expected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>.notThrows(fn<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>.notThrowsAsync(nonThrower<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>.regex(contents<span class=\"token punctuation\">,</span> regex<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>.notRegex(contents<span class=\"token punctuation\">,</span> regex<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>.snapshot(expected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>.snapshot(expected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>)</pre></td></tr></table></figure><h3 id=\"cliå‘½ä»¤-2\"><a class=\"anchor\" href=\"#cliå‘½ä»¤-2\">#</a> CLI å‘½ä»¤</h3>\n<p>ä½¿ç”¨ <code>--help</code>  å‘½ä»¤å»æŸ¥çœ‹ ava æ”¯æŒçš„ cli å‚æ•°</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>âœ npx ava <span class=\"token parameter variable\">--help</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  Testing can be a drag. AVA helps you get it done.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  Usage</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    ava <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span> <span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  Options</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    --watch, <span class=\"token parameter variable\">-w</span>             Re-run tests when tests and <span class=\"token builtin class-name\">source</span> files change</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    --match, <span class=\"token parameter variable\">-m</span>             Only run tests with matching title <span class=\"token punctuation\">(</span>Can be repeated<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    --update-snapshots, <span class=\"token parameter variable\">-u</span>  Update snapshots</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    --fail-fast             Stop after first <span class=\"token builtin class-name\">test</span> failure</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    --timeout, <span class=\"token parameter variable\">-T</span>           Set global <span class=\"token function\">timeout</span> <span class=\"token punctuation\">(</span>milliseconds or human-readable, e.g. 10s, 2m<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    --serial, <span class=\"token parameter variable\">-s</span>            Run tests serially</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    --concurrency, <span class=\"token parameter variable\">-c</span>       Max number of <span class=\"token builtin class-name\">test</span> files running at the same <span class=\"token function\">time</span> <span class=\"token punctuation\">(</span>Default: CPU cores<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    --verbose, <span class=\"token parameter variable\">-v</span>           Enable verbose output</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    --tap, <span class=\"token parameter variable\">-t</span>               Generate TAP output</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token parameter variable\">--color</span>                 Force color output</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    --no-color              Disable color output</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    --reset-cache           Reset AVA's compilation cache and <span class=\"token builtin class-name\">exit</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token parameter variable\">--config</span>                JavaScript <span class=\"token function\">file</span> <span class=\"token keyword\">for</span> AVA to <span class=\"token builtin class-name\">read</span> its config from, instead of using package.json</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                            or ava.config.js files</pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  Examples</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    ava</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    ava test.js test2.js</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    ava test-*.js</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    ava <span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  The above relies on your shell expanding the glob patterns.</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  Without arguments, AVA uses the following patterns:</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    **/test.js **/test-*.js **/*.spec.js **/*.test.js **/test/**/*.js **/tests/**/*.js **/__tests__/**/*.js</pre></td></tr></table></figure><h4 id=\"æ–‡ä»¶åŒ¹é…\"><a class=\"anchor\" href=\"#æ–‡ä»¶åŒ¹é…\">#</a> æ–‡ä»¶åŒ¹é…</h4>\n<p>ä½¿ç”¨ <code>match</code>  æŒ‡ä»¤ï¼ŒåŒ¹é…å¯¹åº”éœ€è¦æµ‹è¯•çš„æ–‡ä»¶ï¼š</p>\n<p>åŒ¹é…æ ‡é¢˜ä»¥ <code>foo</code> ï¼šç»“å°¾</p>\n<pre><code>npx ava --match ='* foo'\n</code></pre>\n<p>åŒ¹é…æ ‡é¢˜ä»¥ <code>foo</code> ï¼š</p>\n<pre><code>npx ava --match ='foo *'\n</code></pre>\n<p>åŒ¹é…æ ‡é¢˜åŒ…å« <code>foo</code> ï¼š</p>\n<pre><code>npx ava --match ='* foo *'\n</code></pre>\n<p>åŒ¹é…æ˜¯å®Œå…¨ç›¸åŒ  <code>foo</code> ï¼š</p>\n<pre><code>npx ava --match ='foo'\n</code></pre>\n<p>åŒ¹é…æ ‡é¢˜ä¸åŒ…å« <code>foo</code> ï¼š</p>\n<pre><code>npx ava --match ='ï¼* foo *'\n</code></pre>\n<p>åŒ¹é…ä»¥ä¸‹ <code>foo</code>  ç»“å°¾çš„æ ‡é¢˜ <code>bar</code> ï¼š</p>\n<pre><code>npx ava --match ='foo * bar'\n</code></pre>\n<p>åŒ¹é… <code>foo</code>  ä»¥ <code>bar</code> ï¼šå¼€å¤´æˆ–ç»“å°¾çš„æ ‡é¢˜ï¼š</p>\n<pre><code>npx ava --match ='foo *' -  match ='* bar'\n</code></pre>\n<h4 id=\"å…³äºreporter\"><a class=\"anchor\" href=\"#å…³äºreporter\">#</a> å…³äº reporter</h4>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒAVA ä½¿ç”¨æœ€å°çš„æŠ¥å‘Šï¼š</p>\n<p><a href=\"https://github.com/avajs/ava/blob/master/media/mini-reporter.gif\"><img data-src=\"assets/mini-reporter.gif\" alt=\"img\" /></a></p>\n<p>ä½¿ç”¨è¯¥ <code>--verbose</code>  æ ‡å¿—å¯ç”¨è¯¦ç»†çš„æŠ¥å‘Šè€…ã€‚é™¤éå¯ç”¨ TAP æŠ¥å‘Šï¼Œå¦åˆ™å§‹ç»ˆåœ¨ CI ç¯å¢ƒä¸­ä½¿ç”¨æ­¤é€‰é¡¹ã€‚</p>\n<p><a href=\"https://github.com/avajs/ava/blob/master/media/verbose-reporter.png\"><img data-src=\"assets/verbose-reporter.png\" alt=\"img\" /></a></p>\n<p><strong>TAP æŠ¥å‘Šï¼ˆæ¨èï¼‰</strong></p>\n<p>AVA æ”¯æŒ TAP æ ¼å¼ï¼Œå› æ­¤ä¸ä»»ä½• TAP æŠ¥å‘Šå™¨å…¼å®¹ã€‚ä½¿ç”¨è¯¥ <code>--tap</code>  æ ‡å¿—å¯ç”¨ TAP è¾“å‡ºã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ npx ava <span class=\"token parameter variable\">--tap</span> <span class=\"token operator\">|</span> npx tap-nyan</pre></td></tr></table></figure><p><a href=\"https://github.com/avajs/ava/blob/master/media/tap-reporter.png\"><img data-src=\"assets/tap-reporter-20190709154342692.png\" alt=\"img\" /></a></p>\n<p>è¿™é‡Œæœ‰ä¸€äº›æ ¼å¼ï¼š</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Njb3R0Y29yZ2FuL3RhcC1kb3Q=\">tap-dot</span> - Dotted output.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Njb3R0Y29yZ2FuL3RhcC1zcGVj\">tap-spec</span> - Mocha-like spec reporter.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2NhbHZpbm1ldGNhbGYvdGFwLW55YW4=\">tap-nyan</span> - Nyan cat.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2d1bW1lc3Nvbi90YXAtbWlu\">tap-min</span> - Minimal output.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL25hbXVvbC90YXAtZGlmZmxldA==\">tap-difflet</span> - Minimal output with diffing.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2F4cm9zcy90YXAtZGlmZg==\">tap-diff</span> - Human-friendly output with diffing.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2pvZXliYWtlci90YXAtc2ltcGxl\">tap-simple</span> - Simple output.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3N1YnN0YWNrL2ZhdWNldA==\">faucet</span> - Human-readable summarizer.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2lzYWFjcy90YXAtbW9jaGEtcmVwb3J0ZXI=\">tap-mocha-reporter</span> - Use any of the <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2lzYWFjcy90YXAtbW9jaGEtcmVwb3J0ZXIvdHJlZS9tYXN0ZXIvbGliL3JlcG9ydGVycw==\">Mocha reporters</span>.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3pvdWJpbi90YXAtc3VtbWFyeQ==\">tap-summary</span> - Summarized output.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2NsdXgvdGFwLXBlc3NpbWlzdA==\">tap-pessimist</span> - Only shows failed tests.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Rvb2xuZXNzL3RhcC1wcmV0dGlmeQ==\">tap-prettify</span> - Nice readable output with diffing.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3N1YnN0YWNrL3RhcC1jb2xvcml6ZQ==\">tap-colorize</span> - Colorize the output while preserving machine-readability.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2p1bGlhbmdydWJlci90YXAtYmFpbA==\">tap-bail</span> - Bail out when the first test fails.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2F4cm9zcy90YXAtbm90aWZ5\">tap-notify</span> - Notifier for macOS, Linux and Windows.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2d1bW1lc3Nvbi90YXAtanNvbg==\">tap-json</span> - JSON output.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3lvdmFzeDIvYXZhLXRhcC1qc29u\">ava-tap-json</span> - JSON output with AVA compatibility.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FnaGFzc2VtaS90YXAteHVuaXQ=\">tap-xunit</span> - xUnit output.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Ntb2NrbGUvdGFwLXRlYW1jaXR5\">tap-teamcity</span> - Output for TeamCity.</li>\n</ul>\n<h4 id=\"å¿«ç…§åŠŸèƒ½\"><a class=\"anchor\" href=\"#å¿«ç…§åŠŸèƒ½\">#</a> å¿«ç…§åŠŸèƒ½</h4>\n<p>ava è‡ªåŠ¨è¿›è¡Œé¡¹ç›®æµ‹è¯•å¿«ç…§ï¼Œå¦‚æœæ–‡ä»¶æ”¾ç½®åœ¨ <code>test</code>  æˆ–è€… <code>tests</code>  ç›®å½•ï¼Œåˆ™å¿«ç…§ä¼šæ”¾ç½®åœ¨ <code>snapshots</code>  ç›®å½•ã€‚å¦‚æœæµ‹è¯•æ”¾ç½®åœ¨ <code>__test__</code> ç›®å½•ï¼Œåˆ™å¿«ç…§æ”¾ç½®åœ¨ <code>__snapshots__</code> ç›®å½•</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ava --update-snapshots</pre></td></tr></table></figure><p>å¯ä»¥æŒ‡å®šä¸€ä¸ªå›ºå®šä½ç½®ï¼Œä»¥ä¾¿åœ¨ AVA çš„ <code>package.json</code>  é…ç½®ä¸­å­˜å‚¨å¿«ç…§æ–‡ä»¶ï¼š</p>\n<p><strong>package.jsonï¼š</strong></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t <span class=\"token string\">\"ava\"</span>ï¼š<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t\t <span class=\"token string\">\"snapshotDir\"</span>ï¼š<span class=\"token string\">\"è‡ªå®šä¹‰ç›®å½•\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"è®¾ç½®è¶…æ—¶\"><a class=\"anchor\" href=\"#è®¾ç½®è¶…æ—¶\">#</a> è®¾ç½®è¶…æ—¶</h4>\n<p>AVA ä¸­çš„è¶…æ—¶è¡Œä¸ºä¸å…¶ä»–æµ‹è¯•æ¡†æ¶ä¸­çš„è¡Œä¸ºä¸åŒã€‚AVA åœ¨æ¯æ¬¡æµ‹è¯•åé‡ç½®è®¡æ—¶å™¨ï¼Œå¦‚æœåœ¨æŒ‡å®šçš„è¶…æ—¶å†…æ²¡æœ‰æ”¶åˆ°æ–°çš„æµ‹è¯•ç»“æœï¼Œåˆ™å¼ºåˆ¶æµ‹è¯•é€€å‡ºã€‚è¿™å¯ç”¨äºå¤„ç†åœæ»çš„æµ‹è¯•ã€‚</p>\n<p><em>æ²¡æœ‰é»˜è®¤è¶…æ—¶ã€‚</em></p>\n<p>æ‚¨å¯ä»¥é…ç½®ä½¿ç”¨è¶…æ—¶ <code>--timeout</code>  å‘½ä»¤è¡Œé€‰é¡¹ï¼Œæˆ–é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ã€‚å®ƒä»¬å¯ä»¥ä»¥äººç±»å¯è¯»çš„æ–¹å¼è®¾ç½®ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 10 ç§’</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>npx ava <span class=\"token parameter variable\">--timeout</span> <span class=\"token operator\">=</span> 10s </pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 2 åˆ†é’Ÿ</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>npx ava <span class=\"token parameter variable\">--timeout</span> <span class=\"token operator\">=</span> 2m </pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 100 æ¯«ç§’</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>npx ava <span class=\"token parameter variable\">--timeout</span> <span class=\"token operator\">=</span> <span class=\"token number\">100</span></pre></td></tr></table></figure><p>è¿˜å¯ä»¥ä¸ºæ¯ä¸ªæµ‹è¯•å•ç‹¬è®¾ç½®è¶…æ—¶ã€‚æ¯æ¬¡è¿›è¡Œæ–­è¨€æ—¶éƒ½ä¼šé‡ç½®è¿™äº›è¶…æ—¶ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\tt<span class=\"token punctuation\">.</span><span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100 milliseconds</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token comment\">// Write your assertions here</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"å…¶ä»–avaè®¾ç½®ç›¸å…³\"><a class=\"anchor\" href=\"#å…¶ä»–avaè®¾ç½®ç›¸å…³\">#</a> å…¶ä»– ava è®¾ç½®ç›¸å…³</h3>\n<h4 id=\"eslint\"><a class=\"anchor\" href=\"#eslint\">#</a> ESLint</h4>\n<p>å¦‚æœä½¿ç”¨äº† ESLintï¼Œè¯·æ·»åŠ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2F2YWpzL2VzbGludC1wbHVnaW4tYXZh\"> eslint-plugin-ava</span></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\tplugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t\t<span class=\"token string\">\"ava\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å¼‚æ­¥ç›¸å…³\"><a class=\"anchor\" href=\"#å¼‚æ­¥ç›¸å…³\">#</a> å¼‚æ­¥ç›¸å…³</h4>\n<p>å¦‚æœå¼‚æ­¥æ“ä½œä½¿ç”¨ promisesï¼Œåˆ™åº”è¿”å› promiseï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetches foo'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t\tt<span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æ›´å¥½çš„æ˜¯ï¼Œä½¿ç”¨ <code>async</code> /  <code>await</code> ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetches foo'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\tt<span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"æµ‹è¯•ç¯å¢ƒå¸®æ‰‹karma\"><a class=\"anchor\" href=\"#æµ‹è¯•ç¯å¢ƒå¸®æ‰‹karma\">#</a> æµ‹è¯•ç¯å¢ƒ &amp; å¸®æ‰‹ Karma</h2>\n<p>Karma æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„ JavaScript æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ç®¡ç†å·¥å…·ï¼ˆTest Runnerï¼‰ã€‚è¯¥å·¥å…·å¯ç”¨äºæµ‹è¯•æ‰€æœ‰ä¸»æµ Web æµè§ˆå™¨ï¼Œä¹Ÿå¯ä»¥é›†æˆåˆ° CIï¼ˆContinuous integrationï¼‰å·¥å…·ï¼Œè¿˜å¯ä»¥å’Œå…¶ä»–ä»£ç ç¼–è¾‘å™¨ä¸€èµ·ä½¿ç”¨ã€‚</p>\n<p>Karma ä¼šç›‘æ§é…ç½®æ–‡ä»¶ä¸­æ‰€æŒ‡å®šçš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ¯å½“æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œå®ƒéƒ½ä¼šå‘æµ‹è¯•æœåŠ¡å™¨å‘é€ä¿¡å·ï¼Œæ¥é€šçŸ¥æ‰€æœ‰çš„æµè§ˆå™¨å†æ¬¡è¿è¡Œæµ‹è¯•ä»£ç ã€‚æ­¤æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡æ–°åŠ è½½æºæ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œæµ‹è¯•ä»£ç ã€‚å…¶ç»“æœä¼šä¼ é€’å›æœåŠ¡å™¨ï¼Œå¹¶ä»¥æŸç§å½¢å¼æ˜¾ç¤ºç»™å¼€å‘è€…ã€‚</p>\n<p>è®¿é—®æµè§ˆå™¨æ‰§è¡Œç»“æœï¼Œå¯é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼</p>\n<ul>\n<li>æ‰‹å·¥æ–¹å¼ - é€šè¿‡æµè§ˆå™¨</li>\n<li>è‡ªåŠ¨æ–¹å¼ - è®© karma æ¥å¯åŠ¨å¯¹åº”çš„æµè§ˆå™¨</li>\n</ul>\n<h3 id=\"å·¥ä½œåŸç†ç®€ä»‹\"><a class=\"anchor\" href=\"#å·¥ä½œåŸç†ç®€ä»‹\">#</a> å·¥ä½œåŸç†ç®€ä»‹</h3>\n<p><code>karma</code>  æ˜¯ä¸€ä¸ªå…¸å‹çš„  <code>C/S</code>  ç¨‹åºï¼ŒåŒ…å« client å’Œ server ï¼Œé€šè®¯æ–¹å¼åŸºäº  <code>Http</code>  ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŸºæœ¬éƒ½è¿è¡Œåœ¨å¼€å‘è€…æœ¬åœ°æœºå™¨ä¸Šã€‚</p>\n<p>ä¸€ä¸ªæœåŠ¡ç«¯å®ä¾‹å¯¹åº”ä¸€ä¸ªé¡¹ç›®ï¼Œå‡å¦‚æƒ³åŒæ—¶è¿è¡Œå¤šä¸ªé¡¹ç›®ï¼Œå¾—åŒæ—¶å¼€å¯å¤šä¸ªæœåŠ¡ç«¯å®ä¾‹ã€‚</p>\n<p><strong>Server</strong></p>\n<p><code>Server</code>  æ˜¯æ¡†æ¶çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ï¼Œå®ƒå†…éƒ¨ä¿å­˜äº†æ‰€æœ‰çš„ç¨‹åºè¿è¡ŒçŠ¶æ€ï¼Œæ¯”å¦‚ client è¿æ¥ï¼Œå½“å‰è¿è¡Œçš„å•æµ‹æ–‡ä»¶ï¼Œæ ¹æ®è¿™äº›æ•°æ®çŠ¶æ€ï¼Œå®ƒæä¾›äº†ä¸‹é¢å‡ ä¸ªåŠŸèƒ½ï¼Œ ä¸‹å›¾æ˜¯ server çš„ç»“æ„</p>\n<p><img data-src=\"assets/TB13X9xLXXXXXXoaXXXDUoU9pXX-902-329.png\" alt=\"karma_server\" /></p>\n<ul>\n<li>ç›‘å¬æ–‡ä»¶</li>\n<li>ä¸ client è¿›è¡Œé€šè®¯</li>\n<li>å‘å¼€å‘è€…è¾“å‡ºæµ‹è¯•ç»“æœ</li>\n<li>æä¾› client ç«¯æ‰€éœ€çš„èµ„æºæ–‡ä»¶</li>\n</ul>\n<p><strong>Client</strong></p>\n<p>client æ˜¯å•æµ‹æœ€ç»ˆè¿è¡Œçš„åœ°æ–¹ï¼Œç±»ä¼¼ä¸€ä¸ª web app ï¼Œ è·Ÿ server ç«¯é€šè®¯åˆ©ç”¨  <code>socket.io</code> ï¼Œ æ‰§è¡Œå•æµ‹åœ¨ä¸€ä¸ªç‹¬ç«‹çš„  <code>iframe</code>  ä¸­ã€‚ä¸‹é¢æ˜¯å®ƒçš„ç»“æ„å›¾</p>\n<p><img data-src=\"assets/TB1jTKwLXXXXXX.aXXX0KhCSFXX-619-472.png\" alt=\"karma_impl_client\" /></p>\n<p>client å’Œ server ç«¯é€šè®¯é‡‡ç”¨  <code>socket.io</code></p>\n<ul>\n<li>client ç«¯ä¼šå‘é€è¿™äº›æ¶ˆæ¯</li>\n</ul>\n<p><img data-src=\"assets/TB1XXuILXXXXXcAXFXX.hdJKpXX-918-179.png\" alt=\"karma_impl_client_message_c\" /></p>\n<ul>\n<li>server ç«¯ä¼šå‘é€è¿™äº›æ¶ˆæ¯</li>\n</ul>\n<p><img data-src=\"assets/TB1PvisLXXXXXcqaXXXEHlCNpXX-896-103.png\" alt=\"karma_impl_client_message_s\" /></p>\n<h3 id=\"å®‰è£…karma\"><a class=\"anchor\" href=\"#å®‰è£…karma\">#</a> å®‰è£… Karma</h3>\n<p>å¯¹äº Nodejs ç‰ˆæœ¬çš„è¦æ±‚ï¼š</p>\n<blockquote>\n<p>Karma currently works on Node.js <strong>6.x</strong>, <strong>8.x</strong>, and <strong>10.x</strong>. See <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rYXJtYS1ydW5uZXIuZ2l0aHViLmlvLzQuMC9pbnRyby9mYXEuaHRtbA==\">FAQ</span> for more info.</p>\n</blockquote>\n<ol>\n<li>\n<p>å…¨å±€å®‰è£…</p>\n<pre><code>$npm install -g karma\n</code></pre>\n<p>å®‰è£… Karma å‘½ä»¤ä¼šåˆ°å…¨å±€çš„  <code>node_modules</code>  ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ä½ç½®ç›´æ¥è¿è¡Œ karma å‘½ä»¤ã€‚</p>\n<pre><code>npm install -g karma-cli\n</code></pre>\n<p>æ­¤å‘½ä»¤ç”¨æ¥å®‰è£…  <code>karma-cli</code> ï¼Œå®ƒä¼šåœ¨å½“å‰ç›®å½•ä¸‹å¯»æ‰¾ karma çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸€ä¸ªç³»ç»Ÿå†…è¿è¡Œå¤šä¸ªç‰ˆæœ¬çš„ Karmaã€‚</p>\n</li>\n<li>\n<p>æœ¬åœ°å®‰è£…</p>\n<pre><code>$ npm install karma --save-dev\n</code></pre>\n<p>å®‰è£… Karma å‘½ä»¤åˆ°å½“å‰  <code>node_modules</code>  ç›®å½•ä¸‹ï¼Œæ­¤æ—¶ï¼Œå¦‚æœéœ€è¦æ‰§è¡Œ karma å‘½ä»¤ï¼Œå°±éœ€è¦è¿™æ ·</p>\n<pre><code>./node_modules/.bin/karma\n\nnpx karma --version\n</code></pre>\n</li>\n</ol>\n<h3 id=\"é…ç½®karma\"><a class=\"anchor\" href=\"#é…ç½®karma\">#</a> é…ç½® Karma</h3>\n<p>karma é…ç½®æ–‡ä»¶å¯ä»¥ç”¨ JavaScriptï¼ŒCoffeeScript æˆ– TypeScript ç¼–å†™ï¼Œå¹¶ä½œä¸ºå¸¸è§„ Node.js æ¨¡å—åŠ è½½ã€‚</p>\n<p>é™¤éä½œä¸ºå‚æ•°æä¾›ï¼Œå¦åˆ™ Karma CLI å°†åœ¨ä»¥ä¸‹ä½ç½®ä»¥è¯¥é¡ºåº (ä»ä¸Šè‡³ä¸‹) æŸ¥æ‰¾é…ç½®æ–‡ä»¶</p>\n<ul>\n<li><code>./karma.conf.js</code></li>\n<li><code>./karma.conf.coffee</code></li>\n<li><code>./karma.conf.ts</code></li>\n<li><code>./.config/karma.conf.js</code></li>\n<li><code>./.config/karma.conf.coffee</code></li>\n<li><code>./.config/karma.conf.ts</code></li>\n</ul>\n<p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®ä»£ç é€šè¿‡è®¾ç½® <code>module.exports</code>  æŒ‡å‘ä¸€ä¸ªæ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼šé…ç½®å¯¹è±¡ã€‚</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// karma.conf.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  config<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token literal-property property\">basePath</span><span class=\"token operator\">:</span> <span class=\"token string\">'../..'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">frameworks</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'jasmine'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">//...</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre># karma<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>coffee</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  config<span class=\"token punctuation\">.</span>set</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token literal-property property\">basePath</span><span class=\"token operator\">:</span> <span class=\"token string\">'../..'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token literal-property property\">frameworks</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'jasmine'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    # <span class=\"token operator\">...</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// karma.conf.ts</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  config<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token literal-property property\">basePath</span><span class=\"token operator\">:</span> <span class=\"token string\">'../..'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token literal-property property\">frameworks</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'jasmine'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">//...</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>å…³äº typescript çš„æ”¯æŒï¼Œéœ€è¦ä½¿ç”¨åˆ° <code>ts-node</code> ï¼Œé…ç½® ts-node ä»¥ä½¿ç”¨ <code>commonjs</code>  æ¨¡å—æ ¼</p>\n</blockquote>\n<p>é…ç½®æ–‡ä»¶ä¸­çš„åŸºæœ¬çš„å±æ€§ä»‹ç»ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rYXJtYS1ydW5uZXIuZ2l0aHViLmlvLzQuMC9jb25maWcvY29uZmlndXJhdGlvbi1maWxlLmh0bWw=\">Overview</span></p>\n<p>ä½¿ç”¨ CLI å·¥å…·ï¼Œå¿«é€Ÿåˆ›å»ºé…ç½®</p>\n<p>å¼€å§‹é…ç½®</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>~/Downloads/Demo is ğŸ“¦ v1.0.0 via â¬¢ v10.16.0 </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>âœ npx karma init</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># å¦‚æœåœ¨åº”ç”¨ä¸­ç”¨åˆ°äº†å…¶å®ƒçš„æµ‹è¯•æ¡†æ¶ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬å®‰è£…å®ƒä»¬æ‰€å¯¹åº”çš„æ’ä»¶ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­æ ‡æ³¨å®ƒä»¬ï¼ˆè¯¦è§ karma.conf.js ä¸­çš„ plugins é¡¹ï¼‰</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Which testing framework <span class=\"token keyword\">do</span> you want to use ?</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Press tab to list possible options. Enter to move to the next question.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">></span> jasmine</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># mocha</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># qunit</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># nodeunit</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># nunit</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># Require.js æ˜¯å¼‚æ­¥åŠ è½½è§„èŒƒï¼ˆAMDï¼‰çš„å®ç°ã€‚å¸¸è¢«ä½œä¸ºåŸºç¡€ä»£ç åº“ï¼Œåº”ç”¨åœ¨äº†å¾ˆå¤šçš„é¡¹ç›®ä¸æ¡†æ¶ä¹‹ä¸­ï¼Œä¾‹å¦‚ Dojo, AngularJs ç­‰</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>Do you want to use Require.js ?</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>This will <span class=\"token function\">add</span> Require.js plugin.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>Press tab to list possible options. Enter to move to the next question.</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">></span> no</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># yes</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># é€‰æ‹©éœ€è¦è¿è¡Œæµ‹è¯•ç”¨ä¾‹çš„æµè§ˆå™¨ã€‚éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œå¿…é¡»ä¿è¯æ‰€å¯¹åº”çš„æµè§ˆå™¨æ’ä»¶å·²ç»å®‰è£…æˆåŠŸã€‚</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>Do you want to capture any browsers automatically ?</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>Press tab to list possible options. Enter empty string to move to the next question.</pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token operator\">></span> Chrome</pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># ChromeHeadless</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># ChromeCanary</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># Firefox</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># Safari</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># PhantomJS</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># Opera</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># IE</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># é€‰æ‹©æµ‹è¯•ç”¨ä¾‹æ‰€åœ¨çš„ç›®å½•ä½ç½®ã€‚Karma æ”¯æŒé€šé…ç¬¦çš„æ–¹å¼é…ç½®æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¾‹å¦‚ *.js, test/**/*.js ç­‰ã€‚å¦‚æœç›®å½•æˆ–æ–‡ä»¶ä½¿ç”¨ç›¸å¯¹ä½ç½®ï¼Œè¦æ¸…æ¥šåœ°æ˜¯ï¼Œæ­¤æ—¶çš„è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰è¿è¡Œ karma å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ã€‚</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>What is the location of your <span class=\"token builtin class-name\">source</span> and <span class=\"token builtin class-name\">test</span> files ?</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>You can use glob patterns, eg. <span class=\"token string\">\"js/*.js\"</span> or <span class=\"token string\">\"test/**/*Spec.js\"</span><span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>Enter empty string to move to the next question.</pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token operator\">></span> src/*js</pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\"># ç›®å½•ä¸­ä¸åŒ…æ‹¬çš„é‚£äº›æ–‡ä»¶ã€‚</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>Should any of the files included by the previous patterns be excluded ?</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>You can use glob patterns, eg. <span class=\"token string\">\"**/*.swp\"</span><span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>Enter empty string to move to the next question.</pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\"># æ˜¯å¦éœ€è¦ Karma è‡ªåŠ¨ç›‘å¬æ–‡ä»¶ï¼Ÿå¹¶ä¸”æ–‡ä»¶ä¸€æ—¦è¢«ä¿®æ”¹ï¼Œå°±é‡æ–°è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Ÿ</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>Do you want Karma to <span class=\"token function\">watch</span> all the files and run the tests on change ?</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>Press tab to list possible options.</pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token operator\">></span> <span class=\"token function\">yes</span></pre></td></tr></table></figure><p>ç”Ÿæˆäº†ä¸€ä¸ª <code>karma.conf.js</code>  æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// Karma configuration</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// Generated on Wed Jul 10 2019 22:46:32 GMT+0800 (GMT+08:00)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  config<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// base path that will be used to resolve all patterns (eg. files, exclude)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">basePath</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// frameworks to use</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// available frameworks: https://npmjs.org/browse/keyword/karma-adapter</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token literal-property property\">frameworks</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'mocha'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// list of files / patterns to load in the browser</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token string\">'src/*js'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\">// list of files / patterns to exclude</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\">// preprocess matching files before serving them to the browser</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token comment\">// available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token literal-property property\">preprocessors</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token comment\">// test results reporter to use</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token comment\">// possible values: 'dots', 'progress'</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\">// available reporters: https://npmjs.org/browse/keyword/karma-reporter</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token literal-property property\">reporters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'progress'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token comment\">// web server port</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token literal-property property\">port</span><span class=\"token operator\">:</span> <span class=\"token number\">9876</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token comment\">// enable / disable colors in the output (reporters and logs)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token literal-property property\">colors</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token comment\">// level of logging</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token comment\">// possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token literal-property property\">logLevel</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span><span class=\"token constant\">LOG_INFO</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token comment\">// enable / disable watching file and executing tests whenever any file changes</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token literal-property property\">autoWatch</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token comment\">// start these browsers</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token comment\">// available browser launchers: https://npmjs.org/browse/keyword/karma-launcher</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token literal-property property\">browsers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Chrome'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token comment\">// Continuous Integration mode</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token comment\">// if true, Karma captures browsers, runs the tests and exits</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token literal-property property\">singleRun</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token comment\">// Concurrency level</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token comment\">// how many browser should be started simultaneous</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token literal-property property\">concurrency</span><span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"karmaç¤ºä¾‹\"><a class=\"anchor\" href=\"#karmaç¤ºä¾‹\">#</a> karma ç¤ºä¾‹</h3>\n<p>ç›®æ ‡ ï¼š</p>\n<ul>\n<li>babel æ”¯æŒï¼ŒES6 è¯­æ³•æ”¯æŒ</li>\n<li>mocha ä¸ chai æ”¯æŒ</li>\n<li>karma ä¸ chromeã€webpack å¯¹æ¥</li>\n</ul>\n<p>è¯´æ˜ï¼š</p>\n<p>Karma å¯¹ babel æ”¯æŒçš„ï¼Œä¸€ä¸ªå¯é€‰é¡¹ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2JhYmVsL2thcm1hLWJhYmVsLXByZXByb2Nlc3Nvcg==\">karma-babel-preprocessor</span>ï¼Œä½†æ˜¯ï¼š</p>\n<blockquote>\n<p>babel and karma-babel-preprocessor only convert ES6 modules to CommonJS/AMD/SystemJS/UMD**. If you choose CommonJS, you still need to resolve and concatenate CommonJS modules on your own**. We recommend <strong>karma-browserify + babelify</strong> or <strong>webpack + babel-loader</strong> in such cases.</p>\n</blockquote>\n<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬é€‰æ‹©äº† webpack</p>\n<ol>\n<li>\n<p>å®‰è£…ä¾èµ–</p>\n<pre><code>npm install @babel/core @babel/preset-env chai mocha webpack webpack-cli babel-loader -D\n</code></pre>\n</li>\n<li>\n<p>å®‰è£… karma çš„é€‚é…å™¨</p>\n<pre><code>npm install karma-webpack karma-chrome-launcher karma-mocha karma-chai -D\n</code></pre>\n</li>\n<li>\n<p>é…ç½® <code>karma.config.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// Karma configuration</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// Generated on Thu Jul 11 2019 23:23:44 GMT+0800 (GMT+08:00)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  config<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// base path that will be used to resolve all patterns (eg. files, exclude)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">basePath</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// frameworks to use</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// available frameworks: https://npmjs.org/browse/keyword/karma-adapter</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token literal-property property\">frameworks</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'mocha'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// list of files / patterns to load in the browser</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token string\">'src/**/*.js'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token string\">'test/**/*.js'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// ....</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\">// preprocess matching files before serving them to the browser</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\">// available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token literal-property property\">preprocessors</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token string-property property\">'src/**/*.js'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'webpack'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token string-property property\">'test/**/*.js'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'webpack'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token literal-property property\">webpack</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">\"none\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token literal-property property\">fs</span><span class=\"token operator\">:</span> <span class=\"token string\">'empty'</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.js?$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-loader\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">presets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/env\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre> </pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token comment\">// ....</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token string\">'karma-mocha'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token string\">'karma-chai'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>      <span class=\"token string\">'karma-chrome-launcher'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>      <span class=\"token string\">'karma-webpack'</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>ä¹¦å†™æµ‹è¯•ç”¨ä¾‹ <code>test.js</code> ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> describe <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mocha\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> expect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'chai'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'first test'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello mocha and karma'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello mocha'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>å¼€å§‹æµ‹è¯•ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>npx karma start</pre></td></tr></table></figure><p>æ·»åŠ åˆ° <code>package.json</code></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"karma\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"karma start\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨ï¼Œ <code>npm run karma</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>âœ npx karma start</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>â„¹ ï½¢wdmï½£: Hash: 9d2c943b68425fd58dd0</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Version: webpack <span class=\"token number\">4.35</span>.3</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Time: 53ms</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Built at: <span class=\"token number\">2019</span>-07-12 <span class=\"token number\">5</span>:07:49 PM</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>â„¹ ï½¢wdmï½£: Compiled successfully.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>â„¹ ï½¢wdmï½£: Compiling<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>âš  ï½¢wdmï½£: Hash: cca8316f4bd5855fc4de</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Version: webpack <span class=\"token number\">4.35</span>.3</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>Time: 2414ms</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>Built at: <span class=\"token number\">2019</span>-07-12 <span class=\"token number\">5</span>:07:52 PM</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>       Asset      Size  Chunks             Chunk Names</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>src/index.js  <span class=\"token number\">3.62</span> KiB       <span class=\"token number\">0</span>  <span class=\"token punctuation\">[</span>emitted<span class=\"token punctuation\">]</span>  src/index</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>test/test.js  <span class=\"token number\">1010</span> KiB       <span class=\"token number\">1</span>  <span class=\"token punctuation\">[</span>emitted<span class=\"token punctuation\">]</span>  test/test</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>Entrypoint src/index <span class=\"token operator\">=</span> src/index.js</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>Entrypoint test/test <span class=\"token operator\">=</span> test/test.js</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> ./src/index.js <span class=\"token number\">27</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> ./test/test.js <span class=\"token number\">223</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> ./node_modules/mocha/browser-entry.js <span class=\"token number\">4.19</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> ./node_modules/process/browser.js <span class=\"token number\">4.96</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>webpack<span class=\"token punctuation\">)</span>/buildin/global.js <span class=\"token number\">878</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> ./node_modules/browser-stdout/index.js <span class=\"token number\">662</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span> ./node_modules/stream-browserify/index.js <span class=\"token number\">3.53</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">36</span><span class=\"token punctuation\">]</span> ./node_modules/util/util.js <span class=\"token number\">19</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">38</span><span class=\"token punctuation\">]</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">21.8</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">39</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>webpack<span class=\"token punctuation\">)</span>/buildin/module.js <span class=\"token number\">552</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">]</span> ./node_modules/escape-string-regexp/index.js <span class=\"token number\">230</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">41</span><span class=\"token punctuation\">]</span> path <span class=\"token punctuation\">(</span>ignored<span class=\"token punctuation\">)</span> <span class=\"token number\">15</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">42</span><span class=\"token punctuation\">]</span> ./node_modules/mocha/lib/reporters/index.js <span class=\"token number\">945</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">105</span><span class=\"token punctuation\">]</span> ./node_modules/chai/index.js <span class=\"token number\">39</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">106</span><span class=\"token punctuation\">]</span> ./node_modules/chai/lib/chai.js <span class=\"token number\">1.22</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    + <span class=\"token number\">128</span> hidden modules</pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">217</span>:20-37</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"36\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"37\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">222</span>:24-70</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"41\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"42\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">266</span>:24-35</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"46\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"47\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">313</span>:35-48</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"51\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"52\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">329</span>:23-44</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"56\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"57\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>â„¹ ï½¢wdmï½£: Compiled with warnings.</pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:07:52.761:WARN <span class=\"token punctuation\">[</span>karma<span class=\"token punctuation\">]</span>: No captured browser, <span class=\"token function\">open</span> http://localhost:9876/</pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:07:52.770:INFO <span class=\"token punctuation\">[</span>karma-server<span class=\"token punctuation\">]</span>: Karma v4.1.0 server started at http://0.0.0.0:9876/</pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:07:52.770:INFO <span class=\"token punctuation\">[</span>launcher<span class=\"token punctuation\">]</span>: Launching browsers Chrome with concurrency unlimited</pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:07:52.773:INFO <span class=\"token punctuation\">[</span>launcher<span class=\"token punctuation\">]</span>: Starting browser Chrome</pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:07:54.135:INFO <span class=\"token punctuation\">[</span>Chrome <span class=\"token number\">75.0</span>.3770 <span class=\"token punctuation\">(</span>Mac OS X <span class=\"token number\">10.14</span>.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>: Connected on socket R9R31QB1GtR_kayNAAAA with <span class=\"token function\">id</span> <span class=\"token number\">55412577</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>Chrome <span class=\"token number\">75.0</span>.3770 <span class=\"token punctuation\">(</span>Mac OS X <span class=\"token number\">10.14</span>.5<span class=\"token punctuation\">)</span> LOG: <span class=\"token string\">'hello karma'</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>LOG: <span class=\"token string\">'hello mocha'</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>Chrome <span class=\"token number\">75.0</span>.3770 <span class=\"token punctuation\">(</span>Mac OS X <span class=\"token number\">10.14</span>.5<span class=\"token punctuation\">)</span>: Executed <span class=\"token number\">1</span> of <span class=\"token number\">1</span> SUCCESS <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> secs / <span class=\"token number\">0.001</span> secs</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>~/Downloads/karma-demo is ğŸ“¦ v1.0.0 via â¬¢ v10.16.0 </pre></td></tr><tr><td data-num=\"69\"></td><td><pre>âœ <span class=\"token function\">npm</span> run karma</pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token operator\">></span> karma-demo@1.0.0 karma /Users/itheima/Downloads/karma-demo</pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token operator\">></span> karma start</pre></td></tr><tr><td data-num=\"73\"></td><td><pre></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>â„¹ ï½¢wdmï½£: Hash: 9d2c943b68425fd58dd0</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>Version: webpack <span class=\"token number\">4.35</span>.3</pre></td></tr><tr><td data-num=\"76\"></td><td><pre>Time: 48ms</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>Built at: <span class=\"token number\">2019</span>-07-12 <span class=\"token number\">5</span>:24:02 PM</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>â„¹ ï½¢wdmï½£: Compiled successfully.</pre></td></tr><tr><td data-num=\"79\"></td><td><pre>â„¹ ï½¢wdmï½£: Compiling<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"80\"></td><td><pre>âš  ï½¢wdmï½£: Hash: cca8316f4bd5855fc4de</pre></td></tr><tr><td data-num=\"81\"></td><td><pre>Version: webpack <span class=\"token number\">4.35</span>.3</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>Time: 2307ms</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>Built at: <span class=\"token number\">2019</span>-07-12 <span class=\"token number\">5</span>:24:04 PM</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>       Asset      Size  Chunks             Chunk Names</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>src/index.js  <span class=\"token number\">3.62</span> KiB       <span class=\"token number\">0</span>  <span class=\"token punctuation\">[</span>emitted<span class=\"token punctuation\">]</span>  src/index</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>test/test.js  <span class=\"token number\">1010</span> KiB       <span class=\"token number\">1</span>  <span class=\"token punctuation\">[</span>emitted<span class=\"token punctuation\">]</span>  test/test</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>Entrypoint src/index <span class=\"token operator\">=</span> src/index.js</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>Entrypoint test/test <span class=\"token operator\">=</span> test/test.js</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> ./src/index.js <span class=\"token number\">27</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> ./test/test.js <span class=\"token number\">223</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> ./node_modules/mocha/browser-entry.js <span class=\"token number\">4.19</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> ./node_modules/process/browser.js <span class=\"token number\">4.96</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>webpack<span class=\"token punctuation\">)</span>/buildin/global.js <span class=\"token number\">878</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> ./node_modules/browser-stdout/index.js <span class=\"token number\">662</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>  <span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span> ./node_modules/stream-browserify/index.js <span class=\"token number\">3.53</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">36</span><span class=\"token punctuation\">]</span> ./node_modules/util/util.js <span class=\"token number\">19</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">38</span><span class=\"token punctuation\">]</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">21.8</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">39</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>webpack<span class=\"token punctuation\">)</span>/buildin/module.js <span class=\"token number\">552</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">]</span> ./node_modules/escape-string-regexp/index.js <span class=\"token number\">230</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">41</span><span class=\"token punctuation\">]</span> path <span class=\"token punctuation\">(</span>ignored<span class=\"token punctuation\">)</span> <span class=\"token number\">15</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre> <span class=\"token punctuation\">[</span><span class=\"token number\">42</span><span class=\"token punctuation\">]</span> ./node_modules/mocha/lib/reporters/index.js <span class=\"token number\">945</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">105</span><span class=\"token punctuation\">]</span> ./node_modules/chai/index.js <span class=\"token number\">39</span> bytes <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">106</span><span class=\"token punctuation\">]</span> ./node_modules/chai/lib/chai.js <span class=\"token number\">1.22</span> KiB <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    + <span class=\"token number\">128</span> hidden modules</pre></td></tr><tr><td data-num=\"105\"></td><td><pre></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">217</span>:20-37</pre></td></tr><tr><td data-num=\"107\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"108\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"109\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"110\"></td><td><pre></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">222</span>:24-70</pre></td></tr><tr><td data-num=\"112\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"113\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"114\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"115\"></td><td><pre></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">266</span>:24-35</pre></td></tr><tr><td data-num=\"117\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"118\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"119\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"120\"></td><td><pre></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">313</span>:35-48</pre></td></tr><tr><td data-num=\"122\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"123\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"124\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"125\"></td><td><pre></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>WARNING <span class=\"token keyword\">in</span> ./node_modules/mocha/lib/mocha.js <span class=\"token number\">329</span>:23-44</pre></td></tr><tr><td data-num=\"127\"></td><td><pre>Critical dependency: the request of a dependency is an expression</pre></td></tr><tr><td data-num=\"128\"></td><td><pre> @ ./node_modules/mocha/browser-entry.js</pre></td></tr><tr><td data-num=\"129\"></td><td><pre> @ ./test/test.js</pre></td></tr><tr><td data-num=\"130\"></td><td><pre>â„¹ ï½¢wdmï½£: Compiled with warnings.</pre></td></tr><tr><td data-num=\"131\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:24:04.905:WARN <span class=\"token punctuation\">[</span>karma<span class=\"token punctuation\">]</span>: No captured browser, <span class=\"token function\">open</span> http://localhost:9876/</pre></td></tr><tr><td data-num=\"132\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:24:04.914:INFO <span class=\"token punctuation\">[</span>karma-server<span class=\"token punctuation\">]</span>: Karma v4.1.0 server started at http://0.0.0.0:9876/</pre></td></tr><tr><td data-num=\"133\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:24:04.914:INFO <span class=\"token punctuation\">[</span>launcher<span class=\"token punctuation\">]</span>: Launching browsers Chrome with concurrency unlimited</pre></td></tr><tr><td data-num=\"134\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:24:04.922:INFO <span class=\"token punctuation\">[</span>launcher<span class=\"token punctuation\">]</span>: Starting browser Chrome</pre></td></tr><tr><td data-num=\"135\"></td><td><pre><span class=\"token number\">12</span> 07 <span class=\"token number\">2019</span> <span class=\"token number\">17</span>:24:06.289:INFO <span class=\"token punctuation\">[</span>Chrome <span class=\"token number\">75.0</span>.3770 <span class=\"token punctuation\">(</span>Mac OS X <span class=\"token number\">10.14</span>.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>: Connected on socket EbCCSbQRPbxHbq3OAAAA with <span class=\"token function\">id</span> <span class=\"token number\">92342032</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>Chrome <span class=\"token number\">75.0</span>.3770 <span class=\"token punctuation\">(</span>Mac OS X <span class=\"token number\">10.14</span>.5<span class=\"token punctuation\">)</span> LOG: <span class=\"token string\">'hello karma'</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>LOG: <span class=\"token string\">'hello mocha'</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>Chrome <span class=\"token number\">75.0</span>.3770 <span class=\"token punctuation\">(</span>Mac OS X <span class=\"token number\">10.14</span>.5<span class=\"token punctuation\">)</span>: Executed <span class=\"token number\">1</span> of <span class=\"token number\">1</span> SUCCESS <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> secs / <span class=\"token number\">0.001</span> secs</pre></td></tr><tr><td data-num=\"140\"></td><td><pre>Chrome <span class=\"token number\">75.0</span>.3770 <span class=\"token punctuation\">(</span>Mac OS X <span class=\"token number\">10.14</span>.5<span class=\"token punctuation\">)</span>: Executed <span class=\"token number\">1</span> of <span class=\"token number\">1</span> SUCCESS <span class=\"token punctuation\">(</span><span class=\"token number\">0.006</span> secs / <span class=\"token number\">0.001</span> </pre></td></tr><tr><td data-num=\"141\"></td><td><pre>secs<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>TOTAL: <span class=\"token number\">1</span> SUCCESS</pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"uiæµ‹è¯•åˆ©å™¨nightmare\"><a class=\"anchor\" href=\"#uiæµ‹è¯•åˆ©å™¨nightmare\">#</a> UI æµ‹è¯•åˆ©å™¨ Nightmare</h2>\n<p>Nightmare æ˜¯<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zZWdtZW50LmNvbS8=\"> Segment</span> çš„é«˜çº§æµè§ˆå™¨è‡ªåŠ¨åŒ–åº“ã€‚</p>\n<p>ç›®æ ‡æ˜¯å…¬å¼€ä¸€äº›æ¨¡ä»¿ç”¨æˆ·æ“ä½œï¼ˆä¾‹å¦‚ <code>goto</code> ï¼Œ <code>type</code>  å’Œ <code>click</code> ï¼‰çš„ç®€å•æ–¹æ³•ï¼Œä½¿ç”¨å¯¹æ¯ä¸ªè„šæœ¬å—æ„Ÿè§‰åŒæ­¥çš„ APIï¼Œè€Œä¸æ˜¯æ·±å±‚åµŒå¥—çš„å›è°ƒã€‚å®ƒæœ€åˆè®¾è®¡ç”¨äºåœ¨æ²¡æœ‰ API çš„ç«™ç‚¹ä¹‹é—´è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ï¼Œä½†æœ€å¸¸ç”¨äº UI æµ‹è¯•å’Œçˆ¬ç½‘ã€‚</p>\n<p>å®ƒä½¿ç”¨<span class=\"exturl\" data-url=\"aHR0cDovL2VsZWN0cm9uLmF0b20uaW8v\"> Electron</span>ï¼Œå®ƒä¸<span class=\"exturl\" data-url=\"aHR0cDovL3BoYW50b21qcy5vcmcv\"> PhantomJS</span> ç±»ä¼¼ï¼Œä½†å¤§çº¦<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NlZ21lbnRpby9uaWdodG1hcmUvaXNzdWVzLzQ4NCNpc3N1ZWNvbW1lbnQtMTg0NTE5NTkx\">å¿«ä¸¤å€</span>ï¼Œæ›´ç°ä»£ã€‚</p>\n<h3 id=\"å®‰è£…ä¸èµ·æ­¥\"><a class=\"anchor\" href=\"#å®‰è£…ä¸èµ·æ­¥\">#</a> å®‰è£…ä¸èµ·æ­¥</h3>\n<ol>\n<li>\n<p>å®‰è£… <code>nightmare</code></p>\n</li>\n<li>\n<pre><code>// åˆå§‹åŒ–é¡¹ç›®\nnpm init -y\n\nnpm install --save-dev nightmare\n\n</code></pre>\n</li>\n</ol>\n<p>npm install --save-dev mocha</p>\n<pre><code>\n2. æ·˜å®æºåŠ é€Ÿ\n\n</code></pre>\n<p>// ä½¿ç”¨æ·˜å®æºåŠ é€Ÿ electron çš„å®‰è£…<br />\n export ELECTRON_MIRROR=&quot;<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ucG0udGFvYmFvLm9yZy9taXJyb3JzL2VsZWN0cm9uLw==\">https://npm.taobao.org/mirrors/electron/</span>&quot;</p>\n<pre><code>\n3. èµ·æ­¥æµ‹è¯•ï¼š\n\n```js\nconst Nightmare = require('nightmare')\nconst assert = require('assert')\n\ndescribe('Load a Page', function () &#123;\n  // Recommended: 5s locally, 10s to remote server, 30s from airplane Â¯\\_(ãƒ„)_/Â¯\n  this.timeout('30s')\n\n  let nightmare = null\n  beforeEach(() =&gt; &#123;\n    nightmare = new Nightmare()\n  &#125;)\n\n  describe('/ (Home Page)', () =&gt; &#123;\n    it('should load without error', done =&gt; &#123;\n      // your actual testing urls will likely be `http://localhost:port/path`\n      nightmare.goto('https://www.baidu.com')\n        .end()\n        .then(function (result) &#123;\n          done()\n        &#125;)\n        .catch(done)\n    &#125;)\n  &#125;)\n&#125;)\n</code></pre>\n<h3 id=\"nightmareé…åˆmochaæµ‹è¯•\"><a class=\"anchor\" href=\"#nightmareé…åˆmochaæµ‹è¯•\">#</a> nightmare é…åˆ mocha æµ‹è¯•</h3>\n<p>nightmare å¯ä»¥è¿›è¡Œç½‘é¡µçš„æŠ“å–ï¼Œé…åˆ mocha è¿›è¡Œé¡µé¢çš„æµ‹è¯•ï¼š</p>\n<p>å®‰è£… <code>mocha</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev mocha</pre></td></tr></table></figure><blockquote>\n<p>è¿˜å¯ä»¥å®‰è£…ä¸€äº›æ–­è¨€åº“ï¼Œå¦‚ï¼š <code>chai</code></p>\n</blockquote>\n<p>æ–°å»ºæµ‹è¯•ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> Nightmare <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nightmare'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> assert <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'assert'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Search nightmare'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span><span class=\"token string\">'30s'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">let</span> nightmare <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    nightmare <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Nightmare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should load with result nightmare'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">done</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">const</span> selector <span class=\"token operator\">=</span> <span class=\"token string\">'em'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    nightmare<span class=\"token punctuation\">.</span><span class=\"token function\">goto</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.baidu.com'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#kw'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'nightmare'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#su'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">selector</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token comment\">// now we're executing inside the browser scope.</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token keyword\">return</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerText</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> selector<span class=\"token punctuation\">)</span> <span class=\"token comment\">// &lt;-- that's how you pass parameters from Node scope to browser scope</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      assert<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> <span class=\"token string\">'nightmare'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>done<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å°† mocha ä½œä¸ºæµ‹è¯•è„šæœ¬æ·»åŠ åˆ°æ‚¨çš„   <code>package.json</code> ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mocha\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"apiä»‹ç»\"><a class=\"anchor\" href=\"#apiä»‹ç»\">#</a> API ä»‹ç»</h3>\n<h4 id=\"nightmareçš„é…ç½®é¡¹\"><a class=\"anchor\" href=\"#nightmareçš„é…ç½®é¡¹\">#</a> nightmare çš„é…ç½®é¡¹</h4>\n<pre><code>waitTimeout (default: 30s)\ngotoTimeout (default: 30s)\nloadTimeout (default: infinite)\nexecutionTimeout (default: 30s)\npaths\nswitches\nelectronPath\ndock\nopenDevTools\ntypeInterval (default: 100ms)\npollInterval (default: 250ms)\nmaxAuthRetries (default: 3)\ncertificateSubjectName\n.engineVersions()\n.useragent(useragent)\n.authentication(user, password)\n.authentication(user, password)\n.halt(error, done)\n</code></pre>\n<p>é…ç½®é“¾æ¥ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NlZ21lbnRpby9uaWdodG1hcmUjbmlnaHRtYXJlb3B0aW9ucw==\">https://github.com/segmentio/nightmare#nightmareoptions</span></p>\n<h4 id=\"é¡µé¢äº¤äº’ç›¸å…³\"><a class=\"anchor\" href=\"#é¡µé¢äº¤äº’ç›¸å…³\">#</a> é¡µé¢äº¤äº’ç›¸å…³</h4>\n<pre><code>.back()\n.forward()\n.refresh()\n.click(selector)\n.mousedown(selector)\n.mouseup(selector)\n.mouseover(selector)\n.mouseout(selector)\n.type(selector[, text])\n.insert(selector[, text])\n.check(selector)\n.uncheck(selector)\n.select(selector, option)\n.scrollTo(top, left)\n.viewport(width, height)\n.inject(type, file)\n.evaluate(fn[, arg1, arg2,...])\n.wait(ms)\n.wait(selector)\n.wait(fn[, arg1, arg2,...])\n.header(header, value)\n</code></pre>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NlZ21lbnRpby9uaWdodG1hcmUjaW50ZXJhY3Qtd2l0aC10aGUtcGFnZQ==\">é…ç½®å‚è€ƒé“¾æ¥</span></p>\n<h4 id=\"é¡µé¢æå–\"><a class=\"anchor\" href=\"#é¡µé¢æå–\">#</a> é¡µé¢æå–</h4>\n<pre><code>.exists(selector)\n.visible(selector)\n.on(event, callback)\n.once(event, callback)\n.removeListener(event, callback)\n.screenshot([path][, clip])\n.html(path, saveType)\n.pdf(path, options)\n.title()\n.url()\n.path()\n</code></pre>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NlZ21lbnRpby9uaWdodG1hcmUjZXh0cmFjdC1mcm9tLXRoZS1wYWdl\">é…ç½®å‚è€ƒé“¾æ¥</span></p>\n<h2 id=\"è¡¥å……å­¦ä¹ \"><a class=\"anchor\" href=\"#è¡¥å……å­¦ä¹ \">#</a> è¡¥å……å­¦ä¹ </h2>\n<h3 id=\"è¡¥å……èµ„æ–™\"><a class=\"anchor\" href=\"#è¡¥å……èµ„æ–™\">#</a> è¡¥å……èµ„æ–™</h3>\n<h4 id=\"è½¯ä»¶æµ‹è¯•çš„åˆ†ç±»\"><a class=\"anchor\" href=\"#è½¯ä»¶æµ‹è¯•çš„åˆ†ç±»\">#</a> è½¯ä»¶æµ‹è¯•çš„åˆ†ç±»</h4>\n<p><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šè½¯ä»¶æµ‹è¯•çš„åˆ†ç±»</strong></p>\n<ul>\n<li>\n<p>æŒ‰æµ‹è¯•æ‰§è¡Œé˜¶æ®µåˆ’åˆ†</p>\n<p>å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç³»ç»Ÿæµ‹è¯•ã€éªŒæ”¶æµ‹è¯•ï¼ˆæ­£å¼éªŒæ”¶æµ‹è¯•ã€Alpha æµ‹è¯•ã€Beta æµ‹è¯•ï¼‰</p>\n</li>\n<li>\n<p>æŒ‰æµ‹è¯•æŠ€æœ¯åˆ’åˆ†</p>\n<p>ç™½ç›’æµ‹è¯•ã€é»‘ç›’æµ‹è¯•ã€ç°ç›’æµ‹è¯•</p>\n</li>\n<li>\n<p>è¢«æµ‹è¯•å¯¹è±¡æ˜¯å¦è¿è¡Œåˆ’åˆ†</p>\n<p>åŠ¨æ€æµ‹è¯•ã€é™æ€æµ‹è¯•ï¼ˆæ–‡æ¡£æ£€æŸ¥ã€ä»£ç èµ°æŸ¥ã€ç•Œé¢æ£€æŸ¥ï¼‰</p>\n</li>\n<li>\n<p>æŒ‰ä¸åŒçš„æµ‹è¯•æ‰‹æ®µåˆ’åˆ†</p>\n<p>æ‰‹å·¥æµ‹è¯•ã€è‡ªåŠ¨åŒ–æµ‹è¯•</p>\n</li>\n<li>\n<p>æŒ‰æµ‹è¯•åŒ…å«çš„å†…å®¹åˆ’åˆ†</p>\n<p>åŠŸèƒ½æµ‹è¯•ã€ç•Œé¢æµ‹è¯•ã€å®‰å…¨æµ‹è¯•ã€å…¼å®¹æ€§æµ‹è¯•ã€æ˜“ç”¨æ€§æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€å‹åŠ›æµ‹è¯•ã€è´Ÿè½½æµ‹è¯•ã€æ¢å¤æµ‹è¯•</p>\n</li>\n<li>\n<p>å…¶ä»–æµ‹è¯•</p>\n<p>å†’çƒŸæµ‹è¯•ã€å›å½’æµ‹è¯•ã€æ¢ç´¢æ€§æµ‹è¯• / è‡ªç”±æµ‹è¯•ï¼ˆæµ‹è¯•æ€ç»´ï¼‰</p>\n</li>\n</ul>\n<p><strong>ç¬¬äºŒéƒ¨åˆ†ï¼šæ¥ä¸‹æ¥å¯¹è½¯ä»¶æµ‹è¯•åˆ†ç±»è¿›è¡Œä¸€ä¸ªè¯´æ˜</strong></p>\n<p><img data-src=\"../../5-2%20%E9%A1%B9%E7%9B%AE%E8%B4%A8%E9%87%8F%E7%9B%91%E6%B5%8B/resource/assets/v2-889a2848a1b2a8eeccae000be23c247a_hd.jpg\" alt=\"img\" /><img data-src=\"../../5-2%20%E9%A1%B9%E7%9B%AE%E8%B4%A8%E9%87%8F%E7%9B%91%E6%B5%8B/resource/assets/v2-889a2848a1b2a8eeccae000be23c247a_hd.jpg\" alt=\"img\" /></p>\n<p><img data-src=\"../../5-2%20%E9%A1%B9%E7%9B%AE%E8%B4%A8%E9%87%8F%E7%9B%91%E6%B5%8B/resource/assets/v2-f831b8041976b50aad7c2425aada44e2_hd-1561454378198.jpg\" alt=\"img\" /><img data-src=\"../../5-2%20%E9%A1%B9%E7%9B%AE%E8%B4%A8%E9%87%8F%E7%9B%91%E6%B5%8B/resource/assets/v2-f831b8041976b50aad7c2425aada44e2_hd.jpg\" alt=\"img\" /></p>\n<p><strong>ç¬¬ä¸‰éƒ¨åˆ†ï¼šæµ‹è¯•å·¥å…·</strong></p>\n<p>SVNï¼ŒGitâ€”â€”&gt; ç‰ˆæœ¬æ§åˆ¶ç®¡ç†å·¥å…·</p>\n<p>ç¦…é“ â€”â€”&gt;Bug ç®¡ç†å·¥å…·</p>\n<p>Fiddlerâ€”â€”&gt; æŠ“åŒ…ï¼Œå®šä½é—®é¢˜ä½ </p>\n<p>postmanï¼Œjmeterï¼Œsoapuiâ€”â€”&gt; æ¥å£æµ‹è¯•</p>\n<p>Loadrunnerï¼ŒJmeterâ€”â€”&gt; æ€§èƒ½ï¼Œå‹åŠ›æµ‹è¯•</p>\n<h4 id=\"2019å¹´javascriptæµ‹è¯•æ¦‚è§ˆ\"><a class=\"anchor\" href=\"#2019å¹´javascriptæµ‹è¯•æ¦‚è§ˆ\">#</a> 2019 å¹´ Javascript æµ‹è¯•æ¦‚è§ˆ</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9tZWRpdW0uY29tL3dlbGxkb25lLXNvZnR3YXJlL2FuLW92ZXJ2aWV3LW9mLWphdmFzY3JpcHQtdGVzdGluZy1pbi0yMDE5LTI2NGUxOTUxNGQwYQ==\">https://medium.com/welldone-software/an-overview-of-javascript-testing-in-2019-264e19514d0a</span></p>\n<p>è¿™æ˜¯ä¸€ç¯‡éå¸¸å¥½çš„å›½å¤–çš„åšæ–‡ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ 2018 å¹´ Javascript æµ‹è¯•æ¦‚è§ˆçš„ä½œè€…ã€‚è¿™é‡Œæœ‰ 2018 å¹´çš„è¯‘æ–‡ï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zMjcwMjQyMQ==\">å±•æœ› 2018 å¹´ JavaScript Testing</span></p>\n<p>åœ¨æ–‡ä¸­å¾ˆå¥½ä»‹ç»åˆ°äº†æµ‹è¯•ç±»å‹ï¼Œå¹¶ä¸¾äº†å¤§é‡çš„ä¾‹å­ï¼Œéå¸¸å…¨é¢ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯tdd\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯tdd\">#</a> ä»€ä¹ˆæ˜¯ TDDï¼Ÿ</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzNlNzM4NzZmYjlhMDQ5ZDM3ZjVkYjE=\">æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰æ€»ç»“ â€”â€” åŸç†ç¯‡</span></p>\n<p>TDD ï¼ˆTest Driven Developmentï¼‰ åœ¨ä¸åŒçš„åœˆå­ã€ä¸åŒçš„è§’è‰²çš„è®¤çŸ¥ä¸­å¯èƒ½ä¼šæœ‰ä¸åŒçš„ç†è§£ï¼Œæœ‰äººå¯èƒ½ä¼šç†è§£æˆ ATDDï¼ˆAcceptance Test Driven Developmentï¼‰ï¼Œä¹Ÿæœ‰äººå¯èƒ½ä¼šç†è§£æˆ UTDDï¼ˆUnit Test Driven Developmentï¼‰ï¼Œä¸ºäº†é¿å…äº§ç”Ÿæ­§ä¹‰ï¼Œ<strong>æ–‡ç« æ¶‰åŠåˆ° TDD ä¸“æŒ‡ UTDDï¼ˆUnit Test Driven Developmentï¼‰ï¼Œå³ ã€Œå•å…ƒæµ‹è¯•é©±åŠ¨å¼€å‘ã€</strong>ã€‚</p>\n<p>TDD çš„ç›®æ ‡</p>\n<blockquote>\n<p>Kent Beck åœ¨ä»–çš„è‘—ä½œã€ŠTest-Driven Developmentã€‹ä¸€ä¹¦ä¸­æåˆ°ï¼šâ€œ<strong>ä»£ç ç®€æ´å¯ç”¨</strong>è¿™å¥è¨€ç®€æ„èµ…çš„è¯ï¼Œæ­£æ˜¯ TDD æ‰€è¿½æ±‚çš„ç›®æ ‡â€ã€‚</p>\n</blockquote>\n<p><strong>å¯¹äºå¦‚ä½•ä¿è¯ â€œä»£ç ç®€æ´å¯ç”¨â€ å¯ä»¥ä½¿ç”¨åˆ†è€Œæ²»ä¹‹çš„æ–¹æ³•ï¼Œå…ˆè¾¾åˆ° â€œå¯ç”¨â€ ç›®æ ‡ï¼Œå†è¿½æ±‚ â€œç®€æ´â€ ç›®æ ‡ã€‚</strong></p>\n<p><strong>å¯ç”¨ï¼š</strong> ä¿è¯ä»£ç é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>\n<p><strong>ä»£ç ç®€æ´ï¼š</strong> åœ¨ä¸åŒé˜¶æ®µäººä»¬å¯¹ç®€æ´çš„ç†è§£ç¨‹åº¦ä¹Ÿä¸ä¸€æ ·ï¼Œä¸è¿‡éµå¾ªçš„åŸåˆ™å·®ä¸å¤šï¼Œä¾‹å¦‚ OOD çš„ SOLID åŸåˆ™ï¼ŒKent Beck çš„ Simple Design åŸåˆ™ç­‰ã€‚</p>\n<p>è™½ç„¶æœ‰å¾ˆå¤šå› ç´ å¦¨ç¢æˆ‘ä»¬å¾—åˆ°æ•´æ´çš„ä»£ç ï¼Œç”šè‡³å¯ç”¨çš„ä»£ç ï¼Œæ— éœ€å¾æ±‚å¤ªå¤šæ„è§ï¼Œåªéœ€è¦é‡‡ç”¨ TDD çš„å¼€å‘æ–¹å¼æ¥é©±åŠ¨å‡ºç®€æ´å¯ç”¨çš„ä»£ç ã€‚</p>\n<h4 id=\"karmaçš„å‰ä¸–ä»Šç”Ÿ\"><a class=\"anchor\" href=\"#karmaçš„å‰ä¸–ä»Šç”Ÿ\">#</a> Karma çš„å‰ä¸–ä»Šç”Ÿ</h4>\n<p>2016 å¹´çš„æ–‡ç« ï¼Œç”±æ·˜å®å‰ç«¯å›¢é˜Ÿä¹¦å†™ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL3Rhb2Jhb2ZlZC5vcmcvYmxvZy8yMDE2LzAxLzA4L2thcm1hLW9yaWdpbi8=\">http://taobaofed.org/blog/2016/01/08/karma-origin/</span></p>\n<p>é€šç¯‡ä»‹ç»äº† karma çš„å·¥ä½œåŸç†åŠå®ç°åŸç†ï¼Œéå¸¸æœ‰ä»·å€¼çš„æ–‡ç« ã€‚</p>\n<h3 id=\"avaæ¡†æ¶çš„é…ç½®æ–‡ä»¶\"><a class=\"anchor\" href=\"#avaæ¡†æ¶çš„é…ç½®æ–‡ä»¶\">#</a> ava æ¡†æ¶çš„é…ç½®æ–‡ä»¶</h3>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token property\">\"ava\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t\t<span class=\"token property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t\t<span class=\"token string\">\"test/**/*\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t\t<span class=\"token string\">\"!test/exclude-files-in-this-directory\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t\t\t<span class=\"token string\">\"!**/exclude-files-with-this-name.*\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t\t<span class=\"token property\">\"helpers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t\t<span class=\"token string\">\"**/helpers/**/*\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\t<span class=\"token property\">\"sources\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t\t\t<span class=\"token string\">\"src/**/*\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t<span class=\"token property\">\"match\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t\t<span class=\"token string\">\"*oo\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t\t\t<span class=\"token string\">\"!foo\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t\t<span class=\"token property\">\"cache\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t\t<span class=\"token property\">\"concurrency\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t\t<span class=\"token property\">\"failFast\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t\t<span class=\"token property\">\"failWithoutAssertions\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t\t<span class=\"token property\">\"environmentVariables\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t\t\t<span class=\"token property\">\"MY_ENVIRONMENT_VARIABLE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"some value\"</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t\t<span class=\"token property\">\"tap\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t\t<span class=\"token property\">\"verbose\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t\t<span class=\"token property\">\"compileEnhancements\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t\t<span class=\"token property\">\"require\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>\t\t\t<span class=\"token string\">\"@babel/register\"</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\t\t<span class=\"token property\">\"babel\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\t\t\t<span class=\"token property\">\"extensions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"js\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"jsx\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t\t\t<span class=\"token property\">\"testOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t\t\t\t<span class=\"token property\">\"babelrc\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t\t\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li><code>files</code> ï¼šç”¨äºé€‰æ‹©æµ‹è¯•æ–‡ä»¶çš„ glob æ¨¡å¼æ•°ç»„ã€‚å¸¦æœ‰ä¸‹åˆ’çº¿å‰ç¼€çš„æ–‡ä»¶å°†è¢«å¿½ç•¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä»…é€‰æ‹©å…·æœ‰ <code>js</code>  æ‰©å±•åçš„æ–‡ä»¶ï¼Œå³ä½¿è¯¥æ¨¡å¼ä¸å…¶ä»–æ–‡ä»¶åŒ¹é…ã€‚æŒ‡å®š <code>extensions</code>  å¹¶ <code>babel.extensions</code>  å…è®¸å…¶ä»–æ–‡ä»¶æ‰©å±•å</li>\n<li><code>helpers</code> ï¼šç”¨äºé€‰æ‹©å¸®åŠ©æ–‡ä»¶çš„ glob æ¨¡å¼æ•°ç»„ã€‚è¿™é‡ŒåŒ¹é…çš„æ–‡ä»¶æ°¸è¿œä¸ä¼šè¢«è§†ä¸ºæµ‹è¯•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä»…é€‰æ‹©å…·æœ‰ <code>js</code>  æ‰©å±•åçš„æ–‡ä»¶ï¼Œå³ä½¿è¯¥æ¨¡å¼ä¸å…¶ä»–æ–‡ä»¶åŒ¹é…ã€‚æŒ‡å®š <code>extensions</code>  å¹¶ <code>babel.extensions</code>  å…è®¸å…¶ä»–æ–‡ä»¶æ‰©å±•å</li>\n<li><code>sources</code> ï¼šä¸€ç»„ glob æ¨¡å¼ï¼Œç”¨äºåŒ¹é…æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶åœ¨æ›´æ”¹æ—¶ä¼šå¯¼è‡´é‡æ–°è¿è¡Œæµ‹è¯•ï¼ˆåœ¨ç›‘è§†æ¨¡å¼ä¸‹ï¼‰ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2F2YWpzL2F2YS9ibG9iL21hc3Rlci9kb2NzL3JlY2lwZXMvd2F0Y2gtbW9kZS5tZCNzb3VyY2UtZmlsZXMtYW5kLXRlc3QtZmlsZXM=\">è¯·å‚é˜…</span></li>\n<li><code>match</code> ï¼šé€šå¸¸åœ¨ <code>package.json</code>  é…ç½®ä¸­æ²¡ç”¨ï¼Œä½†ç­‰åŒäºåœ¨ CLI ä¸ŠæŒ‡å®š <code>--match</code></li>\n<li><code>cache</code> ï¼šç¼“å­˜ç¼–è¯‘çš„æµ‹è¯•å’Œå¸®åŠ©æ–‡ä»¶ <code>node_modules/.cache/ava</code> ã€‚å¦‚æœ <code>false</code> ï¼Œæ–‡ä»¶ç¼“å­˜åœ¨ä¸´æ—¶ç›®å½•ä¸­</li>\n<li><code>failFast</code> ï¼šä¸€æ—¦æµ‹è¯•å¤±è´¥ï¼Œåœæ­¢è¿è¡Œè¿›ä¸€æ­¥çš„æµ‹è¯•</li>\n<li><code>failWithoutAssertions</code> ï¼šå¦‚æœè®¾ç½®æˆ <code>false</code> ï¼Œé‚£ä¹ˆå¦‚æœæ²¡æœ‰è¿è¡Œæ–­è¨€ï¼Œåˆ™æµ‹è¯•å¤±è´¥</li>\n<li><code>environmentVariables</code> ï¼šæŒ‡å®šè¦ä¾›æµ‹è¯•ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ã€‚æ­¤å¤„å®šä¹‰çš„ç¯å¢ƒå˜é‡ä¼šè¦†ç›–å…¶ä¸­çš„ç¯å¢ƒå˜é‡ <code>process.env</code></li>\n<li><code>tap</code> ï¼šè®¾ç½®æˆ  <code>true</code> ï¼Œå¯ç”¨ TAP æŠ¥å‘Š</li>\n<li><code>verbose</code> ï¼šè®¾ç½®æˆ  <code>true</code> ï¼Œå¯ç”¨è¯¦ç»†è¾“å‡º</li>\n<li><code>snapshotDir</code> ï¼šæŒ‡å®šç”¨äºå­˜å‚¨å¿«ç…§æ–‡ä»¶çš„å›ºå®šä½ç½®ã€‚å¦‚æœå¿«ç…§æœ€ç»ˆä½äºé”™è¯¯çš„ä½ç½®ï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹</li>\n<li><code>compileEnhancements</code> ï¼šè®¾ç½®æˆ  <code>false</code> ï¼Œç¦ç”¨äº† <a href=\"https://github.com/avajs/ava/blob/master/docs/03-assertions.md#enhanced-assertion-messages\"> <code>power-assert</code> </a>ï¼Œå¦åˆ™æœ‰åŠ©äºæä¾›æ›´å…·æè¿°æ€§çš„é”™è¯¯æ¶ˆæ¯ï¼Œ å¹¶æ£€æµ‹ <code>t.throws()</code>  æ–­è¨€çš„ä¸å½“ä½¿ç”¨</li>\n<li><code>extensions</code> ï¼šæœªä½¿ç”¨ AVA çš„ Babel é¢„è®¾è¿›è¡Œé¢„ç¼–è¯‘çš„æµ‹è¯•æ–‡ä»¶çš„æ‰©å±•åã€‚è¯·æ³¨æ„ï¼Œæ–‡ä»¶ä»ç„¶ä¼šè¢«ç¼–è¯‘ä¸ºå¯ç”¨ <code>power-assert</code>  å’Œå…¶ä»–åŠŸèƒ½ï¼Œå› æ­¤æ‚¨å¯èƒ½è¿˜éœ€è¦è®¾ç½® <code>compileEnhancements</code>  ä¸º <code>false</code>  æ–‡ä»¶æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ JavaScriptã€‚è®¾ç½®æ­¤ <code>&quot;js&quot;</code>  å€¼ä¼šè¦†ç›–é»˜è®¤å€¼ï¼Œå› æ­¤è¯·ç¡®ä¿åœ¨åˆ—è¡¨ä¸­åŒ…å«è¯¥æ‰©å±•åï¼Œåªè¦å®ƒä¸åŒ…å«åœ¨å†… <code>babel.extensions</code></li>\n<li><code>require</code> ï¼šåœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰éœ€è¦é¢å¤–çš„æ¨¡å—ã€‚å·¥ä½œè¿›ç¨‹ä¸­éœ€è¦æ¨¡å—</li>\n<li><code>babel</code> ï¼šæµ‹è¯•æ–‡ä»¶ç‰¹å®šçš„ Babel é€‰é¡¹ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2F2YWpzL2F2YS9ibG9iL21hc3Rlci9kb2NzL3JlY2lwZXMvYmFiZWwubWQjY29uZmlndXJpbmctYmFiZWw=\"> Babel é…ç½®</span></li>\n<li><code>babel.extensions</code> ï¼šå°†ä½¿ç”¨ AVA çš„ Babel é¢„è®¾è¿›è¡Œé¢„ç¼–è¯‘çš„æµ‹è¯•æ–‡ä»¶çš„æ‰©å±•ã€‚è®¾ç½®æ­¤é€‰é¡¹ä¼šè¦†ç›–é»˜è®¤ <code>&quot;js&quot;</code>  å€¼ï¼Œå› æ­¤è¯·ç¡®ä¿åœ¨åˆ—è¡¨ä¸­åŒ…å«è¯¥æ‰©å±•åã€‚</li>\n<li><code>timeout</code> ï¼šAVA ä¸­çš„è¶…æ—¶è¡Œä¸ºä¸å…¶ä»–æµ‹è¯•æ¡†æ¶ä¸­çš„è¡Œä¸ºä¸åŒã€‚AVA åœ¨æ¯æ¬¡æµ‹è¯•åé‡ç½®è®¡æ—¶å™¨ï¼Œå¦‚æœåœ¨æŒ‡å®šçš„è¶…æ—¶å†…æ²¡æœ‰æ”¶åˆ°æ–°çš„æµ‹è¯•ç»“æœï¼Œåˆ™å¼ºåˆ¶æµ‹è¯•é€€å‡ºã€‚è¿™å¯ç”¨äºå¤„ç†åœæ»çš„æµ‹è¯•ã€‚è¯·å‚é˜…æˆ‘ä»¬çš„<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2F2YWpzL2F2YS9ibG9iL21hc3Rlci9kb2NzLzA3LXRlc3QtdGltZW91dHMubWQ=\">è¶…æ—¶æ–‡æ¡£</span>ä»¥è·å–æ›´å¤šé€‰</li>\n</ul>\n<p>è¯·æ³¨æ„ï¼Œåœ¨ CLI ä¸Šæä¾›æ–‡ä»¶ä¼šè¦†ç›–è¯¥ <code>files</code>  é€‰é¡¹ã€‚</p>\n<h2 id=\"å‚è€ƒèµ„æ–™\"><a class=\"anchor\" href=\"#å‚è€ƒèµ„æ–™\">#</a> å‚è€ƒèµ„æ–™</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC80NzAwOTY2NA==\">ä½¿ç”¨ Jest æµ‹è¯• JavaScript (Mock ç¯‡)</span></li>\n</ul>\n",
            "tags": [
                "è‡ªåŠ¨åŒ–æµ‹è¯•",
                "è‡ªåŠ¨åŒ–æµ‹è¯•"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/03/02/%E8%BD%AF%E4%BB%B6%E6%A8%A1%E5%BC%8F%E8%AE%BE%E8%AE%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
            "url": "https://dmqweb.cn/2024/03/02/%E8%BD%AF%E4%BB%B6%E6%A8%A1%E5%BC%8F%E8%AE%BE%E8%AE%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
            "title": "è®¾è®¡æ¨¡å¼",
            "date_published": "2024-03-02T00:24:04.000Z",
            "content_html": "<h1 id=\"è®¾è®¡æ¨¡å¼\"><a class=\"anchor\" href=\"#è®¾è®¡æ¨¡å¼\">#</a> è®¾è®¡æ¨¡å¼</h1>\n<h2 id=\"å‰è¨€\"><a class=\"anchor\" href=\"#å‰è¨€\">#</a> å‰è¨€</h2>\n<p>æœ‰ä¸€äº›é‡è¦çš„è®¾è®¡åŸåˆ™åœ¨å¼€ç¯‡å’Œå¤§å®¶åˆ†äº«ä¸‹ï¼Œè¿™äº›åŸåˆ™å°†è´¯é€šå…¨æ–‡ï¼š</p>\n<ul>\n<li>\n<p>é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘å®ç°ã€‚è¿™ä¸ªå¾ˆé‡è¦ï¼Œä¹Ÿæ˜¯ä¼˜é›…çš„ã€å¯æ‰©å±•çš„ä»£ç çš„ç¬¬ä¸€æ­¥ï¼Œè¿™å°±ä¸éœ€è¦å¤šè¯´äº†å§ã€‚</p>\n</li>\n<li>\n<p>èŒè´£å•ä¸€åŸåˆ™ã€‚æ¯ä¸ªç±»éƒ½åº”è¯¥åªæœ‰ä¸€ä¸ªå•ä¸€çš„åŠŸèƒ½ï¼Œå¹¶ä¸”è¯¥åŠŸèƒ½åº”è¯¥ç”±è¿™ä¸ªç±»å®Œå…¨å°è£…èµ·æ¥ã€‚</p>\n</li>\n<li>\n<p>å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ã€‚å¯¹ä¿®æ”¹å…³é—­æ˜¯è¯´ï¼Œæˆ‘ä»¬è¾›è¾›è‹¦è‹¦åŠ ç­å†™å‡ºæ¥çš„ä»£ç ï¼Œè¯¥å®ç°çš„åŠŸèƒ½å’Œè¯¥ä¿®å¤çš„ bug éƒ½å®Œæˆäº†ï¼Œåˆ«äººå¯ä¸èƒ½è¯´æ”¹å°±æ”¹ï¼›å¯¹æ‰©å±•å¼€æ”¾å°±æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æˆ‘ä»¬å†™å¥½çš„ä»£ç åŸºç¡€ä¸Šï¼Œå¾ˆå®¹æ˜“å®ç°æ‰©å±•ã€‚</p>\n</li>\n</ul>\n<p>åˆ›å»ºå‹æ¨¡å¼æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä¼šæ¯”è¾ƒæ²¡æœ‰æ„æ€ï¼Œç»“æ„å‹å’Œè¡Œä¸ºå‹æ¯”è¾ƒæœ‰æ„æ€</p>\n<p>æ¯ä¸ªä»£ç†æ¨¡å¼çš„ä»£ç éƒ½å¿…é¡»è‡ªå·±æ‰‹åŠ¨å®Œæˆä¸€éã€‚</p>\n<h2 id=\"åˆ›å»ºå‹æ¨¡å¼\"><a class=\"anchor\" href=\"#åˆ›å»ºå‹æ¨¡å¼\">#</a> åˆ›å»ºå‹æ¨¡å¼</h2>\n<p>åˆ›å»ºå‹æ¨¡å¼çš„ä½œç”¨å°±æ˜¯åˆ›å»ºå¯¹è±¡ï¼Œè¯´åˆ°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæœ€ç†Ÿæ‚‰çš„å°±æ˜¯ new ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶å set ç›¸å…³å±æ€§ã€‚ä½†æ˜¯ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç»™å®¢æˆ·ç«¯æä¾›æ›´åŠ å‹å¥½çš„åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œå°¤å…¶æ˜¯é‚£ç§æˆ‘ä»¬å®šä¹‰äº†ç±»ï¼Œä½†æ˜¯éœ€è¦æä¾›ç»™å…¶ä»–å¼€å‘è€…ç”¨çš„æ—¶å€™ã€‚</p>\n<p>å·¥å‚æ¨¡å¼åˆ†ä¸ºç®€å•å·¥å‚æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼</p>\n<p>åœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚<strong>æœ¬è´¨å°±æ˜¯ä½¿ç”¨å·¥å‚æ–¹æ³•ä»£æ›¿ new æ“ä½œã€‚</strong></p>\n<h3 id=\"ç®€å•å·¥å‚æ¨¡å¼\"><a class=\"anchor\" href=\"#ç®€å•å·¥å‚æ¨¡å¼\">#</a> ç®€å•å·¥å‚æ¨¡å¼</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FoodFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Food</span> <span class=\"token function\">makeFood</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å…°å·æ‹‰é¢\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token class-name\">Food</span> noodle <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LanZhouNoodle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å…°å·æ‹‰é¢\"</span><span class=\"token operator\">+</span>noodle<span class=\"token operator\">+</span><span class=\"token string\">\"å‡ºé”…å•¦\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">return</span> noodle<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é»„ç„–é¸¡\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token class-name\">Food</span> chicken <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HuangMenChicken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é»„ç„–é¸¡\"</span><span class=\"token operator\">+</span> chicken <span class=\"token operator\">+</span><span class=\"token string\">\"å‡ºé”…å•¦\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">return</span> chicken<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸çŸ¥é“ä½ åšçš„ä»€ä¹ˆå“¦~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å…¶ä¸­ï¼ŒLanZhouNoodle å’Œ HuangMenChicken éƒ½ç»§æ‰¿è‡ª Foodã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Cook</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">Food</span> food <span class=\"token operator\">=</span> <span class=\"token class-name\">FoodFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">makeFood</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é»„ç„–é¸¡\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">FoodFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">makeFood</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jaja\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç®€å•åœ°è¯´ï¼Œ<strong>ç®€å•å·¥å‚æ¨¡å¼é€šå¸¸å°±æ˜¯è¿™æ ·ï¼Œä¸€ä¸ªå·¥å‚ç±» XxxFactoryï¼Œé‡Œé¢æœ‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œæ ¹æ®æˆ‘ä»¬ä¸åŒçš„å‚æ•°ï¼Œè¿”å›ä¸åŒçš„æ´¾ç”Ÿè‡ªåŒä¸€ä¸ªçˆ¶ç±»ï¼ˆæˆ–å®ç°åŒä¸€æ¥å£ï¼‰çš„å®ä¾‹å¯¹è±¡ã€‚</strong></p>\n<blockquote>\n<p>æˆ‘ä»¬å¼ºè°ƒ<strong>èŒè´£å•ä¸€</strong>åŸåˆ™ï¼Œä¸€ä¸ªç±»åªæä¾›ä¸€ç§åŠŸèƒ½ï¼ŒFoodFactory çš„åŠŸèƒ½å°±æ˜¯åªè¦è´Ÿè´£ç”Ÿäº§å„ç§ Foodã€‚</p>\n</blockquote>\n<p>åœ¨æ­¤ä¾‹ä¸­å¯ä»¥çœ‹å‡ºï¼ŒCook ç±»åœ¨ä½¿ç”¨ FoodFactory æ—¶å°±ä¸éœ€è¦ new ä»»ä½•ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™å°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„å¥½å¤„ï¼Œå°è£…äº† new çš„éƒ¨åˆ†ï¼Œåšåˆ°çš„ä»£ç æ˜“ç”¨æ€§ã€‚</p>\n<h3 id=\"å·¥å‚æ¨¡å¼\"><a class=\"anchor\" href=\"#å·¥å‚æ¨¡å¼\">#</a> å·¥å‚æ¨¡å¼</h3>\n<p>ç®€å•å·¥å‚æ¨¡å¼å¾ˆç®€å•ï¼Œå¦‚æœå®ƒèƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€è¦ï¼Œæˆ‘è§‰å¾—å°±ä¸è¦æŠ˜è…¾äº†ã€‚ä¹‹æ‰€ä»¥éœ€è¦å¼•å…¥å·¥å‚æ¨¡å¼ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å¾€å¾€éœ€è¦ä½¿ç”¨ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„å·¥å‚ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FoodFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Food</span> <span class=\"token function\">makeFood</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ChineseFoodFactory</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">FoodFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Food</span> <span class=\"token function\">makeFood</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ChineseFoodA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ChineseFoodB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AmericanFoodFactory</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">FoodFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Food</span> <span class=\"token function\">makeFood</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AmericanFoodA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AmericanFoodB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å…¶ä¸­ï¼ŒChineseFoodAã€ChineseFoodBã€AmericanFoodAã€AmericanFoodB éƒ½æ´¾ç”Ÿè‡ª Foodã€‚</p>\n<p>å®¢æˆ·ç«¯è°ƒç”¨ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">APP</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// å…ˆé€‰æ‹©ä¸€ä¸ªå…·ä½“çš„å·¥å‚</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">FoodFactory</span> factory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ChineseFoodFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// ç”±ç¬¬ä¸€æ­¥çš„å·¥å‚äº§ç”Ÿå…·ä½“çš„å¯¹è±¡ï¼Œä¸åŒçš„å·¥å‚é€ å‡ºä¸ä¸€æ ·çš„å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">Food</span> food <span class=\"token operator\">=</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">makeFood</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è™½ç„¶éƒ½æ˜¯è°ƒç”¨ makeFood (&quot;A&quot;) åˆ¶ä½œ A ç±»é£Ÿç‰©ï¼Œä½†æ˜¯ï¼Œä¸åŒçš„å·¥å‚ç”Ÿäº§å‡ºæ¥çš„å®Œå…¨ä¸ä¸€æ ·ã€‚</p>\n<p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦é€‰å–åˆé€‚çš„å·¥å‚ï¼Œç„¶åç¬¬äºŒæ­¥åŸºæœ¬ä¸Šå’Œç®€å•å·¥å‚ä¸€æ ·ã€‚</p>\n<p><strong>æ ¸å¿ƒåœ¨äºï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€æ­¥é€‰å¥½æˆ‘ä»¬éœ€è¦çš„å·¥å‚</strong>ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰ LogFactory æ¥å£ï¼Œå®ç°ç±»æœ‰ FileLogFactory å’Œ KafkaLogFactoryï¼Œåˆ†åˆ«å¯¹åº”å°†æ—¥å¿—å†™å…¥æ–‡ä»¶å’Œå†™å…¥ Kafka ä¸­ï¼Œæ˜¾ç„¶ï¼Œæˆ‘ä»¬å®¢æˆ·ç«¯ç¬¬ä¸€æ­¥å°±éœ€è¦å†³å®šåˆ°åº•è¦å®ä¾‹åŒ– FileLogFactory è¿˜æ˜¯ KafkaLogFactoryï¼Œè¿™å°†å†³å®šä¹‹åçš„æ‰€æœ‰çš„æ“ä½œã€‚</p>\n<h3 id=\"æŠ½è±¡å·¥å‚æ¨¡å¼\"><a class=\"anchor\" href=\"#æŠ½è±¡å·¥å‚æ¨¡å¼\">#</a> æŠ½è±¡å·¥å‚æ¨¡å¼</h3>\n<p>å½“æ¶‰åŠåˆ°<strong>äº§å“æ—</strong>çš„æ—¶å€™ï¼Œå°±éœ€è¦å¼•å…¥æŠ½è±¡å·¥å‚æ¨¡å¼äº†ã€‚ ä¸€ä¸ªç»å…¸çš„ä¾‹å­æ˜¯é€ ä¸€å°ç”µè„‘ ã€‚</p>\n<p>å½“æ¶‰åŠåˆ°è¿™ç§äº§å“æ—çš„é—®é¢˜çš„æ—¶å€™ï¼Œå°±éœ€è¦æŠ½è±¡å·¥å‚æ¨¡å¼æ¥æ”¯æŒäº†ã€‚æˆ‘ä»¬ä¸å†å®šä¹‰ CPU å·¥å‚ã€ä¸»æ¿å·¥å‚ã€ç¡¬ç›˜å·¥å‚ã€æ˜¾ç¤ºå±å·¥å‚ç­‰ç­‰ï¼Œæˆ‘ä»¬ç›´æ¥å®šä¹‰ç”µè„‘å·¥å‚ï¼Œæ¯ä¸ªç”µè„‘å·¥å‚è´Ÿè´£ç”Ÿäº§æ‰€æœ‰çš„è®¾å¤‡ï¼Œè¿™æ ·èƒ½ä¿è¯è‚¯å®šä¸å­˜åœ¨å…¼å®¹é—®é¢˜ã€‚</p>\n<p>å½“ç„¶ï¼ŒæŠ½è±¡å·¥å‚çš„é—®é¢˜ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦åŠ ä¸ªæ˜¾ç¤ºå™¨ï¼Œå°±éœ€è¦ä¿®æ”¹æ‰€æœ‰çš„å·¥å‚ï¼Œç»™æ‰€æœ‰çš„å·¥å‚éƒ½åŠ ä¸Šåˆ¶é€ æ˜¾ç¤ºå™¨çš„æ–¹æ³•ã€‚è¿™æœ‰ç‚¹è¿åäº†<strong>å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾</strong>è¿™ä¸ªè®¾è®¡åŸåˆ™ã€‚</p>\n<p>æœ¬èŠ‚è¦ä»‹ç»çš„æŠ½è±¡å·¥å‚æ¨¡å¼å°†è€ƒè™‘å¤šç­‰çº§äº§å“çš„ç”Ÿäº§ï¼Œå°†åŒä¸€ä¸ªå…·ä½“å·¥å‚æ‰€ç”Ÿäº§çš„ä½äºä¸åŒç­‰çº§çš„ä¸€ç»„äº§å“ç§°ä¸ºä¸€ä¸ªäº§å“æ—ï¼Œå›¾ 1 æ‰€ç¤ºçš„æ˜¯æµ·å°”å·¥å‚å’Œ TCL å·¥å‚æ‰€ç”Ÿäº§çš„ç”µè§†æœºä¸ç©ºè°ƒå¯¹åº”çš„å…³ç³»å›¾ã€‚</p>\n<p><img data-src=\"%E8%BD%AF%E4%BB%B6%E6%A8%A1%E5%BC%8F%E8%AE%BE%E8%AE%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%AD%E7%9A%84%E5%9B%BE%E7%89%87/3-1Q1141559151S.gif\" alt=\"3-1Q1141559151S\" /></p>\n<p>æŠ½è±¡å·¥å‚ï¼ˆAbstractFactoryï¼‰æ¨¡å¼çš„å®šä¹‰ï¼šæ˜¯ä¸€ç§ä¸ºè®¿é—®ç±»æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œä¸”è®¿é—®ç±»æ— é¡»æŒ‡å®šæ‰€è¦äº§å“çš„å…·ä½“ç±»å°±èƒ½å¾—åˆ°åŒæ—çš„ä¸åŒç­‰çº§çš„äº§å“çš„æ¨¡å¼ç»“æ„ã€‚</p>\n<p>æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å‡çº§ç‰ˆæœ¬ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åªç”Ÿäº§ä¸€ä¸ªç­‰çº§çš„äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯ç”Ÿäº§å¤šä¸ªç­‰çº§çš„äº§å“ã€‚</p>\n<p>ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸€èˆ¬è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ã€‚</p>\n<ul>\n<li>ç³»ç»Ÿä¸­æœ‰å¤šä¸ªäº§å“æ—ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚åˆ›å»ºåŒä¸€æ—ä½†å±äºä¸åŒç­‰çº§ç»“æ„çš„äº§å“ã€‚</li>\n<li>ç³»ç»Ÿä¸€æ¬¡åªå¯èƒ½æ¶ˆè´¹å…¶ä¸­æŸä¸€æ—äº§å“ï¼Œå³åŒæ—çš„äº§å“ä¸€èµ·ä½¿ç”¨ã€‚</li>\n</ul>\n<p>æŠ½è±¡å·¥å‚æ¨¡å¼é™¤äº†å…·æœ‰å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¼˜ç‚¹å¤–ï¼Œå…¶ä»–ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ã€‚</p>\n<ul>\n<li>å¯ä»¥åœ¨ç±»çš„å†…éƒ¨å¯¹äº§å“æ—ä¸­ç›¸å…³è”çš„å¤šç­‰çº§äº§å“å…±åŒç®¡ç†ï¼Œè€Œä¸å¿…ä¸“é—¨å¼•å…¥å¤šä¸ªæ–°çš„ç±»æ¥è¿›è¡Œç®¡ç†ã€‚</li>\n<li>å½“å¢åŠ ä¸€ä¸ªæ–°çš„äº§å“æ—æ—¶ä¸éœ€è¦ä¿®æ”¹åŸä»£ç ï¼Œæ»¡è¶³å¼€é—­åŸåˆ™ã€‚</li>\n</ul>\n<p>å…¶ç¼ºç‚¹æ˜¯ï¼šå½“äº§å“æ—ä¸­éœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„äº§å“æ—¶ï¼Œæ‰€æœ‰çš„å·¥å‚ç±»éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚</p>\n<h3 id=\"å•ä¾‹æ¨¡å¼\"><a class=\"anchor\" href=\"#å•ä¾‹æ¨¡å¼\">#</a> å•ä¾‹æ¨¡å¼</h3>\n<p>ç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼ŒæŸä¸ªç±»çš„å®ä¾‹å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œä½ æ²¡æœ‰åŠæ³•å» newï¼Œå› ä¸ºæ„é€ å™¨æ˜¯è¢« private ä¿®é¥°çš„ï¼Œä¸€èˆ¬é€šè¿‡ getInstance () çš„æ–¹æ³•æ¥è·å–å®ƒä»¬çš„å®ä¾‹ã€‚</p>\n<p>getInstance () çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œæ‰€ä»¥ä¸è¦é”™è¯¯çš„ç†è§£æˆå¤šä¸ªå¯¹è±¡ã€‚</p>\n<p><strong>ç‰¹ç‚¹</strong></p>\n<ul>\n<li>ç±»æ„é€ å™¨ç§æœ‰</li>\n<li>æŒæœ‰è‡ªå·±ç±»å‹çš„å±æ€§</li>\n<li>å¯¹å¤–æä¾›è·å–å®ä¾‹çš„é™æ€æ–¹æ³•</li>\n</ul>\n<p><strong>é¥¿æ±‰å¼å†™æ³•</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¼Šç«¯ï¼šå› ä¸ºç±»åŠ è½½çš„æ—¶å€™å°±ä¼šåˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™è¿˜ä¸éœ€è¦ä½¿ç”¨å¯¹è±¡ï¼Œå°±ä¼šåˆ›å»ºå¯¹è±¡ï¼Œé€ æˆå†…å­˜çš„æµªè´¹ï¼›</p>\n<p><strong>é¥±æ±‰æ¨¡å¼æœ€å®¹æ˜“å‡ºé”™ï¼š</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// é¦–å…ˆï¼Œä¹Ÿæ˜¯å…ˆå µæ­» new Singleton () è¿™æ¡è·¯</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// å’Œé¥¿æ±‰æ¨¡å¼ç›¸æ¯”ï¼Œè¿™è¾¹ä¸éœ€è¦å…ˆå®ä¾‹åŒ–å‡ºæ¥ï¼Œæ³¨æ„è¿™é‡Œçš„ volatileï¼Œå®ƒæ˜¯å¿…é¡»çš„</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">volatile</span> <span class=\"token class-name\">Singleton</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token comment\">// åŠ é”</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token comment\">// è¿™ä¸€æ¬¡åˆ¤æ–­ä¹Ÿæ˜¯å¿…é¡»çš„ï¼Œä¸ç„¶ä¼šæœ‰å¹¶å‘é—®é¢˜</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                    instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>åŒé‡æ£€æŸ¥ï¼ŒæŒ‡çš„æ˜¯ä¸¤æ¬¡æ£€æŸ¥ instance æ˜¯å¦ä¸º nullã€‚</p>\n<p>volatile åœ¨è¿™é‡Œæ˜¯éœ€è¦çš„ï¼Œå¸Œæœ›èƒ½å¼•èµ·è¯»è€…çš„å…³æ³¨ã€‚</p>\n<p>å¾ˆå¤šäººä¸çŸ¥é“æ€ä¹ˆå†™ï¼Œç›´æ¥å°±åœ¨ getInstance () æ–¹æ³•ç­¾åä¸ŠåŠ ä¸Š synchronizedï¼Œè¿™å°±ä¸å¤šè¯´äº†ï¼Œæ€§èƒ½å¤ªå·®ã€‚</p>\n</blockquote>\n<p>åµŒå¥—ç±»æœ€ç»å…¸ï¼Œä»¥åå¤§å®¶å°±ç”¨å®ƒå§ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// ä¸»è¦æ˜¯ä½¿ç”¨äº† åµŒå¥—ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€å±æ€§å’Œé™æ€æ–¹æ³• çš„ç‰¹æ€§</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Holder</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Holder</span><span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼Œå¾ˆå¤šäººéƒ½ä¼šæŠŠè¿™ä¸ª<strong>åµŒå¥—ç±»</strong>è¯´æˆæ˜¯<strong>é™æ€å†…éƒ¨ç±»</strong>ï¼Œä¸¥æ ¼åœ°è¯´ï¼Œå†…éƒ¨ç±»å’ŒåµŒå¥—ç±»æ˜¯ä¸ä¸€æ ·çš„ï¼Œå®ƒä»¬èƒ½è®¿é—®çš„å¤–éƒ¨ç±»æƒé™ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚</p>\n</blockquote>\n<p>æœ€åï¼Œæˆ‘ä»¬è¯´ä¸€ä¸‹æšä¸¾ï¼Œæšä¸¾å¾ˆç‰¹æ®Šï¼Œå®ƒåœ¨ç±»åŠ è½½çš„æ—¶å€™ä¼šåˆå§‹åŒ–é‡Œé¢çš„æ‰€æœ‰çš„å®ä¾‹ï¼Œè€Œä¸” JVM ä¿è¯äº†å®ƒä»¬ä¸ä¼šå†è¢«å®ä¾‹åŒ–ï¼Œæ‰€ä»¥å®ƒå¤©ç”Ÿå°±æ˜¯å•ä¾‹çš„ã€‚</p>\n<p><strong>TODO:</strong></p>\n<p>å»ºé€ è€…æ¨¡å¼</p>\n<p>åŸå‹æ¨¡å¼</p>\n<h2 id=\"ç»“æ„å‹æ¨¡å¼\"><a class=\"anchor\" href=\"#ç»“æ„å‹æ¨¡å¼\">#</a> ç»“æ„å‹æ¨¡å¼</h2>\n<p>å‰é¢åˆ›å»ºå‹æ¨¡å¼ä»‹ç»äº†åˆ›å»ºå¯¹è±¡çš„ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œè¿™èŠ‚ä»‹ç»çš„ç»“æ„å‹æ¨¡å¼æ—¨åœ¨é€šè¿‡æ”¹å˜ä»£ç ç»“æ„æ¥è¾¾åˆ°è§£è€¦çš„ç›®çš„ï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»£ç å®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•ã€‚</p>\n<h3 id=\"ä»£ç†æ¨¡å¼\"><a class=\"anchor\" href=\"#ä»£ç†æ¨¡å¼\">#</a> ä»£ç†æ¨¡å¼</h3>\n<p>ç¬¬ä¸€ä¸ªè¦ä»‹ç»çš„ä»£ç†æ¨¡å¼æ˜¯æœ€å¸¸ä½¿ç”¨çš„æ¨¡å¼ä¹‹ä¸€äº†ï¼Œç”¨ä¸€ä¸ªä»£ç†æ¥éšè—å…·ä½“å®ç°ç±»çš„å®ç°ç»†èŠ‚ï¼Œé€šå¸¸è¿˜ç”¨äºåœ¨çœŸå®çš„å®ç°çš„å‰åæ·»åŠ ä¸€éƒ¨åˆ†é€»è¾‘ã€‚</p>\n<p>æ—¢ç„¶è¯´æ˜¯<strong>ä»£ç†</strong>ï¼Œé‚£å°±è¦å¯¹å®¢æˆ·ç«¯éšè—çœŸå®å®ç°ï¼Œç”±ä»£ç†æ¥è´Ÿè´£å®¢æˆ·ç«¯çš„æ‰€æœ‰è¯·æ±‚ã€‚å½“ç„¶ï¼Œä»£ç†åªæ˜¯ä¸ªä»£ç†ï¼Œå®ƒä¸ä¼šå®Œæˆå®é™…çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ˜¯ä¸€å±‚çš®è€Œå·²ï¼Œä½†æ˜¯å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒå¿…é¡»è¡¨ç°å¾—å°±æ˜¯å®¢æˆ·ç«¯éœ€è¦çš„çœŸå®å®ç°ã€‚</p>\n<p>ç†è§£<strong>ä»£ç†</strong>è¿™ä¸ªè¯ï¼Œè¿™ä¸ªæ¨¡å¼å…¶å®å°±ç®€å•äº†ã€‚ ä¸‹é¢ä¸Šä»£ç ç†è§£ã€‚ ä»£ç†æ¥å£ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// è¦æœ‰ä¸€ä¸ªä»£ç†æ¥å£è®©å®ç°ç±»å’Œä»£ç†å®ç°ç±»æ¥å®ç°ã€‚</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FoodService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Food</span> <span class=\"token function\">makeChicken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¢«ä»£ç†çš„å®ç°ç±»ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FoodServiceImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">FoodService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Food</span> <span class=\"token function\">makeChicken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">Food</span> f <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Chicken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        f<span class=\"token punctuation\">.</span><span class=\"token function\">setChicken</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1kg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        f<span class=\"token punctuation\">.</span><span class=\"token function\">setSpicy</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1g\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        f<span class=\"token punctuation\">.</span><span class=\"token function\">setSalt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3g\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é¸¡è‚‰åŠ å¥½ä½æ–™äº†\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> f<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¢«ä»£ç†å®ç°ç±»å°±åªéœ€è¦åšè‡ªå·±è¯¥åšçš„äº‹æƒ…å°±å¥½äº†ï¼Œä¸éœ€è¦ç®¡åˆ«çš„ã€‚</p>\n<p>ä»£ç†å®ç°ç±»ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FoodServiceProxy</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">FoodService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// å†…éƒ¨ä¸€å®šè¦æœ‰ä¸€ä¸ªçœŸå®çš„å®ç°ç±»ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡æ„é€ æ–¹æ³•æ³¨å…¥</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">FoodService</span> foodService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FoodServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Food</span> <span class=\"token function\">makeChicken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å¼€å§‹åˆ¶ä½œé¸¡è‚‰\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// å¦‚æœæˆ‘ä»¬å®šä¹‰è¿™å¥ä¸ºæ ¸å¿ƒä»£ç çš„è¯ï¼Œé‚£ä¹ˆï¼Œæ ¸å¿ƒä»£ç æ˜¯çœŸå®å®ç°ç±»åšçš„ï¼Œ</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// ä»£ç†åªæ˜¯åœ¨æ ¸å¿ƒä»£ç å‰ååšäº› â€œæ— è¶³è½»é‡â€ çš„äº‹æƒ…</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">Food</span> food <span class=\"token operator\">=</span> foodService<span class=\"token punctuation\">.</span><span class=\"token function\">makeChicken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é¸¡è‚‰åˆ¶ä½œå®Œæˆå•¦ï¼ŒåŠ ç‚¹èƒ¡æ¤’ç²‰\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        food<span class=\"token punctuation\">.</span><span class=\"token function\">addCondiment</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pepper\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸Šé”…å’¯\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> food<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯è°ƒç”¨ï¼Œæ³¨æ„ï¼Œæˆ‘ä»¬è¦ç”¨ä»£ç†æ¥å®ä¾‹åŒ–æ¥å£ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// è¿™é‡Œç”¨ä»£ç†ç±»æ¥å®ä¾‹åŒ–</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">FoodService</span> foodService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FoodServiceProxy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>foodService<span class=\"token punctuation\">.</span><span class=\"token function\">makeChicken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æ‰€è°“ä»£ç†æ¨¡å¼ï¼Œ<strong>å°±æ˜¯å¯¹è¢«ä»£ç†æ–¹æ³•åŒ…è£…æˆ–è€…å«å¢å¼ºï¼Œ åœ¨é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ä¸­ï¼Œå…¶å®å°±æ˜¯åŠ¨æ€ä»£ç†çš„è¿‡ç¨‹ã€‚æ¯”å¦‚ Spring ä¸­ï¼Œæˆ‘ä»¬è‡ªå·±ä¸å®šä¹‰ä»£ç†ç±»ï¼Œä½†æ˜¯ Spring ä¼šå¸®æˆ‘ä»¬åŠ¨æ€æ¥å®šä¹‰ä»£ç†ï¼Œç„¶åæŠŠæˆ‘ä»¬å®šä¹‰åœ¨ @Beforeã€@Afterã€@Around ä¸­çš„ä»£ç é€»è¾‘åŠ¨æ€æ·»åŠ åˆ°ä»£ç†ä¸­ã€‚</strong></p>\n<p>å¾…ç»­ã€‚ã€‚ã€‚</p>\n<h2 id=\"è¡Œä¸ºå‹æ¨¡å¼\"><a class=\"anchor\" href=\"#è¡Œä¸ºå‹æ¨¡å¼\">#</a> è¡Œä¸ºå‹æ¨¡å¼</h2>\n<h3 id=\"æ¨¡æ¿æ¨¡å¼\"><a class=\"anchor\" href=\"#æ¨¡æ¿æ¨¡å¼\">#</a> æ¨¡æ¿æ¨¡å¼</h3>\n<p>åœ¨å«æœ‰ç»§æ‰¿ç»“æ„çš„ä»£ç ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯éå¸¸å¸¸ç”¨çš„ã€‚</p>\n<p><strong>çˆ¶ç±»å®šä¹‰äº†éª¨æ¶ï¼ˆè°ƒç”¨å“ªäº›æ–¹æ³•åŠé¡ºåºï¼‰ï¼ŒæŸäº›ç‰¹å®šæ–¹æ³•ç”±å­ç±»å®ç°</strong></p>\n<p>æ¨¡æ¿æ–¹æ³•åªè´Ÿè´£å®šä¹‰ç¬¬ä¸€æ­¥åº”è¯¥è¦åšä»€ä¹ˆï¼Œç¬¬äºŒæ­¥åº”è¯¥åšä»€ä¹ˆï¼Œç¬¬ä¸‰æ­¥åº”è¯¥åšä»€ä¹ˆï¼Œè‡³äºæ€ä¹ˆåšï¼Œç”±å­ç±»æ¥å®ç°ã€‚</p>\n<p>å¥½å¤„ï¼šä»£ç å¤ç”¨ï¼Œå‡å°‘é‡å¤ä»£ç ã€‚é™¤äº†å­ç±»è¦å®ç°çš„ç‰¹å®šæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•åŠæ–¹æ³•è°ƒç”¨é¡ºåºéƒ½åœ¨çˆ¶ç±»ä¸­é¢„å…ˆå†™å¥½</p>\n<p>ç¼ºç‚¹ï¼š æ¯ä¸€ä¸ªä¸åŒçš„å®ç°éƒ½éœ€è¦ä¸€ä¸ªå­ç±»æ¥å®ç°ï¼Œå¯¼è‡´ç±»ä¸ªæ•°å¢åŠ ï¼Œä½¿ç³»ç»Ÿæ›´åŠ åºå¤§</p>\n<p><strong>æ¨¡æ¿æ¨¡å¼çš„å…³é”®ç‚¹ï¼š</strong></p>\n<p>1ã€ä½¿ç”¨æŠ½è±¡ç±»å®šä¹‰æ¨¡æ¿ç±»ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰æ‰€æœ‰çš„åŸºæœ¬æ–¹æ³•ã€æ¨¡æ¿æ–¹æ³•ï¼Œé’©å­æ–¹æ³•ï¼Œä¸é™æ•°é‡ï¼Œä»¥å®ç°åŠŸèƒ½é€»è¾‘ä¸ºä¸»ã€‚å…¶ä¸­åŸºæœ¬æ–¹æ³•ä½¿ç”¨ final ä¿®é¥°ï¼Œå…¶ä¸­è¦è°ƒç”¨åŸºæœ¬æ–¹æ³•å’Œé’©å­æ–¹æ³•ï¼ŒåŸºæœ¬æ–¹æ³•å’Œé’©å­æ–¹æ³•å¯ä»¥ä½¿ç”¨ protected ä¿®é¥°ï¼Œè¡¨æ˜å¯è¢«å­ç±»ä¿®æ”¹ã€‚</p>\n<p>2ã€å®šä¹‰å®ç°æŠ½è±¡ç±»çš„å­ç±»ï¼Œé‡å†™å…¶ä¸­çš„æ¨¡æ¿æ–¹æ³•ï¼Œç”šè‡³é’©å­æ–¹æ³•ï¼Œå®Œå–„å…·ä½“çš„é€»è¾‘ã€‚</p>\n<p>ä½¿ç”¨åœºæ™¯ï¼š</p>\n<p>1ã€åœ¨å¤šä¸ªå­ç±»ä¸­æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œè€Œä¸”é€»è¾‘ç›¸åŒæ—¶ï¼Œå¯ä»¥å°†è¿™äº›æ–¹æ³•æŠ½å‡ºæ¥æ”¾åˆ°ä¸€ä¸ªæ¨¡æ¿æŠ½è±¡ç±»ä¸­ã€‚</p>\n<p>2ã€ç¨‹åºä¸»æ¡†æ¶ç›¸åŒï¼Œç»†èŠ‚ä¸åŒçš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•ã€‚</p>\n<h4 id=\"æ¶æ„æ–¹æ³•ä»‹ç»\"><a class=\"anchor\" href=\"#æ¶æ„æ–¹æ³•ä»‹ç»\">#</a> æ¶æ„æ–¹æ³•ä»‹ç»</h4>\n<p>æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤ã€‚å…¶ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ¨¡ç‰ˆæ–¹æ³•å’ŒåŸºæœ¬æ–¹æ³•ï¼Œè€ŒåŸºæœ¬æ–¹æ³•åˆåˆ†ä¸ºï¼šæŠ½è±¡æ–¹æ³•ï¼ˆAbstract Methodï¼‰ï¼Œå…·ä½“æ–¹æ³•ï¼ˆConcrete Methodï¼‰ï¼Œé’©å­æ–¹æ³•ï¼ˆHook Methodï¼‰ã€‚</p>\n<p>å››ç§æ–¹æ³•çš„åŸºæœ¬å®šä¹‰ï¼ˆå‰æï¼šåœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰ï¼‰ï¼š</p>\n<p>ï¼ˆ1ï¼‰æŠ½è±¡æ–¹æ³•ï¼šç”±æŠ½è±¡ç±»å£°æ˜ï¼Œç”±å…·ä½“å­ç±»å®ç°ï¼Œå¹¶ä»¥ abstract å…³é”®å­—è¿›è¡Œæ ‡è¯†ã€‚</p>\n<p>ï¼ˆ2ï¼‰å…·ä½“æ–¹æ³•ï¼šç”±æŠ½è±¡ç±»å£°æ˜å¹¶ä¸”å®ç°ï¼Œå­ç±»å¹¶ä¸å®ç°æˆ–è€…åšè¦†ç›–æ“ä½œã€‚å…¶å®è´¨å°±æ˜¯æ™®éé€‚ç”¨çš„æ–¹æ³•ï¼Œä¸éœ€è¦å­ç±»æ¥å®ç°ã€‚</p>\n<p>ï¼ˆ3ï¼‰é’©å­æ–¹æ³•ï¼šç”±æŠ½è±¡ç±»å£°æ˜å¹¶ä¸”å®ç°ï¼Œå­ç±»ä¹Ÿå¯ä»¥é€‰æ‹©åŠ ä»¥æ‰©å±•ã€‚é€šå¸¸æŠ½è±¡ç±»ä¼šç»™å‡ºä¸€ä¸ªç©ºçš„é’©å­æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å®ç°çš„æ‰©å±•ã€‚<strong>å®ƒå’Œå…·ä½“æ–¹æ³•åœ¨ä»£ç ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œä¸è¿‡æ˜¯ä¸€ç§æ„è¯†çš„åŒºåˆ«</strong>ï¼›è€Œå®ƒå’ŒæŠ½è±¡æ–¹æ³•æœ‰æ—¶å€™ä¹Ÿæ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œå°±æ˜¯åœ¨å­ç±»éƒ½éœ€è¦å°†å…¶å®ç°çš„æ—¶å€™ã€‚è€Œä¸åŒçš„æ˜¯æŠ½è±¡æ–¹æ³•å¿…é¡»å®ç°ï¼Œè€Œé’©å­æ–¹æ³•å¯ä»¥ä¸å®ç°ã€‚ä¹Ÿå°±æ˜¯è¯´é’©å­æ–¹æ³•ä¸ºä½ åœ¨å®ç°æŸä¸€ä¸ªæŠ½è±¡ç±»çš„æ—¶å€™æä¾›äº†å¯é€‰é¡¹ï¼Œ<strong>ç›¸å½“äºé¢„å…ˆæä¾›äº†ä¸€ä¸ªé»˜è®¤é…ç½®ã€‚</strong></p>\n<p>ï¼ˆ4ï¼‰æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­å®šä¹‰äº†æ•´ä¸ªé€»è¾‘çš„åŸºæœ¬éª¨æ¶ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> abstract <span class=\"token keyword\">class</span> <span class=\"token class-name\">AbstractTemplate</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// è¿™å°±æ˜¯æ¨¡æ¿æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">templateMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿™ä¸ªæ˜¯é‡ç‚¹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å¯ä»¥ä½œä¸ºé’©å­æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token comment\">// è¿™æ˜¯å…·ä½“æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"init æŠ½è±¡å±‚å·²ç»å®ç°ï¼Œå­ç±»ä¹Ÿå¯ä»¥é€‰æ‹©è¦†å†™\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// è¿™æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œç•™ç»™å­ç±»å®ç°</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">protected</span> abstract <span class=\"token keyword\">void</span> <span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t<span class=\"token comment\">// è¿™æ˜¯é’©å­æ–¹æ³•ï¼Œå¯å®šä¹‰ä¸€ä¸ªé»˜è®¤æ“ä½œï¼Œæˆ–è€…ä¸ºç©º</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "è®¾è®¡æ¨¡å¼",
                "è®¾è®¡æ¨¡å¼"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/02/03/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E4%B8%8E%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/",
            "url": "https://dmqweb.cn/2024/02/03/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E4%B8%8E%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/",
            "title": "æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²",
            "date_published": "2024-02-03T06:04:09.000Z",
            "content_html": "<h1 id=\"5-4-æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²\"><a class=\"anchor\" href=\"#5-4-æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²\">#</a> 5-4 æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²</h1>\n<h2 id=\"è¯¾ç¨‹ä»‹ç»\"><a class=\"anchor\" href=\"#è¯¾ç¨‹ä»‹ç»\">#</a> è¯¾ç¨‹ä»‹ç»</h2>\n<p>é‚£äº›å¤§å‚ä»¬ï¼Œå¤©å¤© DevOpsã€æŒç»­é›†æˆçš„ï¼Ÿåˆ°åº•åœ¨è®²äº›ä»€ä¹ˆï¼Ÿè¿™å ‚è¯¾æ¥ç»™ä½ æ­å¼€æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²çš„é¢çº±ï¼ï¼æ²¡æœ‰ä»€ä¹ˆéš¾çš„ï¼Œç›˜å®ƒï¼</p>\n<p><strong>ä¼ ç»Ÿçš„å¼€å‘è¿‡ç¨‹ä¸­çš„å‘ï¼š</strong></p>\n<ul>\n<li>BUG æ€»æ˜¯åœ¨æœ€åæ‰å‘ç°</li>\n<li>è¶Šåˆ°é¡¹ç›®åæœŸï¼ŒåŠ ç­è¶Šä¸¥é‡</li>\n<li>äº¤ä»˜æ— æ³•ä¿éšœ</li>\n<li>å˜æ›´é¢‘ç¹å¯¼è‡´æ•ˆç‡ä½ä¸‹</li>\n<li>æ— æ•ˆçš„ç­‰å¾…å¤šï¼Œç”¨æˆ·æ»¡è¶³åº¦ä½</li>\n</ul>\n<p><img data-src=\"./assets/1460000014924499.png\" alt=\"img\" /></p>\n<p><strong>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ / ç”¨è¿‡ï¼Ÿå½“ä½ å“ªä¸€å¤©...</strong></p>\n<ul>\n<li>ä¸ç”¨ä¸ºå¼€å‘ / æµ‹è¯•ç¯å¢ƒä¸ä¸€è‡´è€Œè‹¦æ¼</li>\n<li>ä¸ç”¨éº»çƒ¦è¿ç»´äººå‘˜å¸®å¿™è°ƒè¯•ç¯å¢ƒ</li>\n<li>ä¸ç”¨æ‰‹åŠ¨è¿›è¡Œæµ‹è¯•ï¼Œæ¨¡æ‹Ÿç¯å¢ƒä¸­è¿›è¡Œè‡ªæµ‹</li>\n<li>ä¸ç”¨æ‰‹åŠ¨å‘å¸ƒã€éƒ¨ç½²ï¼Œè‡ªåŠ¨åŒ–å®ç°å‘å¸ƒéƒ¨ç½²</li>\n<li>ä¸ç”¨ç®¡å¼€å‘ / æµ‹è¯•ç¯å¢ƒï¼Œåªç”¨ä¸“æ³¨ä»£ç çš„å¼€å‘ï¼Ÿ</li>\n</ul>\n<p><strong>æŒç»­é›†æˆè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p>\n<ul>\n<li>æé«˜è½¯ä»¶è´¨é‡</li>\n<li>æ•ˆç‡è¿­ä»£</li>\n<li>ä¾¿æ·éƒ¨ç½²</li>\n<li>å¿«é€Ÿäº¤ä»˜ã€ä¾¿äºç®¡ç†</li>\n</ul>\n<p><strong>è¯¾ç¨‹çš„ä¸»è¦å†…å®¹ï¼š</strong></p>\n<ul>\n<li>\n<p>ä»€ä¹ˆæ˜¯ CI/CD</p>\n</li>\n<li>\n<p>ä»‹ç» CI/CD æµç¨‹</p>\n</li>\n<li>\n<p>å‰ç«¯é¡¹ç›®ï¼šç»“åˆ CI/CD æµç¨‹ï¼Œå®ç°å¿«é€Ÿè¿­ä»£</p>\n</li>\n<li>\n<p>Docker çš„ä½¿ç”¨ï¼ŒJenkins+gitlab+nodejs è‡ªåŠ¨åŒ–é¡¹ç›®</p>\n</li>\n<li>\n<p>æŒç»­é›†æˆå·¥å…·ä»‹ç»ï¼šJenkinsã€Travis CIã€Circle CI</p>\n</li>\n</ul>\n<p><strong>ç¯å¢ƒå‡†å¤‡ï¼š</strong></p>\n<ul>\n<li>Linux æœåŠ¡å™¨ (Centos 7.6/Ubuntu 16.04LTS)</li>\n<li>VSCode + æ’ä»¶ Dockerfile</li>\n<li>æ³¨å†Œ github è´¦å·</li>\n</ul>\n<h2 id=\"æŒç»­é›†æˆ\"><a class=\"anchor\" href=\"#æŒç»­é›†æˆ\">#</a> æŒç»­é›†æˆ</h2>\n<h3 id=\"æ ¸å¿ƒæ¦‚å¿µ\"><a class=\"anchor\" href=\"#æ ¸å¿ƒæ¦‚å¿µ\">#</a> æ ¸å¿ƒæ¦‚å¿µ</h3>\n<p><strong>é›†æˆï¼Œå°±æ˜¯ä¸€äº›å­¤ç«‹çš„äº‹ç‰©æˆ–å…ƒç´ é€šè¿‡æŸç§æ–¹å¼é›†ä¸­åœ¨ä¸€èµ·ï¼Œäº§ç”Ÿè”ç³»ï¼Œä»è€Œæ„æˆä¸€ä¸ªæœ‰æœºæ•´ä½“çš„è¿‡ç¨‹</strong>ã€‚çŸ¥è¯†ç»æµçš„ç¤¾ä¼šï¼Œé›†æˆå·²ç»æˆäº†å¾ˆé‡è¦çš„ä¸€ä¸ªåè¯ã€‚å„è¡Œå„ä¸šåŸºæœ¬éƒ½ä¼šç”¨åˆ°é›†æˆã€‚æ¯”å¦‚æ±½è½¦è¡Œä¸šï¼Œé‚£ä¹ˆå¤æ‚çš„ä¸€å°è·‘è½¦æ„£æ˜¯é€šè¿‡ä¸€å¤§å †é›¶ä»¶ç»„è£…èµ·æ¥ã€‚å¯¹äºè¿™äº›ä¼ ç»Ÿè¡Œä¸šï¼Œå®ƒä»¬åœ¨ç ”å‘æˆåŠŸä»¥åï¼Œå¯ä»¥é€šè¿‡æµæ°´çº¿çš„æ–¹æ³•æ‰¹é‡ç”Ÿäº§è¿›è¡Œé›†æˆã€‚è€Œåœ¨è½¯ä»¶è¡Œä¸šä¸­ï¼Œé›†æˆå¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„ â€œæ¬ç®±å­â€ çš„è¿‡ç¨‹ã€‚å› ä¸ºè½¯ä»¶å·¥ä¸šæ˜¯ä¸€ä¸ªçŸ¥è¯†ç”Ÿäº§æ´»åŠ¨ï¼Œå…¶å†…åœ¨é€»è¾‘éå¸¸å¤æ‚ï¼Œéœ€æ±‚åˆå¾ˆéš¾ä¸€æ¬¡æ€§ç¡®å®šï¼Œå®Œæˆçš„äº§å“ä¸æœ€åˆçš„è®¾è®¡å¾€å¾€ç›¸å·®å¾ˆè¿œã€‚æ•æ·å®£è¨€ä¸­å°±æœ‰ä¸€æ¡æ˜¯è¯´å“åº”å˜åŒ–é‡äºéµå¾ªè®¡åˆ’ã€‚è€Œä¸”ç”±äºè½¯ä»¶è¡Œä¸šçš„è¿…çŒ›å‘å±•ï¼Œè½¯ä»¶å˜çš„è¶Šæ¥è¶Šå¤æ‚ï¼Œå•é ä¸ªäººæ˜¯æ ¹æœ¬æ— æ³•å®Œæˆã€‚å¤§å‹è½¯ä»¶ä¸ºäº†é‡ç”¨åŠè§£è€¦ï¼Œå¾€å¾€è¿˜éœ€è¦åˆ†æˆå¥½å‡ ä¸ªæ¨¡å—ï¼Œè¿™æ ·é›†æˆå°±æˆäº†è½¯ä»¶å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</p>\n<p>æŒç»­ï¼Œä¸è¨€è€Œå–»ï¼Œå°±æ˜¯æŒ‡<strong>é•¿æœŸçš„å¯¹é¡¹ç›®ä»£ç è¿›è¡Œé›†æˆã€‚</strong></p>\n<h4 id=\"æŒç»­é›†æˆ-2\"><a class=\"anchor\" href=\"#æŒç»­é›†æˆ-2\">#</a> æŒç»­é›†æˆ</h4>\n<p>æŒç»­é›†æˆï¼ˆè‹±æ–‡ï¼šContinuous Integrationï¼Œç®€ç§° CIï¼‰</p>\n<p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼ŒæŒç»­é›†æˆæ˜¯æŒ‡å°†æ‰€æœ‰å¼€å‘è€…å·¥ä½œå‰¯æœ¬æ¯å¤©å¤šæ¬¡åˆå¹¶åˆ°ä¸»å¹²çš„åšæ³•ã€‚</p>\n<blockquote>\n<p>Grady Booch åœ¨ 1991 å¹´çš„ Booch method ä¸­é¦–æ¬¡å‘½åå¹¶æå‡ºäº† CI çš„æ¦‚å¿µï¼Œå°½ç®¡åœ¨å½“æ—¶ä»–å¹¶ä¸ä¸»å¼ æ¯å¤©å¤šæ¬¡é›†æˆã€‚è€Œ XPï¼ˆExtreme programmingï¼Œæé™ç¼–ç¨‹ï¼‰é‡‡ç”¨äº† CI çš„æ¦‚å¿µï¼Œå¹¶æå€¡æ¯å¤©ä¸æ­¢ä¸€æ¬¡é›†æˆã€‚</p>\n<p>åœ¨ã€ŠæŒç»­é›†æˆã€‹ä¸€ä¹¦ä¸­ï¼Œå¯¹æŒç»­é›†æˆçš„å®šä¹‰å¦‚ä¸‹ï¼š <code>æŒç»­é›†æˆ</code> æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘å®è·µã€‚åœ¨æŒç»­é›†æˆä¸­ï¼Œå›¢é˜Ÿæˆå‘˜é¢‘ç¹é›†æˆä»–ä»¬çš„å·¥ä½œæˆæœï¼Œä¸€èˆ¬æ¯äººæ¯å¤©è‡³å°‘é›†æˆä¸€æ¬¡ï¼Œä¹Ÿå¯ä»¥å¤šæ¬¡ã€‚æ¯æ¬¡é›†æˆä¼šç»è¿‡è‡ªåŠ¨æ„å»º (åŒ…æ‹¬è‡ªåŠ¨æµ‹è¯•) çš„æ£€éªŒï¼Œä»¥å°½å¿«å‘ç°é›†æˆé”™è¯¯ã€‚è‡ªä»åœ¨å›¢é˜Ÿä¸­å¼•å…¥è¿™æ ·çš„å®è·µä¹‹åï¼Œ <code>Martin Fowler</code>  å‘ç°è¿™ç§æ–¹æ³•å¯ä»¥æ˜¾è‘—å‡å°‘é›†æˆå¼•èµ·çš„é—®é¢˜ï¼Œå¹¶å¯ä»¥åŠ å¿«å›¢é˜Ÿåˆä½œè½¯ä»¶å¼€å‘çš„é€Ÿåº¦ã€‚</p>\n</blockquote>\n<p><img data-src=\"./assets/c5c8e6f40c7c133e22402c00bb7e1a25_hd.jpg\" alt=\"img\" /></p>\n<p>æŒç»­é›†æˆå¼ºè°ƒå¼€å‘äººå‘˜æäº¤äº†æ–°ä»£ç ä¹‹åï¼Œç«‹åˆ»è¿›è¡Œæ„å»ºã€ï¼ˆå•å…ƒï¼‰æµ‹è¯•ã€‚æ ¹æ®æµ‹è¯•ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæ–°ä»£ç å’ŒåŸæœ‰ä»£ç èƒ½å¦æ­£ç¡®åœ°é›†æˆåœ¨ä¸€èµ·ã€‚</p>\n<p>å¯¹äºä¸€å¤©éœ€è¦é›†æˆå¤šå°‘æ¬¡æ•°ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªæ˜ç¡®çš„å®šä¹‰ã€‚ä¸€èˆ¬å°±æ˜¯æŒ‰ç…§è‡ªå·±é¡¹ç›®çš„å®é™…éœ€è¦æ¥è®¾ç½®ä¸€å®šçš„é¢‘ç‡ï¼Œå°‘åˆ™å¯èƒ½å‡ æ¬¡ï¼Œå¤šåˆ™å¯èƒ½è¾¾å‡ åæ¬¡ã€‚å¯ä»¥è®¾ç½®æŒ‰ç…§ä»£ç çš„å˜æ›´æ¥è§¦å‘é›†æˆï¼Œæˆ–è€…è®¾ç½®ä¸€ä¸ªå›ºå®šæ—¶é—´å‘¨æœŸæ¥é›†æˆï¼Œä¹Ÿå¯ä»¥æ‰‹å·¥ç‚¹å‡»é›†æˆçš„æŒ‰é’®æ¥ â€œä¸€é”®é›†æˆâ€ã€‚</p>\n<h4 id=\"æŒç»­äº¤ä»˜\"><a class=\"anchor\" href=\"#æŒç»­äº¤ä»˜\">#</a> æŒç»­äº¤ä»˜</h4>\n<p>æŒç»­äº¤ä»˜ï¼ˆè‹±æ–‡ï¼šContinuous Deliveryï¼Œç®€ç§° CDï¼‰</p>\n<p>å®Œæˆ CI ä¸­æ„å»ºåŠå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•çš„è‡ªåŠ¨åŒ–æµç¨‹åï¼ŒæŒç»­äº¤ä»˜å¯è‡ªåŠ¨å°†å·²éªŒè¯çš„ä»£ç å‘å¸ƒåˆ°å­˜å‚¨åº“ã€‚ä¸ºäº†å®ç°é«˜æ•ˆçš„æŒç»­äº¤ä»˜æµç¨‹ï¼ŒåŠ¡å¿…è¦ç¡®ä¿ CI å·²å†…ç½®äºå¼€å‘ç®¡é“ã€‚æŒç»­äº¤ä»˜çš„ç›®æ ‡æ˜¯æ‹¥æœ‰ä¸€ä¸ªå¯éšæ—¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„ä»£ç åº“ã€‚</p>\n<p><img data-src=\"./assets/db7198e3c39e4656e18efcb4bd1b20b1_hd.jpg\" alt=\"img\" /></p>\n<p>åœ¨æŒç»­äº¤ä»˜ä¸­ï¼Œæ¯ä¸ªé˜¶æ®µï¼ˆä»ä»£ç æ›´æ”¹çš„åˆå¹¶ï¼Œåˆ°ç”Ÿäº§å°±ç»ªå‹æ„å»ºç‰ˆæœ¬çš„äº¤ä»˜ï¼‰éƒ½æ¶‰åŠæµ‹è¯•è‡ªåŠ¨åŒ–å’Œä»£ç å‘å¸ƒè‡ªåŠ¨åŒ–ã€‚åœ¨æµç¨‹ç»“æŸæ—¶ï¼Œè¿ç»´å›¢é˜Ÿå¯ä»¥å¿«é€Ÿã€è½»æ¾åœ°å°†åº”ç”¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p>\n<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å®Œæˆå•å…ƒæµ‹è¯•åï¼Œå¯ä»¥æŠŠä»£ç éƒ¨ç½²åˆ°è¿æ¥æ•°æ®åº“çš„ Staging ç¯å¢ƒä¸­æ›´å¤šçš„æµ‹è¯•ã€‚å¦‚æœä»£ç æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ç»§ç»­ <code>æ‰‹åŠ¨</code> éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p>\n<h4 id=\"æŒç»­éƒ¨ç½²\"><a class=\"anchor\" href=\"#æŒç»­éƒ¨ç½²\">#</a> æŒç»­éƒ¨ç½²</h4>\n<p>æŒç»­éƒ¨ç½²ï¼ˆè‹±æ–‡ï¼šContinuous Deploymentï¼Œç®€ç§° CDï¼‰</p>\n<p>å¯¹äºä¸€ä¸ªæˆç†Ÿçš„ CI/CD ç®¡é“æ¥è¯´ï¼Œæœ€åçš„é˜¶æ®µæ˜¯æŒç»­éƒ¨ç½²ã€‚ä½œä¸ºæŒç»­äº¤ä»˜ â€”â€” è‡ªåŠ¨å°†ç”Ÿäº§å°±ç»ªå‹æ„å»ºç‰ˆæœ¬å‘å¸ƒåˆ°ä»£ç å­˜å‚¨åº“ â€”â€” çš„å»¶ä¼¸ï¼ŒæŒç»­éƒ¨ç½²å¯ä»¥è‡ªåŠ¨å°†åº”ç”¨å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒã€‚ç”±äºåœ¨ç”Ÿäº§ä¹‹å‰çš„ç®¡é“é˜¶æ®µæ²¡æœ‰æ‰‹åŠ¨é—¨æ§ï¼Œå› æ­¤æŒç»­éƒ¨ç½²åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šéƒ½å¾—ä¾èµ–ç²¾å¿ƒè®¾è®¡çš„æµ‹è¯•è‡ªåŠ¨åŒ–ã€‚</p>\n<p><img data-src=\"./assets/f96f19e4d567aad5006d841963a86e41_hd.jpg\" alt=\"img\" /></p>\n<p>å®é™…ä¸Šï¼ŒæŒç»­éƒ¨ç½²æ„å‘³ç€å¼€å‘äººå‘˜å¯¹åº”ç”¨çš„æ›´æ”¹åœ¨ç¼–å†™åçš„å‡ åˆ†é’Ÿå†…å°±èƒ½ç”Ÿæ•ˆï¼ˆå‡è®¾å®ƒé€šè¿‡äº†è‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰ã€‚è¿™æ›´åŠ ä¾¿äºæŒç»­æ¥æ”¶å’Œæ•´åˆç”¨æˆ·åé¦ˆã€‚æ€»è€Œè¨€ä¹‹ï¼Œæ‰€æœ‰è¿™äº› CI/CD çš„å…³è”æ­¥éª¤éƒ½æœ‰åŠ©äºé™ä½åº”ç”¨çš„éƒ¨ç½²é£é™©ï¼Œå› æ­¤æ›´ä¾¿äºä»¥å°ä»¶çš„æ–¹å¼ï¼ˆè€Œéä¸€æ¬¡æ€§ï¼‰å‘å¸ƒå¯¹åº”ç”¨çš„æ›´æ”¹ã€‚ä¸è¿‡ï¼Œç”±äºè¿˜éœ€è¦ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ä»¥é€‚åº” CI/CD ç®¡é“ä¸­çš„å„ç§æµ‹è¯•å’Œå‘å¸ƒé˜¶æ®µï¼Œå› æ­¤å‰æœŸæŠ•èµ„è¿˜æ˜¯ä¼šå¾ˆå¤§ã€‚</p>\n<p>æŒç»­éƒ¨ç½²åˆ™æ˜¯åœ¨æŒç»­äº¤ä»˜çš„åŸºç¡€ä¸Šï¼ŒæŠŠéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„è¿‡ç¨‹ <code>è‡ªåŠ¨åŒ–</code> ã€‚</p>\n<h3 id=\"æŒç»­é›†æˆç»„æˆè¦ç´ \"><a class=\"anchor\" href=\"#æŒç»­é›†æˆç»„æˆè¦ç´ \">#</a> æŒç»­é›†æˆç»„æˆè¦ç´ </h3>\n<p><strong>ä¸€ä¸ªæœ€å°åŒ–çš„æŒç»­é›†æˆç³»ç»Ÿéœ€è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªè¦ç´ ï¼š</strong></p>\n<ol>\n<li>** ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼š** é¡¹ç›®çš„æºä»£ç éœ€è¦æ‰˜ç®¡åˆ°é€‚åˆçš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨ git ä½œä¸ºç‰ˆæœ¬æ§åˆ¶åº“ï¼Œç‰ˆæœ¬ç®¡ç†è½¯ä»¶å¯ä»¥ä½¿ç”¨ githubã€ <code>gitlab</code> ã€stash ç­‰ã€‚</li>\n<li>** æ„å»ºè„šæœ¬ &amp; å·¥å…·ï¼š** æ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦æœ‰æ„å»ºè„šæœ¬æ¥å®ç°å¯¹æ•´ä¸ªé¡¹ç›®çš„è‡ªåŠ¨åŒ–æ„å»ºã€‚æ¯”å¦‚ Java çš„é¡¹ç›®å°±å¯ä»¥ä½¿ç”¨ gradle ä½œä¸ºæ„å»ºå·¥å…·ã€‚é€šè¿‡æ„å»ºå·¥å…·å®ç°å¯¹ç¼–è¯‘ã€é™æ€æ‰«æã€è¿è¡Œæµ‹è¯•ã€æ ·å¼æ£€æŸ¥ã€æ‰“åŒ…ã€å‘å¸ƒç­‰æ´»åŠ¨ä¸²èµ·æ¥ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œè‡ªåŠ¨æ‰§è¡Œã€‚</li>\n<li>**CI æœåŠ¡å™¨ï¼š**CI æœåŠ¡å™¨å¯ä»¥æ£€æµ‹é¡¹ç›®ä¸­çš„ä»£ç å˜åŠ¨ï¼Œå¹¶åŠæ—¶çš„é€šè¿‡æ„å»ºæœºå™¨è¿è¡Œæ„å»ºè„šæœ¬ï¼Œå¹¶å°†é›†æˆç»“æœé€šè¿‡æŸç§æ–¹å¼åé¦ˆç»™å›¢é˜Ÿæˆå‘˜ã€‚</li>\n</ol>\n<h3 id=\"åº”ç”¨åœºæ™¯\"><a class=\"anchor\" href=\"#åº”ç”¨åœºæ™¯\">#</a> åº”ç”¨åœºæ™¯</h3>\n<ul>\n<li>\n<p>æ‰“åŒ…å¹³å°</p>\n<p>å¸¸è§çš„æ‰“åŒ…ï¼ŒJava åº”ç”¨ï¼ˆGradle/Mavenï¼‰ã€Nodejs å‰ç«¯åº”ç”¨ (npm/yarn)</p>\n<p>ç§»åŠ¨ç«¯æ‰“åŒ…ï¼šAndroid/iOS</p>\n</li>\n<li>\n<p>æµ‹è¯•å¹³å°</p>\n<p>æ¥å£æµ‹è¯•</p>\n<p>è‡ªåŠ¨åŒ–æµ‹è¯• Robotiumã€Testlink</p>\n<p>å•å…ƒæµ‹è¯• junit</p>\n<p>æ€§èƒ½æµ‹è¯• Jmeter</p>\n</li>\n<li>\n<p>è‡ªåŠ¨éƒ¨ç½²</p>\n<p>FTP</p>\n<p>Shell</p>\n<p>Tomcat/Dokcer</p>\n<p>Kubernetes/Rancher/Cluster</p>\n</li>\n<li>\n<p>æŒç»­é›†æˆ</p>\n<p>Git: gitlab github gitee ç­‰</p>\n<p>Jenkins/TravisCi/CircleCI</p>\n<p>Docker</p>\n</li>\n</ul>\n<h3 id=\"å·¥ä½œæµ\"><a class=\"anchor\" href=\"#å·¥ä½œæµ\">#</a> å·¥ä½œæµ</h3>\n<h4 id=\"ä¼ ç»Ÿçš„å·¥ä½œæµ\"><a class=\"anchor\" href=\"#ä¼ ç»Ÿçš„å·¥ä½œæµ\">#</a> ä¼ ç»Ÿçš„å·¥ä½œæµ</h4>\n<p>å‚ä¸äººå‘˜ï¼šå¼€å‘ã€é¡¹ç›®ç»ç†ã€æµ‹è¯•</p>\n<p>ä¸»è¦æµç¨‹ï¼š</p>\n<ul>\n<li>é¡¹ç›®ä¸€å¼€å§‹æ˜¯å…ˆåˆ’åˆ†å¥½æ¨¡å—ï¼Œ <code>åˆ†é…æ¨¡å—</code> ç»™ç›¸åº”çš„å¼€å‘äººå‘˜ï¼›</li>\n<li>å¼€å‘äººå‘˜ <code>å¼€å‘å¥½</code> ä¸€ä¸ªæ¨¡å—å°±è¿›è¡Œ <code>å•å…ƒæµ‹è¯•</code> ï¼›</li>\n<li>ç­‰æ‰€æœ‰çš„æ¨¡å—éƒ½å¼€å‘å®Œæˆä¹‹åï¼Œç”±é¡¹ç›®ç»ç†å¯¹ <code>æ‰€æœ‰ä»£ç è¿›è¡Œé›†æˆ</code> ï¼›</li>\n<li>é›†æˆåçš„é¡¹ç›®ç”±é¡¹ç›®ç»ç† <code>éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨</code> ä¸Šï¼Œè¢«äº¤ç”±æµ‹è¯•äººå‘˜è¿›è¡Œé›†æˆæµ‹è¯•ï¼›</li>\n<li>æµ‹è¯•è¿‡ç¨‹ä¸­å‡ºç° Bug å°±ææŠŠé—®é¢˜ <code>è®°å½•</code> è¿›è¡Œ  <code>Bug</code>  åˆ—è¡¨ä¸­ï¼›</li>\n<li><code>é¡¹ç›®ç»ç†åˆ†é… Bug</code>  ç»™ç›¸åº”çš„è´£ä»»äººè¿›è¡Œä¿®æ”¹ï¼›</li>\n<li>ä¿®æ”¹å®Œæˆåï¼Œé¡¹ç›®ç»ç† <code>å†æ¬¡</code> å¯¹é¡¹ç›®è¿›è¡Œé›†æˆï¼Œå¹¶ <code>éƒ¨ç½²</code> åˆ°æµ‹è¯•æœåŠ¡å™¨ä¸Šï¼›</li>\n<li>æµ‹è¯•äººå‘˜åœ¨ä¸‹ä¸€æ¬¡çš„é›†æˆæµ‹è¯•ä¸­è¿›è¡Œ <code>å›å½’æµ‹è¯•</code> ï¼›</li>\n<li>é€šè¿‡é€šè¿‡ä¹‹åå°± <code>éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</code> ä¸­ï¼›</li>\n<li>å¦‚æœæµ‹è¯•ä¸é€šè¿‡ï¼Œåˆ™é‡å¤ä¸Šè¿° â€œåˆ†é… Bug -&gt; ä¿®æ”¹ Bug -&gt; é›†æˆä»£ç  -&gt; éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨ä¸Š -&gt; é›†æˆæµ‹è¯•â€ å·¥ä½œã€‚</li>\n</ul>\n<blockquote>\n<p>è¿™ä¹Ÿæ˜¯ä¼ ç»Ÿçš„ç€‘å¸ƒå¼å¼€å‘æ¨¡å‹ï¼Œè¯·å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vLU9ZSy9hcmNoaXZlLzIwMTIvMTAvMDgvMjcxNDY2OS5odG1s\">è½¯ä»¶å¼€å‘æ¨¡å¼å¯¹æ¯” (ç€‘å¸ƒã€è¿­ä»£ã€èºæ—‹ã€æ•æ·)</span></p>\n</blockquote>\n<p>å¸¦æ¥çš„é—®é¢˜ï¼š</p>\n<ol>\n<li>\n<p><strong>é‡å¤æ€§åŠ³åŠ¨ï¼Œæ— æ•ˆçš„ç­‰å¾…å˜å¤š</strong></p>\n<p>é‡å¤çš„è¿›è¡Œå‘å¸ƒéƒ¨ç½²ã€‚</p>\n<p>æµç¨‹ä¸Šï¼šæœ‰å¯èƒ½å¼€å‘åœ¨ç­‰é›†æˆå…¶ä»–äººçš„æ¨¡å—ï¼›æµ‹è¯•äººå‘˜åœ¨ç­‰å¾…å¼€å‘äººå‘˜ä¿®å¤ Bugï¼›äº§å“ç»ç†åœ¨ç­‰å¾…æ–°ç‰ˆæœ¬ä¸Šçº¿å¥½ç»™å®¢æˆ·åšæ¼”ç¤ºï¼›é¡¹ç›®ç»ç†åœ¨ç­‰å¾…å…¶ä»–äººæäº¤ä»£ç ã€‚ä¸ç®¡æ€ä¹ˆæ ·ï¼Œç­‰å¾…æ„å‘³ä½æ•ˆã€‚</p>\n<p>è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥ä½œå¯ä»¥è§£æ”¾äº†é›†æˆã€æµ‹è¯•ã€éƒ¨ç½²ç­‰é‡å¤æ€§åŠ³åŠ¨ï¼Œè€Œä¸”æœºå™¨é›†æˆçš„é¢‘ç‡æ˜æ˜¾å¯ä»¥æ¯”æ‰‹å·¥çš„é«˜å¾ˆå¤šã€‚</p>\n</li>\n<li>\n<p><strong>å¾ˆæ™šæ‰å‘ç°ç¼ºé™·ï¼Œå¹¶ä¸”éš¾ä»¥ä¿®å¤</strong>ã€‚</p>\n<p>å®è·µè¯æ˜ï¼Œç¼ºé™·å‘ç°çš„è¶Šæ™šï¼Œéœ€è¦ä¿®å¤çš„æ—¶é—´å’Œç²¾åŠ›ä¹Ÿå°±è¶Šå¤§ã€‚ä»ä¸Šä¸€ä¸ªå¯å·¥ä½œçš„è½¯ä»¶åˆ°å‘ç°ç¼ºé™·ä¹‹é—´å¯èƒ½å­˜åœ¨å¾ˆå¤šæ¬¡æäº¤ï¼Œè€Œè¦ä»è¿™äº›æäº¤ä¸­æ‰¾å‡ºé—®é¢˜å¹¶ä¿®å¤çš„æˆæœ¬ä¼šå¾ˆå¤§ï¼Œå› ä¸ºå¼€å‘äººå‘˜éœ€è¦å›å¿†æ¯ä¸ªæäº¤çš„ä¸Šä¸‹æ–‡æ¥è¯„ä¼°å½±å“ç‚¹ã€‚</p>\n</li>\n<li>\n<p><strong>ä½å“è´¨çš„è½¯ä»¶ï¼Œè½¯ä»¶äº¤ä»˜æ—¶æœºæ— æ³•ä¿éšœ</strong></p>\n<p>ç”±äºé›†æˆæ—¶æ¯æ¬¡åŒ…å«çš„ä»£ç å¾ˆå¤šï¼Œæ‰€ä»¥å¤§å®¶çš„å…³æ³¨ç‚¹ä¸»è¦éƒ½æ˜¯å¦‚ä½•ä¿è¯ç¼–è¯‘é€šè¿‡ã€è‡ªåŠ¨åŒ–æµ‹è¯•é€šè¿‡ï¼Œè€Œå¾€å¾€å¾ˆå®¹æ˜“å¿½ç•¥ä»£ç æ˜¯å¦éµå®ˆäº†ç¼–ç è§„èŒƒã€æ˜¯å¦åŒ…å«æœ‰é‡å¤ä»£ç ã€æ˜¯å¦æœ‰é‡æ„çš„ç©ºé—´ç­‰é—®é¢˜ã€‚è€Œè¿™äº›é—®é¢˜åˆåè¿‡æ¥ä¼šå½±å“ä»Šåçš„å¼€å‘å’Œé›†æˆï¼Œä¹…è€Œä¹…ä¹‹é›†æˆå˜å¾—è¶Šæ¥è¶Šå›°éš¾ï¼Œè½¯ä»¶çš„è´¨é‡å¯æƒ³è€ŒçŸ¥ã€‚</p>\n</li>\n<li>\n<p><strong>é¡¹ç›®ç¼ºå°‘å¯è§æ€§</strong></p>\n<p>æŸäº›é¡¹ç›®ï¼Œç¨‹åºä¼šç»å¸¸éœ€è¦å˜æ›´ï¼Œç‰¹åˆ«æ˜¯æ•æ·å¼€å‘çš„å®è·µè€…ã€‚ç”±äºäº§å“ç»ç†åœ¨ä¸å®¢æˆ·äº¤æµè¿‡ç¨‹ä¸­ï¼Œå¾€å¾€å®é™…çš„è½¯ä»¶å°±æ˜¯æœ€å¥½çš„åŸå‹ï¼Œæ‰€ä»¥è½¯ä»¶ä¼šè¢«å½“ä½œåŸå‹ä½œä¸ºè·Ÿå®¢æˆ·äº¤æµçš„å·¥å…·ã€‚å½“ç„¶ï¼Œå®¢æˆ·æœ€å¸Œæœ›çš„å½“ç„¶æ˜¯å®¢æˆ·çš„æƒ³æ³•èƒ½å¤Ÿé©¬ä¸Šåæ˜ åˆ°åŸå‹ä¸Šï¼Œè¿™ä¼šå¯¼è‡´ç¨‹åºä¼šç»å¸¸è¢«ä¿®æ”¹çš„ã€‚é‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€ â€œåˆ†é… Bug -&gt; ä¿®æ”¹ Bug -&gt; é›†æˆä»£ç  -&gt; éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨ä¸Š -&gt; é›†æˆæµ‹è¯•â€ å·¥ä½œæ— å½¢åˆçˆ†å¢äº†ã€‚</p>\n</li>\n</ol>\n<h4 id=\"å¸¸è§çš„å·¥ä½œæµ\"><a class=\"anchor\" href=\"#å¸¸è§çš„å·¥ä½œæµ\">#</a> å¸¸è§çš„å·¥ä½œæµ</h4>\n<p><img data-src=\"./assets/DevOps.png\" alt=\"DevOps\" /></p>\n<p>è¯¥ç³»ç»Ÿçš„å„ä¸ªç»„æˆéƒ¨åˆ†æ˜¯æŒ‰å¦‚ä¸‹é¡ºåºæ¥å‘æŒ¥ä½œç”¨çš„ï¼š</p>\n<ol>\n<li>\n<p>å¼€å‘è€…æ£€å…¥ä»£ç åˆ°æºä»£ç ä»“åº“ã€‚</p>\n</li>\n<li>\n<p>CI ç³»ç»Ÿä¼šä¸ºæ¯ä¸€ä¸ªé¡¹ç›®åˆ›å»ºäº†ä¸€ä¸ªå•ç‹¬çš„å·¥ä½œåŒºã€‚å½“é¢„è®¾æˆ–è¯·æ±‚ä¸€æ¬¡æ–°çš„æ„å»ºæ—¶ï¼Œå®ƒå°†æŠŠæºä»£ç ä»“åº“çš„æºç å­˜æ”¾åˆ°å¯¹åº”çš„å·¥ä½œåŒºã€‚</p>\n</li>\n<li>\n<p>CI ç³»ç»Ÿä¼šåœ¨å¯¹åº”çš„å·¥ä½œåŒºå†…æ‰§è¡Œæ„å»ºè¿‡ç¨‹ã€‚</p>\n</li>\n<li>\n<p>é…ç½®å¦‚æœå­˜åœ¨ï¼‰æ„å»ºå®Œæˆåï¼ŒCI ç³»ç»Ÿä¼šåœ¨ä¸€ä¸ªæ–°çš„æ„ä»¶ä¸­æ‰§è¡Œå®šä¹‰çš„ä¸€å¥—æµ‹è¯•ã€‚å®Œæˆåè§¦å‘é€šçŸ¥ (Email,RSS ç­‰ç­‰) ç»™ç›¸å…³çš„å½“äº‹äººã€‚</p>\n</li>\n<li>\n<p>é…ç½®å¦‚æœå­˜åœ¨ï¼‰å¦‚æœæ„å»ºæˆåŠŸï¼Œè¿™ä¸ªæ„ä»¶ä¼šè¢«æ‰“åŒ…å¹¶è½¬ç§»åˆ°ä¸€ä¸ªéƒ¨ç½²ç›®æ ‡ (å¦‚åº”ç”¨æœåŠ¡å™¨) æˆ–å­˜å‚¨ä¸ºè½¯ä»¶ä»“åº“ä¸­çš„ä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚è½¯ä»¶ä»“åº“å¯ä»¥æ˜¯ CI ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¤–éƒ¨çš„ä»“åº“ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL3huLS1KYXZhLWs4NGZ1aTI0Y2U0ZzI1ZWs4bG96aWN6MGFlaGtibGZzMTdpZTd2Yi5uZXQ=\">è¯¸å¦‚ä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨æˆ–è€…åƒ Java.net</span>ã€SourceForge ä¹‹ç±»çš„ç½‘ç«™ã€‚</p>\n</li>\n<li>\n<p>CI ç³»ç»Ÿé€šå¸¸ä¼šæ ¹æ®è¯·æ±‚å‘èµ·ç›¸åº”çš„æ“ä½œï¼Œè¯¸å¦‚å³æ—¶æ„å»ºã€ç”ŸæˆæŠ¥å‘Šï¼Œæˆ–è€…æ£€ç´¢ä¸€äº›æ„å»ºå¥½çš„æ„ä»¶ã€‚</p>\n</li>\n</ol>\n<blockquote>\n<p>â€œYou build it, you run itâ€ï¼Œè¿™æ˜¯ Amazon ä¸€å¹´å¯ä»¥å®Œæˆ 5000 ä¸‡æ¬¡éƒ¨ç½²ï¼Œå¹³å‡æ¯ä¸ªå·¥ç¨‹å¸ˆæ¯å¤©éƒ¨ç½²è¶…è¿‡ 50 æ¬¡çš„æ ¸å¿ƒç§˜ç±ã€‚</p>\n</blockquote>\n<h4 id=\"è§£å†³çš„é—®é¢˜\"><a class=\"anchor\" href=\"#è§£å†³çš„é—®é¢˜\">#</a> è§£å†³çš„é—®é¢˜</h4>\n<ul>\n<li>\n<p>é«˜æ•ˆç‡</p>\n<p>é«˜æ•ˆç‡çš„å‘å¸ƒï¼Œé¿å…äº†é‡å¤æ€§çš„åŠ³åŠ¨ï¼›</p>\n<p>æ›´å¿«çš„ä¿®å¤ BUGï¼Œæ›´å¿«çš„äº¤ä»˜æˆæœï¼Œå‡å°‘äº†ç­‰å¾…æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>é«˜è´¨é‡</p>\n<p>åªæœ‰åœ¨å®Œæˆé›†æˆæµ‹è¯•ã€ç³»ç»Ÿæµ‹è¯•åï¼Œæ‰èƒ½å¾—åˆ°å¯ç”¨çš„è½¯ä»¶ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­åªæœ‰æœ€åæ—¶åˆ»æ‰èƒ½æ‹¿åˆ°å¯è¿è¡Œè½¯ä»¶ã€‚é›†æˆæ´»åŠ¨ä¸ä¸€å®šåœ¨ä¸€ä¸ªæ ‡å‡†çš„æ„å»ºæœºå™¨ä¸Šç”Ÿæˆï¼Œè€Œæ˜¯åœ¨æŸä¸ªå¼€å‘äººå‘˜çš„æœºå™¨ä¸Šæ„å»ºçš„ï¼Œé‚£ä¹ˆå¯èƒ½å­˜åœ¨åœ¨å…¶ä»–æœºå™¨ä¸Šæ— æ³•è¿è¡Œçš„é—®é¢˜ã€‚</p>\n<p>äººä¸æœºå™¨çš„ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œåœ¨é‡å¤æ€§åŠ¨ä½œä¸Šï¼Œäººå®¹æ˜“çŠ¯é”™ï¼Œè€Œæœºå™¨çŠ¯é”™çš„å‡ ç‡å‡ ä¹ä¸ºé›¶ã€‚æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬æ­å»ºå®Œæˆé›†æˆæœåŠ¡å™¨åï¼Œä»¥åçš„äº‹å°±äº¤ç»™é›†æˆæœåŠ¡å™¨æ¥æ‰“ç†å§ã€‚</p>\n</li>\n<li>\n<p>é«˜äº§å‡º</p>\n<p>å¿«é€Ÿå¼€å‘å’Œä¸Šå¸‚ä¸€ä¸ªæ–°äº§å“ï¼Œå¹¶å¿«é€Ÿå–å¾—é¢„æœŸçš„æŠ•èµ„å›æŠ¥æ˜¯æ¯ä¸ªä¼ä¸šå­œå­œä»¥æ±‚çš„ç›®æ ‡ã€‚</p>\n<p>ä¾¿æ·çš„éƒ¨ç½² + é¡¹ç›®çš„å¯é¢„æœŸï¼Œä½¿å¾—å›¢é˜Ÿçš„å¼€å‘å˜æˆäº†ä¸€ç§å¼€å¿ƒçš„äº‹æƒ…ã€‚</p>\n<p>æŒç»­é›†æˆå¯ä»¥è®©ä½ åœ¨ä»»ä½•æ—¶é—´å‘å¸ƒå¯ä»¥éƒ¨ç½²çš„è½¯ä»¶ã€‚åœ¨å¤–ç•Œçœ‹æ¥ï¼Œè¿™æ˜¯æŒç»­é›†æˆæœ€æ˜æ˜¾çš„å¥½å¤„ï¼Œå¯¹å®¢æˆ·æ¥è¯´ï¼Œå¯ä»¥éƒ¨ç½²çš„è½¯ä»¶äº§å“æ˜¯æœ€å®é™…çš„èµ„äº§ã€‚åˆ©ç”¨æŒç»­é›†æˆï¼Œä½ å¯ä»¥ç»å¸¸å¯¹æºä»£ç è¿›è¡Œä¸€äº›å°æ”¹åŠ¨ï¼Œå¹¶å°†è¿™äº›æ”¹åŠ¨å’Œå…¶ä»–ä»£ç è¿›è¡Œé›†æˆã€‚</p>\n</li>\n</ul>\n<h4 id=\"å¸¸è§é—®é¢˜\"><a class=\"anchor\" href=\"#å¸¸è§é—®é¢˜\">#</a> å¸¸è§é—®é¢˜</h4>\n<ol>\n<li>\n<p>æ€ç»´è½¬å˜åï¼Œæ–°æŠ€æœ¯æŠµè§¦</p>\n<ul>\n<li>æ— æ³•æ¥å—æ–°äº‹ç‰©ï¼šä¸ç®¡æ€ä¹ˆæ ·ï¼Œæ±‚ç¨³å¿ƒæ€çš„äººè¿˜æ˜¯å¤šã€‚æ€»æ˜¯æœ‰äººè®¤ä¸ºè€çš„æŠ€æœ¯ä»£è¡¨ç¨³å®šï¼Œæ–°çš„äº‹ç‰©å¾€å¾€ä¼šå¸¦æ¥é—®é¢˜ã€‚</li>\n<li>è®¤ä¸ºæ‰‹å·¥é›†æˆä¹Ÿæ²¡æœ‰å¤šå°‘å·¥ä½œé‡ï¼šä¸æ˜¯æ‰€æœ‰çš„äººéƒ½å‚ä¸åˆ°äº†æ•´ä¸ªæŒç»­é›†æˆçš„ç¯èŠ‚ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•è®¤è¯†åˆ°é—®é¢˜å…¨è²Œã€‚</li>\n</ul>\n<p><strong>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¸€å®šçš„æŒç»­é›†æˆæŠ€æœ¯åŸ¹è®­ã€å®£è®²å¾—åˆ°æ”¹è§‚</strong></p>\n</li>\n<li>\n<p>ç®¡ç†å±‚çš„æŠµè§¦</p>\n<ul>\n<li>åŸ¹è®­æŒç»­é›†æˆéœ€è¦æŠ•å…¥èµ„é‡‘å•Šï¼Œæ²¡é’±ã€‚</li>\n<li>æŒç»­é›†æˆæœåŠ¡å™¨è¦å¢åŠ è½¯ç¡¬ä»¶æˆæœ¬å•Šï¼Œæ²¡é’±ã€‚</li>\n<li>å¼€å‘äººå‘˜é¢†äº†é‚£ä¹ˆé«˜çš„å·¥èµ„ï¼Œå¤šå¹²æ´»å¤šåŠ ç­åº”è¯¥å•Šã€‚</li>\n</ul>\n<p><strong>é’ˆå¯¹è¿™ä¸€ç‚¹ï¼Œå¯ä»¥ä»å¼€å‘äººå‘˜çš„æˆæœ¬å’ŒæŒç»­é›†æˆçš„æŠ•å…¥ï¼ˆè½¯ç¡¬ä»¶ï¼‰çš„æˆæœ¬ä¸Šä¸¤è€…åšä¸‹ä¼°ç®—ã€‚</strong></p>\n<blockquote>\n<p>ç¡¬ä»¶å‚è€ƒï¼š</p>\n<p>Jenkins ä¸»æœåŠ¡å™¨ä¸€èˆ¬ 2C4Gï¼Œslave æœåŠ¡å™¨æ ¹æ®ç”Ÿäº§éœ€è¦è¿›è¡Œé€‰è´­ã€‚</p>\n<p>git æœåŠ¡å™¨ä¸€èˆ¬ 2C4G (10 äººå›¢é˜Ÿ)</p>\n<p>Docker æœåŠ¡å™¨ 8C32G (Rancher + harbor)</p>\n</blockquote>\n</li>\n<li>\n<p>ç”Ÿäº§ç¯å¢ƒçš„å¤æ‚</p>\n<ul>\n<li>æ¯”å¦‚éƒ¨ç½²çš„ç”Ÿæˆç¯å¢ƒæ˜¯åœ¨æ”¿åŠ¡å¤–ç½‘ï¼Œæ— æ³•ä»äº’è”ç½‘ç›´æ¥è®¿é—®ç­‰ã€‚</li>\n<li>æ„å»ºæ•ˆç‡ä½ä¸‹ï¼Œä»»åŠ¡å¤š</li>\n</ul>\n<p>ç›®å‰ï¼Œè¿™ä¸ªæ˜¯æœ€éº»çƒ¦çš„ï¼Œè¿˜åœ¨ç ”ç©¶ä¸­ã€‚åˆæ­¥è®¾æƒ³æ˜¯è®©æ”¿åŠ¡å¤–ç½‘å¼€è¾Ÿä¸€ä¸ªç™½åå•ï¼Œç»™æŒç»­é›†æˆæœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªå•ç‹¬çš„é€šé“ã€‚åªæ˜¯æ€è·¯ï¼ŒæœªéªŒè¯ã€‚</p>\n</li>\n</ol>\n<h4 id=\"æœ€ä½³å®è·µ\"><a class=\"anchor\" href=\"#æœ€ä½³å®è·µ\">#</a> æœ€ä½³å®è·µ</h4>\n<p>å®æ–½æŒç»­é›†æˆçš„å¼€å‘äººå‘˜å¯ä»¥å°½æ—©å¹¶ç»å¸¸æäº¤ã€‚è¿™å…è®¸ä»–ä»¬å°½æ—©å‘ç°å†²çªã€‚å¹¶ä¸”ï¼Œå¦‚æœå­˜åœ¨ä»»ä½•é—®é¢˜ï¼Œåˆ™ä½¿ç”¨è¾ƒå°çš„æäº¤å¯ä»¥æ›´è½»æ¾åœ°å¯¹ä»£ç è¿›è¡Œæ•…éšœæ’é™¤ã€‚æ¯å¤©æˆ–ç”šè‡³æ›´é¢‘ç¹åœ°æäº¤è½¯ä»¶å¯¹äºæŒç»­é›†æˆæ˜¯å¿…è¦çš„ï¼Œä½†è¿˜ä¸å¤Ÿã€‚</p>\n<p>è¦æˆåŠŸä½¿ç”¨æŒç»­é›†æˆï¼Œå›¢é˜Ÿå¿…é¡»ï¼š</p>\n<ul>\n<li>\n<p>ä½¿æµ‹è¯•æˆä¸ºå¼€å‘è¿‡ç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚åº”è¯¥åœ¨åˆ›å»ºä»£ç æ—¶ç¼–å†™æµ‹è¯•ã€‚</p>\n<p>å…¬å¸æˆåŠŸæŒç»­æ•´åˆæ‰€éœ€çš„æœ€é‡è¦å› ç´ æ˜¯ä¸¥æ ¼çš„æµ‹è¯•æ–‡åŒ–ã€‚ä¸ºäº†å°†æ–°ä»£ç è‡ªä¿¡åœ°é›†æˆåˆ°ä¸»çº¿ä¸­ï¼Œå›¢é˜Ÿéœ€è¦ç¡®ä¿¡ä»£ç æ˜¯å¥å…¨çš„ã€‚è¿™æ˜¯é€šè¿‡æµ‹è¯•æ¥å®ç°çš„ï¼Œè¿™åº”è¯¥å®šæœŸè¿›è¡Œã€‚å·¥ç¨‹å¸ˆåº”è¯¥åœ¨å¼€å‘æ¯ä¸ªåŠŸèƒ½æ—¶ç¼–å†™æµ‹è¯•ã€‚</p>\n</li>\n<li>\n<p>ç¡®ä¿æµ‹è¯•ç¯å¢ƒåæ˜ ç”Ÿäº§ä¸€è‡´ã€‚</p>\n<p>ä¸ºäº†æ”¯æŒæ‚¨ä¸¥æ ¼çš„æµ‹è¯•æ–‡åŒ–ï¼Œæµ‹è¯•ç¯å¢ƒå¿…é¡»åæ˜ ç”Ÿäº§ç¯å¢ƒã€‚å¦åˆ™ï¼Œæ‚¨æ— æ³•ä¿è¯æ‚¨æ­£åœ¨æµ‹è¯•çš„å†…å®¹å°†åœ¨ç”Ÿäº§ä¸­èµ·ä½œç”¨ã€‚è¿™æ„å‘³ç€æµ‹è¯•ç¯å¢ƒåº”ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„æ•°æ®åº“ï¼ŒWeb æœåŠ¡å™¨é…ç½®ï¼Œå·¥ä»¶ç­‰ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ç¼–ç æœ€ä½³å®è·µï¼Œä¾‹å¦‚ç»“å¯¹ç¼–ç¨‹ã€‚</p>\n<p>è½¯ä»¶å¼€å‘çš„å¦ä¸€ä¸ªæœ€ä½³å®è·µæ˜¯åœ¨ç¼–ç æœŸé—´è¿›è¡Œé…å¯¹ã€‚å¯¹äºæ›´å¤æ‚çš„åŠŸèƒ½ï¼Œå›¢é˜Ÿåœ¨ç¼–å†™å•è¡Œä»£ç ä¹‹å‰è®¨è®ºä½“ç³»ç»“æ„æ–¹æ³•ã€‚åœ¨å°†ä»»ä½•ä»£ç åˆå¹¶åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œå…¶ä»–å¼€å‘äººå‘˜å§‹ç»ˆä¼šæ£€æŸ¥ä»£ç ã€‚è¿™æœ‰åŠ©äºç¡®ä¿ä½¿ç”¨ç¼–ç æœ€ä½³å®è·µï¼Œä»£ç ä¸ä¼šä¸å…¶ä»–å¼€å‘äººå‘˜æ­£åœ¨å¤„ç†çš„ç°æœ‰ä»£ç æˆ–ä»£ç å†²çªï¼Œå¹¶ä¸”æ–°åŠŸèƒ½æ˜¯å¯æ‰©å±•çš„ã€‚</p>\n<blockquote>\n<p><strong>Pair programming</strong> is an <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQWdpbGVfc29mdHdhcmVfZGV2ZWxvcG1lbnQ=\">agile software development</span> technique in which two <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29tcHV0ZXJfcHJvZ3JhbW1lcg==\">programmers</span> work together at one workstation. One, the <em>driver</em>, writes <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU291cmNlX2NvZGU=\">code</span> while the other, the <em>observer</em> or <em>navigator</em>,[<span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFpcl9wcm9ncmFtbWluZyNjaXRlX25vdGUtMQ==\">1]</span> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29kZV9yZXZpZXc=\">reviews</span> each line of code as it is typed in. The two programmers switch roles frequently.</p>\n<p>While reviewing, the observer also considers the &quot;strategic&quot; direction of the work, coming up with ideas for improvements and likely future problems to address. This is intended to free the driver to focus all of their attention on the &quot;tactical&quot; aspects of completing the current task, using the observer as a safety net and guide.</p>\n</blockquote>\n</li>\n<li>\n<p>è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥ä½œæµç¨‹ã€‚</p>\n<p>æœ€åï¼Œä¸ºç¡®ä¿æ•´ä¸ªè½¯ä»¶å¼€å‘æµç¨‹å¿«é€Ÿé«˜æ•ˆï¼Œæ„å»ºéœ€è¦å¿«é€Ÿï¼Œéƒ¨ç½²å·¥ä½œæµç¨‹åº”è‡ªåŠ¨åŒ–ã€‚ä»£ç æ„å»ºçš„æ¯ä¸€åˆ†é’Ÿéƒ½æµªè´¹äº†ä¸€åˆ†é’Ÿã€‚é€šè¿‡è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥ä½œæµç¨‹ï¼Œå›¢é˜Ÿå¯ä»¥æ›´å¿«åœ°å°†å®Œæˆçš„ä»£ç ç”Ÿæˆã€‚å› ä¸ºï¼Œæ¯•ç«Ÿï¼Œå¦‚æœæ²¡æœ‰æ¥è§¦åˆ°å®¢æˆ·ï¼Œé‚£ä¹ˆå¿«é€Ÿå¼€å‘è½¯ä»¶æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</p>\n</li>\n</ul>\n<h3 id=\"æ•ˆç‡å·¥å…·å¯¹æ¯”\"><a class=\"anchor\" href=\"#æ•ˆç‡å·¥å…·å¯¹æ¯”\">#</a> æ•ˆç‡å·¥å…·å¯¹æ¯”</h3>\n<p>![img](/Users/Shared/Target/5-4 æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½² /resource/assets/CICD-resource.png)</p>\n<p><a href=\"#%E5%A4%8D%E6%9D%82%E7%9A%84DevOps%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7\">ç‚¹å‡»æŸ¥çœ‹</a>æ•ˆç‡å·¥å…·</p>\n<p><strong>1. Jenkins</strong></p>\n<blockquote>\n<p>Jenkinsï¼ŒåŸå Hudsonï¼Œ2011 å¹´æ”¹ä¸ºç°åœ¨çš„åå­—ï¼Œå®ƒ æ˜¯ä¸€ä¸ªå¼€æºçš„å®ç°æŒç»­é›†æˆçš„è½¯ä»¶å·¥å…·ã€‚å®˜æ–¹ç½‘ç«™ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2plbmtpbnMtY2kub3JnLw==\">http://jenkins-ci.org/</span>ã€‚</p>\n<p>Jenkins èƒ½å®æ—¶<strong>ç›‘æ§é›†æˆä¸­å­˜åœ¨çš„é”™è¯¯</strong>ï¼Œæä¾›<strong>è¯¦ç»†çš„æ—¥å¿—æ–‡ä»¶å’Œæé†’</strong>åŠŸèƒ½ï¼Œè¿˜èƒ½ç”¨å›¾è¡¨çš„å½¢å¼å½¢è±¡åœ°å±•ç¤º<strong>é¡¹ç›®æ„å»ºçš„è¶‹åŠ¿å’Œç¨³å®šæ€§</strong>ã€‚</p>\n</blockquote>\n<p><strong>Jenkins ç‰¹ç‚¹:</strong></p>\n<ul>\n<li><strong>æ˜“å®‰è£…</strong>ï¼šJenkins æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŸºäº Java çš„ç¨‹åºï¼Œéšæ—¶å¯ä»¥è¿è¡Œï¼ŒåŒ…å« Windowsï¼ŒMac OS X å’Œå…¶ä»–ç±» Unix æ“ä½œç³»ç»Ÿçš„è½¯ä»¶åŒ…ã€‚ä»…ä»…ä¸€ä¸ª java -jar jenkins.warï¼Œä»å®˜ç½‘ä¸‹è½½è¯¥æ–‡ä»¶åï¼Œç›´æ¥è¿è¡Œï¼Œæ— éœ€é¢å¤–çš„å®‰è£…ï¼Œæ›´æ— éœ€å®‰è£…æ•°æ®åº“ï¼›</li>\n<li><strong>æ˜“é…ç½®</strong>ï¼šæä¾›å‹å¥½çš„ GUI é…ç½®ç•Œé¢ï¼›</li>\n<li><strong>å˜æ›´æ”¯æŒ</strong>ï¼šJenkins èƒ½ä»ä»£ç ä»“åº“ï¼ˆSubversion/CVSï¼‰ä¸­è·å–å¹¶äº§ç”Ÿä»£ç æ›´æ–°åˆ—è¡¨å¹¶è¾“å‡ºåˆ°ç¼–è¯‘è¾“å‡ºä¿¡æ¯ä¸­ï¼›</li>\n<li><strong>æ”¯æŒæ°¸ä¹…é“¾æ¥</strong>ï¼šç”¨æˆ·æ˜¯é€šè¿‡ web æ¥è®¿é—® Jenkins çš„ï¼Œè€Œè¿™äº› web é¡µé¢çš„é“¾æ¥åœ°å€éƒ½æ˜¯æ°¸ä¹…é“¾æ¥åœ°å€ï¼Œå› æ­¤ï¼Œä½ å¯ä»¥åœ¨å„ç§æ–‡æ¡£ä¸­ç›´æ¥ä½¿ç”¨è¯¥é“¾æ¥ï¼›</li>\n<li>** é›†æˆ E-Mail/RSS/IMï¼š** å½“å®Œæˆä¸€æ¬¡é›†æˆæ—¶ï¼Œå¯é€šè¿‡è¿™äº›å·¥å…·å®æ—¶å‘Šè¯‰ä½ é›†æˆç»“æœï¼ˆæ®æˆ‘æ‰€çŸ¥ï¼Œæ„å»ºä¸€æ¬¡é›†æˆéœ€è¦èŠ±è´¹ä¸€å®šæ—¶é—´ï¼Œæœ‰äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä½ å°±å¯ä»¥åœ¨ç­‰å¾…ç»“æœè¿‡ç¨‹ä¸­ï¼Œå¹²åˆ«çš„äº‹æƒ…ï¼‰ï¼›</li>\n<li><strong>JUnit/TestNG æµ‹è¯•æŠ¥å‘Š</strong>ï¼šä¹Ÿå°±æ˜¯ç”¨ä»¥å›¾è¡¨ç­‰å½¢å¼æä¾›è¯¦ç»†çš„æµ‹è¯•æŠ¥è¡¨åŠŸèƒ½ï¼›</li>\n<li><strong>æ”¯æŒåˆ†å¸ƒå¼æ„å»º</strong>ï¼šJenkins å¯ä»¥æŠŠ<strong>é›†æˆæ„å»ºç­‰å·¥ä½œåˆ†å‘åˆ°å¤šå°è®¡ç®—æœºä¸­å®Œæˆ</strong>ï¼›</li>\n<li><strong>æ–‡ä»¶æŒ‡çº¹ä¿¡æ¯</strong>ï¼šJenkins ä¼šä¿å­˜å“ªæ¬¡é›†æˆæ„å»ºäº§ç”Ÿäº†å“ªäº› jars æ–‡ä»¶ï¼Œå“ªä¸€æ¬¡é›†æˆæ„å»ºä½¿ç”¨äº†å“ªä¸ªç‰ˆæœ¬çš„ jars æ–‡ä»¶ç­‰æ„å»ºè®°å½•ï¼›</li>\n<li><strong>æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶</strong>ï¼šä½¿å¾— Jenkins å˜å¾—è¶Šæ¥è¶Šå¼ºå¤§ï¼›å‡­å€Ÿæ›´æ–°ä¸­å¿ƒä¸­çš„æ•°ç™¾ä¸ªæ’ä»¶ï¼ŒJenkins å‡ ä¹é›†æˆäº†æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜å·¥å…·é“¾ä¸­çš„æ‰€æœ‰å·¥å…·ã€‚</li>\n<li><strong>Rest API</strong> - å¯ä»¥è®¿é—®æ§åˆ¶æ‚¨è·å–çš„æ•°æ®é‡ï¼Œè·å– / æ›´æ–° config.xmlï¼Œåˆ é™¤ä½œä¸šï¼Œæ£€ç´¢æ‰€æœ‰æ„å»ºï¼Œè·å– / æ›´æ–°ä½œä¸šè¯´æ˜ï¼Œæ‰§è¡Œæ„å»ºï¼Œç¦ç”¨ / å¯ç”¨ä½œä¸š</li>\n</ul>\n<p><strong>Jenkins ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>ä»·æ ¼ï¼ˆå…è´¹ï¼‰</li>\n<li>å®šåˆ¶</li>\n<li>æ’ä»¶ç³»ç»Ÿ</li>\n<li>å®Œå…¨æ§åˆ¶ç³»ç»Ÿ</li>\n</ul>\n<p><strong>Jenkins ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>éœ€è¦ä¸“ç”¨æœåŠ¡å™¨ï¼ˆæˆ–å¤šä¸ªæœåŠ¡å™¨ï¼‰ã€‚è¿™å¯¼è‡´é¢å¤–çš„è´¹ç”¨ã€‚å¯¹äºæœåŠ¡å™¨æœ¬èº«ï¼ŒDevOps ç­‰...</li>\n<li>é…ç½® / å®šåˆ¶æ‰€éœ€çš„æ—¶é—´</li>\n</ul>\n<p><strong>2. Travis CI</strong></p>\n<p><strong>Travis CI</strong> æ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„æŒç»­é›†æˆæœåŠ¡ï¼Œç”¨äºæ„å»ºå’Œæµ‹è¯•åœ¨ GitHub ä¸Šæ‰˜ç®¡çš„è½¯ä»¶é¡¹ç›®ã€‚</p>\n<blockquote>\n<p><strong>Travis CI</strong> is a hosted continuous integration service used to build and test software projects hosted at GitHub</p>\n</blockquote>\n<p><strong>Travis CI çš„ç‰¹ç‚¹ï¼š</strong></p>\n<ul>\n<li>\n<p>åŸºäºäº‘ï¼šTravisCI æ˜¯ä¸€ä¸ª<strong>åŸºäºäº‘</strong>çš„ç³»ç»Ÿ - ä¸éœ€è¦ä¸“ç”¨æœåŠ¡å™¨ï¼Œæ‚¨æ— éœ€ç®¡ç†å®ƒã€‚</p>\n</li>\n<li>\n<p>æ”¯æŒ Docker è¿è¡Œæµ‹è¯•</p>\n</li>\n<li>\n<p>ä½¿ç”¨ YAML æ–‡ä»¶è¿›è¡Œé…ç½®</p>\n</li>\n<li>\n<p>å¯é€‰æ‹© Linux å’Œ Mac OSX ä¸ŠåŒæ—¶è¿è¡Œæµ‹è¯•</p>\n</li>\n<li>\n<p>å¼€ç®±å³ç”¨çš„æ”¯æŒçš„è¯­è¨€</p>\n<p>Androidï¼ŒCï¼ŒCï¼ƒï¼ŒC ++ï¼ŒClojureï¼ŒCrystalï¼ŒDï¼ŒDartï¼ŒErlangï¼ŒElixirï¼ŒFï¼ƒï¼ŒGoï¼ŒGroovyï¼ŒHaskellï¼ŒHaxeï¼ŒJavaï¼ŒJavaScriptï¼ˆä½¿ç”¨ Node.jsï¼‰ï¼ŒJuliaï¼ŒObjective-Cï¼ŒPerlï¼ŒPerl6ï¼Œ PHPï¼ŒPythonï¼ŒRï¼ŒRubyï¼ŒRustï¼ŒScalaï¼ŒSmalltalkï¼ŒVisual Basic</p>\n</li>\n<li>\n<p><strong>æ”¯æŒå¤šç¯å¢ƒæ„å»ºçŸ©é˜µ</strong>ï¼šå¦‚ Python 2.7 , 3.4, 3.5 +  Django 1.8, 1.9, 1.10</p>\n<p>æ„å»ºçŸ©é˜µæ˜¯ä¸€ç§å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„è¯­è¨€å’ŒåŒ…è¿è¡Œæµ‹è¯•ã€‚æ‚¨å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼è‡ªå®šä¹‰å®ƒã€‚ä¾‹å¦‚ï¼ŒæŸäº›ç¯å¢ƒçš„å¤±è´¥å¯ä»¥è§¦å‘é€šçŸ¥ä½†ä¸ä¼šä½¿æ‰€æœ‰æ„å»ºå¤±è´¥ï¼ˆè¿™å¯¹åŒ…çš„å¼€å‘ç‰ˆæœ¬æœ‰å¸®åŠ©ï¼‰</p>\n</li>\n</ul>\n<p><strong>Travis CI ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>å¼€ç®±å³ç”¨æ„å»ºçŸ©é˜µ</li>\n<li>å¿«é€Ÿå¯åŠ¨</li>\n<li>è½»é‡çº§ YAML é…ç½®</li>\n<li>å¼€æºé¡¹ç›®çš„å…è´¹è®¡åˆ’</li>\n<li>æ— éœ€ä¸“ç”¨æœåŠ¡å™¨</li>\n</ul>\n<p><strong>Travis CI ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>ä¸ CircleCI ç›¸æ¯”ï¼Œä»·æ ¼æ›´é«˜ï¼Œæ²¡æœ‰å…è´¹çš„ä¼ä¸šè®¡åˆ’</li>\n<li>å®šåˆ¶ï¼ˆå¯¹äºæŸäº›ä½ éœ€è¦ç¬¬ä¸‰æ–¹çš„ä¸œè¥¿ï¼‰</li>\n</ul>\n<p><strong>3. Circle CI</strong></p>\n<p>åœ¨ GitHub æˆ– Bitbucket ä¸Šçš„è½¯ä»¶å­˜å‚¨åº“è¢«æˆæƒå¹¶ä½œä¸ºé¡¹ç›®æ·»åŠ åˆ°<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jaXJjbGVjaS5jb20v\"> circleci.com ä¹‹å</span>ï¼Œæ¯ä¸ªä»£ç æ›´æ”¹éƒ½ä¼šåœ¨å¹²å‡€çš„å®¹å™¨æˆ– VM ä¸­è§¦å‘è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>\n<p>CircleCI åœ¨ 2017 å¹´è¢« Forrester è¯„ä¸ºæŒç»­é›†æˆé¢†å¯¼è€…ï¼Œå¹¶è¢«å‘½åä¸ºå¤šä¸ªæœ€ä½³ DevOps å·¥å…·åˆ—è¡¨ã€‚CircleCI æˆç«‹äº 2011 å¹´ï¼Œæ€»éƒ¨ä½äºæ—§é‡‘å±±ï¼Œæ‹¥æœ‰å…¨çƒæ€§çš„è¿œç¨‹å‘˜å·¥é˜Ÿä¼ï¼Œç”± Scale Venture Partnersï¼ŒDFJï¼ŒBaseline Venturesï¼ŒTop Tier Capitalï¼ŒIndustry Venturesï¼ŒHeavybit å’Œ Harrison Metal Capital æä¾›é£é™©æŠ•èµ„ã€‚</p>\n<p><strong>Circle CI çš„ç‰¹ç‚¹ï¼š</strong></p>\n<ul>\n<li><strong>äº‘ &amp; æœ¬åœ°åŒ–</strong>ï¼šCircleCI æ˜¯ä¸€ä¸ª<strong>åŸºäºäº‘</strong>çš„ç³»ç»Ÿ - ä¸éœ€è¦ä¸“ç”¨æœåŠ¡å™¨ï¼Œæ‚¨æ— éœ€ç®¡ç†å®ƒã€‚ ä½†æ˜¯ï¼Œå®ƒè¿˜<strong>æä¾›äº†ä¸€ä¸ªæœ¬åœ°è§£å†³æ–¹æ¡ˆ</strong>ï¼Œå…è®¸æ‚¨åœ¨ç§æœ‰äº‘æˆ–æ•°æ®ä¸­å¿ƒä¸­è¿è¡Œå®ƒã€‚</li>\n<li><strong>å•†ä¸š &amp; å…è´¹</strong>ï¼šå³ä½¿æ˜¯å•†ä¸šå¸æˆ·ï¼Œå®ƒä¹Ÿ<strong>æœ‰å…è´¹è®¡åˆ’</strong></li>\n<li><strong>Rest API</strong> - æ‚¨å¯ä»¥è®¿é—®é¡¹ç›®ï¼Œæ„å»ºå’Œå·¥ä»¶ï¼ˆartifactsï¼‰ã€‚æ„å»ºçš„ç»“æœå°†æ˜¯å·¥ä»¶æˆ–å·¥ä»¶ç»„ã€‚ å·¥ä»¶å¯ä»¥æ˜¯å·²ç¼–è¯‘çš„åº”ç”¨ç¨‹åºæˆ–å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼Œandroid APKï¼‰æˆ–å…ƒæ•°æ®ï¼ˆä¾‹å¦‚ï¼Œå…³äºæµ‹è¯• ` æˆåŠŸçš„ä¿¡æ¯ï¼‰</li>\n<li><strong>æŒ‰éœ€å®‰è£…</strong>ï¼šCircleCI ç¼“å­˜<strong>å¿…è¦çš„å®‰è£…</strong>ï¼ˆrequirements installationï¼‰ã€‚ å®ƒä¼šæ£€æŸ¥ç¬¬ä¸‰æ–¹ä¾èµ–é¡¹ï¼Œè€Œä¸æ˜¯æŒç»­å®‰è£…æ‰€éœ€çš„ç¯å¢ƒ</li>\n<li><strong>SSH æ¨¡å¼</strong>ï¼šæ‚¨å¯ä»¥è§¦å‘<strong> SSH æ¨¡å¼</strong>è®¿é—®å®¹å™¨å¹¶è¿›è¡Œè‡ªå·±çš„è°ƒæŸ¥ï¼ˆå¦‚æœå‡ºç°ä»»ä½•é—®é¢˜ï¼‰</li>\n<li><strong>æœ€å°åŒ–é…ç½®</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¼€ç®±å³ç”¨è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦<strong>æœ€å°‘çš„é…ç½® \\ è°ƒæ•´</strong></li>\n</ul>\n<p><strong>CircleCI ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>å¿«é€Ÿå¯åŠ¨</li>\n<li>CircleCI æœ‰ä¸€ä¸ªå…è´¹çš„ä¼ä¸šé¡¹ç›®è®¡åˆ’</li>\n<li>è¿™å¾ˆå®¹æ˜“ï¼Œä¹Ÿå¾ˆå¿«å¼€å§‹</li>\n<li>è½»é‡çº§ï¼Œæ˜“è¯»çš„ YAML é…ç½®</li>\n<li>æ‚¨ä¸éœ€è¦ä»»ä½•ä¸“ç”¨æœåŠ¡å™¨æ¥è¿è¡Œ CircleCI</li>\n</ul>\n<p><strong>CircleCI ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>\n<p>CircleCI ä»…æ”¯æŒ 2 ä¸ªç‰ˆæœ¬çš„ Ubuntu å…è´¹ï¼ˆ12.04 å’Œ 14.04ï¼‰å’Œ MacOS ä½œä¸ºä»˜è´¹éƒ¨åˆ†</p>\n</li>\n<li>\n<p>å°½ç®¡ CircleCI å¯ä»¥ä½¿ç”¨å¹¶è¿è¡Œæ‰€æœ‰è¯­è¨€ï¼Œä½† tt ä»…æ”¯æŒ â€œå¼€ç®±å³ç”¨â€ çš„ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€ï¼šGoï¼ˆGolangï¼‰ï¼ŒHaskellï¼ŒJavaï¼ŒPHPï¼ŒPythonï¼ŒRuby / Railsï¼ŒScala</p>\n</li>\n<li>\n<p>å¦‚æœæ‚¨æƒ³è¿›è¡Œè‡ªå®šä¹‰ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼šæ‚¨å¯èƒ½éœ€è¦ä¸€äº›ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥è¿›è¡Œè¿™äº›è°ƒæ•´</p>\n</li>\n<li>\n<p>æ­¤å¤–ï¼Œè™½ç„¶ä½œä¸ºåŸºäºäº‘çš„ç³»ç»Ÿæ˜¯ä¸€æ–¹çš„ä¼˜åŠ¿ï¼Œå®ƒä¹Ÿå¯ä»¥åœæ­¢æ”¯æŒä»»ä½•è½¯ä»¶ï¼Œä½ å°†æ— æ³•é˜»æ­¢</p>\n</li>\n</ul>\n<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>åˆ†ç±»</th>\n<th>Jenkins</th>\n<th>Travis CI</th>\n<th>Circle CI</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>æœ¬åœ°éƒ¨ç½²</td>\n<td>æ”¯æŒ</td>\n<td>ä¸æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td>REST API</td>\n<td>æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td>é…ç½®</td>\n<td>å¤æ‚ï¼Œé«˜åº¦å¯é…ç½®</td>\n<td>YAML æ–‡ä»¶</td>\n<td>YAML æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>æŒ‰éœ€å®‰è£…</td>\n<td>æ˜¯</td>\n<td>å¦</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>è·¨å¹³å°æ”¯æŒ</td>\n<td>æ˜¯</td>\n<td>Linux + MacOS</td>\n<td>Linux + MacOS (ä»˜è´¹)</td>\n</tr>\n<tr>\n<td>å¤šæœåŠ¡å™¨</td>\n<td>æ˜¯</td>\n<td>æŒ‰éœ€</td>\n<td>å¦</td>\n</tr>\n<tr>\n<td>å¿«é€Ÿæ„å»º</td>\n<td>æ‰‹åŠ¨é…ç½®å¤æ‚</td>\n<td>å¿« (éœ€è¦å†™é…ç½®æ–‡ä»¶)</td>\n<td>æœ€å¿«</td>\n</tr>\n<tr>\n<td>åŸºæœ¬ç¯å¢ƒ</td>\n<td>Java</td>\n<td>äº‘ç¯å¢ƒ</td>\n<td>äº‘ç¯å¢ƒ</td>\n</tr>\n<tr>\n<td>è´¹ç”¨</td>\n<td>å…è´¹</td>\n<td>ç‰¹å®šå…è´¹ (69$/c)</td>\n<td>ç‰¹å®šå…è´¹ (50$/c)</td>\n</tr>\n</tbody>\n</table>\n<p>Travis CI çš„ä»·æ ¼ï¼ˆéå¸¸æ„Ÿäººï¼‰ï¼š</p>\n<p><img data-src=\"./assets/image-20190611100501785.png\" alt=\"/images/image-20190611100501785\" /></p>\n<p>CirCle CI çš„ä»·æ ¼ï¼š</p>\n<p><img data-src=\"./assets/image-20190611100534676.png\" alt=\"/images/image-20190611100534676\" /></p>\n<p>å…¶ä»–çš„ä¸€äº›æŒç»­é›†æˆçš„å·¥å…·ï¼šCruiseControlï¼ŒTeamCityï¼ŒContinuum ç­‰</p>\n<ul>\n<li>AnthillProï¼šå•†ä¸šçš„æ„å»ºç®¡ç†æœåŠ¡å™¨ï¼Œæä¾› C åŠŸèƒ½</li>\n<li>Bambooï¼šå•†ä¸šçš„ CI æœåŠ¡å™¨ï¼Œå¯¹äºå¼€æºé¡¹ç›®å…è´¹</li>\n<li>Build Forgeï¼šå¤šåŠŸèƒ½å•†ä¸šæ„å»ºç®¡ç†å·¥å…·ï¼Œç‰¹ç‚¹ï¼šé«˜æ€§èƒ½ã€åˆ†å¸ƒå¼æ„å»º</li>\n<li>Cruise Controlï¼šåŸºäº java å®ç°çš„æŒç»­é›†æˆæ„å»ºå·¥å…·</li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL0NydWlzZUNvbnRyb2wuTkVU\">CruiseControl.NET</span>ï¼šåŸºäº C# å®ç°çš„æŒç»­é›†æˆæ„å»ºå·¥å…·</li>\n<li>Lunt buildï¼šå¼€æºçš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·</li>\n<li>Para Buildï¼šå•†ä¸šçš„è‡ªåŠ¨åŒ–è½¯ä»¶æ„å»ºç®¡ç†æœåŠ¡å™¨</li>\n</ul>\n<h2 id=\"jenkins\"><a class=\"anchor\" href=\"#jenkins\">#</a> Jenkins</h2>\n<h3 id=\"ä½¿ç”¨ç®€ä»‹\"><a class=\"anchor\" href=\"#ä½¿ç”¨ç®€ä»‹\">#</a> ä½¿ç”¨ç®€ä»‹</h3>\n<p>Jenkins æ˜¯å¼€æº CI&amp;CD è½¯ä»¶é¢†å¯¼è€…ï¼Œ æä¾›è¶…è¿‡ 1000 ä¸ªæ’ä»¶æ¥æ”¯æŒæ„å»ºã€éƒ¨ç½²ã€è‡ªåŠ¨åŒ–ï¼Œ æ»¡è¶³ä»»ä½•é¡¹ç›®çš„éœ€è¦ã€‚</p>\n<p><img data-src=\"./assets/image-20190611103941326.png\" alt=\"/images/image-20190611103941326\" /></p>\n<p>ç›¸å…³æ¦‚å¿µï¼š</p>\n<ul>\n<li>\n<p>æµæ°´çº¿ï¼š<strong>Jenkins Pipeline</strong>ï¼ˆæˆ–ç®€ç§°ä¸º &quot;Pipeline&quot;ï¼‰æ˜¯ä¸€å¥—æ’ä»¶ï¼Œå°†æŒç»­äº¤ä»˜çš„å®ç°å’Œå®æ–½é›†æˆåˆ° Jenkins ä¸­ã€‚</p>\n<p>Jenkins Pipeline æä¾›äº†ä¸€å¥—å¯æ‰©å±•çš„å·¥å…·ï¼Œç”¨äºå°† â€œç®€å•åˆ°å¤æ‚â€ çš„äº¤ä»˜æµç¨‹å®ç°ä¸º â€œæŒç»­äº¤ä»˜å³ä»£ç â€ã€‚Jenkins Pipeline çš„å®šä¹‰é€šå¸¸è¢«å†™å…¥åˆ°ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ˆç§°ä¸º  <code>Jenkinsfile</code>  ï¼‰ä¸­ï¼Œè¯¥æ–‡ä»¶å¯ä»¥è¢«æ”¾å…¥é¡¹ç›®çš„æºä»£ç æ§åˆ¶åº“ä¸­ã€‚</p>\n</li>\n<li>\n<p>èŠ‚ç‚¹ï¼šèŠ‚ç‚¹æ˜¯ä¸€ä¸ªæœºå™¨ï¼Œä¸»è¦ç”¨äºæ‰§è¡Œ jenkins ä»»åŠ¡</p>\n</li>\n<li>\n<p>é˜¶æ®µï¼šå®šä¹‰ä¸åŒçš„æ‰§è¡Œä»»åŠ¡ï¼Œæ¯”å¦‚ï¼šæ„å»ºã€æµ‹è¯•ã€å‘å¸ƒ (éƒ¨ç½²)</p>\n</li>\n<li>\n<p>æ­¥éª¤ï¼šç›¸å½“äºå‘Šè¯‰ Jenkins ç°åœ¨è¦åšäº›ä»€ä¹ˆï¼Œæ¯”å¦‚ shell å‘½ä»¤ã€‚</p>\n</li>\n</ul>\n<p><img data-src=\"./assets/image-20190611163108298.png\" alt=\"/images/image-20190611163108298\" /></p>\n<p>Jenkins çš„ç•Œé¢</p>\n<p><img data-src=\"./assets/image-20190611163727975.png\" alt=\"/images/image-20190611163727975\" /></p>\n<p>ä»»åŠ¡è¯¦æƒ…é¡µé¢</p>\n<p><img data-src=\"./assets/image-20190611163855257.png\" alt=\"/images/image-20190611163855257\" /></p>\n<p>Jenkins ä»»åŠ¡æ—¥å¿—</p>\n<h3 id=\"å®‰è£…æ–¹å¼\"><a class=\"anchor\" href=\"#å®‰è£…æ–¹å¼\">#</a> å®‰è£…æ–¹å¼</h3>\n<ol>\n<li>\n<p>ç¯å¢ƒè¦æ±‚</p>\n<ul>\n<li>æœºå™¨è¦æ±‚ï¼š\n<ul>\n<li>256 MB å†…å­˜ï¼Œå»ºè®®å¤§äº 512 MB</li>\n<li>10 GB çš„ç¡¬ç›˜ç©ºé—´ï¼ˆç”¨äº Jenkins å’Œ Docker é•œåƒï¼‰</li>\n</ul>\n</li>\n<li>éœ€è¦å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š\n<ul>\n<li>Java 8 (JRE æˆ–è€… JDK éƒ½å¯ä»¥)</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZG9ja2VyLmNvbS8=\">Docker</span> ï¼ˆå¯¼èˆªåˆ°ç½‘ç«™é¡¶éƒ¨çš„ Get Docker é“¾æ¥ä»¥è®¿é—®é€‚åˆæ‚¨å¹³å°çš„ Docker ä¸‹è½½ï¼‰</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>å¸¸è§„å®‰è£…</p>\n<ul>\n<li>\n<p>å®‰è£… JDK</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cub3JhY2xlLmNvbS90ZWNobmV0d29yay9qYXZhL2phdmFzZS9kb3dubG9hZHMvamRrOC1kb3dubG9hZHMtMjEzMzE1MS5odG1s\">å®˜æ–¹åœ°å€</span></p>\n<p>ä¸‹è½½å¯¹åº”çš„æ“ä½œç³»ç»Ÿçš„ JDKï¼Œç„¶åè§£å‹è¿›è¡Œå®‰è£…ã€‚ä»¥ Linux ä¸ºä¾‹ï¼š</p>\n<p>ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¸Šä¼ åˆ° Linux æœåŠ¡å™¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä¸Šä¼ åˆ° /opt/jdk8 ç›®å½•ä¸‹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># tar è§£å‹ JDK å®‰è£…åŒ…</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> /opt/jdk8</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">tar</span> zxvf jdk-8u211-linux-x64.tar.gz <span class=\"token parameter variable\">-C</span> /opt/jdk8 --strip-components <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># vi /etc/profile</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/opt/jdk8</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JRE_HOME</span><span class=\"token operator\">=</span><span class=\"token variable\">$&#123;JAVA_HOME&#125;</span>/jre</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">CLASSPATH</span><span class=\"token operator\">=</span>.:<span class=\"token variable\">$&#123;JAVA_HOME&#125;</span>/lib:<span class=\"token variable\">$&#123;JRE_HOME&#125;</span>/lib</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">$&#123;JAVA_HOME&#125;</span>/bin:<span class=\"token environment constant\">$PATH</span></pre></td></tr></table></figure></li>\n<li>\n<p>å®‰è£… Jenkins</p>\n<p>ä¸‹è½½ Jenkins æœ€æ–°çš„ war åŒ…ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL21pcnJvcnMuamVua2lucy5pby93YXItc3RhYmxlL2xhdGVzdC9qZW5raW5zLndhcg==\">Latest</span></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> /opt/jenkins <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> /opt/jenkins</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">wget</span> <span class=\"token parameter variable\">-O</span> /opt/jenkins/jenkins.war http://mirrors.jenkins.io/war-stable/latest/jenkins.war</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">java</span> <span class=\"token parameter variable\">-jar</span> jenkins.war <span class=\"token parameter variable\">--httpPort</span><span class=\"token operator\">=</span><span class=\"token number\">8080</span></pre></td></tr></table></figure><p>å°±å—¯å¯ä»¥æ‰“å¼€ï¼Œhttp://localhost:8080 äº†</p>\n<p>æ³¨æ„ä¸€æ®µè¿™æ ·çš„è¯ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>*************************************************************</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>*************************************************************</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>*************************************************************</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Jenkins initial setup is required. An admin user has been created and a password generated.</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Please use the following password to proceed to installation:</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>63196690ae7d47c49506480ee0e1af4a</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>This may also be found at: /root/.jenkins/secrets/initialAdminPassword</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>*************************************************************</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>*************************************************************</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>*************************************************************</pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>63196690ae7d47c49506480ee0e1af4a</code>  å°±æ˜¯åˆå§‹çš„å®‰è£…çš„ç®¡ç†å‘˜å¯†ç ã€‚</p>\n</li>\n</ul>\n</li>\n<li>\n<p>ä½¿ç”¨ Docker å®‰è£…</p>\n<ul>\n<li>\n<p>å®‰è£… Docker</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># From https://get.docker.com:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-fsSL</span> https://get.docker.com <span class=\"token parameter variable\">-o</span> get-docker.sh</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">sh</span> get-docker.sh</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#From https://test.docker.com:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-fsSL</span> https://test.docker.com <span class=\"token parameter variable\">-o</span> test-docker.sh</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">sh</span> test-docker.sh</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># From the source repo (This will install latest from the test channel):</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token function\">sh</span> install.sh</pre></td></tr></table></figure></li>\n<li>\n<p>é…ç½® Docker é•œåƒåŠ é€Ÿï¼Œä½¿ç”¨é˜¿é‡Œäº‘<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jci5jb25zb2xlLmFsaXl1bi5jb20vP3NwbT1hMmM0ZS4xMTE1Mzk0MC5ibG9nY29udDI5OTQxLjkuNTIwMjdlMjl3Mmp2OVA=\">å®¹å™¨åŠ é€ŸæœåŠ¡</span></p>\n<p>å·¦ä¾§çš„åŠ é€Ÿå™¨å¸®åŠ©é¡µé¢å°±ä¼šæ˜¾ç¤ºä¸ºä½ ç‹¬ç«‹åˆ†é…çš„åŠ é€Ÿåœ°å€</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ä¾‹å¦‚ï¼š</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>å…¬ç½‘Mirrorï¼š<span class=\"token punctuation\">[</span>ç³»ç»Ÿåˆ†é…å‰ç¼€<span class=\"token punctuation\">]</span>.mirror.aliyuncs.com</pre></td></tr></table></figure><p>ä½¿ç”¨é…ç½®æ–‡ä»¶  <code>/etc/docker/daemon.json</code> ï¼ˆæ²¡æœ‰æ—¶æ–°å»ºè¯¥æ–‡ä»¶ï¼‰</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">\"registry-mirrors\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;your accelerate address>\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>é‡å¯ Docker Daemon å°±å¯ä»¥äº†</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>systemctl daemon-reload</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl restart <span class=\"token function\">docker</span></pre></td></tr></table></figure><p><code>docker ps</code>  æŸ¥çœ‹å®¹å™¨è¿è¡ŒçŠ¶æ€</p>\n<p><code>docker logs å®¹å™¨ID/å®¹å™¨åç§°</code>  æŸ¥çœ‹ç®¡ç†å‘˜åˆå§‹å¯†ç </p>\n</li>\n<li>\n<p>å®‰è£… Docker-compose.yml æ–‡ä»¶ (å¯é€‰)</p>\n<p><strong>å®‰è£…æ–¹æ³•ï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#ä¸‹è½½</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-L</span> https://github.com/docker/compose/releases/download/1.20.0/docker-compose-<span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">uname</span> <span class=\"token parameter variable\">-s</span><span class=\"token variable\">`</span></span>-<span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">uname</span> <span class=\"token parameter variable\">-m</span><span class=\"token variable\">`</span></span> <span class=\"token parameter variable\">-o</span> /usr/local/bin/docker-compose</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#å®‰è£…</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">chmod</span> +x /usr/local/bin/docker-compose</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#æŸ¥çœ‹ç‰ˆæœ¬</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">docker-compose</span> <span class=\"token parameter variable\">--version</span></pre></td></tr></table></figure></li>\n<li>\n<p>å®‰è£… Jenkins</p>\n<p><strong>ç‰ˆæœ¬é€‰æ‹©ï¼š</strong></p>\n<p>Jenkins: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9yL2plbmtpbnMvamVua2lucy8=\">https://hub.docker.com/r/jenkins/jenkins/</span></p>\n<p>Jenkins with Blue Ocean: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9yL2plbmtpbnNjaS9ibHVlb2NlYW4=\">https://hub.docker.com/r/jenkinsci/blueocean</span></p>\n<blockquote>\n<p>Blue Ocean é‡æ–°æ€è€ƒ Jenkins çš„ç”¨æˆ·ä½“éªŒï¼Œä»å¤´å¼€å§‹è®¾è®¡<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qZW5raW5zLmlvL3poL2RvYy9ib29rL3BpcGVsaW5lLw==\"> Jenkins Pipeline</span>, ä½†ä»ç„¶ä¸è‡ªç”±å¼ä½œä¸šå…¼å®¹ï¼ŒBlue Ocean å‡å°‘äº†æ··ä¹±è€Œä¸”è¿›ä¸€æ­¥æ˜ç¡®äº†å›¢é˜Ÿä¸­æ¯ä¸ªæˆå‘˜ Blue Ocean çš„ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>æŒç»­äº¤ä»˜ (CD) Pipeline çš„ <strong>å¤æ‚å¯è§†åŒ–</strong> ï¼Œå¯ä»¥è®©æ‚¨å¿«é€Ÿç›´è§‚åœ°ç†è§£ç®¡é“çŠ¶æ€ã€‚</li>\n<li><strong>Pipeline ç¼–è¾‘å™¨</strong> - å¼•å¯¼ç”¨æˆ·é€šè¿‡ç›´è§‚çš„ã€å¯è§†åŒ–çš„è¿‡ç¨‹æ¥åˆ›å»º Pipelineï¼Œä»è€Œä½¿ Pipeline çš„åˆ›å»ºå˜å¾—å¹³æ˜“è¿‘äººã€‚</li>\n<li><strong>ä¸ªæ€§åŒ–</strong> ä»¥é€‚åº”å›¢é˜Ÿä¸­æ¯ä¸ªæˆå‘˜ä¸åŒè§’è‰²çš„éœ€æ±‚ã€‚</li>\n<li>åœ¨éœ€è¦å¹²é¢„å’Œ / æˆ–å‡ºç°é—®é¢˜æ—¶ <strong>ç²¾ç¡®å®šä½</strong> ã€‚ Blue Ocean å±•ç¤º Pipeline ä¸­éœ€è¦å…³æ³¨çš„åœ°æ–¹ï¼Œ ç®€åŒ–å¼‚å¸¸å¤„ç†ï¼Œæé«˜ç”Ÿäº§åŠ›</li>\n<li><strong>æœ¬åœ°é›†æˆåˆ†æ”¯å’Œåˆå¹¶è¯·æ±‚</strong>ï¼Œåœ¨ä¸ GitHub å’Œ Bitbucket ä¸­çš„å…¶ä»–äººåä½œç¼–ç æ—¶å®ç°æœ€å¤§ç¨‹åº¦çš„å¼€å‘äººå‘˜ç”Ÿäº§åŠ›ã€‚****</li>\n</ul>\n</blockquote>\n<p><strong>å®‰è£…å‘½ä»¤ï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># Jenkins</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token parameter variable\">-itd</span> <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token parameter variable\">-u</span> root <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8080</span>:8080 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> jenkins-data:/var/jenkins_home <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> /usr/bin/docker:/usr/bin/docker <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token parameter variable\">--name</span> jenkins-master <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  jenkins/jenkins</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># Jenkins blueocean</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token parameter variable\">-itd</span> <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token parameter variable\">-u</span> root <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8080</span>:8080 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> jenkins-data:/var/jenkins_home <span class=\"token punctuation\">\\</span> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> /usr/bin/docker:/usr/bin/docker <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token parameter variable\">--name</span> jenkins-master <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  jenkinsci/blueocean</pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>é…ç½® Jenkins æ’ä»¶åŠ é€Ÿ</p>\n<p>è¿›å…¥ jenkins ç³»ç»Ÿç®¡ç† -&gt; æ’ä»¶ç®¡ç†ä¸­ -&gt; é«˜çº§é€‰é¡¹å¡ -&gt; å‡çº§ç«™ç‚¹ï¼Œä½¿ç”¨æ¸…åæºï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/current/update-center.json</pre></td></tr></table></figure><p><img data-src=\"./assets/70.png\" alt=\"Ã§Â³Â»Ã§Â»ÂŸÃ§Â®Â¡Ã§ÂÂ†\" /></p>\n<p><img data-src=\"./assets/70-20190611152837311.png\" alt=\"Ã¦ÂÂ’Ã¤Â»Â¶Ã§Â®Â¡Ã§ÂÂ†\" /></p>\n<p>å…³äºå®˜æ–¹æ‰€æœ‰çš„é•œåƒåˆ—è¡¨ï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL21pcnJvcnMuamVua2lucy1jaS5vcmcvc3RhdHVzLmh0bWw=\">http://mirrors.jenkins-ci.org/status.html</span></p>\n</li>\n<li>\n<p>ç¯å¢ƒé…ç½®</p>\n<ul>\n<li>Jenkins çš„ URL è·¯å¾„</li>\n<li>å…¨å±€å·¥å…·çš„é…ç½®ï¼šDocker, JDK (JAVA)...</li>\n</ul>\n</li>\n<li>\n<p>ç”¨æˆ·æƒé™é…ç½®</p>\n<ul>\n<li>çŸ©é˜µæƒé™çš„é…ç½®</li>\n<li>æ·»åŠ ç®¡ç†å‘˜ç”¨æˆ·æ‰€æœ‰çš„æƒé™</li>\n<li>æ·»åŠ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93aWtpLmplbmtpbnMtY2kub3JnL2Rpc3BsYXkvSkVOS0lOUy9BdXRob3JpemUrUHJvamVjdCtwbHVnaW4=\"> Authorize Project</span> æ’ä»¶ï¼Œå¹¶ä¸”åœ¨ç³»ç»Ÿç®¡ç†ä¸­è¿›è¡Œé…ç½®ã€‚é…ç½®é€»è¾‘ï¼Œå°±ç»™ç”¨æˆ·å½“å‰é¡¹ç›®çš„çŸ©é˜µæƒé™ï¼</li>\n</ul>\n</li>\n<li>\n<p>ä¸ gitlab è¿›è¡Œè”æ¥</p>\n<ul>\n<li>è®¾ç½®ä¸€ä¸ª SSH Keyï¼Œæ–¹ä¾¿ Jenkins å»æ‹‰å– Gitlab ä¸­çš„é¡¹ç›®</li>\n<li>GItlab é¡¹ç›®ä¸­å»é…ç½® SSH Key çš„ Deploy æƒé™ã€‚ <code>Settings -&gt; Repository -&gt; Deploy keys -&gt; Public Deploy Keys</code></li>\n<li>Jenkins æ·»åŠ  SSH çš„ç§é’¥</li>\n</ul>\n<p>è¿™æ ·å°±å®Œæˆäº† Jenkins å¯ä»¥è®¿é—® gitlab çš„è”æ¥çš„è¿‡ç¨‹ã€‚</p>\n<p>Jenkins å±‚é¢ï¼Œéœ€è¦å»å®‰è£… Gitlab ç›¸å…³æ’ä»¶ã€‚</p>\n</li>\n</ol>\n<h3 id=\"æ’ä»¶ä»‹ç»\"><a class=\"anchor\" href=\"#æ’ä»¶ä»‹ç»\">#</a> æ’ä»¶ä»‹ç»</h3>\n<ul>\n<li>\n<p>Publish over SSH</p>\n<p>è¿™ä¸ªæ˜¯ä¸€ä¸ªè¿œç¨‹ Shell å·¥å…·ï¼Œå¯ä»¥è¿œç¨‹å»æ‰§è¡Œä¸€äº› shell å‘½ä»¤</p>\n</li>\n<li>\n<p>HTTP Request Plugin</p>\n<p>è·¨å¹³å°è°ƒç”¨ï¼Œåœ¨æ„å»ºå‰åå¯ä»¥é€šè¿‡è¯¥æ’ä»¶ä»¥ http å½¢å¼è°ƒç”¨å„ç§ api æ¥å£å®ç°å’Œå†…éƒ¨ç³»ç»Ÿçš„è”åŠ¨</p>\n</li>\n<li>\n<p>Publish Over FTP</p>\n<p>ç”¨äºè¿œç¨‹ä½¿ç”¨ FTP å‘å¸ƒï¼Œæ¯”è¾ƒåˆé€‚äºé™æ€èµ„æºçš„å‘å¸ƒã€‚</p>\n<p><img data-src=\"./assets/20181225153134962.jpeg\" alt=\"img\" /></p>\n</li>\n<li>\n<p>Performance Plugin</p>\n</li>\n</ul>\n<p>â€‹        è¯¥æ’ä»¶å¯ä»¥è¯»å–å’Œè§£ææµ‹è¯•æ¡†æ¶è¾“å‡ºçš„æŠ¥å‘Šï¼Œå¹¶ä¸”åœ¨ Jenkins ä¸Šç»˜åˆ¶æ€§èƒ½å’Œç¨³å®šæ€§ç›¸å…³çš„å›¾è¡¨ã€‚Performance Plugin æ”¯æŒçš„æµ‹è¯•æ¡†æ¶æœ‰ JUnitã€JMeter, Twitter çš„ Lago å’Œ Taurusã€‚ä¸‹å›¾æ˜¯è¯¥æ’ä»¶è¾“å‡ºçš„ç¤ºä¾‹å›¾ï¼š</p>\n<p><img data-src=\"./assets/3dee2f58ccdf7cf25fa86074c5485184a9f.jpg\" alt=\"img\" /></p>\n<p>â€‹        <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wbHVnaW5zLmplbmtpbnMuaW8vcGVyZm9ybWFuY2U=\">https://plugins.jenkins.io/performance</span></p>\n<ul>\n<li>Gitlab Merge Request Builder Plugin</li>\n</ul>\n<p>â€‹        Gitlab Merge Request Builder Plugin å¯ä»¥æ–¹ä¾¿çš„è‡ªåŠ¨å‘èµ·ä»£ç å®¡æŸ¥ï¼Œå®ƒåœ¨åˆ›å»º pull request çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¸¦ä¸Šå…³è”ä»»åŠ¡çš„è¿è¡Œç»“æœï¼Œä»¥æ–¹ä¾¿ä»£ç å®¡æŸ¥ç€ç¡®è®¤æ”¹åŠ¨çš„æ­£ç¡®æ€§ã€‚</p>\n<p>â€‹        åŒæ—¶ï¼Œè¿™æ¬¾æ’ä»¶è¿˜æ”¯æŒè‡ªåŠ¨åˆå¹¶ï¼Œæ—¢åœ¨ä»£ç å®¡æŸ¥é€šè¿‡åè‡ªåŠ¨åˆå¹¶è¯¥ pull request å†…å®¹ã€‚</p>\n<p>â€‹        <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3RpbW9scy9qZW5raW5zLWdpdGxhYi1tZXJnZS1yZXF1ZXN0LWJ1aWxkZXItcGx1Z2lu\">https://github.com/timols/jenkins-gitlab-merge-request-builder-plugin</span></p>\n<ul>\n<li>JIRA Plugin</li>\n</ul>\n<p>â€‹        JIRA Plugin å¯ä»¥è®© Jenkins ä»»åŠ¡å’Œ JIRA é›†æˆèµ·æ¥ï¼Œè¿™æ ·é¡¹ç›®ç®¡ç†è€…å¯ä»¥é€šè¿‡ JIRA äº†è§£é¡¹ç›®è¿›åº¦ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡è¯¥æ’ä»¶ç›´æ¥æ›´æ”¹ JIRA ä¸Šçš„ issue çŠ¶æ€ã€‚</p>\n<p>â€‹        <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wbHVnaW5zLmplbmtpbnMuaW8vamlyYQ==\">https://plugins.jenkins.io/jira</span></p>\n<ul>\n<li>Kubernetes Plugin</li>\n</ul>\n<p>â€‹        å’Œæœ€è¿‘å¤§çƒ­çš„å®¹å™¨ç¼–æ’æ¡†æ¶ Kubernetes é›†æˆå½“ç„¶ä¸èƒ½è½ä¸‹äº†ã€‚å¦å¤–ï¼ŒJenkins å¯¹æ‰§è¡Œæœºçš„ç®¡ç†ä¸€ç›´æ¯”è¾ƒå¼±ï¼Œæ— æ³•åšåˆ°å¿«é€Ÿçš„æ‰©å®¹å’Œç¼©å®¹ã€‚Kubernetes Plugin é€šè¿‡å¼•å…¥ Kubernetes çš„å®¹å™¨ç¼–æ’èƒ½åŠ›ï¼Œè®© Jenkins æ‰§è¡Œæœºè¿è¡Œåœ¨ Kubernetes ç¯å¢ƒä¸­ã€‚</p>\n<p>â€‹        <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2plbmtpbnNjaS9rdWJlcm5ldGVzLXBsdWdpbg==\">https://github.com/jenkinsci/kubernetes-plugin</span></p>\n<ul>\n<li>Build Pipeline plugin</li>\n</ul>\n<p>â€‹        å¯¹ä¸€ä¸ªç³»ç»Ÿçš„æŒç»­é›†æˆä¼šåŒ…å«å¾ˆå¤šä¸ªæ–¹é¢ï¼Œå¦‚æœå°†å®ƒä»¬éƒ½æ‚ç³…åœ¨ä¸€ä¸ª Jenkins ä»»åŠ¡ä¸­ï¼Œä¼šæé«˜æ’æŸ¥æˆæœ¬ï¼Œä¹Ÿä¸åˆ©äºæ•´ä¸ªæŒç»­é›†æˆçš„è¿ä½œã€‚Build Pipeline plugin å¯ä»¥è®©é¡¹ç›®ç®¡ç†å‘˜é’ˆå¯¹ç³»ç»ŸæŒç»­é›†æˆæ­¥éª¤è®¾ç½®ä¸€ç³»åˆ—å…³è”çš„ä»»åŠ¡ï¼Œä»»åŠ¡ä¹‹é—´å¯ä»¥è®¾ç½®ä¸åŒçš„è§¦å‘æ¡ä»¶ï¼Œä»¥ç¡®è®¤ä½•æ—¶éœ€è¦äººå·¥ä»‹å…¥ã€‚è¯¥æ’ä»¶å¯ä»¥è®©æ•´ä¸ªæŒç»­é›†æˆæµç¨‹å˜å¾—éå¸¸ç›´è§‚ï¼š</p>\n<p><img data-src=\"https://oscimg.oschina.net/oscnet/abf7ec185c847b72cd61181562f940557a2.jpg\" alt=\"img\" /></p>\n<p>â€‹        <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2plbmtpbnNjaS9idWlsZC1waXBlbGluZS1wbHVnaW4=\">https://github.com/jenkinsci/build-pipeline-plugin</span></p>\n<h3 id=\"é…ç½®è‡ªåŠ¨åŒ–ä»»åŠ¡\"><a class=\"anchor\" href=\"#é…ç½®è‡ªåŠ¨åŒ–ä»»åŠ¡\">#</a> é…ç½®è‡ªåŠ¨åŒ–ä»»åŠ¡</h3>\n<p>ä¸¤ç§æ‰§è¡Œæ–¹æ³•ï¼š</p>\n<ol>\n<li>é…ç½®è‡ªç”±é£æ ¼çš„é¡¹ç›®</li>\n<li>é…ç½® Pipeline ä½¿ç”¨ Jenkinsfile</li>\n</ol>\n<p>éœ€è¦æ³¨æ„çš„åœ°æ–¹</p>\n<ul>\n<li>\n<p>SSH æ’ä»¶ï¼š</p>\n<p>SSH</p>\n<p>SSH Agent</p>\n<p>SSH Pipeline Steps</p>\n<p>Publish Over SSH</p>\n</li>\n<li>\n<p>git ç›¸å…³æ’ä»¶ï¼š</p>\n<p>Gitlab</p>\n<p>Github</p>\n</li>\n<li>\n<p>ç®¡ç†å‘˜ç•Œé¢é…ç½®ï¼š</p>\n<p><code>Settings -&gt; network -&gt; Outbound requests</code></p>\n<p>Allow requests to the local network from hooks and services è¿›è¡Œå‹¾é€‰</p>\n</li>\n</ul>\n<p>å…¶ä»–çš„ä¸€äº›ç”¨æ³•ï¼š</p>\n<ul>\n<li>ä½¿ç”¨ Jenkins é…åˆ Docker Hubï¼ŒæŠŠå‰ç«¯ä»£ç æ‰“åŒ…æˆé•œåƒï¼Œå†è¿œç¨‹éƒ¨ç½²</li>\n<li>Jenkins é…åˆè‡ªå»º Docker å®¹å™¨æœåŠ¡ï¼ŒæŠŠå‰ç«¯ä»£ç æ‰“åŒ…ï¼Œä½¿ç”¨ Kubernetes è¿›è¡Œå‘å¸ƒã€‚</li>\n<li>ä½¿ç”¨ Docker è¿›è¡Œè¿œç¨‹å‘å¸ƒ (è¿œç¨‹æœåŠ¡å™¨ä¸Šæœ‰ Docker æœåŠ¡ï¼Œå¹¶ä¸”è®¾ç½®äº†è¿œç¨‹è¿æ¥)</li>\n</ul>\n<h2 id=\"travisci\"><a class=\"anchor\" href=\"#travisci\">#</a> TravisCI</h2>\n<h3 id=\"ä½¿ç”¨ç®€ä»‹-2\"><a class=\"anchor\" href=\"#ä½¿ç”¨ç®€ä»‹-2\">#</a> ä½¿ç”¨ç®€ä»‹</h3>\n<p>Travis CI åªæ”¯æŒ Githubï¼Œä¸æ”¯æŒå…¶ä»–ä»£ç æ‰˜ç®¡æœåŠ¡ã€‚è¿™æ„å‘³ç€ï¼Œä½ å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œæ‰èƒ½ä½¿ç”¨ Travis CIã€‚</p>\n<blockquote>\n<ul>\n<li>æ‹¥æœ‰ GitHub å¸å·</li>\n<li>è¯¥å¸å·ä¸‹é¢æœ‰ä¸€ä¸ªé¡¹ç›®</li>\n<li>è¯¥é¡¹ç›®é‡Œé¢æœ‰å¯è¿è¡Œçš„ä»£ç </li>\n<li>è¯¥é¡¹ç›®è¿˜åŒ…å«æ„å»ºæˆ–æµ‹è¯•è„šæœ¬</li>\n</ul>\n</blockquote>\n<p>Travis ç®€å•çš„ä½¿ç”¨æ­¥éª¤:</p>\n<ul>\n<li>github æˆæƒåŠé¢æ¿</li>\n<li>è·å– github çš„ Tokens</li>\n<li>é…ç½®é¡¹ç›®.travis.yml\n<ul>\n<li>Node é¡¹ç›®</li>\n<li>Script è„šæœ¬</li>\n<li>éƒ¨ç½²åˆ° github pages</li>\n<li>é’©å­ç”¨æ³•</li>\n</ul>\n</li>\n<li>å…¶ä»–</li>\n</ul>\n<p><strong>github æˆæƒåŠé¢æ¿</strong></p>\n<p>é¦–å…ˆï¼Œè®¿é—®å®˜æ–¹ç½‘ç«™ <span class=\"exturl\" data-url=\"aHR0cHM6Ly90cmF2aXMtY2kub3JnLw==\">travis-ci.org</span>ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸ªäººå¤´åƒï¼Œä½¿ç”¨ Github è´¦æˆ·ç™»å…¥ Travis CIã€‚</p>\n<p>ä¼šè¿›å…¥åˆ°æˆæƒé¡µé¢ï¼Œè¿™é‡Œè·Ÿå¾®åšã€QQ æ˜¯ä¸€å›äº‹ï¼Œä¸»è¦æ˜¯è¯»å–ä½ çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p>\n<p><img data-src=\"./assets/image-20190612205411602.png\" alt=\"/images/image-20190612205411602\" /></p>\n<p>è¿™é‡Œç¬¬äºŒæ­¥åœ¨ï¼Œ <code>Dashboard</code>  è¿™ä¸ªé€‰é¡¹å¡ä¸­ï¼Œç‚¹å‡» <code>Activate</code>  è¿™ä¸ªæŒ‰é’®</p>\n<p><img data-src=\"./assets/image-20190612212459194.png\" alt=\"/images/image-20190612212459194\" /></p>\n<p>å®Œäº†ä¹‹åï¼ŒDashboard ä¼šåˆ—å‡ºæ‰€æœ‰ Github ä¸­æœ‰ <code>.travis.yml</code>  é…ç½®æ–‡ä»¶çš„ä»“åº“ï¼š</p>\n<p><img data-src=\"./assets/image-20190612212731186.png\" alt=\"/images/image-20190612212731186\" /></p>\n<p>Travis ä¼šåˆ—å‡º Github ä¸Šé¢ä½ çš„æ‰€æœ‰ä»“åº“ï¼Œä»¥åŠä½ æ‰€å±äºçš„ç»„ç»‡ã€‚æ­¤æ—¶ï¼Œé€‰æ‹©ä½ éœ€è¦ Travis å¸®ä½ æ„å»ºçš„ä»“åº“ï¼Œæ‰“å¼€ä»“åº“æ—è¾¹çš„å¼€å…³ã€‚ä¸€æ—¦æ¿€æ´»äº†ä¸€ä¸ªä»“åº“ï¼ŒTravis ä¼šç›‘å¬è¿™ä¸ªä»“åº“çš„æ‰€æœ‰å˜åŒ–ã€‚</p>\n<p><img data-src=\"./assets/image-20190612213022380.png\" alt=\"/images/image-20190612213022380\" /></p>\n<ul>\n<li>\n<p><code>Settings</code>  ä¸­ç”¨äºé…ç½®é¡¹ç›®çš„æ„å»ºæ¡ä»¶</p>\n<p><img data-src=\"./assets/image-20190612214434173.png\" alt=\"/images/image-20190612214434173\" /></p>\n</li>\n<li>\n<p><code>Requests</code>  å¯ä»¥æŸ¥çœ‹æ„å»ºè®°å½•</p>\n<p><img data-src=\"./assets/image-20190612214519926.png\" alt=\"/images/image-20190612214519926\" /></p>\n</li>\n<li>\n<p><code>Caches</code>  ä¸»è¦æ˜¯ç¼“å­˜æ–‡ä»¶</p>\n</li>\n<li>\n<p><code>Trigger build</code>  æ‰‹åŠ¨è§¦å‘æ„å»º</p>\n</li>\n</ul>\n<p><strong>è·å– github çš„ token</strong></p>\n<p>åœ¨ settings-&gt;Developer settings-&gt;Personal access tokens-&gt;Generate new token</p>\n<p><img data-src=\"./assets/image-20190612225000955.png\" alt=\"/images/image-20190612225000955\" /></p>\n<p><strong>é…ç½®é¡¹ç›®çš„.travis.yml æ–‡ä»¶</strong></p>\n<ul>\n<li>\n<p>è®¾ç½®é¡¹ç›®è¯­è¨€</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> node_js</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">node_js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"10\"</span></pre></td></tr></table></figure></li>\n<li>\n<p>Script è„šæœ¬</p>\n<p>Travis çš„è¿è¡Œæµç¨‹å¾ˆç®€å•ï¼Œä»»ä½•é¡¹ç›®éƒ½ä¼šç»è¿‡ä¸¤ä¸ªé˜¶æ®µã€‚</p>\n<blockquote>\n<ul>\n<li>install é˜¶æ®µï¼šå®‰è£…ä¾èµ–</li>\n<li>script é˜¶æ®µï¼šè¿è¡Œè„šæœ¬</li>\n</ul>\n</blockquote>\n<p>é…ç½®æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># S: Build Lifecycle</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">install</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">-</span> yarn install</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>// é’©å­æ–¹æ³•</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># æ— å…¶ä»–ä¾èµ–é¡¹æ‰€ä»¥æ‰§è¡Œ npm run build æ„å»ºå°±è¡Œäº†</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">-</span> npm run build</pre></td></tr></table></figure><p>å¦‚æœä¸éœ€è¦å®‰è£…ï¼Œå³è·³è¿‡å®‰è£…é˜¶æ®µï¼Œå°±ç›´æ¥è®¾ä¸º <code>true</code> ã€‚</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token literal-property property\">install</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr></table></figure><p><code>script</code>  å­—æ®µç”¨æ¥æŒ‡å®šæ„å»ºæˆ–æµ‹è¯•è„šæœ¬ã€‚</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token literal-property property\">script</span><span class=\"token operator\">:</span> bundle exec thor build</pre></td></tr></table></figure><p>å¦‚æœæœ‰å¤šä¸ªè„šæœ¬ï¼Œå¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ã€‚</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token literal-property property\">script</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token operator\">-</span> command1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token operator\">-</span> command2</pre></td></tr></table></figure></li>\n<li>\n<p>éƒ¨ç½²åˆ° github pages</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\"># å…¶ä»–çš„ä¸€äº›é…ç½®é¡¹ï¼Œå¯ä»¥å‚è€ƒï¼šhttps://docs.travis-ci.com/user/deployment/pages/</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> pages</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">skip_cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">local_dir</span><span class=\"token punctuation\">:</span> dist/</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $GITHUB_TOKEN <span class=\"token comment\"># Set in the settings page of your repository, as a secure variable</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">keep_history</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> master</pre></td></tr></table></figure></li>\n<li>\n<p>é’©å­ç”¨æ³•</p>\n<p>Travis ä¸ºä¸Šé¢è¿™äº›é˜¶æ®µæä¾›äº† 7 ä¸ªé’©å­ã€‚</p>\n<ul>\n<li>before_installï¼šinstall é˜¶æ®µä¹‹å‰æ‰§è¡Œ</li>\n<li>before_scriptï¼šscript é˜¶æ®µä¹‹å‰æ‰§è¡Œ</li>\n<li>after_failureï¼šscript é˜¶æ®µå¤±è´¥æ—¶æ‰§è¡Œ</li>\n<li>after_successï¼šscript é˜¶æ®µæˆåŠŸæ—¶æ‰§è¡Œ</li>\n<li>before_deployï¼šdeploy æ­¥éª¤ä¹‹å‰æ‰§è¡Œ</li>\n<li>after_deployï¼šdeploy æ­¥éª¤ä¹‹åæ‰§è¡Œ</li>\n<li>after_scriptï¼šscript é˜¶æ®µä¹‹åæ‰§è¡Œ</li>\n</ul>\n<p>å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»å¼€å§‹åˆ°ç»“æŸæ˜¯ä¸‹é¢çš„æµç¨‹ã€‚</p>\n<ol>\n<li>before_install</li>\n<li>install</li>\n<li>before_script</li>\n<li>script</li>\n<li>after<em>success or after</em>failure</li>\n<li>[OPTIONAL] before_deploy</li>\n<li>[OPTIONAL] deploy</li>\n<li>[OPTIONAL] after_deploy</li>\n<li>after_script</li>\n</ol>\n</li>\n</ul>\n<p>å‚è€ƒèµ„æ–™ï¼š</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZG9tZW5pYy9lYzhiMGZjOGFiNDVmMzk0MDNkZA==\">Auto-deploying built products to gh-pages with Travis</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9vbmNsZXRvbS5pby8yMDE2L3RyYXZpcy1zc2gtZGVwbG95Lw==\">SSH deploys with Travis CI</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTcvMTIvdHJhdmlzX2NpX3R1dG9yaWFsLmh0bWw=\">æŒç»­é›†æˆæœåŠ¡ Travis CI æ•™ç¨‹</span></li>\n</ul>\n<h3 id=\"é…ç½®nodejsåº”ç”¨\"><a class=\"anchor\" href=\"#é…ç½®nodejsåº”ç”¨\">#</a> é…ç½® Node.js åº”ç”¨</h3>\n<p>é…ç½®ä¸€ä¸ª Vue å®ä¾‹å¹¶å‘å¸ƒåˆ° github pages</p>\n<p>.travis.yml æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> node_js</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">node_js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"10\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># Travis-CI Caching</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">directories</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> node_modules</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># S: Build Lifecycle</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token key atrule\">install</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">-</span> yarn install</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># æ— å…¶ä»–ä¾èµ–é¡¹æ‰€ä»¥æ‰§è¡Œ npm run build æ„å»ºå°±è¡Œäº†</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">-</span> npm run build</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t<span class=\"token comment\"># å…¶ä»–çš„ä¸€äº›é…ç½®é¡¹ï¼Œå¯ä»¥å‚è€ƒï¼šhttps://docs.travis-ci.com/user/deployment/pages/</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> pages</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token key atrule\">skip_cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token key atrule\">local_dir</span><span class=\"token punctuation\">:</span> dist/</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $GITHUB_TOKEN <span class=\"token comment\"># Set in the settings page of your repository, as a secure variable</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token key atrule\">keep_history</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> master</pre></td></tr></table></figure><h2 id=\"circleci\"><a class=\"anchor\" href=\"#circleci\">#</a> CircleCI</h2>\n<h3 id=\"ä½¿ç”¨ç®€ä»‹-3\"><a class=\"anchor\" href=\"#ä½¿ç”¨ç®€ä»‹-3\">#</a> ä½¿ç”¨ç®€ä»‹</h3>\n<ol>\n<li>\n<p>æ³¨å†Œ CircleCI</p>\n<p>æ‰“å¼€ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9jaXJjbGVjaS5jb20v\">CircleCI</span> å®˜æ–¹ç½‘ç«™ï¼Œä½¿ç”¨æ‚¨çš„ GitHub å¸æˆ·ç™»å½•ã€‚</p>\n<p><img data-src=\"./assets/image-20190613093550553.png\" alt=\"/images/image-20190613093550553\" /></p>\n<p>è¿›è¡Œæˆæƒï¼š</p>\n<p><img data-src=\"./assets/image-20190613093732415.png\" alt=\"/images/image-20190613093732415\" /></p>\n</li>\n<li>\n<p>å¯åŠ¨å­˜å‚¨åº“</p>\n</li>\n</ol>\n<p>æ£€æŸ¥è¦åœ¨ CircleCI ä¸Šç®¡ç†çš„å­˜å‚¨åº“çš„å¼€å…³æŒ‰é’®ã€‚</p>\n<p><img data-src=\"./assets/image-20190613094115350.png\" alt=\"/images/image-20190613094115350\" /></p>\n<ol start=\"3\">\n<li>\n<p>ç¼–å†™ config.yml</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">docker</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t<span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\t\t<span class=\"token punctuation\">...</span></pre></td></tr></table></figure><p>å®˜æ–¹å‚è€ƒæ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jaXJjbGVjaS5jb20vZG9jcy8yLjAvY29uZmlndXJhdGlvbi1yZWZlcmVuY2UvI3ZlcnNpb24=\">https://circleci.com/docs/2.0/configuration-reference/#version</span></p>\n<p>æ¥çœ‹ä¸€ä¸ªå®Œäº‹ç‰ˆçš„é…ç½®</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">docker</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">:</span><span class=\"token number\">14.04</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mongo<span class=\"token punctuation\">:</span>2.6.8</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>mongod<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>smallfiles<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> postgres<span class=\"token punctuation\">:</span>9.4.1</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\"># some containers require setting environment variables</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          <span class=\"token key atrule\">POSTGRES_USER</span><span class=\"token punctuation\">:</span> root</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> redis@sha256<span class=\"token punctuation\">:</span>54057dd7e125ca41afe526a877e8bd35ec2cdd33b9217e022ed37bdcf7d09673</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> rabbitmq<span class=\"token punctuation\">:</span>3.5.4</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token key atrule\">TEST_REPORTS</span><span class=\"token punctuation\">:</span> /tmp/test<span class=\"token punctuation\">-</span>reports</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token key atrule\">working_directory</span><span class=\"token punctuation\">:</span> ~/my<span class=\"token punctuation\">-</span>project</pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token punctuation\">-</span> checkout</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> echo 127.0.0.1 devhost <span class=\"token punctuation\">|</span> sudo tee <span class=\"token punctuation\">-</span>a /etc/hosts</pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token comment\"># Create Postgres users and database</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token comment\"># Note the YAML heredoc '|' for nicer formatting</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>          sudo -u root createuser -h localhost --superuser ubuntu &amp;&amp;</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>          sudo createdb -h localhost test_db</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">restore_cache</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>          <span class=\"token key atrule\">keys</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token punctuation\">-</span> v1<span class=\"token punctuation\">-</span>my<span class=\"token punctuation\">-</span>project<span class=\"token punctuation\">-</span>&lt;<span class=\"token tag\">!--swig</span>ï¿¼0<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            - v1-my-project-</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>          <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token key atrule\">SSH_TARGET</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"localhost\"</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token key atrule\">TEST_ENV</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"linux\"</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            set -xu</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            mkdir -p $&#123;TEST_REPORTS&#125;</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            run-tests.sh</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            cp out/tests/*.xml $&#123;TEST_REPORTS&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>          set -xu</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>          mkdir -p /tmp/artifacts</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>          create_jars.sh $&#123;CIRCLE_BUILD_NUM&#125;</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>          cp *.jar /tmp/artifacts</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">save_cache</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> v1<span class=\"token punctuation\">-</span>my<span class=\"token punctuation\">-</span>project<span class=\"token punctuation\">-</span>&lt;<span class=\"token tag\">!--swig</span>ï¿¼1<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>          paths:</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>            - ~/.m2</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      <span class=\"token comment\"># Save artifacts</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">store_artifacts</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /tmp/artifacts</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>          <span class=\"token key atrule\">destination</span><span class=\"token punctuation\">:</span> build</pre></td></tr><tr><td data-num=\"66\"></td><td><pre></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>      <span class=\"token comment\"># Upload test results</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">store_test_results</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /tmp/test<span class=\"token punctuation\">-</span>reports</pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>  <span class=\"token key atrule\">deploy-stage</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token key atrule\">docker</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">:</span><span class=\"token number\">14.04</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token key atrule\">working_directory</span><span class=\"token punctuation\">:</span> /tmp/my<span class=\"token punctuation\">-</span>project</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy if tests pass and branch is Staging</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> ansible<span class=\"token punctuation\">-</span>playbook site.yml <span class=\"token punctuation\">-</span>i staging</pre></td></tr><tr><td data-num=\"79\"></td><td><pre></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>  <span class=\"token key atrule\">deploy-prod</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    <span class=\"token key atrule\">docker</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">:</span><span class=\"token number\">14.04</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token key atrule\">working_directory</span><span class=\"token punctuation\">:</span> /tmp/my<span class=\"token punctuation\">-</span>project</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy if tests pass and branch is Master</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> ansible<span class=\"token punctuation\">-</span>playbook site.yml <span class=\"token punctuation\">-</span>i production</pre></td></tr><tr><td data-num=\"88\"></td><td><pre></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token key atrule\">workflows</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>  <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>  <span class=\"token key atrule\">build-deploy</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>    <span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>          <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>              <span class=\"token key atrule\">ignore</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>                <span class=\"token punctuation\">-</span> develop</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>                <span class=\"token punctuation\">-</span> /feature<span class=\"token punctuation\">-</span>.<span class=\"token important\">*/</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">deploy-stage</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>          <span class=\"token key atrule\">requires</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>            <span class=\"token punctuation\">-</span> build</pre></td></tr><tr><td data-num=\"102\"></td><td><pre>          <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>              <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span> staging</pre></td></tr><tr><td data-num=\"105\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">deploy-prod</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>          <span class=\"token key atrule\">requires</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>            <span class=\"token punctuation\">-</span> build</pre></td></tr><tr><td data-num=\"108\"></td><td><pre>          <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>              <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span> master</pre></td></tr></table></figure></li>\n<li>\n<p>è®¾ç½® / æŸ¥çœ‹ä»»åŠ¡</p>\n<p><img data-src=\"./assets/image-20190613093327981.png\" alt=\"/images/image-20190613093327981\" /></p>\n</li>\n</ol>\n<h3 id=\"é…ç½®nodejsåº”ç”¨-2\"><a class=\"anchor\" href=\"#é…ç½®nodejsåº”ç”¨-2\">#</a> é…ç½® Node.js åº”ç”¨</h3>\n<p><code>.circleci/config.yml</code>  é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">docker</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> circleci/node<span class=\"token punctuation\">:</span><span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">-</span> master</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">add_ssh_keys</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>          <span class=\"token key atrule\">fingerprints</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"c5:20:8e:79:81:19:fd:c1:6c:c4:fb:41:58:92:9d:4f\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token punctuation\">-</span> checkout</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">restore_cache</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token key atrule\">keys</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token comment\"># fallback to using the latest cache if no exact match is found</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">-</span> dependencies<span class=\"token punctuation\">-</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> yarn install</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">save_cache</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">-</span> node_modules</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> dependencies<span class=\"token punctuation\">-</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> build github pages</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> yarn build</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Prepare shell commands</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> chmod +x scripts/deploy.sh</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run deploy scripts</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> ./scripts/deploy.sh</pre></td></tr></table></figure><p>è¿™é‡Œä»¥å‘å¸ƒåˆ° github page ä¸ºç¤ºä¾‹ï¼š</p>\n<p>deploy.sh æ–‡ä»¶çš„å†…å®¹ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token shebang important\">#!/bin/sh</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># ideas used from https://gist.github.com/motemen/8595451</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># Based on https://github.com/eldarlabs/ghpages-deploy-script/blob/master/scripts/deploy-ghpages.sh</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># Used with their MIT license https://github.com/eldarlabs/ghpages-deploy-script/blob/master/LICENSE</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># abort the script if there is a non-zero error</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token parameter variable\">-e</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># show where we are on the machine</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token builtin class-name\">pwd</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token assign-left variable\">remote</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">git</span> config remote.origin.url<span class=\"token variable\">)</span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'remote is: '</span><span class=\"token variable\">$remote</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># make a directory to put the gp-pages branch</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">mkdir</span> gh-pages-branch</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token builtin class-name\">cd</span> gh-pages-branch</pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># now lets setup a new repo so we can update the gh-pages branch</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token function\">git</span> config <span class=\"token parameter variable\">--global</span> user.email <span class=\"token string\">\"<span class=\"token variable\">$GH_EMAIL</span>\"</span> <span class=\"token operator\">></span> /dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token function\">git</span> config <span class=\"token parameter variable\">--global</span> user.name <span class=\"token string\">\"<span class=\"token variable\">$GH_NAME</span>\"</span> <span class=\"token operator\">></span> /dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token function\">git</span> init</pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> <span class=\"token parameter variable\">--fetch</span> origin <span class=\"token string\">\"<span class=\"token variable\">$remote</span>\"</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'email is: '</span><span class=\"token variable\">$GH_EMAIL</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'name is: '</span><span class=\"token variable\">$GH_NAME</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'sitesource is: '</span><span class=\"token variable\">$siteSource</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># switch into the the gh-pages branch</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token function\">git</span> rev-parse <span class=\"token parameter variable\">--verify</span> origin/gh-pages <span class=\"token operator\">></span> /dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token function\">git</span> checkout gh-pages</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token comment\"># delete any old site as we are going to replace it</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token comment\"># Note: this explodes if there aren't any, so moving it here for now</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token function\">git</span> <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token function\">git</span> checkout <span class=\"token parameter variable\">--orphan</span> gh-pages</pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">fi</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token comment\"># copy over or recompile the new site</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token function\">cp</span> <span class=\"token parameter variable\">-a</span> <span class=\"token string\">\"../<span class=\"token variable\">$&#123;siteSource&#125;</span>/.\"</span> <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token function\">ls</span> <span class=\"token parameter variable\">-la</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token comment\"># stage any changes and new files</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-A</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token comment\"># now commit, ignoring branch gh-pages doesn't seem to work, so trying skip</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token function\">git</span> commit --allow-empty <span class=\"token parameter variable\">-m</span> <span class=\"token string\">\"Deploy to GitHub pages [ci skip]\"</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token comment\"># and push, but send any output to /dev/null to hide anything sensitive</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token function\">git</span> push <span class=\"token parameter variable\">--force</span> <span class=\"token parameter variable\">--quiet</span> origin gh-pages</pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token comment\"># go back to where we started and remove the gh-pages git repo we made and used</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token comment\"># for deployment</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> gh-pages-branch</pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Finished Deployment!\"</span></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p>\n<p><strong>&gt;/dev/null 2&gt;&amp;1 çš„å«ä¹‰</strong></p>\n<p><strong>æ–‡ä»¶æè¿°ç¬¦</strong></p>\n<p>å½“æ‰§è¡Œ shell å‘½ä»¤æ—¶ï¼Œä¼šé»˜è®¤æ‰“å¼€ 3 ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶æœ‰å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æ¥æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç±»å‹</th>\n<th style=\"text-align:left\">æ–‡ä»¶æè¿°ç¬¦</th>\n<th style=\"text-align:left\">é»˜è®¤æƒ…å†µ</th>\n<th style=\"text-align:left\">å¯¹åº”æ–‡ä»¶å¥æŸ„ä½ç½®</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">æ ‡å‡†è¾“å…¥ï¼ˆstandard inputï¼‰</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">ä»é”®ç›˜è·å¾—è¾“å…¥</td>\n<td style=\"text-align:left\">/proc/slef/fd/0</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æ ‡å‡†è¾“å‡ºï¼ˆstandard outputï¼‰</td>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">è¾“å‡ºåˆ°å±å¹•ï¼ˆå³æ§åˆ¶å°ï¼‰</td>\n<td style=\"text-align:left\">/proc/slef/fd/1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">é”™è¯¯è¾“å‡ºï¼ˆerror outputï¼‰</td>\n<td style=\"text-align:left\">2</td>\n<td style=\"text-align:left\">è¾“å‡ºåˆ°å±å¹•ï¼ˆå³æ§åˆ¶å°ï¼‰</td>\n<td style=\"text-align:left\">/proc/slef/fd/2</td>\n</tr>\n</tbody>\n</table>\n<p><code>&gt;</code>  ä»£è¡¨é‡å®šå‘åˆ°å“ªé‡Œï¼Ÿ</p>\n<p>ä¾‹å¦‚ï¼š <code>echo &quot;123&quot; &gt; /home/123.txt</code> <br />\n <code>1</code>  è¡¨ç¤º <code>stdout</code>  æ ‡å‡†è¾“å‡ºï¼Œç³»ç»Ÿé»˜è®¤å€¼æ˜¯ <code>1</code> ï¼Œæ‰€ä»¥ <code>&gt;/dev/null</code>  ç­‰åŒäº <code>1&gt;/dev/null</code> <br />\n <code>2</code>  è¡¨ç¤º <code>stderr</code>  æ ‡å‡†é”™è¯¯<br />\n <code>&amp;</code>  è¡¨ç¤ºç­‰åŒäºçš„æ„æ€ï¼Œ <code>2&gt;&amp;1</code> ï¼Œè¡¨ç¤º <code>2</code>  çš„è¾“å‡ºé‡å®šå‘ç­‰åŒäº <code>1</code></p>\n<p>å‚è€ƒèµ„æ–™ï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vdGlueXdhbi9wLzYwMjU0NjguaHRtbA==\">Shell è„šæœ¬ â€”â€”â€”â€” /dev/null 2&gt;&amp;1 è¯¦è§£</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2t5ZWNoaW5hL2FydGljbGUvZGV0YWlscy81NDU4MjE0Ng==\">shell ä¸­ &gt;/dev/null 2&gt;&amp;1</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2l0aG9tZXIvYXJ0aWNsZS9kZXRhaWxzLzkyODgzNTM=\">Linux Shell 1&gt;/dev/null 2&gt;&amp;1 å«ä¹‰</span></p>\n<h2 id=\"æ‰©å±•çŸ¥è¯†\"><a class=\"anchor\" href=\"#æ‰©å±•çŸ¥è¯†\">#</a> æ‰©å±•çŸ¥è¯†</h2>\n<h3 id=\"è‡ªåŠ¨åŒ–æµç¨‹çš„å‘å±•è¶‹åŠ¿\"><a class=\"anchor\" href=\"#è‡ªåŠ¨åŒ–æµç¨‹çš„å‘å±•è¶‹åŠ¿\">#</a> è‡ªåŠ¨åŒ–æµç¨‹çš„å‘å±•è¶‹åŠ¿</h3>\n<ol>\n<li>\n<p>é›†ä¸­åŒ–</p>\n<p>ä»¥é›†ç¾¤ä¸ºåŸºç¡€ï¼ŒæœåŠ¡é‡‡ç”¨ Saas æ–¹å¼è¿›è¡Œäº¤ä»˜ã€‚æ‰€æœ‰æŠ˜æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒå…¨é›†ä¸­è¿›è¡Œç®¡ç†ã€‚</p>\n</li>\n<li>\n<p>å¾®æœåŠ¡ + æ— æœåŠ¡çš„åº”ç”¨æ¨¡å¼</p>\n<p>åº”ç”¨ç¨‹åºæ‰§è¡Œç¯å¢ƒçš„ç®¡ç†è¢«æ–°çš„ç¼–ç¨‹æ¨¡å‹å’Œå¹³å°å–ä»£åï¼Œå›¢é˜Ÿçš„äº¤ä»˜ç”Ÿäº§ç‡å¾—åˆ°äº†è¿›ä¸€æ­¥çš„æå‡ã€‚ä¸€æ–¹é¢å®ƒå…å»äº†å¾ˆå¤šç¯å¢ƒç®¡ç†çš„å·¥ä½œï¼ŒåŒ…æ‹¬è®¾å¤‡ã€ç½‘ç»œã€ä¸»æœºä»¥åŠå¯¹åº”çš„è½¯ä»¶å’Œé…ç½®å·¥ä½œï¼Œä½¿å¾—è½¯ä»¶è¿è¡Œæ—¶ç¯å¢ƒæ›´åŠ ç¨³å®šã€‚å¦ä¸€æ–¹é¢ï¼Œå®ƒå¤§å¤§é™ä½äº†å›¢é˜Ÿé‡‡ç”¨ DevOps çš„æŠ€æœ¯é—¨æ§›ã€‚</p>\n<p>** æ— æœåŠ¡å™¨é£æ ¼çš„æ¶æ„ï¼ˆServerless architectureï¼‰** æŠŠ DevOps æŠ€æœ¯åœ¨å¾®æœåŠ¡é¢†åŸŸçš„åº”ç”¨æ¨å‘æè‡´ã€‚å½“åº”ç”¨ç¨‹åºæ‰§è¡Œç¯å¢ƒçš„ç®¡ç†è¢«æ–°çš„ç¼–ç¨‹æ¨¡å‹å’Œå¹³å°å–ä»£åï¼Œå›¢é˜Ÿçš„äº¤ä»˜ç”Ÿäº§ç‡å¾—åˆ°äº†è¿›ä¸€æ­¥çš„æå‡ã€‚ä¸€æ–¹é¢å®ƒå…å»äº†å¾ˆå¤šç¯å¢ƒç®¡ç†çš„å·¥ä½œï¼ŒåŒ…æ‹¬è®¾å¤‡ã€ç½‘ç»œã€ä¸»æœºä»¥åŠå¯¹åº”çš„è½¯ä»¶å’Œé…ç½®å·¥ä½œï¼Œä½¿å¾—è½¯ä»¶è¿è¡Œæ—¶ç¯å¢ƒæ›´åŠ ç¨³å®šã€‚å¦ä¸€æ–¹é¢ï¼Œå®ƒå¤§å¤§é™ä½äº†å›¢é˜Ÿé‡‡ç”¨ DevOps çš„æŠ€æœ¯é—¨æ§›ã€‚</p>\n<p>åœ¨å¾®æœåŠ¡ç«¯åˆ°ç«¯äº¤ä»˜æµç¨‹ä¸Šï¼ŒNetflix å¼€æºäº†è‡ªå®¶çš„<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcGlubmFrZXIuaW8v\"> Spinnaker</span>ï¼ŒNetflix ä½œä¸ºå¾®æœåŠ¡å®è·µçš„å…ˆé”‹ï¼Œä¸æ–­æ¨å‡ºæ–°çš„å¼€æºå·¥å…·æ¥å¼¥è¡¥ç¤¾åŒºä¸­å¾®æœåŠ¡æŠ€æœ¯å’Œæœ€ä½³å®è·µçš„ç¼ºå¤±ã€‚è€Œ<span class=\"exturl\" data-url=\"aHR0cDovL3Byb2plY3RzLnNwcmluZy5pby9zcHJpbmctY2xvdWQv\"> Spring Cloud</span> åˆ™ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç³»åˆ—å·¥å…·ï¼Œä»¥ä¾¿ä»–ä»¬åœ¨æ‰€ç†Ÿæ‚‰çš„ Spring æŠ€æœ¯æ ˆä¸‹ä½¿ç”¨è¿™äº›æœåŠ¡åè°ƒæŠ€æœ¯ (coordination techniques)ï¼Œå¦‚æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­å’Œå¥åº·æ£€æŸ¥ã€‚</p>\n</li>\n<li>\n<p>äººå·¥æ™ºèƒ½é¢†åŸŸçš„åº”ç”¨</p>\n<p>DevOps çš„æœ€æ—©å®è·µæ¥è‡ªäºäº’è”ç½‘ä¼ä¸šçš„ Web åº”ç”¨ï¼Œç›¸åº”çš„æ€æƒ³è¢«å¼•å…¥ä¼ä¸šçº§åº”ç”¨å¹¶ä¿ƒè¿›äº†ä¸€ç³»åˆ—å·¥å…·çš„å‘å±•ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGVuc29yZmxvdy5vcmcv\">TensorFlow</span> å°±æ˜¯è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œå®ƒå¯ä»¥æœ‰å¤šç§ DevOps å‹å¥½çš„å®‰è£…å’Œéƒ¨ç½²æ–¹å¼ ï¼Œä¾‹å¦‚é‡‡ç”¨ Docker è¿›è¡Œéƒ¨ç½²ã€‚</p>\n<p>éšç€ Python åœ¨å¤§æ•°æ®ã€äººå·¥æ™ºèƒ½ã€åŒºå—é“¾ã€å¾®æœåŠ¡ä»¥åŠ Docker ä¸­çš„å‘å±•ï¼Œå¯ä»¥é¢„è§ Python åœ¨æ—¥åçš„é¢†åŸŸä»ç„¶ä¼šå‘æŒ¥é‡è¦çš„ä½œç”¨ã€‚</p>\n</li>\n<li>\n<p>å®‰å…¨æ¨åŠ¨ DevOps çš„å‘å±•</p>\n<p>å…¨æ˜¯ DevOps æ°¸è¿œç»•ä¸å¼€çš„è¯é¢˜ï¼Œä¹Ÿå¾€å¾€æ˜¯æ–°æŠ€æœ¯åœ¨ä¼ ç»Ÿè¡Œä¸šï¼ˆä¾‹å¦‚é‡‘èå’Œç”µä¿¡ï¼‰åº”ç”¨ä¸­çš„æœ€å¤§é˜»ç¢ã€‚ä¸€æ–¹é¢ï¼Œç»„ç»‡ç»“æ„çš„è½¬å‹è¿«ä½¿ä¼ä¸šè¦æ‰“ç ´åŸå…ˆçš„éƒ¨é—¨å¢™ï¼Œè¿™æ„å‘³ç€å¾ˆå¤šåŸå…ˆçš„æ§åˆ¶æµç¨‹ä¸å†é€‚ç”¨ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äºå¤§é‡çš„ DevOps æŠ€æœ¯æ¥æºäºå¼€æºç¤¾åŒºï¼Œç¼ºä¹å¼ºå¤§æŠ€æœ¯å®åŠ›çš„ä¼ä¸šåœ¨åº”ç”¨ç›¸å…³æŠ€æœ¯æ—¶ä¸å…ä¼šæœ‰æ‰€æ‹…å¿§ã€‚</p>\n</li>\n<li>\n<p>Windows å¹³å°ä¸‹.net çš„æŠ€æœ¯æ½œåŠ›å·¨å¤§</p>\n<p>é•¿æœŸä»¥æ¥ï¼ŒWindows å’Œ.NET å¹³å°ä¸‹çš„ DevOps ä¸€ç›´éƒ½æ˜¯ä¸€ä¸ªè¢«ä½ä¼°çš„é¢†åŸŸã€‚ä¸€æ–¹é¢ï¼Œç¤¾åŒºç¼ºä¹å¯¹ Windows Server å¹³å°çš„å…´è¶£ã€‚å¦ä¸€æ–¹é¢ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb21tdW5pdHkuc3BpY2V3b3Jrcy5jb20vbmV0d29ya2luZy9hcnRpY2xlcy8yNDYyLXNlcnZlci12aXJ0dWFsaXphdGlvbi1hbmQtb3MtdHJlbmRz\">Windows Server å´æœ‰æ¥è¿‘ 90% çš„å¸‚åœºå ç”¨ç‡</span>ï¼Œåœ¨ Web æœåŠ¡å™¨é¢†åŸŸåˆ™æœ‰<span class=\"exturl\" data-url=\"aHR0cHM6Ly93M3RlY2hzLmNvbS90ZWNobm9sb2dpZXMvb3ZlcnZpZXcvb3BlcmF0aW5nX3N5c3RlbS9hbGw=\"> 33.5% çš„å¸‚åœºå æœ‰ç‡</span>ã€‚</p>\n</li>\n<li>\n<p>éåŠŸèƒ½æ€§è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·é€æ¸å®Œå–„</p>\n<p>è‡ªåŠ¨åŒ–æµ‹è¯•æ°´å¹³å¾€å¾€æ˜¯è¡¡é‡ DevOps æŠ€æœ¯èƒ½åŠ›é«˜ä½çš„é‡è¦æŒ‡æ ‡ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹ç”Ÿäº§ç¯å¢ƒåº”ç”¨ç¨‹åºçš„éåŠŸèƒ½æ€§è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ã€‚ä¸€ç›´ä»¥æ¥ï¼ŒæŠ€æœ¯é›·è¾¾éƒ½åœ¨å°è¯•ä»ä¸åŒçš„è§’åº¦å®£æ‰¬è‡ªåŠ¨åŒ–æµ‹è¯•çš„é‡è¦æ€§ï¼Œä»è½¯ä»¶çš„å¼€å‘é˜¶æ®µå»¶å±•åˆ°äº†æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸç”šè‡³æ•´ä½“ IT èµ„äº§çš„ç®¡ç†ä¸Šã€‚</p>\n</li>\n</ol>\n<h3 id=\"å¤æ‚çš„devopsç›¸å…³å·¥å…·\"><a class=\"anchor\" href=\"#å¤æ‚çš„devopsç›¸å…³å·¥å…·\">#</a> å¤æ‚çš„ DevOps ç›¸å…³å·¥å…·</h3>\n<p><img data-src=\"./assets/devops-hero-1-87966cfbc9c5713ae047551c7b22985c.png\" alt=\"DevOps\" /></p>\n<h3 id=\"jenkinsçš„ä¸€äº›åº”ç”¨åœºæ™¯\"><a class=\"anchor\" href=\"#jenkinsçš„ä¸€äº›åº”ç”¨åœºæ™¯\">#</a> Jenkins çš„ä¸€äº›åº”ç”¨åœºæ™¯</h3>\n<p>æ‰“åŒ…å¹³å°ï¼š</p>\n<p>ä½¿ç”¨ Jenkins æ­å»º iOS/Android</p>\n<p>æµ‹è¯•å¹³å°ï¼š</p>\n<p>jenkins + python + selenium</p>\n<p>Jmeter+maven+Jenkins æ„å»ºäº‘æ€§èƒ½æµ‹è¯•å¹³å°</p>\n<p>Jenkins+PMD æ„å»ºè‡ªåŠ¨åŒ–é™æ€ä»£ç æ£€æµ‹</p>\n<p>ä½¿ç”¨ jenkins+Emma ç»Ÿè®¡</p>\n<p>å®¢æˆ·ç«¯å•å…ƒæµ‹è¯•è¦†ç›–ç‡</p>\n<p>Jenkins+Ant+Java+Junit+SVN æ‰§è¡Œ junit å•å…ƒæµ‹è¯•</p>\n<p>jenkins+ant+jmeter æ­å»ºæŒç»­é›†æˆçš„æ¥å£æµ‹è¯•å¹³å°</p>\n<p>è‡ªåŠ¨éƒ¨ç½²ï¼š</p>\n<p>Jenkins+GitLab + è’²å…¬è‹± + FTP</p>\n<p>jenkins ç»“åˆ ansible ç”¨ shell å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œå›æ»š</p>\n<p>æŒç»­é›†æˆï¼š</p>\n<p>Tomcat+Sonar æ­å»ºæŒç»­é›†æˆç¯å¢ƒ</p>\n<p>Maven+Nexus+Jenkins+git/SVN</p>\n<h3 id=\"jenkinsçš„docker-composeymlåˆ›å»ºæ–‡ä»¶\"><a class=\"anchor\" href=\"#jenkinsçš„docker-composeymlåˆ›å»ºæ–‡ä»¶\">#</a> Jenkins çš„ Docker-compose.yml åˆ›å»ºæ–‡ä»¶</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>version: <span class=\"token string\">'3'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>services:</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  jenkins:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    container_name: <span class=\"token string\">'jenkins'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    image: jenkins/jenkins</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    restart: always</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    user: jenkins:<span class=\"token operator\">&lt;</span>è¿™é‡Œå¡«Dockerç”¨æˆ·ç»„çš„IDï¼Œè§ä¸‹é¢<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    ports:</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    - <span class=\"token string\">\"8080:8080\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    - <span class=\"token string\">\"50000:50000\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    volumes:</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    - /home/jenkins/data:/var/jenkins_home</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    - /usr/bin/docker:/usr/bin/docker</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    - /var/run/docker.sock:/var/run/docker.sock</pre></td></tr></table></figure><p>ä¸Šé¢çš„è„šæœ¬ä½¿ç”¨æ³¨æ„ï¼š</p>\n<ol>\n<li>\n<p>åˆ›å»ºæœ¬åœ° jenkins æ•°æ®ç›®å½•</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> /home/jenkins</pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥çœ‹ docker ç”¨æˆ·ç»„çš„ ID</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">cat</span> /etc/group <span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token function\">docker</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ‰§è¡Œ <code>docker-compose up -d</code></p>\n</li>\n</ol>\n<h3 id=\"gitlabçš„dockerå¯åŠ¨é…ç½®æ–‡ä»¶\"><a class=\"anchor\" href=\"#gitlabçš„dockerå¯åŠ¨é…ç½®æ–‡ä»¶\">#</a> gitlab çš„ docker å¯åŠ¨é…ç½®æ–‡ä»¶</h3>\n<p>é¡¹ç›®åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NhbWVlcnNibi9kb2NrZXItZ2l0bGFi\">https://github.com/sameersbn/docker-gitlab</span></p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'2'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">redis</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> sameersbn/redis<span class=\"token punctuation\">:</span>4.0.9<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>loglevel warning</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> /srv/docker/gitlab/redis<span class=\"token punctuation\">:</span>/var/lib/redis<span class=\"token punctuation\">:</span>Z</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">postgresql</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> sameersbn/postgresql<span class=\"token punctuation\">:</span><span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">-</span> /srv/docker/gitlab/postgresql<span class=\"token punctuation\">:</span>/var/lib/postgresql<span class=\"token punctuation\">:</span>Z</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_USER=gitlab</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_PASS=password</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_NAME=gitlabhq_production</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_EXTENSION=pg_trgm</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token key atrule\">gitlab</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> sameersbn/gitlab<span class=\"token punctuation\">:</span>11.11.2</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">-</span> redis</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">-</span> postgresql</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"10080:80\"</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"10022:22\"</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">-</span> /srv/docker/gitlab/gitlab<span class=\"token punctuation\">:</span>/home/git/data<span class=\"token punctuation\">:</span>Z</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">-</span> DEBUG=false</pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_ADAPTER=postgresql</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_HOST=postgresql</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_PORT=5432</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_USER=gitlab</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_PASS=password</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_NAME=gitlabhq_production</pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">-</span> REDIS_HOST=redis</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">-</span> REDIS_PORT=6379</pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">-</span> TZ=Asia/Kolkata</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_TIMEZONE=Kolkata</pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_HTTPS=false</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">-</span> SSL_SELF_SIGNED=false</pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token comment\"># è¿™é‡Œä¿®æ”¹æˆæœåŠ¡å™¨çš„ IP æˆ–è€…åŸŸå</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_HOST=localhost</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_PORT=10080</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_SSH_PORT=10022</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_RELATIVE_URL_ROOT=</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_SECRETS_DB_KEY_BASE=long<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>random<span class=\"token punctuation\">-</span>alphanumeric<span class=\"token punctuation\">-</span>string</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_SECRETS_SECRET_KEY_BASE=long<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>random<span class=\"token punctuation\">-</span>alphanumeric<span class=\"token punctuation\">-</span>string</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_SECRETS_OTP_KEY_BASE=long<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>random<span class=\"token punctuation\">-</span>alphanumeric<span class=\"token punctuation\">-</span>string</pre></td></tr><tr><td data-num=\"61\"></td><td><pre></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>\t\t<span class=\"token comment\"># è¿™é‡Œç»™ä¸€ä¸ªé•¿åº¦å¤§äº 8 çš„å¯†ç </span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_ROOT_PASSWORD=12345678</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_ROOT_EMAIL=itheima@itcast.cn</pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_NOTIFY_ON_BROKEN_BUILDS=true</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_NOTIFY_PUSHER=false</pre></td></tr><tr><td data-num=\"68\"></td><td><pre></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_EMAIL=notifications@example.com</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_EMAIL_REPLY_TO=noreply@example.com</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_INCOMING_EMAIL_ADDRESS=reply@example.com</pre></td></tr><tr><td data-num=\"72\"></td><td><pre></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_BACKUP_SCHEDULE=daily</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_BACKUP_TIME=01<span class=\"token punctuation\">:</span><span class=\"token number\">00</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    <span class=\"token punctuation\">-</span> SMTP_ENABLED=false</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token punctuation\">-</span> SMTP_DOMAIN=www.example.com</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    <span class=\"token punctuation\">-</span> SMTP_HOST=smtp.gmail.com</pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token punctuation\">-</span> SMTP_PORT=587</pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    <span class=\"token punctuation\">-</span> SMTP_USER=mailer@example.com</pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    <span class=\"token punctuation\">-</span> SMTP_PASS=password</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    <span class=\"token punctuation\">-</span> SMTP_STARTTLS=true</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token punctuation\">-</span> SMTP_AUTHENTICATION=login</pre></td></tr><tr><td data-num=\"84\"></td><td><pre></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>    <span class=\"token punctuation\">-</span> IMAP_ENABLED=false</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    <span class=\"token punctuation\">-</span> IMAP_HOST=imap.gmail.com</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>    <span class=\"token punctuation\">-</span> IMAP_PORT=993</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    <span class=\"token punctuation\">-</span> IMAP_USER=mailer@example.com</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>    <span class=\"token punctuation\">-</span> IMAP_PASS=password</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>    <span class=\"token punctuation\">-</span> IMAP_SSL=true</pre></td></tr><tr><td data-num=\"91\"></td><td><pre>    <span class=\"token punctuation\">-</span> IMAP_STARTTLS=false</pre></td></tr><tr><td data-num=\"92\"></td><td><pre></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_ENABLED=false</pre></td></tr><tr><td data-num=\"94\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AUTO_SIGN_IN_WITH_PROVIDER=</pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_ALLOW_SSO=</pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_BLOCK_AUTO_CREATED_USERS=true</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AUTO_LINK_LDAP_USER=false</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AUTO_LINK_SAML_USER=false</pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_EXTERNAL_PROVIDERS=</pre></td></tr><tr><td data-num=\"100\"></td><td><pre></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CAS3_LABEL=cas3</pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CAS3_SERVER=</pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CAS3_DISABLE_SSL_VERIFICATION=false</pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CAS3_LOGIN_URL=/cas/login</pre></td></tr><tr><td data-num=\"105\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CAS3_VALIDATE_URL=/cas/p3/serviceValidate</pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CAS3_LOGOUT_URL=/cas/logout</pre></td></tr><tr><td data-num=\"107\"></td><td><pre></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GOOGLE_API_KEY=</pre></td></tr><tr><td data-num=\"109\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GOOGLE_APP_SECRET=</pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GOOGLE_RESTRICT_DOMAIN=</pre></td></tr><tr><td data-num=\"111\"></td><td><pre></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_FACEBOOK_API_KEY=</pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_FACEBOOK_APP_SECRET=</pre></td></tr><tr><td data-num=\"114\"></td><td><pre></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_TWITTER_API_KEY=</pre></td></tr><tr><td data-num=\"116\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_TWITTER_APP_SECRET=</pre></td></tr><tr><td data-num=\"117\"></td><td><pre></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GITHUB_API_KEY=</pre></td></tr><tr><td data-num=\"119\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GITHUB_APP_SECRET=</pre></td></tr><tr><td data-num=\"120\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GITHUB_URL=</pre></td></tr><tr><td data-num=\"121\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GITHUB_VERIFY_SSL=</pre></td></tr><tr><td data-num=\"122\"></td><td><pre></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GITLAB_API_KEY=</pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_GITLAB_APP_SECRET=</pre></td></tr><tr><td data-num=\"125\"></td><td><pre></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_BITBUCKET_API_KEY=</pre></td></tr><tr><td data-num=\"127\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_BITBUCKET_APP_SECRET=</pre></td></tr><tr><td data-num=\"128\"></td><td><pre></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_ASSERTION_CONSUMER_SERVICE_URL=</pre></td></tr><tr><td data-num=\"130\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_IDP_CERT_FINGERPRINT=</pre></td></tr><tr><td data-num=\"131\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_IDP_SSO_TARGET_URL=</pre></td></tr><tr><td data-num=\"132\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_ISSUER=</pre></td></tr><tr><td data-num=\"133\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_LABEL=\"Our SAML Provider\"</pre></td></tr><tr><td data-num=\"134\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_NAME_IDENTIFIER_FORMAT=urn<span class=\"token punctuation\">:</span>oasis<span class=\"token punctuation\">:</span>names<span class=\"token punctuation\">:</span>tc<span class=\"token punctuation\">:</span>SAML<span class=\"token punctuation\">:</span>2.0<span class=\"token punctuation\">:</span>nameid<span class=\"token punctuation\">-</span>format<span class=\"token punctuation\">:</span>transient</pre></td></tr><tr><td data-num=\"135\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_GROUPS_ATTRIBUTE=</pre></td></tr><tr><td data-num=\"136\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_EXTERNAL_GROUPS=</pre></td></tr><tr><td data-num=\"137\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_ATTRIBUTE_STATEMENTS_EMAIL=</pre></td></tr><tr><td data-num=\"138\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_ATTRIBUTE_STATEMENTS_NAME=</pre></td></tr><tr><td data-num=\"139\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_ATTRIBUTE_STATEMENTS_USERNAME=</pre></td></tr><tr><td data-num=\"140\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_ATTRIBUTE_STATEMENTS_FIRST_NAME=</pre></td></tr><tr><td data-num=\"141\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_SAML_ATTRIBUTE_STATEMENTS_LAST_NAME=</pre></td></tr><tr><td data-num=\"142\"></td><td><pre></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CROWD_SERVER_URL=</pre></td></tr><tr><td data-num=\"144\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CROWD_APP_NAME=</pre></td></tr><tr><td data-num=\"145\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_CROWD_APP_PASSWORD=</pre></td></tr><tr><td data-num=\"146\"></td><td><pre></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AUTH0_CLIENT_ID=</pre></td></tr><tr><td data-num=\"148\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AUTH0_CLIENT_SECRET=</pre></td></tr><tr><td data-num=\"149\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AUTH0_DOMAIN=</pre></td></tr><tr><td data-num=\"150\"></td><td><pre></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AZURE_API_KEY=</pre></td></tr><tr><td data-num=\"152\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AZURE_API_SECRET=</pre></td></tr><tr><td data-num=\"153\"></td><td><pre>    <span class=\"token punctuation\">-</span> OAUTH_AZURE_TENANT_ID=</pre></td></tr></table></figure>",
            "tags": [
                "æŒç»­é›†æˆä¸éƒ¨ç½²",
                "æŒç»­é›†æˆ",
                "æŒç»­éƒ¨ç½²"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/02/02/%E5%AE%B9%E5%99%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E6%93%8D%E4%BD%9C/",
            "url": "https://dmqweb.cn/2024/02/02/%E5%AE%B9%E5%99%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E6%93%8D%E4%BD%9C/",
            "title": "å®¹å™¨åŒ–è¿ç»´æ“ä½œ",
            "date_published": "2024-02-02T06:24:04.000Z",
            "content_html": "<h1 id=\"5-6-å®¹å™¨åŒ–è¿ç»´æ“ä½œ\"><a class=\"anchor\" href=\"#5-6-å®¹å™¨åŒ–è¿ç»´æ“ä½œ\">#</a> 5-6 å®¹å™¨åŒ–è¿ç»´æ“ä½œ</h1>\n<p>æ—¥è¶‹å¤æ‚çš„è¿ç»´å¼€å‘ç¯å¢ƒï¼Œå¯¹è™šæ‹ŸæœåŠ¡å™¨åŠåº”ç”¨æœåŠ¡çš„è¦æ±‚æ›´åŠ çš„å¤šå…ƒåŒ–ã€‚æˆ‘ä»¬éœ€è¦æ›´åŠ å®¹æ˜“æ‰©å±•ã€æ€§èƒ½ä¼˜è¶Šã€æ–¹ä¾¿ç›‘æ§çš„ç®¡ç†æœåŠ¡ï¼Œå®¹å™¨åŒ–åº”ç”¨ã€å®¹å™¨åŒ–è¿ç»´åº”è¿è€Œç”Ÿã€‚</p>\n<p><strong>ã€çŸ¥å·±çŸ¥å½¼ã€‘ä½ å°†åœ¨å­¦ä¹ æœ¬è¯¾ç¨‹ä¸­å­¦ä¹ åˆ°ï¼š</strong></p>\n<ol>\n<li>ç†è§£ / å®‰è£… docker å®¹å™¨æŠ€æœ¯</li>\n<li>ç§’çº§å¿«é€Ÿéƒ¨ç½² mysqlã€nginxã€tomcat ç­‰æœåŠ¡</li>\n<li>ä½¿ç”¨å®¹å™¨æŠ€æœ¯å‘å¸ƒ nodejs åº”ç”¨</li>\n<li>â€¦</li>\n</ol>\n<p><strong>ã€å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‘ä½ éœ€è¦å‡†å¤‡çš„ç¯å¢ƒï¼ˆä¸‰é€‰ä¸€ï¼‰ï¼š</strong></p>\n<ul>\n<li>Linux ç¯å¢ƒ (Centos 7 ä»¥ä¸Š / Debian 8 ä»¥ä¸Š / Ubuntu 16.04LTS ä»¥ä¸Šç‰ˆæœ¬)</li>\n<li>Windows 64 ä½ä¸“ä¸šç‰ˆ / ä¼ä¸šç‰ˆ / æ•™è‚²ç‰ˆ (Build 15063 ä»¥ä¸Š)</li>\n<li>macOS Sierra 10.12 ä»¥ä¸Šçš„ç‰ˆæœ¬</li>\n</ul>\n<blockquote>\n<p>å¦‚æœï¼Œä½ æœ‰äº†ä¸Šé¢çš„ç¯å¢ƒï¼Œå°±å¯ä»¥å¾ˆå¿«é€Ÿçš„è·Ÿç€æˆ‘ä»¬çš„å†…å®¹å¿«é€Ÿå­¦ä¹ ã€‚</p>\n</blockquote>\n<h2 id=\"å®¹å™¨å’Œdocker\"><a class=\"anchor\" href=\"#å®¹å™¨å’Œdocker\">#</a> å®¹å™¨å’Œ Docker</h2>\n<h3 id=\"ä»€ä¹ˆæ˜¯å®¹å™¨åŒ–\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯å®¹å™¨åŒ–\">#</a> ä»€ä¹ˆæ˜¯å®¹å™¨åŒ–ï¼Ÿ</h3>\n<p>å®¹å™¨åŒ–æ˜¯å°†åº”ç”¨ç¨‹åºæˆ–æœåŠ¡ã€å…¶ä¾èµ–é¡¹åŠå…¶é…ç½®ï¼ˆæŠ½è±¡åŒ–ä¸ºéƒ¨ç½²æ¸…å•æ–‡ä»¶ï¼‰ä¸€èµ·æ‰“åŒ…ä¸ºå®¹å™¨æ˜ åƒçš„ä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•ã€‚</p>\n<p><img data-src=\"./assets/docker-containerized-appliction-blue-border_2.png\" alt=\"docker-containerized-appliction-blue-border_2\" /></p>\n<p>è½¯ä»¶å®¹å™¨å……å½“è½¯ä»¶éƒ¨ç½²çš„æ ‡å‡†å•å…ƒï¼Œå…¶ä¸­å¯ä»¥åŒ…å«ä¸åŒçš„ä»£ç å’Œä¾èµ–é¡¹ã€‚ æŒ‰ç…§è¿™ç§æ–¹å¼å®¹å™¨åŒ–è½¯ä»¶ï¼Œå¼€å‘äººå‘˜å’Œ IT ä¸“ä¸šäººå‘˜åªéœ€è¿›è¡Œæå°‘ä¿®æ”¹æˆ–ä¸ä¿®æ”¹ï¼Œå³å¯å°†å…¶éƒ¨ç½²åˆ°ä¸åŒçš„ç¯å¢ƒã€‚</p>\n<p>å®¹å™¨åŒ–åº”ç”¨ç¨‹åºåœ¨å®¹å™¨ä¸»æœºä¸Šè¿è¡Œï¼Œè€Œå®¹å™¨ä¸»æœºåœ¨ OSï¼ˆLinux æˆ– Windowsï¼‰ä¸Šè¿è¡Œã€‚å› æ­¤ï¼Œå®¹å™¨çš„å ç”¨æ¯”è™šæ‹Ÿæœº (VM) æ˜ åƒå°å¾—å¤šã€‚</p>\n<p>å®¹å™¨åŒ–çš„ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>ä¸€è‡´çš„è¿è¡Œç¯å¢ƒ</li>\n<li>å¯ä¼¸ç¼©æ€§</li>\n<li>æ›´æ–¹ä¾¿çš„ç§»æ¤</li>\n<li>éš”ç¦»æ€§</li>\n</ul>\n<h3 id=\"ä»€ä¹ˆæ˜¯docker\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯docker\">#</a> ä»€ä¹ˆæ˜¯ Docker?</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL21vYnkvbW9ieQ==\">Docker</span> æ˜¯ç”¨ GO è¯­è¨€å¼€å‘çš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäºå®¹å™¨åŒ–ï¼Œæ²™ç®±æœºåˆ¶çš„åº”ç”¨éƒ¨ç½²æŠ€æœ¯ã€‚å¯é€‚ç”¨äºè‡ªåŠ¨åŒ–æµ‹è¯•ã€æ‰“åŒ…ï¼ŒæŒç»­é›†æˆå’Œå‘å¸ƒåº”ç”¨ç¨‹åºç­‰åœºæ™¯ï¼ŒåŒ…æ‹¬é˜¿é‡Œäº‘ï¼Œäºšé©¬é€Šåœ¨å†…çš„äº‘è®¡ç®—æœåŠ¡å•†éƒ½é‡‡ç”¨äº† docker æ¥æ‰“é€  serverless æœåŠ¡å¹³å°ã€‚å®ƒä¸ä»…ä»…å¯ä»¥éƒ¨ç½²é¡¹ç›®ï¼Œè¿˜å¯ä»¥ç”¨äºæ•°æ®åº“æ­å»ºï¼Œnginx æœåŠ¡æ­å»ºï¼Œnodejsã€php ç­‰ç¼–ç¨‹è¯­è¨€ç¯å¢ƒæ­å»ºã€‚</p>\n<blockquote>\n<p>PS: docker ç°å·²æ”¹åä¸º moby</p>\n</blockquote>\n<p>Docker ä¸­çš„ä¸‰ä¸ª<strong>é‡è¦æ¦‚å¿µ</strong>ï¼š</p>\n<ul>\n<li>\n<p>é•œåƒ (image)ï¼šåˆ†ç‰‡çš„ï¼ˆåªè¯»ï¼‰æ–‡ä»¶ç³»ç»Ÿï¼Œç”± Dockerfile åˆ›å»º</p>\n<p>ç‹¬ç«‹ã€æ˜“æ‰©å±•ã€æ›´æ•ˆç‡</p>\n</li>\n<li>\n<p>å®¹å™¨ (container)ï¼šç”± Docker è¿›ç¨‹åˆ›å»ºå’Œç®¡ç†çš„ï¼šæ–‡ä»¶ç³»ç»Ÿ +  ç³»ç»Ÿèµ„æº + ç½‘ç»œé…ç½® + æ—¥å¿—ç®¡ç†</p>\n<p>docker æ˜¯ docker é•œåƒçš„è¿è¡Œç¯å¢ƒï¼Œæ‰€ä»¥å®¹å™¨çš„æ¦‚å¿µå°±æ¯”è¾ƒå¥½ç†è§£äº†</p>\n</li>\n<li>\n<p>ä»“åº“ (registry)ï¼šç”¨æ¥è¿œç«¯å­˜å‚¨ docker é•œåƒ</p>\n<p>ç‰ˆæœ¬æ§åˆ¶ã€å˜æ›´ç®¡ç†ã€ä¸ºæŒç»­é›†æˆä¸å¿«é€Ÿéƒ¨ç½²æä¾›ä¾¿åˆ©</p>\n</li>\n</ul>\n<h3 id=\"docker-vs-è™šæ‹Ÿæœº\"><a class=\"anchor\" href=\"#docker-vs-è™šæ‹Ÿæœº\">#</a> Docker vs è™šæ‹Ÿæœº</h3>\n<p><img data-src=\"./assets/docker-containerized-and-vm-transparent-bg.png\" alt=\"docker-containerized-and-vm-transparent-bg\" /></p>\n<ol>\n<li>å®¹å™¨æ˜¯åº”ç”¨å±‚çš„æŠ½è±¡ï¼Œå®ƒå°†ä»£ç å’Œä¾èµ–å…³ç³»æ‰“åŒ…åœ¨ä¸€èµ·ã€‚ å¤šä¸ªå®¹å™¨å¯ä»¥åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œå¹¶ä¸å…¶ä»–å®¹å™¨å…±äº«æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œæ¯ä¸ªå®¹å™¨åœ¨ç”¨æˆ·ç©ºé—´ä¸­ä½œä¸ºç‹¬ç«‹è¿›ç¨‹è¿è¡Œã€‚ å®¹å™¨å ç”¨çš„ç©ºé—´æ¯” VM å°‘ï¼ˆå®¹å™¨æ˜ åƒçš„å¤§å°é€šå¸¸ä¸ºå‡ å MBï¼‰ï¼Œå¯ä»¥å¤„ç†æ›´å¤šçš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”éœ€è¦æ›´å°‘çš„ VM å’Œæ“ä½œç³»ç»Ÿã€‚</li>\n<li>è™šæ‹Ÿæœºï¼ˆVMï¼‰æ˜¯ç‰©ç†ç¡¬ä»¶çš„æŠ½è±¡ï¼Œå°†ä¸€å°æœåŠ¡å™¨è½¬å˜ä¸ºå¤šå°æœåŠ¡å™¨ã€‚ ç®¡ç†ç¨‹åºå…è®¸å¤šå° VM åœ¨å•å°æœºå™¨ä¸Šè¿è¡Œã€‚ æ¯ä¸ª VM éƒ½åŒ…å«æ“ä½œç³»ç»Ÿçš„å®Œæ•´å‰¯æœ¬ï¼Œåº”ç”¨ç¨‹åºï¼Œå¿…è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶å’Œåº“ - å ç”¨æ•°å GBã€‚ è™šæ‹Ÿæœºä¹Ÿå¯èƒ½å¾ˆæ…¢å¯åŠ¨ã€‚</li>\n</ol>\n<p><strong>æ€»ç»“ä¸€ä¸‹ï¼š</strong></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç‰¹æ€§</th>\n<th style=\"text-align:left\">å®¹å™¨</th>\n<th style=\"text-align:left\">è™šæ‹Ÿæœº</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">å¯åŠ¨</td>\n<td style=\"text-align:left\">ç§’çº§</td>\n<td style=\"text-align:left\">åˆ†é’Ÿçº§</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ç¡¬ç›˜ä½¿ç”¨</td>\n<td style=\"text-align:left\">ä¸€èˆ¬ä¸º  <code>MB</code></td>\n<td style=\"text-align:left\">ä¸€èˆ¬ä¸º  <code>GB</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æ€§èƒ½</td>\n<td style=\"text-align:left\">æ¥è¿‘åŸç”Ÿ</td>\n<td style=\"text-align:left\">å¼±äº</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ç³»ç»Ÿæ”¯æŒé‡</td>\n<td style=\"text-align:left\">å•æœºæ”¯æŒä¸Šåƒä¸ªå®¹å™¨</td>\n<td style=\"text-align:left\">ä¸€èˆ¬å‡ åä¸ª</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å¼€å‘ / ç¯å¢ƒå®šåˆ¶</td>\n<td style=\"text-align:left\">æ–¹ä¾¿ (å‘½ä»¤è¡Œã€é¢å‘å¯¹è±¡å¼)</td>\n<td style=\"text-align:left\">è¿›å…¥è™šæ‹Ÿæœº</td>\n</tr>\n</tbody>\n</table>\n<p><strong>ç›¸åŒç‚¹ï¼š</strong></p>\n<ol>\n<li>æ–‡ä»¶éš”ç¦» / æ–‡ä»¶å…±äº«ï¼ˆæ²™ç®±ï¼‰</li>\n<li>èµ„æºéš”ç¦»</li>\n<li>ç½‘ç»œéš”ç¦»</li>\n<li>æ”¯æŒå¤šç§å®¿ä¸»ç¯å¢ƒï¼ˆæ‰©å±•ï¼‰</li>\n<li>å¿«ç…§ / é•œåƒï¼ˆç‰ˆæœ¬æ§åˆ¶ / å˜æ›´ç®¡ç†ï¼‰</li>\n</ol>\n<p><strong>ä¸åŒç‚¹ï¼š</strong></p>\n<ol>\n<li>ä¸åŒçš„èµ„æºç®¡ç† / ä¾èµ– // é‡Šæ”¾ï¼ˆè™šæ‹Ÿæœºå ç”¨æ›´å¤šçš„ç³»ç»Ÿèµ„æºï¼‰</li>\n<li>ä¸åŒçš„åº”ç”¨è¿è¡Œç¯å¢ƒ</li>\n<li>Docker æ˜¯å†™æ—¶å¤åˆ¶</li>\n<li>ä¸åŒçš„æ—¥å¿—æ–¹å¼ (Docker æ”¶é›†æ—¥å¿—ï¼Œè€Œè™šæ‹Ÿæœºéœ€è¦åœ¨è™šæ‹Ÿç³»ç»Ÿé‡Œé¢çœ‹æ—¥å¿—)</li>\n<li>ä¸åŒçš„äº¤äº’æ–¹å¼ (Docker å shellï¼Œè™šæ‹Ÿæœºå GUI)</li>\n</ol>\n<h3 id=\"dockerçš„å·¥ä½œåŸç†é‡ç‚¹\"><a class=\"anchor\" href=\"#dockerçš„å·¥ä½œåŸç†é‡ç‚¹\">#</a> Docker çš„å·¥ä½œåŸç† (é‡ç‚¹)</h3>\n<p><img data-src=\"./assets/work.png\" alt=\"work\" /></p>\n<p>Docker æ˜¯å®¹å™¨åŒ–éƒ¨ç½²æŠ€æœ¯ï¼Œå®ƒä¸»è¦ä½œç”¨åœ¨äºé€šè¿‡è¿è¡Œå®¹å™¨æ¥å®ç°åº”ç”¨éƒ¨ç½²ï¼Œè€Œå®¹å™¨åŸºäºé•œåƒè¿è¡Œã€‚</p>\n<p>ç®€å•åœ°è¯´ï¼Œå°±æ˜¯å°†ä½ çš„é¡¹ç›®å’Œä¾èµ–åŒ… (åŸºç¡€é•œåƒ) æ‰“æˆä¸€ä¸ªå¸¦æœ‰å¯åŠ¨æŒ‡ä»¤çš„é¡¹ç›®é•œåƒï¼Œç„¶ååœ¨æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œè®©é•œåƒåœ¨å®¹å™¨å†…è¿è¡Œï¼Œä»è€Œå®ç°é¡¹ç›®çš„éƒ¨ç½²ã€‚</p>\n<p>æœåŠ¡å™¨å°±æ˜¯å®¹å™¨çš„å®¿ä¸»æœºï¼Œdocker å®¹å™¨ä¸å®¿ä¸»æœºä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚</p>\n<p>Docker çš„åŸºç¡€æ˜¯ Linux å®¹å™¨ï¼ˆLXCï¼šLinux Containersï¼‰ç­‰æŠ€æœ¯ã€‚</p>\n<p><strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼š</strong></p>\n<p>Linux (æœåŠ¡å™¨) -&gt; tomcat å®‰è£… -&gt; Java ä¾èµ– -&gt; maven ä¾èµ– -&gt; æ”¾ç½®åœ¨ /usr/lib ç›®å½• -&gt; é…ç½® tomcat ç«¯å£ / ç›®å½• -&gt; è¿è¡Œ tomcat ä¸­çš„ startup.sh è„šæœ¬ -&gt; é…ç½®ç½‘ç»œã€é˜²ç«å¢™ç­‰ (åç»­) -&gt; æœåŠ¡å¯åŠ¨</p>\n<p><strong>Dockerï¼š</strong></p>\n<p>ä½¿ç”¨åŸºäº java çš„ tomcat é•œåƒ -&gt; docker run -&gt; æŒ‡å®šç«¯å£ / æŒ‚è½½ webapp ç›®å½• -&gt; æœåŠ¡å¯åŠ¨</p>\n<p>è¿™å…¶ä¸­ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>\n<ol>\n<li>\n<p>Docker ä¼šè‡ªå·±æ‹‰å–é•œåƒï¼Œè‹¥æœ¬åœ°å·²ç»å­˜åœ¨è¯¥é•œåƒï¼Œåˆ™ä¸ç”¨åˆ°ç½‘ä¸Šå»æ‹‰å–</p>\n</li>\n<li>\n<p>åˆ›å»ºæ–°çš„å®¹å™¨</p>\n</li>\n<li>\n<p>åˆ†é…æ–‡ä»¶ç³»ç»Ÿå¹¶ä¸”æŒ‚ç€ä¸€ä¸ªå¯è¯»å†™çš„å±‚ï¼Œä»»ä½•ä¿®æ”¹å®¹å™¨çš„æ“ä½œéƒ½ä¼šè¢«è®°å½•åœ¨è¿™ä¸ªè¯»å†™å±‚ä¸Šï¼Œä½ å¯ä»¥ä¿å­˜è¿™äº›ä¿®æ”¹æˆæ–°çš„é•œåƒï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸ä¿å­˜ï¼Œé‚£ä¹ˆä¸‹æ¬¡è¿è¡Œæ”¹é•œåƒçš„æ—¶å€™æ‰€æœ‰ä¿®æ”¹æ“ä½œéƒ½ä¼šè¢«æ¶ˆé™¤</p>\n</li>\n<li>\n<p>åˆ†é…ç½‘ç»œ \\ æ¡¥æ¥æ¥å£ï¼Œåˆ›å»ºä¸€ä¸ªå…è®¸å®¹å™¨ä¸æœ¬åœ°ä¸»æœºé€šä¿¡çš„ç½‘ç»œæ¥å£</p>\n</li>\n<li>\n<p>è®¾ç½® ip åœ°å€ï¼Œä»æ± ä¸­å¯»æ‰¾ä¸€ä¸ªå¯ç”¨çš„ ip åœ°å€é™„åŠ åˆ°å®¹å™¨ä¸Šï¼Œæ¢å¥è¯è¯´ï¼Œlocalhost å¹¶ä¸èƒ½è®¿é—®åˆ°å®¹å™¨</p>\n</li>\n<li>\n<p>è¿è¡Œä½ æŒ‡å®šçš„ç¨‹åº</p>\n</li>\n<li>\n<p>æ•è·å¹¶ä¸”æä¾›åº”ç”¨è¾“å‡ºï¼ŒåŒ…æ‹¬è¾“å…¥ã€è¾“å‡ºã€æŠ¥é”™ä¿¡æ¯</p>\n</li>\n</ol>\n<p>Docker çš„ä»·å€¼ï¼š</p>\n<p>ä»åº”ç”¨æ¶æ„è§’åº¦ï¼šç»Ÿä¸€å¤æ‚çš„æ„å»ºç¯å¢ƒï¼›</p>\n<p>ä»åº”ç”¨éƒ¨ç½²è§’åº¦ï¼šè§£å†³ä¾èµ–ä¸åŒã€æ„å»ºéº»çƒ¦çš„é—®é¢˜ï¼Œç»“åˆè‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå¦‚ jenkinsï¼‰æé«˜æ•ˆç‡ã€‚</p>\n<p>ä»é›†ç¾¤ç®¡ç†è§’åº¦ï¼šè§„èŒƒçš„æœåŠ¡<strong>è°ƒåº¦</strong>ï¼Œ<strong>æœåŠ¡å‘ç°</strong>ï¼Œ<strong>è´Ÿè½½å‡è¡¡</strong></p>\n<h2 id=\"å¸¸è§çš„åº”ç”¨åœºæ™¯ä»‹ç»\"><a class=\"anchor\" href=\"#å¸¸è§çš„åº”ç”¨åœºæ™¯ä»‹ç»\">#</a> å¸¸è§çš„åº”ç”¨åœºæ™¯ä»‹ç»</h2>\n<p>Docker æä¾›äº†è½»é‡çº§çš„è™šæ‹ŸåŒ–ï¼Œç›¸æ¯”äºè™šæ‹Ÿæœºï¼Œå¯ä»¥åœ¨åŒä¸€å°æœºå™¨ä¸Šåˆ›å»ºæ›´å¤šæ•°é‡çš„å®¹å™¨ã€‚å®ƒå¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š1. å¿«é€Ÿéƒ¨ç½²ï¼›2. éš”ç¦»åº”ç”¨ï¼› 3. æé«˜å¼€å‘æ•ˆç‡ï¼› 4. ç‰ˆæœ¬æ§åˆ¶ï¼› 5. ç®€åŒ–é…ç½®ï¼Œæ•´åˆèµ„æºï¼›</p>\n<h3 id=\"å¿«é€Ÿéƒ¨ç½²\"><a class=\"anchor\" href=\"#å¿«é€Ÿéƒ¨ç½²\">#</a> å¿«é€Ÿéƒ¨ç½²</h3>\n<p>æˆ‘ä»¬å°è¯•ç€æ¥éƒ¨ç½²ä¸€ä¸ª mysqlï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> mysql-test <span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">MYSQL_ROOT_PASSWORD</span><span class=\"token operator\">=</span><span class=\"token number\">123456</span> mysql</pre></td></tr></table></figure><p><img data-src=\"./assets/3.gif\" alt=\"3\" /></p>\n<p>åŒæ ·çš„é“ç†ï¼Œæˆ‘ä»¬æ¥éƒ¨ç½²ä¸€ä¸ª nginx:</p>\n<p><img data-src=\"./assets/4.gif\" alt=\"4\" /></p>\n<p>æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰æ˜ å°„æœåŠ¡ç«¯å£ï¼Œæ‰€ä»¥åœ¨ <code>80</code>  ç«¯å£æ˜¯çœ‹ä¸åˆ° <code>index.html</code>  ä¸­çš„å†…å®¹çš„ã€‚éœ€è¦åŠ å…¥ <code>-p</code>  å‚æ•°æ¥æ˜ å°„ç«¯å£ï¼ï¼</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> web <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8000</span>:80 <span class=\"token parameter variable\">-v</span> <span class=\"token variable\">$&#123;your_dir&#125;</span>:/usr/share/nginx/html nginx</pre></td></tr></table></figure><h3 id=\"éš”ç¦»åº”ç”¨\"><a class=\"anchor\" href=\"#éš”ç¦»åº”ç”¨\">#</a> éš”ç¦»åº”ç”¨</h3>\n<p>æˆ‘ä»¬å¯ä»¥åŒæ—¶è·‘ä¸¤ä¸ª mysqlï¼Œä¸¤ä¸ª nginxï¼ŒæŒ‡å®šä¸åŒçš„ç«¯å£è¿›è¡Œæ˜ å°„ï¼š</p>\n<p>æŠŠ <code>mysql-test1</code>  æ˜ å°„åˆ° <code>8001</code>  ç«¯å£ï¼ŒæŠŠ <code>mysql-test2</code>  æ˜ å°„åˆ° <code>8002</code>  ç«¯å£ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> mysql-test1 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8001</span>:3306 <span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">MYSQL_ROOT_PASSWORD</span><span class=\"token operator\">=</span><span class=\"token number\">123456</span> mysql</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> mysql-test2 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8002</span>:3306 <span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">MYSQL_ROOT_PASSWORD</span><span class=\"token operator\">=</span><span class=\"token number\">123456</span> mysql</pre></td></tr></table></figure><p>æŠŠ web1 æ˜ å°„åˆ° 8100 ç«¯å£ï¼ŒæŠŠ web2 æ˜ å°„åˆ° 8200 ç«¯å£ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> web1 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8100</span>:80 <span class=\"token parameter variable\">-v</span> <span class=\"token variable\">$&#123;your_dir&#125;</span>:/usr/share/nginx/html nginx</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> web2 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8200</span>:80 <span class=\"token parameter variable\">-v</span> <span class=\"token variable\">$&#123;your_dir&#125;</span>:/usr/share/nginx/html nginx</pre></td></tr></table></figure><h3 id=\"æé«˜å¼€å‘æ•ˆç‡\"><a class=\"anchor\" href=\"#æé«˜å¼€å‘æ•ˆç‡\">#</a> æé«˜å¼€å‘æ•ˆç‡</h3>\n<ol>\n<li>\n<p>ä¸€è‡´çš„è¿è¡Œç¯å¢ƒ</p>\n<p>ç”±äº Docker ç¡®ä¿äº†æ‰§è¡Œç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œä½¿å¾—åº”ç”¨çš„è¿ç§»æ›´åŠ å®¹æ˜“ã€‚Docker å¯ä»¥åœ¨å¾ˆå¤šå¹³å°ä¸Šè¿è¡Œï¼Œæ— è®ºæ˜¯ç‰©ç†æœºã€è™šæ‹Ÿæœºã€å…¬æœ‰äº‘ã€ç§æœ‰äº‘ï¼Œç”šè‡³æ˜¯ç¬”è®°æœ¬ï¼Œå…¶è¿è¡Œç»“æœæ˜¯ä¸€è‡´çš„ã€‚å› æ­¤ç”¨æˆ·å¯ä»¥å¾ˆè½»æ˜“çš„å°†åœ¨ä¸€ä¸ªå¹³å°ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œè¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°ä¸Šï¼Œè€Œä¸ç”¨æ‹…å¿ƒè¿è¡Œç¯å¢ƒçš„å˜åŒ–å¯¼è‡´åº”ç”¨æ— æ³•æ­£å¸¸è¿è¡Œçš„æƒ…å†µã€‚</p>\n</li>\n<li>\n<p>æ›´å¿«é€Ÿçš„å¯åŠ¨æ—¶é—´</p>\n</li>\n</ol>\n<p>ä¼ ç»Ÿçš„è™šæ‹ŸæœºæŠ€æœ¯å¯åŠ¨åº”ç”¨æœåŠ¡å¾€å¾€éœ€è¦æ•°åˆ†é’Ÿï¼Œè€Œ Docker å®¹å™¨åº”ç”¨ï¼Œç”±äºç›´æ¥è¿è¡Œäºå®¿ä¸»å†…æ ¸ï¼Œæ— éœ€å¯åŠ¨å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œå› æ­¤å¯ä»¥åšåˆ°ç§’çº§ã€ç”šè‡³æ¯«ç§’çº§çš„å¯åŠ¨æ—¶é—´ã€‚å¤§å¤§çš„èŠ‚çº¦äº†å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²çš„æ—¶é—´ã€‚</p>\n<ol start=\"3\">\n<li>\n<p>æ›´é«˜æ•ˆçš„å¤ç”¨ç³»ç»Ÿèµ„æº</p>\n<p>ç”±äºå®¹å™¨ä¸éœ€è¦è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿä»¥åŠè¿è¡Œå®Œæ•´æ“ä½œç³»ç»Ÿç­‰é¢å¤–å¼€é”€ï¼ŒDocker å¯¹ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡æ›´é«˜ã€‚æ— è®ºæ˜¯åº”ç”¨æ‰§è¡Œé€Ÿåº¦ã€å†…å­˜æŸè€—æˆ–è€…æ–‡ä»¶å­˜å‚¨é€Ÿåº¦ï¼Œéƒ½è¦æ¯”ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯æ›´é«˜æ•ˆã€‚å› æ­¤ï¼Œç›¸æ¯”è™šæ‹ŸæœºæŠ€æœ¯ï¼Œä¸€ä¸ªç›¸åŒé…ç½®çš„ä¸»æœºï¼Œå¾€å¾€å¯ä»¥è¿è¡Œæ›´å¤šæ•°é‡çš„åº”ç”¨ã€‚</p>\n</li>\n<li>\n<p>ä»“åº“ / é•œåƒæœºåˆ¶</p>\n<p>ä½¿ç”¨ä»“åº“å¯ä»¥æ–¹ä¾¿çš„åœ¨ä»»ä½•æœ‰ docker è¿›ç¨‹çš„è™šæ‹Ÿæœº / æœåŠ¡å™¨ / ä¸»æœºä¸Šè¿è¡Œ docker åº”ç”¨ï¼Œç¯å¢ƒçš„ç»Ÿä¸€ï¼Œè®©å®ƒä»¬çš„éƒ¨ç½²å˜çš„éå¸¸çš„ç®€å•ã€‚</p>\n</li>\n</ol>\n<h3 id=\"ç‰ˆæœ¬æ§åˆ¶\"><a class=\"anchor\" href=\"#ç‰ˆæœ¬æ§åˆ¶\">#</a> ç‰ˆæœ¬æ§åˆ¶</h3>\n<p>Docker å®¹å™¨è¿˜å¯ä»¥åƒ git ä»“åº“ä¸€æ ·ï¼Œå¯ä»¥è®©ä½ æäº¤å˜æ›´åˆ° Docker é•œåƒä¸­å¹¶é€šè¿‡ä¸åŒçš„ç‰ˆæœ¬æ¥ç®¡ç†å®ƒä»¬ï¼Œæ¥çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n<p>æˆ‘ä»¬ä¹‹å‰åˆ›å»ºäº†ä¸€ä¸ª <code>mysql</code> ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>commit</code>  å‘½ä»¤å°±å¯ä»¥ç»™å®ƒåšä¸€ä¸ªå¿«ç…§ï¼Œæ‰“ä¸Šä¸€ä¸ª <code>tag</code> ã€‚</p>\n<p><img data-src=\"./assets/5.gif\" alt=\"5\" /></p>\n<p>åœ¨åé¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šè¯¦ç»†çš„ä»‹ç»<a href=\"#Docker%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4(%E9%87%8D%E7%82%B9)\"> Docker çš„å¸¸è§å‘½ä»¤</a></p>\n<h3 id=\"devopsæµç¨‹\"><a class=\"anchor\" href=\"#devopsæµç¨‹\">#</a> DevOps æµç¨‹</h3>\n<p>å¯¹å¼€å‘å’Œè¿ç»´ï¼ˆ<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvRGV2T3Bz\">DevOps</span>ï¼‰äººå‘˜æ¥è¯´ï¼Œæœ€å¸Œæœ›çš„å°±æ˜¯ä¸€æ¬¡åˆ›å»ºæˆ–é…ç½®ï¼Œå¯ä»¥åœ¨ä»»æ„åœ°æ–¹æ­£å¸¸è¿è¡Œã€‚</p>\n<p>ä½¿ç”¨ Docker å¯ä»¥é€šè¿‡å®šåˆ¶åº”ç”¨é•œåƒæ¥å®ç°æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€éƒ¨ç½²ã€‚å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ <span class=\"exturl\" data-url=\"aHR0cHM6Ly95ZWFzeS5naXRib29rcy5pby9kb2NrZXJfcHJhY3RpY2UvaW1hZ2UvZG9ja2VyZmlsZQ==\">Dockerfile</span> æ¥è¿›è¡Œé•œåƒæ„å»ºï¼Œå¹¶ç»“åˆ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udGludW91c19pbnRlZ3JhdGlvbg==\">æŒç»­é›†æˆ (Continuous Integration)</span> ç³»ç»Ÿè¿›è¡Œé›†æˆæµ‹è¯•ï¼Œè€Œè¿ç»´äººå‘˜åˆ™å¯ä»¥ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¿«é€Ÿéƒ¨ç½²è¯¥é•œåƒï¼Œç”šè‡³ç»“åˆ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udGludW91c19kZWxpdmVyeQ==\">æŒç»­éƒ¨ç½² (Continuous Delivery/Deployment)</span> ç³»ç»Ÿè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ã€‚</p>\n<p>è€Œä¸”ä½¿ç”¨  <code>Dockerfile</code>  ä½¿é•œåƒæ„å»ºé€æ˜åŒ–ï¼Œä¸ä»…ä»…å¼€å‘å›¢é˜Ÿå¯ä»¥ç†è§£åº”ç”¨è¿è¡Œç¯å¢ƒï¼Œä¹Ÿæ–¹ä¾¿è¿ç»´å›¢é˜Ÿç†è§£åº”ç”¨è¿è¡Œæ‰€éœ€æ¡ä»¶ï¼Œå¸®åŠ©æ›´å¥½çš„ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²è¯¥é•œåƒã€‚</p>\n<h2 id=\"ä½¿ç”¨docker\"><a class=\"anchor\" href=\"#ä½¿ç”¨docker\">#</a> ä½¿ç”¨ Docker</h2>\n<h3 id=\"dockerå¦‚ä½•è¿›è¡Œå®‰è£…\"><a class=\"anchor\" href=\"#dockerå¦‚ä½•è¿›è¡Œå®‰è£…\">#</a> Docker å¦‚ä½•è¿›è¡Œå®‰è£…</h3>\n<h4 id=\"å…³äºç³»ç»Ÿéœ€æ±‚é‡ç‚¹\"><a class=\"anchor\" href=\"#å…³äºç³»ç»Ÿéœ€æ±‚é‡ç‚¹\">#</a> å…³äºç³»ç»Ÿéœ€æ±‚ (é‡ç‚¹)</h4>\n<ol>\n<li>å¹³å°ç±»</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">æ“ä½œç³»ç»Ÿ</th>\n<th style=\"text-align:center\">x86_64</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZG9ja2VyLWZvci1tYWMvaW5zdGFsbC8=\">Docker Desktop for Mac (macOS)</span></td>\n<td style=\"text-align:center\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZG9ja2VyLWZvci13aW5kb3dzL2luc3RhbGwv\">Docker Desktop for Windows (Microsoft Windows 10)</span></td>\n<td style=\"text-align:center\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></td>\n</tr>\n</tbody>\n</table>\n<ol start=\"2\">\n<li>æœåŠ¡å™¨</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">å¹³å°</th>\n<th style=\"text-align:left\">x86_64 / amd64</th>\n<th style=\"text-align:left\">ARM</th>\n<th style=\"text-align:left\">ARM64 / AARCH64</th>\n<th style=\"text-align:left\">IBM Power (ppc64le)</th>\n<th style=\"text-align:left\">IBM Z (s390x)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vaW5zdGFsbC9saW51eC9kb2NrZXItY2UvY2VudG9zLw==\">CentOS</span></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/centos/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/centos/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vaW5zdGFsbC9saW51eC9kb2NrZXItY2UvZGViaWFuLw==\">Debian</span></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/debian/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/debian/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/debian/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vaW5zdGFsbC9saW51eC9kb2NrZXItY2UvZmVkb3JhLw==\">Fedora</span></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/fedora/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/fedora/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vaW5zdGFsbC9saW51eC9kb2NrZXItY2UvdWJ1bnR1Lw==\">Ubuntu</span></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/ubuntu/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/ubuntu/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/ubuntu/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/ubuntu/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n<td style=\"text-align:left\"><a href=\"https://docs.docker.com/install/linux/docker-ce/ubuntu/\"><img data-src=\"https://docs.docker.com/install/images/green-check.svg\" alt=\"yes\" /></a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"linuxé‡ç‚¹\"><a class=\"anchor\" href=\"#linuxé‡ç‚¹\">#</a> Linux (é‡ç‚¹)</h4>\n<p>å¯¹äºä¸­å›½ç”¨æˆ·ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-fsSL</span> https://get.docker.com <span class=\"token operator\">|</span> <span class=\"token function\">bash</span> <span class=\"token parameter variable\">-s</span> <span class=\"token function\">docker</span> <span class=\"token parameter variable\">--mirror</span> Aliyun</pre></td></tr></table></figure><p>å¯¹äºå›½å¤– vpsï¼š</p>\n<pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh\n</code></pre>\n<blockquote>\n<p>è„šæœ¬ä»‹ç»ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kb2NrZXItaW5zdGFsbA==\">https://github.com/docker/docker-install</span></p>\n</blockquote>\n<h4 id=\"windows\"><a class=\"anchor\" href=\"#windows\">#</a> Windows</h4>\n<p>å®‰è£… Docker çš„ç³»ç»Ÿéœ€æ±‚ï¼š</p>\n<ul>\n<li>ç³»ç»Ÿç‰ˆæœ¬ï¼šWindows 10 64bit: Pro, Enterprise or Education (Build 15063 or later).</li>\n<li>åœ¨ BIOS ä¸­å¼€å¯äº†è™šæ‹ŸåŒ–ï¼ˆvirtualizationï¼‰ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¼šé»˜è®¤å¼€å¯ï¼Œå»ç³»ç»Ÿç®¡ç†ä¸­çœ‹çœ‹æœ‰æ²¡æœ‰ Hyper-v è¢«å®‰è£…äº†ã€‚</li>\n<li>CPU ç‰¹æ€§ï¼šSLAT-capable.</li>\n<li>4GB ä»¥ä¸Šçš„å†…å­˜</li>\n</ul>\n<blockquote>\n<p>å¦‚æœä¸æ»¡è¶³ä¸Šé¢çš„éœ€æ±‚ï¼Œåˆ™éœ€è¦ä½¿ç”¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vdG9vbGJveC9vdmVydmlldy8=\"> Docker Toolbox</span>ï¼Œç›¸å½“äºæ˜¯è¿è¡Œäº†ä¸€ä¸ª virtualbox çš„è™šæ‹Ÿé•œåƒã€‚</p>\n</blockquote>\n<h4 id=\"macos\"><a class=\"anchor\" href=\"#macos\">#</a> MacOS</h4>\n<p><strong>æ–¹æ³•ä¸€å®˜æ–¹ <code>dmg</code> ï¼š</strong></p>\n<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9lZGl0aW9ucy9jb21tdW5pdHkvZG9ja2VyLWNlLWRlc2t0b3AtbWFj\">Docker Descktop for Mac</span></p>\n<p>å¯¹ç³»ç»Ÿçš„è¦æ±‚ï¼š</p>\n<blockquote>\n<p>Requires Apple Mac OS Sierra 10.12 or above. Download <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vdG9vbGJveC9vdmVydmlldy8=\">Docker Toolbox</span> for previous OS versions.</p>\n</blockquote>\n<p>åªè¦ç³»ç»Ÿæ˜¯ Mac OS Sierra 10.12 ä»¥ä¸Šå³å¯ã€‚</p>\n<p>ä¸‹è½½å®Œ <code>Docker.dmg</code>  å®‰è£…åŒ…ä¹‹åï¼ŒåŒå‡»å³å¯ä»¥å®‰è£…ï¼Œå¯èƒ½éœ€è¦ç³»ç»Ÿç®¡ç†å‘˜æƒé™ï¼Œè¾“å…¥å¯†ç å³å¯ã€‚</p>\n<p>è¿è¡Œè¿‡åï¼Œå°å›¾æ ‡ï¼š</p>\n<p><img data-src=\"./assets/2.gif\" alt=\"2\" /></p>\n<p>å®‰è£…å®Œä¹‹åï¼Œåœ¨ç»ˆç«¯å·¥å…·ä¸­ï¼Œä½¿ç”¨ <code>docker version</code>  æ¥æŸ¥çœ‹ Docker ç‰ˆæœ¬ã€‚</p>\n<p><img data-src=\"./assets/docker-version.jpg\" alt=\"docker-version\" /></p>\n<p><strong>æ–¹æ³•äºŒ brew caskï¼š</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>brew update </pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>brew cask <span class=\"token function\">install</span> <span class=\"token function\">docker</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># åˆ é™¤çš„æ–¹æ³•ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨åˆ é™¤ Docker.app</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>brew cask uninstall <span class=\"token function\">docker</span></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤å°†ä¼šæŠŠ Docker å®‰è£…åœ¨ <code>Applications</code>  ç›®å½•ä¸‹ã€‚</p>\n<h3 id=\"dockerå›½å†…åŠ é€Ÿ\"><a class=\"anchor\" href=\"#dockerå›½å†…åŠ é€Ÿ\">#</a> Docker å›½å†…åŠ é€Ÿ</h3>\n<ol>\n<li>Docker çš„ Toolbox é•œåƒç«™ (æ¨è)ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ä½ç‰ˆæœ¬çš„ windows ä¸ mac ç”¨æˆ·ï¼š</li>\n</ol>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL21pcnJvcnMuYWxpeXVuLmNvbS9kb2NrZXItdG9vbGJveC8=\">http://mirrors.aliyun.com/docker-toolbox/</span></p>\n<ol start=\"2\">\n<li>Docker é•œåƒåŠ é€Ÿï¼Œä¸»è¦æ˜¯å¯¹ <code>docker pull</code>  æ‹‰å–é•œåƒæ“ä½œè¿›è¡Œç½‘ç»œåŠ é€Ÿä¼˜åŒ–ï¼š</li>\n</ol>\n<p>éœ€è¦æ³¨å†Œé˜¿é‡Œäº‘çš„è´¦å·ï¼Œç™»å½•<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jci5jb25zb2xlLmFsaXl1bi5jb20v\">å®¹å™¨ Hub æœåŠ¡</span>ï¼Œåœ¨å·¦ä¾§çš„åŠ é€Ÿå™¨å¸®åŠ©é¡µé¢å°±ä¼šæ˜¾ç¤ºä¸ºä½ ç‹¬ç«‹åˆ†é…çš„åŠ é€Ÿåœ°å€ã€‚</p>\n<p><img data-src=\"./assets/image-20190524172015448.png\" alt=\"/images/image-20190524172015448\" /></p>\n<h3 id=\"ç¬¬ä¸€ä¸ªdockeråº”ç”¨hello-world\"><a class=\"anchor\" href=\"#ç¬¬ä¸€ä¸ªdockeråº”ç”¨hello-world\">#</a> ç¬¬ä¸€ä¸ª Docker åº”ç”¨ hello world</h3>\n<ol>\n<li>\n<p>æŸ¥çœ‹ docker ç‰ˆæœ¬</p>\n</li>\n<li>\n<p>è¿è¡Œç¬¬ä¸€ä¸ª Docker åº”ç”¨</p>\n<p>ä½¿ç”¨ <code>docker run</code>  å‘½ä»¤</p>\n</li>\n<li>\n<p>æŸ¥çœ‹å®¹å™¨è¿è¡ŒçŠ¶æ€</p>\n<p>ä½¿ç”¨ <code>docker ps</code>  å‘½ä»¤æ¥æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨çš„çŠ¶æ€ï¼Œ <code>-a</code>  å‚æ•°æ¥æŸ¥çœ‹æ‰€æœ‰çš„å·²ç»è¿è¡Œçš„å®¹å™¨ (æ— è®ºæ˜¯å¦åœæ­¢)</p>\n</li>\n</ol>\n<p><img data-src=\"./assets/1.gif\" alt=\"1\" /></p>\n<h3 id=\"dockerå¸¸è§å‘½ä»¤é‡ç‚¹\"><a class=\"anchor\" href=\"#dockerå¸¸è§å‘½ä»¤é‡ç‚¹\">#</a> Docker å¸¸è§å‘½ä»¤ (é‡ç‚¹)</h3>\n<ul>\n<li>\n<p><strong>åˆ›å»º <code>run</code> </strong>ï¼Œ <code>-p</code>  æ˜ å°„å®¿ä¸»æœºçš„ç«¯å£ç»™é•œåƒæœåŠ¡ä½¿ç”¨ï¼Œ <code>-v</code>  æŒ‚è½½å®¿ä¸»æœºçš„æ–‡ä»¶ç›®å½•åˆ°é•œåƒé‡Œé¢å»ï¼Œ-it æ˜¯æä¾›äº¤äº’å¼çš„ç»ˆç«¯å·¥å…·ï¼Œ <code>-d</code>  æ˜¯è®©é•œåƒå®¹å™¨åœ¨åå°å»æŒç»­è¿è¡Œï¼Œ <code>--name</code>  æŒ‡å®šå®¹å™¨çš„åç§°ï¼Œexec å¯ä»¥è¿›å…¥åˆ°å®¹å™¨é‡Œé¢å»ï¼š</p>\n<pre><code>docker exec -it &lt;container_name&gt; /bin/bash\n\ndocker exec -it &lt;container_name&gt; /bin/sh\n</code></pre>\n</li>\n<li>\n<p><strong>å¯åŠ¨ <code>start</code>  / åœæ­¢ <code>stop</code>  / é‡å¯ <code>restart</code>  / åˆ é™¤å·²åœæ­¢å®¹å™¨ <code>rm</code> </strong></p>\n</li>\n<li>\n<p><strong>ç™»å½•ä»“åº“ <code>login</code>  / æ‹‰å–é•œåƒ <code>pull</code>  / æ¨é€ <code>push</code>  / æäº¤é•œåƒ <code>commit</code>  / ç»™æŒ‡å®šå®¹å™¨æ ‡ç­¾ <code>tag</code> </strong></p>\n<p>docker hub ä¸Šå»æ³¨å†Œæˆ‘ä»¬çš„è´¦å·ï¼Œæ‰èƒ½ä½¿ç”¨ login</p>\n<p>ä½¿ç”¨ docker commit æ¥ç»™è¿è¡Œä¸­çš„å®¹å™¨æ‰“ tag:</p>\n<pre><code>docker commit &lt;container_id&gt; &lt;namespace&gt;/&lt;image_name&gt;:tag\n</code></pre>\n<pre><code>docker commit e12b80defe8c itcast/mysql\n</code></pre>\n<p>ä½¿ç”¨ <code>pull</code> / <code>push</code>  å‘½ä»¤æ¥æ¨é€æœ¬åœ°çš„é•œåƒåˆ°è¿œç¨‹ä»“åº“</p>\n<pre><code>docker pull/push &lt;namespace&gt;/&lt;image_name&gt;:tag\n</code></pre>\n</li>\n<li>\n<p>æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°é•œåƒ <code>images</code>  / åˆ é™¤æœ¬åœ°é•œåƒ <code>rmi</code></p>\n<p>åˆ é™¤é•œåƒä¹‹å‰ï¼Œè¦åœæ­¢ <code>stop</code>  å¹¶ä¸”åˆ é™¤ <code>rm</code>  è¿è¡Œä¸­çš„å®¹å™¨ã€‚</p>\n</li>\n<li>\n<p>æŸ¥çœ‹å®¹å™¨æœåŠ¡æ‰“å°çš„æ—¥å¿— <code>logs</code>  / æ£€é˜…å®¹å™¨ <code>inspect</code>  (æ›´è¯¦ç»†çš„å®¹å™¨ä¿¡æ¯ï¼Œç¡¬ä»¶ / ç½‘ç»œ / ç‰ˆæœ¬ç­‰)/ è¿›å…¥å®¹å™¨ <code>exec</code></p>\n</li>\n<li>\n<p>æŸ¥çœ‹ç‰ˆæœ¬ <code>version</code> /docker è¿›ç¨‹ä¿¡æ¯ <code>info</code></p>\n</li>\n<li>\n<p>æŸ¥çœ‹å‘½ä»¤å¸®åŠ©ï¼š</p>\n</li>\n</ul>\n<pre><code>docker &lt;run/pull&gt; --help\n</code></pre>\n<h2 id=\"æ‰©å±•çŸ¥è¯†\"><a class=\"anchor\" href=\"#æ‰©å±•çŸ¥è¯†\">#</a> æ‰©å±•çŸ¥è¯†</h2>\n<h3 id=\"åˆ¶ä½œdockeré•œåƒé‡ç‚¹\"><a class=\"anchor\" href=\"#åˆ¶ä½œdockeré•œåƒé‡ç‚¹\">#</a> åˆ¶ä½œ Docker é•œåƒ (é‡ç‚¹)</h3>\n<p>Dockerfile æ˜¯ä¸€ä¸ªç”±ä¸€å †å‘½ä»¤ + å‚æ•°æ„æˆçš„è„šæœ¬ï¼Œä½¿ç”¨  <code>docker build</code>  å³å¯æ‰§è¡Œè„šæœ¬æ„å»ºé•œåƒï¼Œè‡ªåŠ¨çš„å»åšä¸€äº›äº‹ï¼Œä¸»è¦ç”¨äºè¿›è¡ŒæŒç»­é›†æˆã€‚</p>\n<p>ä¸€èˆ¬ï¼ŒDockerfile å…±åŒ…æ‹¬å››éƒ¨åˆ†ï¼š</p>\n<ul>\n<li>åŸºç¡€é•œåƒä¿¡æ¯</li>\n<li>ç»´æŠ¤è€…ä¿¡æ¯</li>\n<li>é•œåƒæ“ä½œæŒ‡ä»¤</li>\n<li>å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡ŒæŒ‡ä»¤</li>\n</ul>\n<p>å½“ Node.js é‡è§ Dockerï¼Œä¸‹é¢ä»‹ç» Docker åœ¨å‰ç«¯ä¸­çš„åº”ç”¨ï¼š</p>\n<p>ä¸€ä¸ªç®€å•çš„ Koa åº”ç”¨ï¼š</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> Koa <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'koa'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Koa</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// response</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  ctx<span class=\"token punctuation\">.</span>body <span class=\"token operator\">=</span> <span class=\"token string\">'Hello Koa!!'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>Dockerfile ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight dockerfile\"><figcaption data-lang=\"Docker\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> node:10</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">LABEL</span> maintainer=itheima@itcast.cn</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># åˆ›å»º app ç›®å½•</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /app</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># æŠŠ package.jsonï¼Œpackage-lock.json (npm@5+) æˆ– yarn.lock å¤åˆ¶åˆ°å·¥ä½œç›®å½• (ç›¸å¯¹è·¯å¾„)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> [<span class=\"token string\">\"package.json\"</span>,<span class=\"token string\">\"*.lock\"</span>,<span class=\"token string\">\"./\"</span>]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># æ‰“åŒ… app æºç </span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># ç‰¹åˆ«æ³¨æ„ï¼šè¦æŒ‡å®šå·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶å</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> src ./src</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨.dockerignore æ–‡ä»¶ï¼Œä¸Šé¢ä¸¤ä¸ª COPY åˆå¹¶æˆä¸€ä¸ª</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># COPY . .</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨ Yarn å®‰è£… app ä¾èµ–</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># å¦‚æœä½ éœ€è¦æ„å»ºç”Ÿäº§ç¯å¢ƒä¸‹çš„ä»£ç ï¼Œè¯·ä½¿ç”¨ï¼š</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># --prod å‚æ•°</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> yarn --prod --registry=https://registry.npm.taobao.org</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># å¯¹å¤–æš´éœ²ç«¯å£ -p 4000:3000</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">EXPOSE</span> 3000</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [ <span class=\"token string\">\"node\"</span>, <span class=\"token string\">\"src/index.js\"</span> ]</span></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>docker build</code>  æ‰“åŒ…ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-t</span> <span class=\"token variable\">$&#123;your_name&#125;</span>/<span class=\"token variable\">$&#123;image_name&#125;</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$&#123;tag&#125;</span> <span class=\"token builtin class-name\">.</span></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>your_name</code>  ä»£è¡¨çš„æ˜¯è¿œç¨‹ä»“åº“ä¸­çš„ç”¨æˆ·åï¼Œæˆ–è€…ä»“åº“åœ°å€ï¼› <code>image_name</code>  ä¸ºé•œåƒåç§°ï¼Œ <code>tag</code>  æ˜¯ç»™é•œåƒæ‰“çš„æ ‡ç­¾ï¼Œç”¨äºç‰ˆæœ¬æ§åˆ¶ã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-t</span> itheima/node-demo:1.0 <span class=\"token builtin class-name\">.</span></pre></td></tr></table></figure><p>æ‰“åŒ…è¿‡ç¨‹ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-t</span> itheima/node-demo:1.0 <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Sending build context to Docker daemon  <span class=\"token number\">17</span>.92kB</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Step <span class=\"token number\">1</span>/8 <span class=\"token builtin class-name\">:</span> FROM node:10</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> ---<span class=\"token operator\">></span> 5a401340b79f</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Step <span class=\"token number\">2</span>/8 <span class=\"token builtin class-name\">:</span> LABEL <span class=\"token assign-left variable\">maintainer</span><span class=\"token operator\">=</span>itheima@itcast.cn</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> ---<span class=\"token operator\">></span> Using cache</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> ---<span class=\"token operator\">></span> dd01419f30d5</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Step <span class=\"token number\">3</span>/8 <span class=\"token builtin class-name\">:</span> WORKDIR /app</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> ---<span class=\"token operator\">></span> Using cache</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> ---<span class=\"token operator\">></span> bb9a44851ec9</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>Step <span class=\"token number\">4</span>/8 <span class=\"token builtin class-name\">:</span> COPY <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre> ---<span class=\"token operator\">></span> Using cache</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> ---<span class=\"token operator\">></span> b08ff37c5456</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>Step <span class=\"token number\">5</span>/8 <span class=\"token builtin class-name\">:</span> RUN <span class=\"token function\">ls</span> <span class=\"token parameter variable\">-la</span> /app</pre></td></tr><tr><td data-num=\"15\"></td><td><pre> ---<span class=\"token operator\">></span> Using cache</pre></td></tr><tr><td data-num=\"16\"></td><td><pre> ---<span class=\"token operator\">></span> 4e0e57e807a1</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>Step <span class=\"token number\">6</span>/8 <span class=\"token builtin class-name\">:</span> RUN <span class=\"token function\">yarn</span> <span class=\"token parameter variable\">--prod</span> <span class=\"token parameter variable\">--registry</span><span class=\"token operator\">=</span>https://registry.npm.taobao.org</pre></td></tr><tr><td data-num=\"18\"></td><td><pre> ---<span class=\"token operator\">></span> Using cache</pre></td></tr><tr><td data-num=\"19\"></td><td><pre> ---<span class=\"token operator\">></span> 96ab842b4766</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>Step <span class=\"token number\">7</span>/8 <span class=\"token builtin class-name\">:</span> EXPOSE <span class=\"token number\">3000</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre> ---<span class=\"token operator\">></span> Using cache</pre></td></tr><tr><td data-num=\"22\"></td><td><pre> ---<span class=\"token operator\">></span> 505dda4e680f</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>Step <span class=\"token number\">8</span>/8 <span class=\"token builtin class-name\">:</span> CMD <span class=\"token punctuation\">[</span> <span class=\"token string\">\"node\"</span>, <span class=\"token string\">\"src/index.js\"</span> <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre> ---<span class=\"token operator\">></span> Using cache</pre></td></tr><tr><td data-num=\"25\"></td><td><pre> ---<span class=\"token operator\">></span> f60e25a577de</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>Successfully built f60e25a577de</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>Successfully tagged itheima/node-demo:1.0</pre></td></tr></table></figure><p><strong>å›é¡¾å‰é¢çš„çŸ¥è¯†ï¼š</strong></p>\n<p>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</p>\n<p>è¿˜è®°å¾— <code>docker run</code>  å‘½ä»¤å—ï¼Ÿ</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> nodedemo <span class=\"token parameter variable\">-p</span> <span class=\"token number\">3000</span>:3000 itheima/node-demo:1.0</pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨ <code>docker ps</code>  æ¥çœ‹è¿è¡ŒçŠ¶æ€</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> nodedemo <span class=\"token parameter variable\">-p</span> <span class=\"token number\">3000</span>:3000 itheima/node-demo:1.0</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>c863da9afea1558593843233aec08989184d8dafbb0f8443830d1e523104ab00</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">docker</span> <span class=\"token function\">ps</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>CONTAINER ID        IMAGE                   COMMAND               CREATED             STATUS              PORTS                    NAMES</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>c863da9afea1        itheima/node-demo:1.0   <span class=\"token string\">\"node src/index.js\"</span>   <span class=\"token number\">2</span> seconds ago       Up <span class=\"token number\">1</span> second         <span class=\"token number\">0.0</span>.0.0:3000-<span class=\"token operator\">></span><span class=\"token number\">3000</span>/tcp   nodedemo</pre></td></tr></table></figure><h3 id=\"docker-composeä»‹ç»\"><a class=\"anchor\" href=\"#docker-composeä»‹ç»\">#</a> Docker-compose ä»‹ç»</h3>\n<p>é€šè¿‡ Docker-Compose ç”¨æˆ·å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶å®šä¹‰ä¸€ä¸ªå¤šå®¹å™¨çš„åº”ç”¨ï¼Œç„¶åä½¿ç”¨ä¸€æ¡æŒ‡ä»¤å®‰è£…è¿™ä¸ªåº”ç”¨çš„æ‰€æœ‰ä¾èµ–ï¼Œå®Œæˆæ„å»ºã€‚Docker-Compose è§£å†³äº†å®¹å™¨ä¸å®¹å™¨ä¹‹é—´å¦‚ä½•ç®¡ç†ç¼–æ’çš„é—®é¢˜ã€‚</p>\n<p><img data-src=\"./assets/docker-compose.png\" alt=\"docker-compose\" /></p>\n<p>Compose ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p>\n<ul>\n<li>æœåŠ¡ (service) ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚</li>\n<li>é¡¹ç›® (project) ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ docker-compose.yml æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li>\n</ul>\n<p>Docker Compose æ˜¯ Docker çš„ç‹¬ç«‹äº§å“ï¼Œå› æ­¤éœ€è¦å®‰è£… Docker ä¹‹ååœ¨å•ç‹¬å®‰è£… Docker Compose .</p>\n<p><strong>å®‰è£…æ–¹æ³•ï¼š</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#ä¸‹è½½</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-L</span> https://github.com/docker/compose/releases/download/1.20.0/docker-compose-<span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">uname</span> <span class=\"token parameter variable\">-s</span><span class=\"token variable\">`</span></span>-<span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">uname</span> <span class=\"token parameter variable\">-m</span><span class=\"token variable\">`</span></span> <span class=\"token parameter variable\">-o</span> /usr/local/bin/docker-compose</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#å®‰è£…</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">chmod</span> +x /usr/local/bin/docker-compose</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#æŸ¥çœ‹ç‰ˆæœ¬</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">docker-compose</span> <span class=\"token parameter variable\">--version</span></pre></td></tr></table></figure><p><strong>å¸¸è§ä½¿ç”¨ï¼š</strong></p>\n<p>å‰é¢çš„ä¾‹å­ï¼Œä½¿ç”¨ <code>docker-compose</code>  æ”¹å†™ï¼š</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">mysql</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mysql</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>mysql</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"8000:3306\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">-</span> MYSQL_ROOT_PASSWORD=123456</pre></td></tr></table></figure><p>åœ¨æ­¤æ–‡ä»¶çš„å½“å‰ç›®å½•ä¸‹ï¼Œä½¿ç”¨ <code>docker-compose up -d</code>  æ¥æ‰§è¡Œã€‚</p>\n<p>ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š</p>\n<p>åˆ›å»ºï¼š <code>run</code> / <code>up</code></p>\n<p>å¯åŠ¨ / åœæ­¢ / åˆ é™¤ / é‡å¯ï¼š <code>start/stop/rm/restart</code></p>\n<p>æ£€è§† / æ—¥å¿—ï¼š <code>logs</code> / <code>ps</code></p>\n<p>çœ‹ä¸¤ä¸ªä¸ªå¤æ‚çš„åº”ç”¨ï¼š</p>\n<p>æ­å»ºæœ¬åœ° mongo + mongo-express æœåŠ¡</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.1'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">mongo</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mongo</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">MONGO_INITDB_ROOT_USERNAME</span><span class=\"token punctuation\">:</span> root</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token key atrule\">MONGO_INITDB_ROOT_PASSWORD</span><span class=\"token punctuation\">:</span> <span class=\"token number\">123456</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">mongo-express</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mongo<span class=\"token punctuation\">-</span>express</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">-</span> 8081<span class=\"token punctuation\">:</span><span class=\"token number\">8081</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token key atrule\">ME_CONFIG_MONGODB_ADMINUSERNAME</span><span class=\"token punctuation\">:</span> root</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token key atrule\">ME_CONFIG_MONGODB_ADMINPASSWORD</span><span class=\"token punctuation\">:</span> <span class=\"token number\">123456</span></pre></td></tr></table></figure><p>ç»™å…¬å¸æ­å»ºä¸€ä¸ª git æœåŠ¡å™¨å§ï¼Ÿï¼</p>\n<p>é¡¹ç›®åœ°å€: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NhbWVlcnNibi9kb2NrZXItZ2l0bGFi\">https://github.com/sameersbn/docker-gitlab</span></p>\n<p>æ¨èæœåŠ¡å™¨é…ç½®ï¼šé€‚ç”¨äº 10 äººçš„å°å›¢é˜Ÿï½ï½ï½ï½</p>\n<p>2core</p>\n<p>2GB+2GB(swap)</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'2'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">redis</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> sameersbn/redis<span class=\"token punctuation\">:</span>4.0.9<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>loglevel warning</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> /srv/docker/gitlab/redis<span class=\"token punctuation\">:</span>/var/lib/redis<span class=\"token punctuation\">:</span>Z</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">postgresql</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> sameersbn/postgresql<span class=\"token punctuation\">:</span><span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">-</span> /srv/docker/gitlab/postgresql<span class=\"token punctuation\">:</span>/var/lib/postgresql<span class=\"token punctuation\">:</span>Z</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_USER=gitlab</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_PASS=password</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_NAME=gitlabhq_production</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_EXTENSION=pg_trgm</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token key atrule\">gitlab</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> sameersbn/gitlab<span class=\"token punctuation\">:</span>11.11.0</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">-</span> redis</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">-</span> postgresql</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"10080:80\"</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"10022:22\"</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">-</span> /srv/docker/gitlab/gitlab<span class=\"token punctuation\">:</span>/home/git/data<span class=\"token punctuation\">:</span>Z</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">-</span> DEBUG=false</pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_ADAPTER=postgresql</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_HOST=postgresql</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_PORT=5432</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_USER=gitlab</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_PASS=password</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">-</span> DB_NAME=gitlabhq_production</pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">-</span> REDIS_HOST=redis</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">-</span> REDIS_PORT=6379</pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">-</span> TZ=Asia/Kolkata</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_TIMEZONE=Kolkata</pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_HTTPS=false</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">-</span> SSL_SELF_SIGNED=false</pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_HOST=localhost</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_PORT=10080</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_SSH_PORT=10022</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_RELATIVE_URL_ROOT=</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_SECRETS_DB_KEY_BASE=long<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>random<span class=\"token punctuation\">-</span>alphanumeric<span class=\"token punctuation\">-</span>string</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_SECRETS_SECRET_KEY_BASE=long<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>random<span class=\"token punctuation\">-</span>alphanumeric<span class=\"token punctuation\">-</span>string</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_SECRETS_OTP_KEY_BASE=long<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>random<span class=\"token punctuation\">-</span>alphanumeric<span class=\"token punctuation\">-</span>string</pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_ROOT_PASSWORD=123456</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token punctuation\">-</span> GITLAB_ROOT_EMAIL=itheima@itcast.cn</pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token punctuation\">...</span></pre></td></tr></table></figure><p>docker-compose åœ¨å‰ç«¯é‡Œé¢çš„ä½¿ç”¨ï¼š</p>\n<p>Nodejs + mongodb + koa + vue çš„åº”ç”¨ç»„åˆï¼š</p>\n<p>ç‰¹åˆ«æ³¨æ„ï¼š</p>\n<p>è§†é¢‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ vue æ˜¯åœ¨å±€éƒ¨å®‰è£…çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ npx å‘½ä»¤åœ¨è¿›è¡Œåˆ›å»ºã€‚</p>\n<p>vue å®˜ç½‘æ¨èå¤§å®¶è¿›è¡Œå…¨å±€å®‰è£…:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> i <span class=\"token parameter variable\">-g</span> @vue/cli</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç„¶åä½¿ç”¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>vue create myproject</pre></td></tr></table></figure><p>docker-compose.yml</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> web<span class=\"token punctuation\">:</span><span class=\"token number\">1.0</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"8080:80\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> server<span class=\"token punctuation\">:</span><span class=\"token number\">1.0</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3000:3000\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">-</span> mongodb</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">links</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">-</span> mongodb<span class=\"token punctuation\">:</span>db</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token key atrule\">mongodb</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mongo</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token key atrule\">MONGO_INITDB_ROOT_USERNAME</span><span class=\"token punctuation\">:</span> root</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token key atrule\">MONGO_INITDB_ROOT_PASSWORD</span><span class=\"token punctuation\">:</span> <span class=\"token number\">123456</span></pre></td></tr></table></figure><p><code>depends_on</code>  å†³å®šäº†å®¹å™¨åŠ è½½çš„å…ˆåé¡ºåºï¼Œè¿™é‡Œ <code>mongdb</code> ã€ <code>web</code>  å…ˆåŠ è½½ï¼Œ <code>mongdb</code>  åˆ›å»ºå®Œæˆä¹‹åï¼Œå†æ¥åˆ›å»º <code>server</code> ã€‚</p>\n<h3 id=\"è‡ªå­¦è¡¥å……çŸ¥è¯†\"><a class=\"anchor\" href=\"#è‡ªå­¦è¡¥å……çŸ¥è¯†\">#</a> è‡ªå­¦è¡¥å……çŸ¥è¯†</h3>\n<ol>\n<li>ä»€ä¹ˆæ˜¯ Kubernetes?</li>\n</ol>\n<p>Kubernetes, ä¸­æ–‡æ„æ€æ˜¯èˆµæ‰‹æˆ–å¯¼èˆªå‘˜ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œä¸»è¦èŒè´£æ˜¯å®¹å™¨ç¼–æ’ï¼ˆContainer Orchestrationï¼‰â€”â€” å¯åŠ¨å®¹å™¨ï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åº”ç”¨ï¼Œè¿˜æœ‰å›æ”¶å®¹å™¨ã€‚</p>\n<p>æ–‡æ¡£: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLw==\">https://kubernetes.io/zh/</span></p>\n<p>é›†ç¾¤ç›¸å…³ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL21lc29zLmFwYWNoZS5vcmcv\">Mesos</span>ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9zd2FybQ==\">Docker Swarm</span></p>\n<ol start=\"2\">\n<li>ç®€å•çš„ DevOps æµç¨‹ä»‹ç»ï¼š</li>\n</ol>\n<p><img data-src=\"./assets/devOps-8692746.jpeg\" alt=\"devOps\" /></p>\n<p>å‚è€ƒé“¾æ¥ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xMDcwNDY1\">ä»ä¸€å¼ å›¾çœ‹ Devops å…¨æµç¨‹</span></p>\n<ol start=\"3\">\n<li>Docker ä¸­çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ·±å…¥ç†è§£åŸç†ï¼š</li>\n</ol>\n<p><img data-src=\"./assets/%E4%B8%80%E5%9B%BE%E7%9C%8B%E5%B0%BDDocker%E5%AE%B9%E5%99%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.png\" alt=\"ä¸€å›¾çœ‹å°½Dockerå®¹å™¨æ–‡ä»¶ç³»ç»Ÿ\" /></p>\n<ol start=\"4\">\n<li>\n<p>Docker çš„ä¸€èˆ¬å¼€å‘æµç¨‹ä»‹ç»ï¼š</p>\n<ul>\n<li>å¯»æ‰¾åŸºç¡€é•œåƒ</li>\n<li>åŸºäºåŸºç¡€é•œåƒç¼–å†™ Dockerfile è„šæœ¬</li>\n<li>æ ¹æ® Dockerfile è„šæœ¬åˆ›å»ºé¡¹ç›®é•œåƒ</li>\n<li>å°†åˆ›å»ºçš„é•œåƒæ¨é€åˆ° docker ä»“åº“ (æ ¹æ®è‡ªèº«éœ€è¦ï¼Œå¯åšå¯ä¸åš)</li>\n<li>åŸºäºé¡¹ç›®é•œåƒåˆ›å»ºå¹¶è¿è¡Œ docker å®¹å™¨ (å®ç°æœ€ç»ˆéƒ¨ç½²)</li>\n</ul>\n<p>è¿™é‡Œé¢å¦‚æœä¸€æ‰©å±•ï¼Œå°±å˜æˆäº†è‡ªåŠ¨åŒ–å¼€å‘æµç¨‹ï¼Œæ¯”å¦‚ï¼šåŠ å…¥ç‰ˆæœ¬æ§åˆ¶ git -&gt; ä½¿ç”¨ webhook -&gt; jenkins è‡ªåŠ¨æ‰“åŒ…  -&gt; docker è‡ªåŠ¨æ„å»º -&gt; æ¨é€é•œåƒ -&gt; ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</p>\n</li>\n</ol>\n<h2 id=\"è¯¾ç¨‹èµ„æº\"><a class=\"anchor\" href=\"#è¯¾ç¨‹èµ„æº\">#</a> è¯¾ç¨‹èµ„æº</h2>\n<p>Docker for Macã€ç³»ç»Ÿï¼š10.12 ä»¥ä¸Šã€‘: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL21hYy9zdGFibGUvRG9ja2VyLmRtZw==\">https://download.docker.com/mac/stable/Docker.dmg</span></p>\n<p>Docker for Windowsã€ç³»ç»Ÿï¼šä¸“ä¸šç‰ˆåŠä¼ä¸šç‰ˆã€‘: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL3dpbi9zdGFibGUvRG9ja2VyJTIwZm9yJTIwV2luZG93cyUyMEluc3RhbGxlci5leGU=\">https://download.docker.com/win/stable/Docker for Windows Installer.exe</span></p>\n<p>Docker ToolBox for Macã€ç³»ç»Ÿï¼š10.10.3 ä»¥ä¸Šã€‘: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL21hYy9zdGFibGUvRG9ja2VyVG9vbGJveC5wa2c=\">https://download.docker.com/mac/stable/DockerToolbox.pkg</span></p>\n<p>Docker ToolBox for Windowsã€ç³»ç»Ÿï¼šwindows7 ä»¥ä¸Šã€‘ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL3dpbi9zdGFibGUvRG9ja2VyVG9vbGJveC5leGU=\">https://download.docker.com/win/stable/DockerToolbox.exe</span></p>\n",
            "tags": [
                "å®¹å™¨åŒ–è¿ç»´æ“ä½œ",
                "å®¹å™¨åŒ–è¿ç»´æ“ä½œ"
            ]
        },
        {
            "id": "https://dmqweb.cn/2024/02/02/%E4%BD%BF%E7%94%A8Jenkins%E9%85%8D%E5%90%88github%20hook%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/",
            "url": "https://dmqweb.cn/2024/02/02/%E4%BD%BF%E7%94%A8Jenkins%E9%85%8D%E5%90%88github%20hook%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/",
            "title": "jenkinsé…åˆgit hookæŒç»­é›†æˆ",
            "date_published": "2024-02-02T06:04:04.000Z",
            "content_html": "<h2 id=\"ç¯å¢ƒ\"><a class=\"anchor\" href=\"#ç¯å¢ƒ\">#</a> ç¯å¢ƒ</h2>\n<ul>\n<li>Centos 7.4</li>\n<li>JDK 1.8</li>\n</ul>\n<h2 id=\"ä¸»è¦æ­¥éª¤\"><a class=\"anchor\" href=\"#ä¸»è¦æ­¥éª¤\">#</a> ä¸»è¦æ­¥éª¤</h2>\n<p>ä»¥ä¸‹åŒ…å«ç›¸å…³æ‰€æœ‰çš„æ­¥éª¤ï¼Œå¯æ ¹æ®ç°æœ‰ç¯å¢ƒè¿›è¡Œè·³è¿‡</p>\n<ol>\n<li>å®‰è£… JDK</li>\n<li>å®‰è£… Centos</li>\n<li>Jenkins å’Œ Github é…ç½®</li>\n<li>é…ç½®ä»»åŠ¡</li>\n</ol>\n<h3 id=\"å®‰è£…jdk\"><a class=\"anchor\" href=\"#å®‰è£…jdk\">#</a> å®‰è£… JDK</h3>\n<p>Jenkins éœ€è¦ JDK æ‰å¯ä»¥è¿è¡Œï¼Œæˆ‘ä»¬é¦–å…ˆå®‰è£… JDK</p>\n<h4 id=\"ä¸‹è½½\"><a class=\"anchor\" href=\"#ä¸‹è½½\">#</a> ä¸‹è½½</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5vcmFjbGUuY29tL3RlY2huZXR3b3JrL2phdmEvamF2YXNlL2Rvd25sb2Fkcy9qZGs4LWRvd25sb2Fkcy0yMTMzMTUxLmh0bWw=\">ä¸‹è½½é“¾æ¥æŸ¥çœ‹åœ°å€</span></p>\n<p>é¦–å…ˆç‚¹å‡» Accept License Agreementï¼Œé€‰æ‹© Linux å¯¹åº”ç‰ˆæœ¬</p>\n<p><strong>æ³¨</strong>è‹¥æƒ³è¦ç›´æ¥è·å–ä¸‹è½½é“¾æ¥ï¼Œä½¿ç”¨ wget è¿›è¡Œä¸‹è½½æ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç‚¹å‡»é“¾æ¥è¿›è¡Œä¸‹è½½ï¼Œç„¶ååœ¨ chrome ä¸­çš„ä¸‹è½½ä»»åŠ¡ä¸­æŸ¥çœ‹ä¸‹è½½é“¾æ¥è¿›è¡Œå¤åˆ¶ã€‚</p>\n<pre><code>cd /usr/local/src\nwget `your download url`\n</code></pre>\n<h4 id=\"è§£å‹\"><a class=\"anchor\" href=\"#è§£å‹\">#</a> è§£å‹</h4>\n<pre><code>tar -zxvf jdk-8u91-linux-x64.tar.gz\n</code></pre>\n<h4 id=\"ç¯å¢ƒå˜é‡\"><a class=\"anchor\" href=\"#ç¯å¢ƒå˜é‡\">#</a> ç¯å¢ƒå˜é‡</h4>\n<p>å°†ä»¥ä¸‹å†…å®¹è¿½åŠ åˆ° /etc/profile æœ«å°¾ï¼Œæ›¿æ¢ä½ å¯¹åº”çš„è§£å‹è·¯å¾„</p>\n<pre><code>JAVA_HOME=/usr/local/tools/jdk1.8.0_144\n\nJRE_HOME=$JAVA_HOME/jre\n\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\n\nCLASSPATH=:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib/dt.jar\n\nexport JAVA_HOME JRE_HOME PATH CLASSPATH\n</code></pre>\n<h4 id=\"å¯ç”¨é…ç½®\"><a class=\"anchor\" href=\"#å¯ç”¨é…ç½®\">#</a> å¯ç”¨é…ç½®</h4>\n<pre><code>source /etc/profile\n</code></pre>\n<h4 id=\"æŸ¥çœ‹ç‰ˆæœ¬\"><a class=\"anchor\" href=\"#æŸ¥çœ‹ç‰ˆæœ¬\">#</a> æŸ¥çœ‹ç‰ˆæœ¬</h4>\n<pre><code>java -version\n</code></pre>\n<h3 id=\"å®‰è£…centos\"><a class=\"anchor\" href=\"#å®‰è£…centos\">#</a> å®‰è£… Centos</h3>\n<p>ä½¿ç”¨ yum è¿›è¡Œå®‰è£…</p>\n<pre><code>#å®‰è£…è‡ªåŠ¨é€‰æ‹©æœ€å¿«æºçš„æ’ä»¶\n$ yum install yum-fastestmirror -y\n#æ·»åŠ Jenkinsæº:\n$ sudo wget -O /etc/yum.repos.d/jenkins.repo http://jenkins-ci.org/redhat/jenkins.repo\n$ sudo rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\n #å®‰è£…jenkins\n$ yum install jenkins\n</code></pre>\n<h4 id=\"å¯åŠ¨\"><a class=\"anchor\" href=\"#å¯åŠ¨\">#</a> å¯åŠ¨</h4>\n<pre><code>service jenkins start\n</code></pre>\n<h4 id=\"æ›´æ”¹ç«¯å£\"><a class=\"anchor\" href=\"#æ›´æ”¹ç«¯å£\">#</a> æ›´æ”¹ç«¯å£</h4>\n<pre><code>vim /etc/sysconfig/jenkins\nservice jenkins restart\n</code></pre>\n<h3 id=\"jenkinså’Œgithubé…ç½®\"><a class=\"anchor\" href=\"#jenkinså’Œgithubé…ç½®\">#</a> Jenkins å’Œ Github é…ç½®</h3>\n<p>è¿™é‡Œçš„é…ç½®å°±æ¯”è¾ƒå¤šäº†ï¼Œä¸»è¦æ˜¯åœ¨ github ä¸Šç”Ÿæˆ key, ç„¶ååœ¨ Jenkins ä¸é¡¹ç›®è¿›è¡Œç»‘å®šå³å¯</p>\n<h4 id=\"åˆå§‹åŒ–jenkins\"><a class=\"anchor\" href=\"#åˆå§‹åŒ–jenkins\">#</a> åˆå§‹åŒ– Jenkins</h4>\n<p>è¿™å‡ æ­¥éå¸¸ç®€å•ï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œå³å¯</p>\n<ol>\n<li>è®¿é—®ä½ çš„ IP:8080</li>\n<li>cat /var/lib/jenkins/secrets/initialAdminPassword æŠŠå¯†ç è¾“å…¥è¿›å»</li>\n<li>Install suggested plugins è¿›è¡Œå®‰è£…</li>\n<li>è®¾ç½®è´¦æˆ·å¯†ç </li>\n</ol>\n<h3 id=\"é…ç½®github-webhooks\"><a class=\"anchor\" href=\"#é…ç½®github-webhooks\">#</a> é…ç½® Github webhooks</h3>\n<h4 id=\"åœ¨å¯¹é¡¹ç›®æœ‰å†™æƒé™çš„ç”¨æˆ·ä¸Šè·å–token\"><a class=\"anchor\" href=\"#åœ¨å¯¹é¡¹ç›®æœ‰å†™æƒé™çš„ç”¨æˆ·ä¸Šè·å–token\">#</a> åœ¨å¯¹é¡¹ç›®æœ‰å†™æƒé™çš„ç”¨æˆ·ä¸Šè·å– token</h4>\n<p>è¿›å…¥ github â€“&gt; setting â€“&gt; Personal Access Token â€“&gt; Generate new token</p>\n<p><a href=\"http://callmedadaxin.github.io/images/jenkins-1.png\"><img data-src=\"http://callmedadaxin.github.io/images/jenkins-1.png\" alt=\"img\" /></a></p>\n<p>ç‚¹å‡»ä¿å­˜ï¼Œè·å– token, å¹¶<strong>ä¿å­˜å¥½ä½ çš„ token</strong></p>\n<h4 id=\"è®¾ç½®webhooks\"><a class=\"anchor\" href=\"#è®¾ç½®webhooks\">#</a> è®¾ç½® webhooks</h4>\n<p>è¿›å…¥ GitHub ä¸ŠæŒ‡å®šçš„é¡¹ç›® â€“&gt; setting â€“&gt; WebHooks&amp;Services â€“&gt; add webhook â€“&gt; è¾“å…¥åˆšåˆšéƒ¨ç½² jenkins çš„æœåŠ¡å™¨çš„ IP</p>\n<p><a href=\"http://callmedadaxin.github.io/images/jenkins-2.png\"><img data-src=\"http://callmedadaxin.github.io/images/jenkins-2.png\" alt=\"img\" /></a></p>\n<h3 id=\"é…ç½®jenkinsçš„git-plugin\"><a class=\"anchor\" href=\"#é…ç½®jenkinsçš„git-plugin\">#</a> é…ç½® Jenkins çš„ Git Plugin</h3>\n<p>æ–°ç‰ˆ Jenkins åœ¨åˆå§‹çš„æ—¶å€™å·²ç»é»˜è®¤å®‰è£…äº† Git Plugin å’Œç›¸å…³ä¾èµ–çš„ Pluginï¼Œæˆ‘ä»¬ä¸ç”¨åœ¨é‡å¤è¿›è¡Œå®‰è£…ï¼Œç›´æ¥é…ç½®å³å¯</p>\n<p>ç³»ç»Ÿç®¡ç† â€“&gt; ç³»ç»Ÿè®¾ç½® â€“&gt; GitHub â€“&gt; Add GitHub Sever</p>\n<p>å¡«å†™ API URL ä¸º<span class=\"exturl\" data-url=\"aHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS8=\"> https://api.github.com</span></p>\n<p><a href=\"http://callmedadaxin.github.io/images/jenkins-3.png\"><img data-src=\"http://callmedadaxin.github.io/images/jenkins-3.png\" alt=\"img\" /></a></p>\n<p>ç‚¹å‡»æ—è¾¹çš„ Add æŒ‰é’®ï¼Œæ·»åŠ  Secret Text<br />\n<a href=\"http://callmedadaxin.github.io/images/jenkins-4.png\"><img data-src=\"http://callmedadaxin.github.io/images/jenkins-4.png\" alt=\"img\" /></a></p>\n<h3 id=\"é…ç½®ä»»åŠ¡\"><a class=\"anchor\" href=\"#é…ç½®ä»»åŠ¡\">#</a> é…ç½®ä»»åŠ¡</h3>\n<h3 id=\"1æ–°å»º\"><a class=\"anchor\" href=\"#1æ–°å»º\">#</a> 1. æ–°å»º</h3>\n<p>å›åˆ°ä¸»é¡µ â€“&gt; æ–°å»ºä»»åŠ¡ â€“&gt; æ–°å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®</p>\n<p><a href=\"http://callmedadaxin.github.io/images/jenkins-5.png\"><img data-src=\"http://callmedadaxin.github.io/images/jenkins-5.png\" alt=\"img\" /></a></p>\n<h3 id=\"2é…ç½®æºç ç®¡ç†\"><a class=\"anchor\" href=\"#2é…ç½®æºç ç®¡ç†\">#</a> 2. é…ç½®æºç ç®¡ç†</h3>\n<p><a href=\"http://callmedadaxin.github.io/images/jenkins-6.png\"><img data-src=\"http://callmedadaxin.github.io/images/jenkins-6.png\" alt=\"img\" /></a></p>\n<h3 id=\"3æ„å»ºè§¦å‘å™¨æ„å»ºç¯å¢ƒ\"><a class=\"anchor\" href=\"#3æ„å»ºè§¦å‘å™¨æ„å»ºç¯å¢ƒ\">#</a> 3. æ„å»ºè§¦å‘å™¨ï¼Œæ„å»ºç¯å¢ƒ</h3>\n<p><a href=\"http://callmedadaxin.github.io/images/jenkins-7.png\"><img data-src=\"http://callmedadaxin.github.io/images/jenkins-7.png\" alt=\"img\" /></a></p>\n<h3 id=\"4ç¼–å†™ä½ çš„æ„å»ºè„šæœ¬\"><a class=\"anchor\" href=\"#4ç¼–å†™ä½ çš„æ„å»ºè„šæœ¬\">#</a> 4. ç¼–å†™ä½ çš„æ„å»ºè„šæœ¬</h3>\n<p><a href=\"http://callmedadaxin.github.io/images/jenkins-8.png\"><img data-src=\"http://callmedadaxin.github.io/images/jenkins-8.png\" alt=\"img\" /></a></p>\n<p>ä¿å­˜ï¼Œåº”ç”¨</p>\n<h2 id=\"é—®é¢˜è®°å½•\"><a class=\"anchor\" href=\"#é—®é¢˜è®°å½•\">#</a> é—®é¢˜è®°å½•</h2>\n<ul>\n<li>é¡¹ç›®ä¼šè‡ªåŠ¨ clone åœ¨ /var/lib/jenkins/workspace/</li>\n<li>æ‰§è¡Œçš„å…¨å±€è„šæœ¬ç¡®å®šå·²ç»è½¯é“¾åˆ° /usr/bin, å¦åˆ™è®¿é—®ä¸åˆ°</li>\n</ul>\n",
            "tags": [
                "jenkinsé…åˆgit hookæŒç»­é›†æˆ",
                "jenkins",
                "github hook"
            ]
        }
    ]
}